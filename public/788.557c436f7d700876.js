"use strict";(self.webpackChunkcasaempeno=self.webpackChunkcasaempeno||[]).push([[788],{4788:(S,f,d)=>{d.r(f),d.d(f,{AdminModule:()=>N});var c=d(6814),u=d(4408),p=d(4575),e=d(5879),Z=d(6514);function C(r,h){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"a",16),e._uU(2),e.qZA(),e.TgZ(3,"ul",17)(4,"li")(5,"a",18),e._uU(6,"Mi perfil"),e.qZA()(),e.TgZ(7,"li"),e._UZ(8,"hr",19),e.qZA(),e.TgZ(9,"li")(10,"a",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cerrar())}),e._uU(11,"Cerrar Sesion"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(2),e.hij(" ",t.nombre," ")}}function T(r,h){1&r&&(e.TgZ(0,"div")(1,"a",16),e._uU(2," Usuario "),e.qZA(),e.TgZ(3,"ul",21)(4,"li")(5,"a",22),e._uU(6,"Iniciar Sesion"),e.qZA()(),e.TgZ(7,"li")(8,"a",23),e._uU(9,"Registro"),e.qZA()()()())}let m=(()=>{class r{constructor(t,o){this.auth=t,this.router=o}ngOnInit(){this.nombre=this.auth.currentUserValue.nombre,this.usuario=this.auth.currentUserValue.tipo}cerrar(){this.auth.logout(),this.router.navigate(["/inicio"]),window.location.reload(),localStorage.removeItem("swalShown")}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(Z.$),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-menu"]],decls:23,vars:2,consts:[["id","headerNav",1,"navbar","navbar-expand-lg","navbar-dark","p-3","bg"],[1,"container-fluid"],["href","#",1,"navbar-brand","d-block","d-lg-none"],["src","../../../assets/casadeldinero.png","height","80"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav","mx-auto"],[1,"nav-item"],["aria-current","page","href","dashboard/inicio","routerLinkActive","active",1,"nav-link","mx-2"],["href","/dashboard/productos","routerLinkActive","active",1,"nav-link","mx-2"],["routerLink","/tienda","routerLinkActive","active",1,"nav-link","mx-2"],[1,"nav-item","d-none","d-lg-block"],["href","/inicio",1,"nav-link","mx-2"],[1,"nav-item","dropdown"],[4,"ngIf"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","mx-2","dropdown-toggle"],[1,"dropdown-menu","text-small"],["routerLink","/miperfil",1,"dropdown-item"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","bgnav"],["routerLink","/iniciosesion",1,"dropdown-item"],["routerLink","/registro",1,"dropdown-item"]],template:function(o,n){1&o&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"button",4),e._UZ(5,"span",5),e.qZA(),e.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),e._uU(10,"Inicio"),e.qZA()(),e.TgZ(11,"li",8)(12,"a",10),e._uU(13,"Productos"),e.qZA()(),e.TgZ(14,"li",8)(15,"a",11),e._uU(16,"Tienda"),e.qZA()(),e.TgZ(17,"li",12)(18,"a",13),e._UZ(19,"img",3),e.qZA()(),e.TgZ(20,"li",14),e.YNc(21,C,12,1,"div",15),e.YNc(22,T,10,0,"div",15),e.qZA()()()()()),2&o&&(e.xp6(21),e.Q6J("ngIf",n.nombre),e.xp6(1),e.Q6J("ngIf",!n.nombre))},dependencies:[c.O5],styles:["*[_ngcontent-%COMP%]{font-size:14pt}@media screen and (min-width:992px){.nav-item[_ngcontent-%COMP%]{line-height:80px}}.nav-link[_ngcontent-%COMP%]:hover{color:#000}.nav-link[_ngcontent-%COMP%]:hover{color:#f2fdf0}"]})}return r})(),M=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-inicio"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"app-menu")},dependencies:[m]})}return r})();var q=d(3519),l=d.n(q),b=d(108),s=d(6223);function A(r,h){if(1&r){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28),e._UZ(2,"br")(3,"img",29),e.TgZ(4,"div",30)(5,"h4",31),e._uU(6),e.ALo(7,"titlecase"),e.qZA(),e.TgZ(8,"p",32),e._uU(9),e.qZA(),e.TgZ(10,"p",32),e._uU(11),e.qZA(),e.TgZ(12,"button",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.abrirModalEditar(a))}),e._uU(13,"Editar"),e.qZA(),e.TgZ(14,"button",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.prosBorrar(a))}),e._uU(15,"Eliminar"),e.qZA()()()()}if(2&r){const t=h.$implicit;e.xp6(3),e.s9C("src",t.foto1,e.LSH),e.xp6(3),e.Oqu(e.lcZ(7,4,t.Nombre)),e.xp6(3),e.Oqu(t.descripcion),e.xp6(2),e.hij("$",t.precio,"")}}let F=(()=>{class r{constructor(t,o){this.tiendaService=t,this.router=o,this.prodTienda=[],this.modalData={Id:"",Nombre:"",Descripcion:"",Precio:"",Stock:""},this.request={Id:""}}ngOnInit(){this.getProd()}getProd(){this.tiendaService.getProd().subscribe(t=>{this.prodTienda=t})}abrirModalEditar(t){this.modalData={Id:t.id,Nombre:t.Nombre,Descripcion:t.descripcion,Precio:t.precio,Stock:t.stock}}guardarCambios(){this.tiendaService.editarProd(this.modalData).subscribe({next:t=>{t.result?l().fire({position:"top-end",title:t.message,icon:"success",confirmButtonText:"Ok"}).then(o=>{o.isConfirmed&&window.location.reload()}):l().fire({position:"top-end",icon:"error",title:t.message,showConfirmButton:!1,timer:1500})}})}prosBorrar(t){l().fire({position:"top-end",title:"Estas seguro que quieres borrar "+t.id+"?",showCancelButton:!0,confirmButtonText:"Borrar"}).then(o=>{o.isConfirmed&&(this.request.Id=t.id,this.tiendaService.borrarProd(this.request).subscribe({next:n=>{n.result||l().fire(n.message,"","warning"),l().fire({position:"top-end",title:n.message,icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&window.location.reload()})}}))})}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(b.D),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-productos"]],decls:44,vars:6,consts:[[1,"container"],[1,"btnregis"],[1,"btn","btn-success","mx-2"],["href","/dashboard/registro",2,"text-decoration","none","color","white"],[1,"grid"],["class","card-deck mt-3",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["editarForm","ngForm"],[1,"form-group"],["for","Nombre"],["type","text","id","Nombre","name","Nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Descripcion"],["id","Descripcion","name","Descripcion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Precio"],["type","number","id","Precio","name","Precio","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","Stock"],["type","number","id","stock","name","stock","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],[1,"card-deck","mt-3"],[1,"card","text-center","cartalig"],[1,"logo",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-danger","mx-2",3,"click"]],template:function(o,n){1&o&&(e._UZ(0,"app-menu")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"button",2)(6,"a",3),e._uU(7,"Registrar"),e.qZA()()()(),e.TgZ(8,"div",0)(9,"div",4),e.YNc(10,A,16,6,"div",5),e.qZA()(),e.TgZ(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"h1",10),e._uU(16,"Editar Producto"),e.qZA(),e._UZ(17,"button",11),e.qZA(),e.TgZ(18,"div",12)(19,"form",13,14),e.NdJ("ngSubmit",function(){return n.guardarCambios()}),e.TgZ(21,"h3"),e._uU(22),e.qZA(),e.TgZ(23,"div",15)(24,"label",16),e._uU(25,"Nombre:"),e.qZA(),e.TgZ(26,"input",17),e.NdJ("ngModelChange",function(i){return n.modalData.Nombre=i}),e.qZA()(),e.TgZ(27,"div",15)(28,"label",18),e._uU(29,"Descripci\xf3n:"),e.qZA(),e.TgZ(30,"textarea",19),e.NdJ("ngModelChange",function(i){return n.modalData.Descripcion=i}),e.qZA()(),e.TgZ(31,"div",15)(32,"label",20),e._uU(33,"Precio:"),e.qZA(),e.TgZ(34,"input",21),e.NdJ("ngModelChange",function(i){return n.modalData.Precio=i}),e.qZA()(),e.TgZ(35,"div",15)(36,"label",22),e._uU(37,"Stock:"),e.qZA(),e.TgZ(38,"input",23),e.NdJ("ngModelChange",function(i){return n.modalData.Stock=i}),e.qZA()(),e.TgZ(39,"div",24)(40,"button",25),e._uU(41,"Cerrar"),e.qZA(),e.TgZ(42,"button",26),e._uU(43,"Guardar cambios"),e.qZA()()()()()()()),2&o&&(e.xp6(10),e.Q6J("ngForOf",n.prodTienda),e.xp6(12),e.hij("Id: ",n.modalData.Id,""),e.xp6(4),e.Q6J("ngModel",n.modalData.Nombre),e.xp6(4),e.Q6J("ngModel",n.modalData.Descripcion),e.xp6(4),e.Q6J("ngModel",n.modalData.Precio),e.xp6(4),e.Q6J("ngModel",n.modalData.Stock))},dependencies:[c.sg,m,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.On,s.F,c.rS],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1rem}.btnregis[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.logo[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:150px}"]})}return r})();var P=d(2931),g=d(5861);const U=["filepicker"],y=[{path:"",canActivate:[p.a],canLoad:[p.a],children:[{path:"inicio",component:M},{path:"productos",canActivate:[p.a],component:F},{path:"registro_producto",canActivate:[p.a],component:P.g},{path:"registro",canActivate:[p.a],component:(()=>{class r{constructor(t,o){this.tiendaService=t,this.router=o,this.request={Nombre:"",Descripcion:"",Precio:"",Stock:"",Foto1:"",Foto2:"",Foto3:""},this.base="",this.base2="",this.base3=""}addFile(){this.uploader.nativeElement.click()}onFileSelected(t){var o=this;return(0,g.Z)(function*(){const n=t.target.files[0];var a=new FileReader;if(n.size<2e6){var i=n.type.split("/").pop();"jpg"==i||"jpeg"==i||"png"==i?(a.readAsDataURL(n),a.onload=_=>{a.result?o.base=a.result.toString():o.mostrarMensajeError("Esta vac\xedo")}):o.mostrarMensajeError("Formato de imagen incorrecto")}else o.mostrarMensajeError("Pesa mucho")})()}onFileSelected2(t){var o=this;return(0,g.Z)(function*(){const n=t.target.files[0];var a=new FileReader;if(n.size<2e6){var i=n.type.split("/").pop();"jpg"==i||"jpeg"==i||"png"==i?(a.readAsDataURL(n),a.onload=_=>{a.result?o.base2=a.result.toString():o.mostrarMensajeError("Esta vac\xedo")}):o.mostrarMensajeError("Formato de imagen incorrecto")}else o.mostrarMensajeError("Pesa mucho")})()}onFileSelected3(t){var o=this;return(0,g.Z)(function*(){const n=t.target.files[0];var a=new FileReader;if(n.size<2e6){var i=n.type.split("/").pop();"jpg"==i||"jpeg"==i||"png"==i?(a.readAsDataURL(n),a.onload=_=>{a.result?o.base3=a.result.toString():o.mostrarMensajeError("Esta vac\xedo")}):o.mostrarMensajeError("Formato de imagen incorrecto")}else o.mostrarMensajeError("Pesa mucho")})()}guardar(){this.request.Foto1=this.base,this.request.Foto2=this.base2,this.request.Foto3=this.base3,""!=this.request.Nombre?""!=this.request.Descripcion?""!=this.request.Precio?""!=this.request.Stock?this.tiendaService.regiProd(this.request).subscribe({next:t=>{t.result?(l().fire({position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:1500}),this.router.navigate(["/dashboard/productos"])):l().fire({position:"top-end",icon:"error",title:t.message,showConfirmButton:!1,timer:1500})}}):this.mostrarMensajeError("Falta El Stock"):this.mostrarMensajeError("Falta El Precio"):this.mostrarMensajeError("Falta La Descripcion"):this.mostrarMensajeError("Falta El Nombre")}mostrarMensajeError(t){l().fire({position:"top-end",icon:"error",title:t,showConfirmButton:!1,timer:1500})}mostrarMensajeVal(t){l().fire({position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:1500})}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(b.D),e.Y36(u.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-registro-p"]],viewQuery:function(o,n){if(1&o&&e.Gf(U,5),2&o){let a;e.iGM(a=e.CRH())&&(n.uploader=a.first)}},decls:42,vars:4,consts:[[1,"container","mt-5"],[1,"col-md-8"],[1,"mb-4"],[1,"card"],["action","procesar_registro.php","method","POST","enctype","multipart/form-data"],[1,"form-group"],["for","Nombre"],["type","text","name","Nombre","placeholder","Ingrese el nombre del producto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","descripcion"],["name","Descripcion","rows","3","placeholder","Ingrese una descripci\xf3n del producto","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","precio"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number","name","Precio","placeholder","Ingrese el precio","step","0.01","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","stock"],["type","number","name","Stock","placeholder","Ingrese la cantidad en stock","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","id","formFile","accept","image/*","required","",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(o,n){1&o&&(e._UZ(0,"app-menu")(1,"br"),e.TgZ(2,"div",0)(3,"div",1)(4,"h2",2),e._uU(5,"Registro de Producto"),e.qZA(),e.TgZ(6,"div",3)(7,"form",4)(8,"div",5)(9,"label",6),e._uU(10,"Nombre del Producto:"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(i){return n.request.Nombre=i}),e.qZA()(),e.TgZ(12,"div",5)(13,"label",8),e._uU(14,"Descripci\xf3n:"),e.qZA(),e.TgZ(15,"textarea",9),e.NdJ("ngModelChange",function(i){return n.request.Descripcion=i}),e.qZA()(),e.TgZ(16,"div",5)(17,"label",10),e._uU(18,"Precio:"),e.qZA(),e.TgZ(19,"div",11)(20,"div",12)(21,"span",13),e._uU(22,"$"),e.qZA()(),e.TgZ(23,"input",14),e.NdJ("ngModelChange",function(i){return n.request.Precio=i}),e.qZA()()(),e.TgZ(24,"div",5)(25,"label",15),e._uU(26,"Stock:"),e.qZA(),e.TgZ(27,"input",16),e.NdJ("ngModelChange",function(i){return n.request.Stock=i}),e.qZA()(),e.TgZ(28,"div",17)(29,"label",18),e._uU(30,"Foto"),e.qZA(),e.TgZ(31,"input",19),e.NdJ("change",function(i){return n.onFileSelected(i)}),e.qZA()(),e.TgZ(32,"div",17)(33,"label",18),e._uU(34,"Foto"),e.qZA(),e.TgZ(35,"input",19),e.NdJ("change",function(i){return n.onFileSelected2(i)}),e.qZA()(),e.TgZ(36,"div",17)(37,"label",18),e._uU(38,"Foto"),e.qZA(),e.TgZ(39,"input",19),e.NdJ("change",function(i){return n.onFileSelected3(i)}),e.qZA()(),e.TgZ(40,"button",20),e.NdJ("click",function(){return n.guardar()}),e._uU(41,"Registrar Producto"),e.qZA()()()()()),2&o&&(e.xp6(11),e.Q6J("ngModel",n.request.Nombre),e.xp6(4),e.Q6J("ngModel",n.request.Descripcion),e.xp6(8),e.Q6J("ngModel",n.request.Precio),e.xp6(4),e.Q6J("ngModel",n.request.Stock))},dependencies:[m,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.On,s.F]})}return r})()},{path:"",redirectTo:"inicio",pathMatch:"full"}]}];let x=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(y),u.Bz]})}return r})();var v=d(1397);let w=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[c.ez,v.q]})}return r})(),N=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[c.ez,x,w,v.q,s.u5]})}return r})()}}]);