(self.webpackChunksolf=self.webpackChunksolf||[]).push([[179],{1572:(ti,Ut,B)=>{"use strict";B.d(Ut,{i:()=>rt});var w=B(4004),_=B(262),de=B(8505),a=B(9646),he=B(2340),st=B(655),nt=B(4650),Oe=B(529),ke=B(9197);let rt=(()=>{class pt{constructor(dt,wt,et){this.http=dt,this.router=wt,this.ngZone=et,this.baseUrl=he.N.base_url}get token(){return localStorage.getItem("token")||""}get role(){return this.usuario.role}get uid(){return this.usuario.uid||""}get headers(){return{headers:{"x-token":this.token}}}guardarLocalStorage(dt,wt,et=""){localStorage.setItem("token",dt),localStorage.setItem("menu",JSON.stringify(wt)),""!==et&&localStorage.setItem("aud",et)}logout(){this.usuario.google?google.accounts.id.revoke(this.usuario.email,()=>{this.ngZone.run(()=>{localStorage.removeItem("menu"),localStorage.removeItem("token"),localStorage.removeItem("aud"),this.router.navigateByUrl("auth/login")})}):(localStorage.removeItem("token"),localStorage.removeItem("menu"),localStorage.getItem("aud")&&localStorage.removeItem("aud"))}validarToken(){return google.accounts.id.initialize({client_id:localStorage.getItem("aud")}),this.http.get(`${this.baseUrl}/login/renew`,{headers:{"x-token":this.token}}).pipe((0,w.U)(dt=>{const{apellidoM:wt,apellidoP:et,email:Zt,google:kt,img:Qe="",nombre:Hn,role:Fn,status:Ye,uid:Ce}=dt.usuario;return this.usuario=new st.b(Hn,et,wt,Zt,"",Qe,kt,Fn,Ye,Ce),this.guardarLocalStorage(dt.token,dt.menu),!0}),(0,_.K)(dt=>(0,a.of)(!1)))}crearUsuario(dt){return this.http.post(`${this.baseUrl}/usuarios`,dt).pipe((0,de.b)(wt=>{this.guardarLocalStorage(wt.token,wt.menu)}))}login(dt){return this.http.post(`${this.baseUrl}/login`,dt).pipe((0,de.b)(wt=>{this.guardarLocalStorage(wt.token,wt.menu)}))}loginGoogle(dt){return this.http.post(`${this.baseUrl}/login/google`,{token:dt}).pipe((0,de.b)(wt=>{this.guardarLocalStorage(wt.token,wt.menu,wt.aud)}))}actualizarPerfil(dt){return dt={...dt,role:this.usuario.role||"USER_ROLE",status:this.usuario.status||!1},this.http.put(`${this.baseUrl}/usuarios/${this.uid}`,dt,this.headers)}cargarUsuarios(dt=0){return this.http.get(`${this.baseUrl}/usuarios?desde=${dt}`,this.headers).pipe((0,w.U)(et=>{const Zt=et.usuarios.map(kt=>new st.b(kt.nombre,kt.apellidoP,kt.apellidoM,kt.email,"",kt.img,kt.google,kt.role,kt.status,kt.uid));return{total:et.total,usuarios:Zt}}))}desactivarUsuario(dt){return this.http.put(`${this.baseUrl}/usuarios/desactivar/${dt.uid}`,{status:!1},this.headers)}activarUsuario(dt){return this.http.put(`${this.baseUrl}/usuarios/desactivar/${dt.uid}`,{status:!0},this.headers)}cambiarRolUsuario(dt){return this.http.put(`${this.baseUrl}/usuarios/${dt.uid}`,dt,this.headers)}}return pt.\u0275fac=function(dt){return new(dt||pt)(nt.LFG(Oe.eN),nt.LFG(ke.F0),nt.LFG(nt.R0b))},pt.\u0275prov=nt.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})()},2311:(ti,Ut,B)=>{"use strict";B.d(Ut,{O:()=>he});var w=B(4004),_=B(2340),de=B(4650),a=B(529);let he=(()=>{class st{constructor(Oe){this.http=Oe,this.baseUrl=_.N.base_url,this._categorias=["libre","primaria","intersecundaria","prepa","veterano","relampago","femenil"],this._juegos=["fut7","futsalad","fut11"]}get categorias(){return[...this._categorias]}get juegos(){return[...this._juegos]}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}getLigas(){return this.http.get(`${this.baseUrl}/ligas`,this.headers).pipe((0,w.U)(ke=>ke.ligas))}getLigasStatusTrue(){return this.http.get(`${this.baseUrl}/ligas/statusTrue`,this.headers).pipe((0,w.U)(ke=>ke.ligas))}getLigasStatusFalse(){return this.http.get(`${this.baseUrl}/ligas/statusFalse`,this.headers).pipe((0,w.U)(ke=>ke.ligas))}smallgetLigas(){return this.http.get(`${this.baseUrl}/ligas?limite=3`,this.headers).pipe((0,w.U)(ke=>ke.ligas))}getLigaPorId(Oe){return this.http.get(`${this.baseUrl}/ligas/${Oe}`,this.headers).pipe((0,w.U)(rt=>rt.liga))}getLigaPorBusqueda(Oe,ke,rt){return this.http.get(""!==rt&&""!==ke?`${this.baseUrl}/ligas/nombre/${Oe}?limite=6&tipocategoria=${ke}&tipojuego=${rt}`:""!==rt&&""===ke?`${this.baseUrl}/ligas/nombre/${Oe}?limite=6&tipojuego=${rt}`:""===rt&&""!==ke?`${this.baseUrl}/ligas/nombre/${Oe}?limite=6&tipocategoria=${ke}`:`${this.baseUrl}/ligas/nombre/${Oe}?limite=6`)}agregarLiga(Oe){return this.http.post(`${this.baseUrl}/ligas`,Oe,this.headers)}actualizarLiga(Oe){return this.http.put(`${this.baseUrl}/ligas/${Oe._id}`,Oe,this.headers)}desactivarLiga(Oe){return this.http.put(`${this.baseUrl}/ligas/desactivar/${Oe._id}`,{status:!1},this.headers)}activarLiga(Oe){return this.http.put(`${this.baseUrl}/ligas/desactivar/${Oe._id}`,{status:!0},this.headers)}getCategoriasJuegos(){return this.getLigas().pipe((0,w.U)(Oe=>{let ke=Oe.map(({...pt})=>pt.tipoCategoria),rt=Oe.map(({...pt})=>pt.tipoJuego);return ke=[...new Set(ke)],rt=[...new Set(rt)],{cat:ke,jue:rt}}))}}return st.\u0275fac=function(Oe){return new(Oe||st)(de.LFG(a.eN))},st.\u0275prov=de.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})()},9563:(ti,Ut,B)=>{"use strict";B.d(Ut,{q:()=>ps});var w=B(3267),_=B(4650),de=B(3238);let rt=(()=>{class kn{}return kn.\u0275fac=function(Ie){return new(Ie||kn)},kn.\u0275mod=_.oAB({type:kn}),kn.\u0275inj=_.cJS({imports:[[de.BQ],de.BQ]}),kn})();var pt=B(4859),Et=B(7392),dt=B(4633);let ii=(()=>{class kn{}return kn.\u0275fac=function(Ie){return new(Ie||kn)},kn.\u0275mod=_.oAB({type:kn}),kn.\u0275inj=_.cJS({imports:[[de.BQ],de.BQ]}),kn})();var vi=B(782),wi=B(7717),Nn=B(7957),Li=B(7676),Jn=B(4144),mn=B(8184),Tt=B(6895),Ge=B(8605),Fe=B(7340);const ni={provide:new _.OlP("mat-select-scroll-strategy"),deps:[mn.aV],useFactory:function Ht(kn){return()=>kn.scrollStrategies.reposition()}};let ct=(()=>{class kn{}return kn.\u0275fac=function(Ie){return new(Ie||kn)},kn.\u0275mod=_.oAB({type:kn}),kn.\u0275inj=_.cJS({providers:[ni],imports:[[Tt.ez,mn.U8,de.Ng,de.BQ],Ge.ZD,Li.lN,de.Ng,de.BQ]}),kn})();var nn=B(6046),_i=B(4080),Qt=B(445),xt=B(7579),ft=B(9770),Yt=B(727),wn=B(9646),ri=B(9300),Ee=B(5698),ee=B(8675),oe=B(2687),Me=B(3353),Ve=B(9521);function ut(kn,fn){}class Ft{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Lt={dialogContainer:(0,Fe.X$)("dialogContainer",[(0,Fe.SB)("void, exit",(0,Fe.oB)({opacity:0,transform:"scale(0.7)"})),(0,Fe.SB)("enter",(0,Fe.oB)({transform:"none"})),(0,Fe.eR)("* => enter",(0,Fe.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Fe.oB)({transform:"none",opacity:1}))),(0,Fe.eR)("* => void, * => exit",(0,Fe.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Fe.oB)({opacity:0})))])};let le=(()=>{class kn extends _i.en{constructor(Ie,Gt,Ln,di,Mi,mi,Ki,vr){super(),this._elementRef=Ie,this._focusTrapFactory=Gt,this._changeDetectorRef=Ln,this._config=Mi,this._interactivityChecker=mi,this._ngZone=Ki,this._focusMonitor=vr,this._animationStateChanged=new _.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=ro=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(ro)),this._ariaLabelledBy=Mi.ariaLabelledBy||null,this._document=di}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Ie){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Ie)}attachTemplatePortal(Ie){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Ie)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Ie,Gt){this._interactivityChecker.isFocusable(Ie)||(Ie.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Ie.addEventListener("blur",()=>Ie.removeAttribute("tabindex")),Ie.addEventListener("mousedown",()=>Ie.removeAttribute("tabindex"))})),Ie.focus(Gt)}_focusByCssSelector(Ie,Gt){let Ln=this._elementRef.nativeElement.querySelector(Ie);Ln&&this._forceFocus(Ln,Gt)}_trapFocus(){const Ie=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Ie.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(Gt=>{Gt||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Ie=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Ie&&"function"==typeof Ie.focus){const Gt=(0,Me.ht)(),Ln=this._elementRef.nativeElement;(!Gt||Gt===this._document.body||Gt===Ln||Ln.contains(Gt))&&(this._focusMonitor?(this._focusMonitor.focusVia(Ie,this._closeInteractionType),this._closeInteractionType=null):Ie.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,Me.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Ie=this._elementRef.nativeElement,Gt=(0,Me.ht)();return Ie===Gt||Ie.contains(Gt)}}return kn.\u0275fac=function(Ie){return new(Ie||kn)(_.Y36(_.SBq),_.Y36(oe.qV),_.Y36(_.sBO),_.Y36(Tt.K0,8),_.Y36(Ft),_.Y36(oe.ic),_.Y36(_.R0b),_.Y36(oe.tE))},kn.\u0275dir=_.lG2({type:kn,viewQuery:function(Ie,Gt){if(1&Ie&&_.Gf(_i.Pl,7),2&Ie){let Ln;_.iGM(Ln=_.CRH())&&(Gt._portalOutlet=Ln.first)}},features:[_.qOj]}),kn})(),_e=(()=>{class kn extends le{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Ie,totalTime:Gt}){"enter"===Ie?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:Gt})):"exit"===Ie&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:Gt}))}_onAnimationStart({toState:Ie,totalTime:Gt}){"enter"===Ie?this._animationStateChanged.next({state:"opening",totalTime:Gt}):("exit"===Ie||"void"===Ie)&&this._animationStateChanged.next({state:"closing",totalTime:Gt})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return kn.\u0275fac=function(){let fn;return function(Gt){return(fn||(fn=_.n5z(kn)))(Gt||kn)}}(),kn.\u0275cmp=_.Xpm({type:kn,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Ie,Gt){1&Ie&&_.WFA("@dialogContainer.start",function(di){return Gt._onAnimationStart(di)})("@dialogContainer.done",function(di){return Gt._onAnimationDone(di)}),2&Ie&&(_.Ikx("id",Gt._id),_.uIk("role",Gt._config.role)("aria-labelledby",Gt._config.ariaLabel?null:Gt._ariaLabelledBy)("aria-label",Gt._config.ariaLabel)("aria-describedby",Gt._config.ariaDescribedBy||null),_.d8E("@dialogContainer",Gt._state))},features:[_.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Ie,Gt){1&Ie&&_.YNc(0,ut,0,0,"ng-template",0)},dependencies:[_i.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Lt.dialogContainer]}}),kn})(),fe=0;class Ue{constructor(fn,Ie,Gt="mat-dialog-"+fe++){this._overlayRef=fn,this._containerInstance=Ie,this.id=Gt,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new xt.x,this._afterClosed=new xt.x,this._beforeClosed=new xt.x,this._state=0,Ie._id=Gt,Ie._animationStateChanged.pipe((0,ri.h)(Ln=>"opened"===Ln.state),(0,Ee.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Ie._animationStateChanged.pipe((0,ri.h)(Ln=>"closed"===Ln.state),(0,Ee.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),fn.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),fn.keydownEvents().pipe((0,ri.h)(Ln=>Ln.keyCode===Ve.hY&&!this.disableClose&&!(0,Ve.Vb)(Ln))).subscribe(Ln=>{Ln.preventDefault(),Wt(this,"keyboard")}),fn.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Wt(this,"mouse")})}close(fn){this._result=fn,this._containerInstance._animationStateChanged.pipe((0,ri.h)(Ie=>"closing"===Ie.state),(0,Ee.q)(1)).subscribe(Ie=>{this._beforeClosed.next(fn),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Ie.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(fn){let Ie=this._getPositionStrategy();return fn&&(fn.left||fn.right)?fn.left?Ie.left(fn.left):Ie.right(fn.right):Ie.centerHorizontally(),fn&&(fn.top||fn.bottom)?fn.top?Ie.top(fn.top):Ie.bottom(fn.bottom):Ie.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(fn="",Ie=""){return this._overlayRef.updateSize({width:fn,height:Ie}),this._overlayRef.updatePosition(),this}addPanelClass(fn){return this._overlayRef.addPanelClass(fn),this}removePanelClass(fn){return this._overlayRef.removePanelClass(fn),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Wt(kn,fn,Ie){return void 0!==kn._containerInstance&&(kn._containerInstance._closeInteractionType=fn),kn.close(Ie)}const Sn=new _.OlP("MatDialogData"),jn=new _.OlP("mat-dialog-default-options"),Xn=new _.OlP("mat-dialog-scroll-strategy"),Gn={provide:Xn,deps:[mn.aV],useFactory:function Pi(kn){return()=>kn.scrollStrategies.block()}};let er=(()=>{class kn{constructor(Ie,Gt,Ln,di,Mi,mi,Ki,vr,ro,Ur){this._overlay=Ie,this._injector=Gt,this._defaultOptions=Ln,this._parentDialog=di,this._overlayContainer=Mi,this._dialogRefConstructor=Ki,this._dialogContainerType=vr,this._dialogDataToken=ro,this._animationMode=Ur,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new xt.x,this._afterOpenedAtThisLevel=new xt.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,ft.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,ee.O)(void 0))),this._scrollStrategy=mi}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Ie=this._parentDialog;return Ie?Ie._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Ie,Gt){if(Gt=function _o(kn,fn){return{...fn,...kn}}(Gt,this._defaultOptions||new Ft),Gt.id&&this.getDialogById(Gt.id),this._dialogAnimatingOpen)return this._lastDialogRef;const Ln=this._createOverlay(Gt),di=this._attachDialogContainer(Ln,Gt);if("NoopAnimations"!==this._animationMode){const mi=di._animationStateChanged.subscribe(Ki=>{"opening"===Ki.state&&(this._dialogAnimatingOpen=!0),"opened"===Ki.state&&(this._dialogAnimatingOpen=!1,mi.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new Yt.w0),this._animationStateSubscriptions.add(mi)}const Mi=this._attachDialogContent(Ie,di,Ln,Gt);return this._lastDialogRef=Mi,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Mi),Mi.afterClosed().subscribe(()=>this._removeOpenDialog(Mi)),this.afterOpened.next(Mi),di._initializeWithAttachedContent(),Mi}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Ie){return this.openDialogs.find(Gt=>Gt.id===Ie)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Ie){const Gt=this._getOverlayConfig(Ie);return this._overlay.create(Gt)}_getOverlayConfig(Ie){const Gt=new mn.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Ie.scrollStrategy||this._scrollStrategy(),panelClass:Ie.panelClass,hasBackdrop:Ie.hasBackdrop,direction:Ie.direction,minWidth:Ie.minWidth,minHeight:Ie.minHeight,maxWidth:Ie.maxWidth,maxHeight:Ie.maxHeight,disposeOnNavigation:Ie.closeOnNavigation});return Ie.backdropClass&&(Gt.backdropClass=Ie.backdropClass),Gt}_attachDialogContainer(Ie,Gt){const di=_.zs3.create({parent:Gt&&Gt.viewContainerRef&&Gt.viewContainerRef.injector||this._injector,providers:[{provide:Ft,useValue:Gt}]}),Mi=new _i.C5(this._dialogContainerType,Gt.viewContainerRef,di,Gt.componentFactoryResolver);return Ie.attach(Mi).instance}_attachDialogContent(Ie,Gt,Ln,di){const Mi=new this._dialogRefConstructor(Ln,Gt,di.id);if(Ie instanceof _.Rgc)Gt.attachTemplatePortal(new _i.UE(Ie,null,{$implicit:di.data,dialogRef:Mi}));else{const mi=this._createInjector(di,Mi,Gt),Ki=Gt.attachComponentPortal(new _i.C5(Ie,di.viewContainerRef,mi));Mi.componentInstance=Ki.instance}return Mi.updateSize(di.width,di.height).updatePosition(di.position),Mi}_createInjector(Ie,Gt,Ln){const di=Ie&&Ie.viewContainerRef&&Ie.viewContainerRef.injector,Mi=[{provide:this._dialogContainerType,useValue:Ln},{provide:this._dialogDataToken,useValue:Ie.data},{provide:this._dialogRefConstructor,useValue:Gt}];return Ie.direction&&(!di||!di.get(Qt.Is,null,_.XFs.Optional))&&Mi.push({provide:Qt.Is,useValue:{value:Ie.direction,change:(0,wn.of)()}}),_.zs3.create({parent:di||this._injector,providers:Mi})}_removeOpenDialog(Ie){const Gt=this.openDialogs.indexOf(Ie);Gt>-1&&(this.openDialogs.splice(Gt,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Ln,di)=>{Ln?di.setAttribute("aria-hidden",Ln):di.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Ie=this._overlayContainer.getContainerElement();if(Ie.parentElement){const Gt=Ie.parentElement.children;for(let Ln=Gt.length-1;Ln>-1;Ln--){let di=Gt[Ln];di!==Ie&&"SCRIPT"!==di.nodeName&&"STYLE"!==di.nodeName&&!di.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(di,di.getAttribute("aria-hidden")),di.setAttribute("aria-hidden","true"))}}}_closeDialogs(Ie){let Gt=Ie.length;for(;Gt--;)Ie[Gt].close()}}return kn.\u0275fac=function(Ie){_.$Z()},kn.\u0275dir=_.lG2({type:kn}),kn})(),qi=(()=>{class kn extends er{constructor(Ie,Gt,Ln,di,Mi,mi,Ki,vr){super(Ie,Gt,di,mi,Ki,Mi,Ue,_e,Sn,vr)}}return kn.\u0275fac=function(Ie){return new(Ie||kn)(_.LFG(mn.aV),_.LFG(_.zs3),_.LFG(Tt.Ye,8),_.LFG(jn,8),_.LFG(Xn),_.LFG(kn,12),_.LFG(mn.Xj),_.LFG(_.QbO,8))},kn.\u0275prov=_.Yz7({token:kn,factory:kn.\u0275fac}),kn})(),va=(()=>{class kn{}return kn.\u0275fac=function(Ie){return new(Ie||kn)},kn.\u0275mod=_.oAB({type:kn}),kn.\u0275inj=_.cJS({providers:[qi,Gn],imports:[[mn.U8,_i.eL,de.BQ],de.BQ]}),kn})();var Yi=B(7084);let ps=(()=>{class kn{}return kn.\u0275fac=function(Ie){return new(Ie||kn)},kn.\u0275mod=_.oAB({type:kn}),kn.\u0275inj=_.cJS({imports:[w.SJ,rt,pt.ot,Et.Ps,dt.ie,ii,vi.N6,wi.Cq,Nn.Bb,Li.lN,Jn.c,nn.ZX,ct,va,Yi.To]}),kn})()},655:(ti,Ut,B)=>{"use strict";B.d(Ut,{b:()=>de});const _=B(2340).N.base_url;class de{constructor(he,st,nt,Oe,ke,rt,pt,Et,dt,wt,et,Zt){this.nombre=he,this.apellidoP=st,this.apellidoM=nt,this.email=Oe,this.password=ke,this.img=rt,this.google=pt,this.role=Et,this.status=dt,this.respuesta=wt,this.pregunta=et,this.uid=Zt}get imagenUrl(){return this.img?this.img?.includes("https")?this.img:this.img?`${_}/upload/usuarios/${this.img}`:`${_}/upload/usuarios/no-img-usuario`:`${_}/upload/usuarios/no-img-usuario`}}},646:(ti,Ut,B)=>{"use strict";B.d(Ut,{$:()=>a});var w=B(2340),_=B(4650);const de=w.N.base_url;let a=(()=>{class he{transform(nt,Oe){return nt?nt?.includes("https")?nt:nt?`${de}/upload/${Oe}/${nt}`:`${de}/upload/usuarios/no-image`:`${de}/upload/usuarios/no-image`}}return he.\u0275fac=function(nt){return new(nt||he)},he.\u0275pipe=_.Yjl({name:"imagen",type:he,pure:!0}),he})()},5503:(ti,Ut,B)=>{"use strict";B.d(Ut,{D:()=>de});var w=B(6895),_=B(4650);let de=(()=>{class a{}return a.\u0275fac=function(st){return new(st||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[w.ez]}),a})()},6814:(ti,Ut,B)=>{"use strict";B.d(Ut,{z:()=>he});var w=B(4004),_=B(2340),de=B(4650),a=B(529);let he=(()=>{class st{constructor(Oe){this.http=Oe,this.baseUrl=_.N.base_url}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}getCarruseles(){return this.http.get(`${this.baseUrl}/carruseles`,this.headers).pipe((0,w.U)(ke=>ke.carruseles))}getCarruselPorId(Oe){return this.http.get(`${this.baseUrl}/carruseles/${Oe}`,this.headers).pipe((0,w.U)(rt=>rt.carrusel))}agregarCarrusel(Oe){return this.http.post(`${this.baseUrl}/carruseles`,Oe,this.headers)}actualizarCarrusel(Oe){return this.http.put(`${this.baseUrl}/carruseles/${Oe._id}`,Oe,this.headers)}eliminarCarrusel(Oe){return this.http.delete(`${this.baseUrl}/carruseles/${Oe}`,this.headers)}}return st.\u0275fac=function(Oe){return new(Oe||st)(de.LFG(a.eN))},st.\u0275prov=de.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})()},2340:(ti,Ut,B)=>{"use strict";B.d(Ut,{N:()=>w});const w={production:!0,mapboxToken:"pk.eyJ1Ijoic2VpbmVudGVuIiwiYSI6ImNsZGRiam42eTAyMG8zcHA1d3Fnd3Fob3YifQ.n-Kz1QaIGkAkRZ4TP6rNYg",base_url:"https://solf.onrender.com/api"}},9895:(ti,Ut,B)=>{"use strict";var w=B(1481),_=B(4650),de=B(529),a=B(7340);function st(X){return new _.vHH(3e3,!1)}function Fe(){return typeof window<"u"&&typeof window.document<"u"}function ht(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Xe(X){switch(X.length){case 0:return new a.ZN;case 1:return X[0];default:return new a.ZE(X)}}function ce(X,M,S,G,ue=new Map,Re=new Map){const Pt=[],Rt=[];let ln=-1,Vn=null;if(G.forEach(an=>{const hi=an.get("offset"),Xi=hi==ln,nr=Xi&&Vn||new Map;an.forEach((Bi,Gi)=>{let Ir=Gi,Pr=Bi;if("offset"!==Gi)switch(Ir=M.normalizePropertyName(Ir,Pt),Pr){case a.k1:Pr=ue.get(Gi);break;case a.l3:Pr=Re.get(Gi);break;default:Pr=M.normalizeStyleValue(Gi,Ir,Pr,Pt)}nr.set(Ir,Pr)}),Xi||Rt.push(nr),Vn=nr,ln=hi}),Pt.length)throw function He(X){return new _.vHH(3502,!1)}();return Rt}function ot(X,M,S,G){switch(M){case"start":X.onStart(()=>G(S&&Se(S,"start",X)));break;case"done":X.onDone(()=>G(S&&Se(S,"done",X)));break;case"destroy":X.onDestroy(()=>G(S&&Se(S,"destroy",X)))}}function Se(X,M,S){const Re=St(X.element,X.triggerName,X.fromState,X.toState,M||X.phaseName,S.totalTime??X.totalTime,!!S.disabled),Pt=X._data;return null!=Pt&&(Re._data=Pt),Re}function St(X,M,S,G,ue="",Re=0,Pt){return{element:X,triggerName:M,fromState:S,toState:G,phaseName:ue,totalTime:Re,disabled:!!Pt}}function tn(X,M,S){let G=X.get(M);return G||X.set(M,G=S),G}function li(X){const M=X.indexOf(":");return[X.substring(1,M),X.slice(M+1)]}let Wi=(X,M)=>!1,Dn=(X,M,S)=>[],ae=null;function $e(X){const M=X.parentNode||X.host;return M===ae?null:M}(ht()||typeof Element<"u")&&(Fe()?(ae=(()=>document.documentElement)(),Wi=(X,M)=>{for(;M;){if(M===X)return!0;M=$e(M)}return!1}):Wi=(X,M)=>X.contains(M),Dn=(X,M,S)=>{if(S)return Array.from(X.querySelectorAll(M));const G=X.querySelector(M);return G?[G]:[]});let jt=null,Bt=!1;const te=Wi,it=Dn;let Rn=(()=>{class X{validateStyleProperty(S){return function Je(X){jt||(jt=function pe(){return typeof document<"u"?document.body:null}()||{},Bt=!!jt.style&&"WebkitAppearance"in jt.style);let M=!0;return jt.style&&!function on(X){return"ebkit"==X.substring(1,6)}(X)&&(M=X in jt.style,!M&&Bt&&(M="Webkit"+X.charAt(0).toUpperCase()+X.slice(1)in jt.style)),M}(S)}matchesElement(S,G){return!1}containsElement(S,G){return te(S,G)}getParentElement(S){return $e(S)}query(S,G,ue){return it(S,G,ue)}computeStyle(S,G,ue){return ue||""}animate(S,G,ue,Re,Pt,Rt=[],ln){return new a.ZN(ue,Re)}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275prov=_.Yz7({token:X,factory:X.\u0275fac}),X})(),ni=(()=>{class X{}return X.NOOP=new Rn,X})();const ji="ng-enter",dn="ng-leave",It="ng-trigger",ct=".ng-trigger",nn="ng-animating",_i=".ng-animating";function Qt(X){if("number"==typeof X)return X;const M=X.match(/^(-?[\.\d]+)(m?s)/);return!M||M.length<2?0:xt(parseFloat(M[1]),M[2])}function xt(X,M){return"s"===M?1e3*X:X}function ft(X,M,S){return X.hasOwnProperty("duration")?X:function Yt(X,M,S){let ue,Re=0,Pt="";if("string"==typeof X){const Rt=X.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Rt)return M.push(st()),{duration:0,delay:0,easing:""};ue=xt(parseFloat(Rt[1]),Rt[2]);const ln=Rt[3];null!=ln&&(Re=xt(parseFloat(ln),Rt[4]));const Vn=Rt[5];Vn&&(Pt=Vn)}else ue=X;if(!S){let Rt=!1,ln=M.length;ue<0&&(M.push(function nt(){return new _.vHH(3100,!1)}()),Rt=!0),Re<0&&(M.push(function Oe(){return new _.vHH(3101,!1)}()),Rt=!0),Rt&&M.splice(ln,0,st())}return{duration:ue,delay:Re,easing:Pt}}(X,M,S)}function wn(X,M={}){return Object.keys(X).forEach(S=>{M[S]=X[S]}),M}function ri(X){const M=new Map;return Object.keys(X).forEach(S=>{M.set(S,X[S])}),M}function oe(X,M=new Map,S){if(S)for(let[G,ue]of S)M.set(G,ue);for(let[G,ue]of X)M.set(G,ue);return M}function Me(X,M,S){return S?M+":"+S+";":""}function Ve(X){let M="";for(let S=0;S<X.style.length;S++){const G=X.style.item(S);M+=Me(0,G,X.style.getPropertyValue(G))}for(const S in X.style)X.style.hasOwnProperty(S)&&!S.startsWith("_")&&(M+=Me(0,jn(S),X.style[S]));X.setAttribute("style",M)}function ut(X,M,S){X.style&&(M.forEach((G,ue)=>{const Re=Sn(ue);S&&!S.has(ue)&&S.set(ue,X.style[Re]),X.style[Re]=G}),ht()&&Ve(X))}function Ft(X,M){X.style&&(M.forEach((S,G)=>{const ue=Sn(G);X.style[ue]=""}),ht()&&Ve(X))}function Lt(X){return Array.isArray(X)?1==X.length?X[0]:(0,a.vP)(X):X}const le=new RegExp("{{\\s*(.+?)\\s*}}","g");function _e(X){let M=[];if("string"==typeof X){let S;for(;S=le.exec(X);)M.push(S[1]);le.lastIndex=0}return M}function fe(X,M,S){const G=X.toString(),ue=G.replace(le,(Re,Pt)=>{let Rt=M[Pt];return null==Rt&&(S.push(function rt(X){return new _.vHH(3003,!1)}()),Rt=""),Rt.toString()});return ue==G?X:ue}function Ue(X){const M=[];let S=X.next();for(;!S.done;)M.push(S.value),S=X.next();return M}const Wt=/-+([a-z0-9])/g;function Sn(X){return X.replace(Wt,(...M)=>M[1].toUpperCase())}function jn(X){return X.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pi(X,M,S){switch(M.type){case 7:return X.visitTrigger(M,S);case 0:return X.visitState(M,S);case 1:return X.visitTransition(M,S);case 2:return X.visitSequence(M,S);case 3:return X.visitGroup(M,S);case 4:return X.visitAnimate(M,S);case 5:return X.visitKeyframes(M,S);case 6:return X.visitStyle(M,S);case 8:return X.visitReference(M,S);case 9:return X.visitAnimateChild(M,S);case 10:return X.visitAnimateRef(M,S);case 11:return X.visitQuery(M,S);case 12:return X.visitStagger(M,S);default:throw function pt(X){return new _.vHH(3004,!1)}()}}function Gn(X,M){return window.getComputedStyle(X)[M]}function Ao(X,M){const S=[];return"string"==typeof X?X.split(/\s*,\s*/).forEach(G=>function va(X,M,S){if(":"==X[0]){const ln=function Yi(X,M){switch(X){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,G)=>parseFloat(G)>parseFloat(S);case":decrement":return(S,G)=>parseFloat(G)<parseFloat(S);default:return M.push(function Jt(X){return new _.vHH(3016,!1)}()),"* => *"}}(X,S);if("function"==typeof ln)return void M.push(ln);X=ln}const G=X.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==G||G.length<4)return S.push(function zt(X){return new _.vHH(3015,!1)}()),M;const ue=G[1],Re=G[2],Pt=G[3];M.push(fn(ue,Pt));"<"==Re[0]&&!("*"==ue&&"*"==Pt)&&M.push(fn(Pt,ue))}(G,S,M)):S.push(X),S}const ps=new Set(["true","1"]),kn=new Set(["false","0"]);function fn(X,M){const S=ps.has(X)||kn.has(X),G=ps.has(M)||kn.has(M);return(ue,Re)=>{let Pt="*"==X||X==ue,Rt="*"==M||M==Re;return!Pt&&S&&"boolean"==typeof ue&&(Pt=ue?ps.has(X):kn.has(X)),!Rt&&G&&"boolean"==typeof Re&&(Rt=Re?ps.has(M):kn.has(M)),Pt&&Rt}}const Gt=new RegExp("s*:selfs*,?","g");function Ln(X,M,S,G){return new Mi(X).build(M,S,G)}class Mi{constructor(M){this._driver=M}build(M,S,G){const ue=new vr(S);return this._resetContextStyleTimingState(ue),Pi(this,Lt(M),ue)}_resetContextStyleTimingState(M){M.currentQuerySelector="",M.collectedStyles=new Map,M.collectedStyles.set("",new Map),M.currentTime=0}visitTrigger(M,S){let G=S.queryCount=0,ue=S.depCount=0;const Re=[],Pt=[];return"@"==M.name.charAt(0)&&S.errors.push(function dt(){return new _.vHH(3006,!1)}()),M.definitions.forEach(Rt=>{if(this._resetContextStyleTimingState(S),0==Rt.type){const ln=Rt,Vn=ln.name;Vn.toString().split(/\s*,\s*/).forEach(an=>{ln.name=an,Re.push(this.visitState(ln,S))}),ln.name=Vn}else if(1==Rt.type){const ln=this.visitTransition(Rt,S);G+=ln.queryCount,ue+=ln.depCount,Pt.push(ln)}else S.errors.push(function wt(){return new _.vHH(3007,!1)}())}),{type:7,name:M.name,states:Re,transitions:Pt,queryCount:G,depCount:ue,options:null}}visitState(M,S){const G=this.visitStyle(M.styles,S),ue=M.options&&M.options.params||null;if(G.containsDynamicStyles){const Re=new Set,Pt=ue||{};G.styles.forEach(Rt=>{Rt instanceof Map&&Rt.forEach(ln=>{_e(ln).forEach(Vn=>{Pt.hasOwnProperty(Vn)||Re.add(Vn)})})}),Re.size&&(Ue(Re.values()),S.errors.push(function et(X,M){return new _.vHH(3008,!1)}()))}return{type:0,name:M.name,style:G,options:ue?{params:ue}:null}}visitTransition(M,S){S.queryCount=0,S.depCount=0;const G=Pi(this,Lt(M.animation),S);return{type:1,matchers:Ao(M.expr,S.errors),animation:G,queryCount:S.queryCount,depCount:S.depCount,options:pr(M.options)}}visitSequence(M,S){return{type:2,steps:M.steps.map(G=>Pi(this,G,S)),options:pr(M.options)}}visitGroup(M,S){const G=S.currentTime;let ue=0;const Re=M.steps.map(Pt=>{S.currentTime=G;const Rt=Pi(this,Pt,S);return ue=Math.max(ue,S.currentTime),Rt});return S.currentTime=ue,{type:3,steps:Re,options:pr(M.options)}}visitAnimate(M,S){const G=function Ur(X,M){if(X.hasOwnProperty("duration"))return X;if("number"==typeof X)return Yr(ft(X,M).duration,0,"");const S=X;if(S.split(/\s+/).some(Re=>"{"==Re.charAt(0)&&"{"==Re.charAt(1))){const Re=Yr(0,0,"");return Re.dynamic=!0,Re.strValue=S,Re}const ue=ft(S,M);return Yr(ue.duration,ue.delay,ue.easing)}(M.timings,S.errors);S.currentAnimateTimings=G;let ue,Re=M.styles?M.styles:(0,a.oB)({});if(5==Re.type)ue=this.visitKeyframes(Re,S);else{let Pt=M.styles,Rt=!1;if(!Pt){Rt=!0;const Vn={};G.easing&&(Vn.easing=G.easing),Pt=(0,a.oB)(Vn)}S.currentTime+=G.duration+G.delay;const ln=this.visitStyle(Pt,S);ln.isEmptyStep=Rt,ue=ln}return S.currentAnimateTimings=null,{type:4,timings:G,style:ue,options:null}}visitStyle(M,S){const G=this._makeStyleAst(M,S);return this._validateStyleAst(G,S),G}_makeStyleAst(M,S){const G=[],ue=Array.isArray(M.styles)?M.styles:[M.styles];for(let Rt of ue)"string"==typeof Rt?Rt===a.l3?G.push(Rt):S.errors.push(new _.vHH(3002,!1)):G.push(ri(Rt));let Re=!1,Pt=null;return G.forEach(Rt=>{if(Rt instanceof Map&&(Rt.has("easing")&&(Pt=Rt.get("easing"),Rt.delete("easing")),!Re))for(let ln of Rt.values())if(ln.toString().indexOf("{{")>=0){Re=!0;break}}),{type:6,styles:G,easing:Pt,offset:M.offset,containsDynamicStyles:Re,options:null}}_validateStyleAst(M,S){const G=S.currentAnimateTimings;let ue=S.currentTime,Re=S.currentTime;G&&Re>0&&(Re-=G.duration+G.delay),M.styles.forEach(Pt=>{"string"!=typeof Pt&&Pt.forEach((Rt,ln)=>{const Vn=S.collectedStyles.get(S.currentQuerySelector),an=Vn.get(ln);let hi=!0;an&&(Re!=ue&&Re>=an.startTime&&ue<=an.endTime&&(S.errors.push(function Qe(X,M,S,G,ue){return new _.vHH(3010,!1)}()),hi=!1),Re=an.startTime),hi&&Vn.set(ln,{startTime:Re,endTime:ue}),S.options&&function Mt(X,M,S){const G=M.params||{},ue=_e(X);ue.length&&ue.forEach(Re=>{G.hasOwnProperty(Re)||S.push(function ke(X){return new _.vHH(3001,!1)}())})}(Rt,S.options,S.errors)})})}visitKeyframes(M,S){const G={type:5,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push(function Hn(){return new _.vHH(3011,!1)}()),G;let Re=0;const Pt=[];let Rt=!1,ln=!1,Vn=0;const an=M.steps.map(Pr=>{const mo=this._makeStyleAst(Pr,S);let Mo=null!=mo.offset?mo.offset:function ro(X){if("string"==typeof X)return null;let M=null;if(Array.isArray(X))X.forEach(S=>{if(S instanceof Map&&S.has("offset")){const G=S;M=parseFloat(G.get("offset")),G.delete("offset")}});else if(X instanceof Map&&X.has("offset")){const S=X;M=parseFloat(S.get("offset")),S.delete("offset")}return M}(mo.styles),kr=0;return null!=Mo&&(Re++,kr=mo.offset=Mo),ln=ln||kr<0||kr>1,Rt=Rt||kr<Vn,Vn=kr,Pt.push(kr),mo});ln&&S.errors.push(function Fn(){return new _.vHH(3012,!1)}()),Rt&&S.errors.push(function Ye(){return new _.vHH(3200,!1)}());const hi=M.steps.length;let Xi=0;Re>0&&Re<hi?S.errors.push(function Ce(){return new _.vHH(3202,!1)}()):0==Re&&(Xi=1/(hi-1));const nr=hi-1,Bi=S.currentTime,Gi=S.currentAnimateTimings,Ir=Gi.duration;return an.forEach((Pr,mo)=>{const Mo=Xi>0?mo==nr?1:Xi*mo:Pt[mo],kr=Mo*Ir;S.currentTime=Bi+Gi.delay+kr,Gi.duration=kr,this._validateStyleAst(Pr,S),Pr.offset=Mo,G.styles.push(Pr)}),G}visitReference(M,S){return{type:8,animation:Pi(this,Lt(M.animation),S),options:pr(M.options)}}visitAnimateChild(M,S){return S.depCount++,{type:9,options:pr(M.options)}}visitAnimateRef(M,S){return{type:10,animation:this.visitReference(M.animation,S),options:pr(M.options)}}visitQuery(M,S){const G=S.currentQuerySelector,ue=M.options||{};S.queryCount++,S.currentQuery=M;const[Re,Pt]=function mi(X){const M=!!X.split(/\s*,\s*/).find(S=>":self"==S);return M&&(X=X.replace(Gt,"")),X=X.replace(/@\*/g,ct).replace(/@\w+/g,S=>ct+"-"+S.slice(1)).replace(/:animating/g,_i),[X,M]}(M.selector);S.currentQuerySelector=G.length?G+" "+Re:Re,tn(S.collectedStyles,S.currentQuerySelector,new Map);const Rt=Pi(this,Lt(M.animation),S);return S.currentQuery=null,S.currentQuerySelector=G,{type:11,selector:Re,limit:ue.limit||0,optional:!!ue.optional,includeSelf:Pt,animation:Rt,originalSelector:M.selector,options:pr(M.options)}}visitStagger(M,S){S.currentQuery||S.errors.push(function we(){return new _.vHH(3013,!1)}());const G="full"===M.timings?{duration:0,delay:0,easing:"full"}:ft(M.timings,S.errors,!0);return{type:12,animation:Pi(this,Lt(M.animation),S),timings:G,options:null}}}class vr{constructor(M){this.errors=M,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function pr(X){return X?(X=wn(X)).params&&(X.params=function Ki(X){return X?wn(X):null}(X.params)):X={},X}function Yr(X,M,S){return{duration:X,delay:M,easing:S}}function Es(X,M,S,G,ue,Re,Pt=null,Rt=!1){return{type:1,element:X,keyframes:M,preStyleProps:S,postStyleProps:G,duration:ue,delay:Re,totalTime:ue+Re,easing:Pt,subTimeline:Rt}}class Cs{constructor(){this._map=new Map}get(M){return this._map.get(M)||[]}append(M,S){let G=this._map.get(M);G||this._map.set(M,G=[]),G.push(...S)}has(M){return this._map.has(M)}clear(){this._map.clear()}}const kl=new RegExp(":enter","g"),Na=new RegExp(":leave","g");function za(X,M,S,G,ue,Re=new Map,Pt=new Map,Rt,ln,Vn=[]){return(new tl).buildKeyframes(X,M,S,G,ue,Re,Pt,Rt,ln,Vn)}class tl{buildKeyframes(M,S,G,ue,Re,Pt,Rt,ln,Vn,an=[]){Vn=Vn||new Cs;const hi=new Fr(M,S,Vn,ue,Re,an,[]);hi.options=ln;const Xi=ln.delay?Qt(ln.delay):0;hi.currentTimeline.delayNextStep(Xi),hi.currentTimeline.setStyles([Pt],null,hi.errors,ln),Pi(this,G,hi);const nr=hi.timelines.filter(Bi=>Bi.containsAnimation());if(nr.length&&Rt.size){let Bi;for(let Gi=nr.length-1;Gi>=0;Gi--){const Ir=nr[Gi];if(Ir.element===S){Bi=Ir;break}}Bi&&!Bi.allowOnlyTimelineStyles()&&Bi.setStyles([Rt],null,hi.errors,ln)}return nr.length?nr.map(Bi=>Bi.buildKeyframes()):[Es(S,[],[],[],0,Xi,"",!1)]}visitTrigger(M,S){}visitState(M,S){}visitTransition(M,S){}visitAnimateChild(M,S){const G=S.subInstructions.get(S.element);if(G){const ue=S.createSubContext(M.options),Re=S.currentTimeline.currentTime,Pt=this._visitSubInstructions(G,ue,ue.options);Re!=Pt&&S.transformIntoNewTimeline(Pt)}S.previousNode=M}visitAnimateRef(M,S){const G=S.createSubContext(M.options);G.transformIntoNewTimeline(),this._applyAnimationRefDelays([M.options,M.animation.options],S,G),this.visitReference(M.animation,G),S.transformIntoNewTimeline(G.currentTimeline.currentTime),S.previousNode=M}_applyAnimationRefDelays(M,S,G){for(const ue of M){const Re=ue?.delay;if(Re){const Pt="number"==typeof Re?Re:Qt(fe(Re,ue?.params??{},S.errors));G.delayNextStep(Pt)}}}_visitSubInstructions(M,S,G){let Re=S.currentTimeline.currentTime;const Pt=null!=G.duration?Qt(G.duration):null,Rt=null!=G.delay?Qt(G.delay):null;return 0!==Pt&&M.forEach(ln=>{const Vn=S.appendInstructionToTimeline(ln,Pt,Rt);Re=Math.max(Re,Vn.duration+Vn.delay)}),Re}visitReference(M,S){S.updateOptions(M.options,!0),Pi(this,M.animation,S),S.previousNode=M}visitSequence(M,S){const G=S.subContextCount;let ue=S;const Re=M.options;if(Re&&(Re.params||Re.delay)&&(ue=S.createSubContext(Re),ue.transformIntoNewTimeline(),null!=Re.delay)){6==ue.previousNode.type&&(ue.currentTimeline.snapshotCurrentStyles(),ue.previousNode=Io);const Pt=Qt(Re.delay);ue.delayNextStep(Pt)}M.steps.length&&(M.steps.forEach(Pt=>Pi(this,Pt,ue)),ue.currentTimeline.applyStylesToKeyframe(),ue.subContextCount>G&&ue.transformIntoNewTimeline()),S.previousNode=M}visitGroup(M,S){const G=[];let ue=S.currentTimeline.currentTime;const Re=M.options&&M.options.delay?Qt(M.options.delay):0;M.steps.forEach(Pt=>{const Rt=S.createSubContext(M.options);Re&&Rt.delayNextStep(Re),Pi(this,Pt,Rt),ue=Math.max(ue,Rt.currentTimeline.currentTime),G.push(Rt.currentTimeline)}),G.forEach(Pt=>S.currentTimeline.mergeTimelineCollectedStyles(Pt)),S.transformIntoNewTimeline(ue),S.previousNode=M}_visitTiming(M,S){if(M.dynamic){const G=M.strValue;return ft(S.params?fe(G,S.params,S.errors):G,S.errors)}return{duration:M.duration,delay:M.delay,easing:M.easing}}visitAnimate(M,S){const G=S.currentAnimateTimings=this._visitTiming(M.timings,S),ue=S.currentTimeline;G.delay&&(S.incrementTime(G.delay),ue.snapshotCurrentStyles());const Re=M.style;5==Re.type?this.visitKeyframes(Re,S):(S.incrementTime(G.duration),this.visitStyle(Re,S),ue.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=M}visitStyle(M,S){const G=S.currentTimeline,ue=S.currentAnimateTimings;!ue&&G.hasCurrentStyleProperties()&&G.forwardFrame();const Re=ue&&ue.easing||M.easing;M.isEmptyStep?G.applyEmptyStep(Re):G.setStyles(M.styles,Re,S.errors,S.options),S.previousNode=M}visitKeyframes(M,S){const G=S.currentAnimateTimings,ue=S.currentTimeline.duration,Re=G.duration,Rt=S.createSubContext().currentTimeline;Rt.easing=G.easing,M.styles.forEach(ln=>{Rt.forwardTime((ln.offset||0)*Re),Rt.setStyles(ln.styles,ln.easing,S.errors,S.options),Rt.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(Rt),S.transformIntoNewTimeline(ue+Re),S.previousNode=M}visitQuery(M,S){const G=S.currentTimeline.currentTime,ue=M.options||{},Re=ue.delay?Qt(ue.delay):0;Re&&(6===S.previousNode.type||0==G&&S.currentTimeline.hasCurrentStyleProperties())&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=Io);let Pt=G;const Rt=S.invokeQuery(M.selector,M.originalSelector,M.limit,M.includeSelf,!!ue.optional,S.errors);S.currentQueryTotal=Rt.length;let ln=null;Rt.forEach((Vn,an)=>{S.currentQueryIndex=an;const hi=S.createSubContext(M.options,Vn);Re&&hi.delayNextStep(Re),Vn===S.element&&(ln=hi.currentTimeline),Pi(this,M.animation,hi),hi.currentTimeline.applyStylesToKeyframe(),Pt=Math.max(Pt,hi.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(Pt),ln&&(S.currentTimeline.mergeTimelineCollectedStyles(ln),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=M}visitStagger(M,S){const G=S.parentContext,ue=S.currentTimeline,Re=M.timings,Pt=Math.abs(Re.duration),Rt=Pt*(S.currentQueryTotal-1);let ln=Pt*S.currentQueryIndex;switch(Re.duration<0?"reverse":Re.easing){case"reverse":ln=Rt-ln;break;case"full":ln=G.currentStaggerTime}const an=S.currentTimeline;ln&&an.delayNextStep(ln);const hi=an.currentTime;Pi(this,M.animation,S),S.previousNode=M,G.currentStaggerTime=ue.currentTime-hi+(ue.startTime-G.currentTimeline.startTime)}}const Io={};class Fr{constructor(M,S,G,ue,Re,Pt,Rt,ln){this._driver=M,this.element=S,this.subInstructions=G,this._enterClassName=ue,this._leaveClassName=Re,this.errors=Pt,this.timelines=Rt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Io,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ln||new Os(this._driver,S,0),Rt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(M,S){if(!M)return;const G=M;let ue=this.options;null!=G.duration&&(ue.duration=Qt(G.duration)),null!=G.delay&&(ue.delay=Qt(G.delay));const Re=G.params;if(Re){let Pt=ue.params;Pt||(Pt=this.options.params={}),Object.keys(Re).forEach(Rt=>{(!S||!Pt.hasOwnProperty(Rt))&&(Pt[Rt]=fe(Re[Rt],Pt,this.errors))})}}_copyOptions(){const M={};if(this.options){const S=this.options.params;if(S){const G=M.params={};Object.keys(S).forEach(ue=>{G[ue]=S[ue]})}}return M}createSubContext(M=null,S,G){const ue=S||this.element,Re=new Fr(this._driver,ue,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ue,G||0));return Re.previousNode=this.previousNode,Re.currentAnimateTimings=this.currentAnimateTimings,Re.options=this._copyOptions(),Re.updateOptions(M),Re.currentQueryIndex=this.currentQueryIndex,Re.currentQueryTotal=this.currentQueryTotal,Re.parentContext=this,this.subContextCount++,Re}transformIntoNewTimeline(M){return this.previousNode=Io,this.currentTimeline=this.currentTimeline.fork(this.element,M),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(M,S,G){const ue={duration:S??M.duration,delay:this.currentTimeline.currentTime+(G??0)+M.delay,easing:""},Re=new xa(this._driver,M.element,M.keyframes,M.preStyleProps,M.postStyleProps,ue,M.stretchStartingKeyframe);return this.timelines.push(Re),ue}incrementTime(M){this.currentTimeline.forwardTime(this.currentTimeline.duration+M)}delayNextStep(M){M>0&&this.currentTimeline.delayNextStep(M)}invokeQuery(M,S,G,ue,Re,Pt){let Rt=[];if(ue&&Rt.push(this.element),M.length>0){M=(M=M.replace(kl,"."+this._enterClassName)).replace(Na,"."+this._leaveClassName);let Vn=this._driver.query(this.element,M,1!=G);0!==G&&(Vn=G<0?Vn.slice(Vn.length+G,Vn.length):Vn.slice(0,G)),Rt.push(...Vn)}return!Re&&0==Rt.length&&Pt.push(function At(X){return new _.vHH(3014,!1)}()),Rt}}class Os{constructor(M,S,G,ue){this._driver=M,this.element=S,this.startTime=G,this._elementTimelineStylesLookup=ue,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(M){const S=1===this._keyframes.size&&this._pendingStyles.size;this.duration||S?(this.forwardTime(this.currentTime+M),S&&this.snapshotCurrentStyles()):this.startTime+=M}fork(M,S){return this.applyStylesToKeyframe(),new Os(this._driver,M,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(M){this.applyStylesToKeyframe(),this.duration=M,this._loadKeyframe()}_updateStyle(M,S){this._localTimelineStyles.set(M,S),this._globalTimelineStyles.set(M,S),this._styleSummary.set(M,{time:this.currentTime,value:S})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(M){M&&this._previousKeyframe.set("easing",M);for(let[S,G]of this._globalTimelineStyles)this._backFill.set(S,G||a.l3),this._currentKeyframe.set(S,a.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(M,S,G,ue){S&&this._previousKeyframe.set("easing",S);const Re=ue&&ue.params||{},Pt=function yo(X,M){const S=new Map;let G;return X.forEach(ue=>{if("*"===ue){G=G||M.keys();for(let Re of G)S.set(Re,a.l3)}else oe(ue,S)}),S}(M,this._globalTimelineStyles);for(let[Rt,ln]of Pt){const Vn=fe(ln,Re,G);this._pendingStyles.set(Rt,Vn),this._localTimelineStyles.has(Rt)||this._backFill.set(Rt,this._globalTimelineStyles.get(Rt)??a.l3),this._updateStyle(Rt,Vn)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((M,S)=>{this._currentKeyframe.set(S,M)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((M,S)=>{this._currentKeyframe.has(S)||this._currentKeyframe.set(S,M)}))}snapshotCurrentStyles(){for(let[M,S]of this._localTimelineStyles)this._pendingStyles.set(M,S),this._updateStyle(M,S)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const M=[];for(let S in this._currentKeyframe)M.push(S);return M}mergeTimelineCollectedStyles(M){M._styleSummary.forEach((S,G)=>{const ue=this._styleSummary.get(G);(!ue||S.time>ue.time)&&this._updateStyle(G,S.value)})}buildKeyframes(){this.applyStylesToKeyframe();const M=new Set,S=new Set,G=1===this._keyframes.size&&0===this.duration;let ue=[];this._keyframes.forEach((Rt,ln)=>{const Vn=oe(Rt,new Map,this._backFill);Vn.forEach((an,hi)=>{an===a.k1?M.add(hi):an===a.l3&&S.add(hi)}),G||Vn.set("offset",ln/this.duration),ue.push(Vn)});const Re=M.size?Ue(M.values()):[],Pt=S.size?Ue(S.values()):[];if(G){const Rt=ue[0],ln=new Map(Rt);Rt.set("offset",0),ln.set("offset",1),ue=[Rt,ln]}return Es(this.element,ue,Re,Pt,this.duration,this.startTime,this.easing,!1)}}class xa extends Os{constructor(M,S,G,ue,Re,Pt,Rt=!1){super(M,S,Pt.delay),this.keyframes=G,this.preStyleProps=ue,this.postStyleProps=Re,this._stretchStartingKeyframe=Rt,this.timings={duration:Pt.duration,delay:Pt.delay,easing:Pt.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let M=this.keyframes,{delay:S,duration:G,easing:ue}=this.timings;if(this._stretchStartingKeyframe&&S){const Re=[],Pt=G+S,Rt=S/Pt,ln=oe(M[0]);ln.set("offset",0),Re.push(ln);const Vn=oe(M[0]);Vn.set("offset",to(Rt)),Re.push(Vn);const an=M.length-1;for(let hi=1;hi<=an;hi++){let Xi=oe(M[hi]);const nr=Xi.get("offset");Xi.set("offset",to((S+nr*G)/Pt)),Re.push(Xi)}G=Pt,S=0,ue="",M=Re}return Es(this.element,M,this.preStyleProps,this.postStyleProps,G,S,ue,!0)}}function to(X,M=3){const S=Math.pow(10,M-1);return Math.round(X*S)/S}class oa{}const sa=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class No extends oa{normalizePropertyName(M,S){return Sn(M)}normalizeStyleValue(M,S,G,ue){let Re="";const Pt=G.toString().trim();if(sa.has(S)&&0!==G&&"0"!==G)if("number"==typeof G)Re="px";else{const Rt=G.match(/^[+-]?[\d\.]+([a-z]*)$/);Rt&&0==Rt[1].length&&ue.push(function Et(X,M){return new _.vHH(3005,!1)}())}return Pt+Re}}function aa(X,M,S,G,ue,Re,Pt,Rt,ln,Vn,an,hi,Xi){return{type:0,element:X,triggerName:M,isRemovalTransition:ue,fromState:S,fromStyles:Re,toState:G,toStyles:Pt,timelines:Rt,queriedElements:ln,preStyleProps:Vn,postStyleProps:an,totalTime:hi,errors:Xi}}const oo={};class ms{constructor(M,S,G){this._triggerName=M,this.ast=S,this._stateStyles=G}match(M,S,G,ue){return function jo(X,M,S,G,ue){return X.some(Re=>Re(M,S,G,ue))}(this.ast.matchers,M,S,G,ue)}buildStyles(M,S,G){let ue=this._stateStyles.get("*");return void 0!==M&&(ue=this._stateStyles.get(M?.toString())||ue),ue?ue.buildStyles(S,G):new Map}build(M,S,G,ue,Re,Pt,Rt,ln,Vn,an){const hi=[],Xi=this.ast.options&&this.ast.options.params||oo,Bi=this.buildStyles(G,Rt&&Rt.params||oo,hi),Gi=ln&&ln.params||oo,Ir=this.buildStyles(ue,Gi,hi),Pr=new Set,mo=new Map,Mo=new Map,kr="void"===ue,Ks={params:Rs(Gi,Xi),delay:this.ast.options?.delay},ls=an?[]:za(M,S,this.ast.animation,Re,Pt,Bi,Ir,Ks,Vn,hi);let Fo=0;if(ls.forEach(fa=>{Fo=Math.max(fa.duration+fa.delay,Fo)}),hi.length)return aa(S,this._triggerName,G,ue,kr,Bi,Ir,[],[],mo,Mo,Fo,hi);ls.forEach(fa=>{const Ko=fa.element,Za=tn(mo,Ko,new Set);fa.preStyleProps.forEach(Sa=>Za.add(Sa));const Xo=tn(Mo,Ko,new Set);fa.postStyleProps.forEach(Sa=>Xo.add(Sa)),Ko!==S&&Pr.add(Ko)});const zr=Ue(Pr.values());return aa(S,this._triggerName,G,ue,kr,Bi,Ir,ls,zr,mo,Mo,Fo)}}function Rs(X,M){const S=wn(M);for(const G in X)X.hasOwnProperty(G)&&null!=X[G]&&(S[G]=X[G]);return S}class ks{constructor(M,S,G){this.styles=M,this.defaultParams=S,this.normalizer=G}buildStyles(M,S){const G=new Map,ue=wn(this.defaultParams);return Object.keys(M).forEach(Re=>{const Pt=M[Re];null!==Pt&&(ue[Re]=Pt)}),this.styles.styles.forEach(Re=>{"string"!=typeof Re&&Re.forEach((Pt,Rt)=>{Pt&&(Pt=fe(Pt,ue,S));const ln=this.normalizer.normalizePropertyName(Rt,S);Pt=this.normalizer.normalizeStyleValue(Rt,ln,Pt,S),G.set(ln,Pt)})}),G}}class Ls{constructor(M,S,G){this.name=M,this.ast=S,this._normalizer=G,this.transitionFactories=[],this.states=new Map,S.states.forEach(ue=>{this.states.set(ue.name,new ks(ue.style,ue.options&&ue.options.params||{},G))}),wa(this.states,"true","1"),wa(this.states,"false","0"),S.transitions.forEach(ue=>{this.transitionFactories.push(new ms(M,ue,this.states))}),this.fallbackTransition=function Ho(X,M,S){return new ms(X,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Pt,Rt)=>!0],options:null,queryCount:0,depCount:0},M)}(M,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(M,S,G,ue){return this.transitionFactories.find(Pt=>Pt.match(M,S,G,ue))||null}matchStyles(M,S,G){return this.fallbackTransition.buildStyles(M,S,G)}}function wa(X,M,S){X.has(M)?X.has(S)||X.set(S,X.get(M)):X.has(S)&&X.set(M,X.get(S))}const nl=new Cs;class ts{constructor(M,S,G){this.bodyNode=M,this._driver=S,this._normalizer=G,this._animations=new Map,this._playersById=new Map,this.players=[]}register(M,S){const G=[],Re=Ln(this._driver,S,G,[]);if(G.length)throw function yt(X){return new _.vHH(3503,!1)}();this._animations.set(M,Re)}_buildPlayer(M,S,G){const ue=M.element,Re=ce(0,this._normalizer,0,M.keyframes,S,G);return this._driver.animate(ue,Re,M.duration,M.delay,M.easing,[],!0)}create(M,S,G={}){const ue=[],Re=this._animations.get(M);let Pt;const Rt=new Map;if(Re?(Pt=za(this._driver,S,Re,ji,dn,new Map,new Map,G,nl,ue),Pt.forEach(an=>{const hi=tn(Rt,an.element,new Map);an.postStyleProps.forEach(Xi=>hi.set(Xi,null))})):(ue.push(function Tn(){return new _.vHH(3300,!1)}()),Pt=[]),ue.length)throw function Xt(X){return new _.vHH(3504,!1)}();Rt.forEach((an,hi)=>{an.forEach((Xi,nr)=>{an.set(nr,this._driver.computeStyle(hi,nr,a.l3))})});const Vn=Xe(Pt.map(an=>{const hi=Rt.get(an.element);return this._buildPlayer(an,new Map,hi)}));return this._playersById.set(M,Vn),Vn.onDestroy(()=>this.destroy(M)),this.players.push(Vn),Vn}destroy(M){const S=this._getPlayer(M);S.destroy(),this._playersById.delete(M);const G=this.players.indexOf(S);G>=0&&this.players.splice(G,1)}_getPlayer(M){const S=this._playersById.get(M);if(!S)throw function ii(X){return new _.vHH(3301,!1)}();return S}listen(M,S,G,ue){const Re=St(S,"","","");return ot(this._getPlayer(M),G,Re,ue),()=>{}}command(M,S,G,ue){if("register"==G)return void this.register(M,ue[0]);if("create"==G)return void this.create(M,S,ue[0]||{});const Re=this._getPlayer(M);switch(G){case"play":Re.play();break;case"pause":Re.pause();break;case"reset":Re.reset();break;case"restart":Re.restart();break;case"finish":Re.finish();break;case"init":Re.init();break;case"setPosition":Re.setPosition(parseFloat(ue[0]));break;case"destroy":this.destroy(M)}}}const Ms="ng-animate-queued",Kr="ng-animate-disabled",il=[],Br={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Lo="__ng_removed";class Go{constructor(M,S=""){this.namespaceId=S;const G=M&&M.hasOwnProperty("value");if(this.value=function Fs(X){return X??null}(G?M.value:M),G){const Re=wn(M);delete Re.value,this.options=Re}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(M){const S=M.params;if(S){const G=this.options.params;Object.keys(S).forEach(ue=>{null==G[ue]&&(G[ue]=S[ue])})}}}const vo="void",Ua=new Go(vo);class Zs{constructor(M,S,G){this.id=M,this.hostElement=S,this._engine=G,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+M,Co(S,this._hostClassName)}listen(M,S,G,ue){if(!this._triggers.has(S))throw function vi(X,M){return new _.vHH(3302,!1)}();if(null==G||0==G.length)throw function wi(X){return new _.vHH(3303,!1)}();if(!function is(X){return"start"==X||"done"==X}(G))throw function Nn(X,M){return new _.vHH(3400,!1)}();const Re=tn(this._elementListeners,M,[]),Pt={name:S,phase:G,callback:ue};Re.push(Pt);const Rt=tn(this._engine.statesByElement,M,new Map);return Rt.has(S)||(Co(M,It),Co(M,It+"-"+S),Rt.set(S,Ua)),()=>{this._engine.afterFlush(()=>{const ln=Re.indexOf(Pt);ln>=0&&Re.splice(ln,1),this._triggers.has(S)||Rt.delete(S)})}}register(M,S){return!this._triggers.has(M)&&(this._triggers.set(M,S),!0)}_getTrigger(M){const S=this._triggers.get(M);if(!S)throw function Li(X){return new _.vHH(3401,!1)}();return S}trigger(M,S,G,ue=!0){const Re=this._getTrigger(S),Pt=new dr(this.id,S,M);let Rt=this._engine.statesByElement.get(M);Rt||(Co(M,It),Co(M,It+"-"+S),this._engine.statesByElement.set(M,Rt=new Map));let ln=Rt.get(S);const Vn=new Go(G,this.id);if(!(G&&G.hasOwnProperty("value"))&&ln&&Vn.absorbOptions(ln.options),Rt.set(S,Vn),ln||(ln=Ua),Vn.value!==vo&&ln.value===Vn.value){if(!function Ds(X,M){const S=Object.keys(X),G=Object.keys(M);if(S.length!=G.length)return!1;for(let ue=0;ue<S.length;ue++){const Re=S[ue];if(!M.hasOwnProperty(Re)||X[Re]!==M[Re])return!1}return!0}(ln.params,Vn.params)){const Gi=[],Ir=Re.matchStyles(ln.value,ln.params,Gi),Pr=Re.matchStyles(Vn.value,Vn.params,Gi);Gi.length?this._engine.reportError(Gi):this._engine.afterFlush(()=>{Ft(M,Ir),ut(M,Pr)})}return}const Xi=tn(this._engine.playersByElement,M,[]);Xi.forEach(Gi=>{Gi.namespaceId==this.id&&Gi.triggerName==S&&Gi.queued&&Gi.destroy()});let nr=Re.matchTransition(ln.value,Vn.value,M,Vn.params),Bi=!1;if(!nr){if(!ue)return;nr=Re.fallbackTransition,Bi=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:M,triggerName:S,transition:nr,fromState:ln,toState:Vn,player:Pt,isFallbackTransition:Bi}),Bi||(Co(M,Ms),Pt.onStart(()=>{Ea(M,Ms)})),Pt.onDone(()=>{let Gi=this.players.indexOf(Pt);Gi>=0&&this.players.splice(Gi,1);const Ir=this._engine.playersByElement.get(M);if(Ir){let Pr=Ir.indexOf(Pt);Pr>=0&&Ir.splice(Pr,1)}}),this.players.push(Pt),Xi.push(Pt),Pt}deregister(M){this._triggers.delete(M),this._engine.statesByElement.forEach(S=>S.delete(M)),this._elementListeners.forEach((S,G)=>{this._elementListeners.set(G,S.filter(ue=>ue.name!=M))})}clearElementCache(M){this._engine.statesByElement.delete(M),this._elementListeners.delete(M);const S=this._engine.playersByElement.get(M);S&&(S.forEach(G=>G.destroy()),this._engine.playersByElement.delete(M))}_signalRemovalForInnerTriggers(M,S){const G=this._engine.driver.query(M,ct,!0);G.forEach(ue=>{if(ue[Lo])return;const Re=this._engine.fetchNamespacesByElement(ue);Re.size?Re.forEach(Pt=>Pt.triggerLeaveAnimation(ue,S,!1,!0)):this.clearElementCache(ue)}),this._engine.afterFlushAnimationsDone(()=>G.forEach(ue=>this.clearElementCache(ue)))}triggerLeaveAnimation(M,S,G,ue){const Re=this._engine.statesByElement.get(M),Pt=new Map;if(Re){const Rt=[];if(Re.forEach((ln,Vn)=>{if(Pt.set(Vn,ln.value),this._triggers.has(Vn)){const an=this.trigger(M,Vn,vo,ue);an&&Rt.push(an)}}),Rt.length)return this._engine.markElementAsRemoved(this.id,M,!0,S,Pt),G&&Xe(Rt).onDone(()=>this._engine.processLeaveNode(M)),!0}return!1}prepareLeaveAnimationListeners(M){const S=this._elementListeners.get(M),G=this._engine.statesByElement.get(M);if(S&&G){const ue=new Set;S.forEach(Re=>{const Pt=Re.name;if(ue.has(Pt))return;ue.add(Pt);const ln=this._triggers.get(Pt).fallbackTransition,Vn=G.get(Pt)||Ua,an=new Go(vo),hi=new dr(this.id,Pt,M);this._engine.totalQueuedPlayers++,this._queue.push({element:M,triggerName:Pt,transition:ln,fromState:Vn,toState:an,player:hi,isFallbackTransition:!0})})}}removeNode(M,S){const G=this._engine;if(M.childElementCount&&this._signalRemovalForInnerTriggers(M,S),this.triggerLeaveAnimation(M,S,!0))return;let ue=!1;if(G.totalAnimations){const Re=G.players.length?G.playersByQueriedElement.get(M):[];if(Re&&Re.length)ue=!0;else{let Pt=M;for(;Pt=Pt.parentNode;)if(G.statesByElement.get(Pt)){ue=!0;break}}}if(this.prepareLeaveAnimationListeners(M),ue)G.markElementAsRemoved(this.id,M,!1,S);else{const Re=M[Lo];(!Re||Re===Br)&&(G.afterFlush(()=>this.clearElementCache(M)),G.destroyInnerAnimations(M),G._onRemovalComplete(M,S))}}insertNode(M,S){Co(M,this._hostClassName)}drainQueuedTransitions(M){const S=[];return this._queue.forEach(G=>{const ue=G.player;if(ue.destroyed)return;const Re=G.element,Pt=this._elementListeners.get(Re);Pt&&Pt.forEach(Rt=>{if(Rt.name==G.triggerName){const ln=St(Re,G.triggerName,G.fromState.value,G.toState.value);ln._data=M,ot(G.player,Rt.phase,ln,Rt.callback)}}),ue.markedForDestroy?this._engine.afterFlush(()=>{ue.destroy()}):S.push(G)}),this._queue=[],S.sort((G,ue)=>{const Re=G.transition.ast.depCount,Pt=ue.transition.ast.depCount;return 0==Re||0==Pt?Re-Pt:this._engine.driver.containsElement(G.element,ue.element)?1:-1})}destroy(M){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,M)}elementContainsData(M){let S=!1;return this._elementListeners.has(M)&&(S=!0),S=!!this._queue.find(G=>G.element===M)||S,S}}class ca{constructor(M,S,G){this.bodyNode=M,this.driver=S,this._normalizer=G,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ue,Re)=>{}}_onRemovalComplete(M,S){this.onRemovalComplete(M,S)}get queuedPlayers(){const M=[];return this._namespaceList.forEach(S=>{S.players.forEach(G=>{G.queued&&M.push(G)})}),M}createNamespace(M,S){const G=new Zs(M,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(G,S):(this.newHostElements.set(S,G),this.collectEnterElement(S)),this._namespaceLookup[M]=G}_balanceNamespaceList(M,S){const G=this._namespaceList,ue=this.namespacesByHostElement;if(G.length-1>=0){let Pt=!1,Rt=this.driver.getParentElement(S);for(;Rt;){const ln=ue.get(Rt);if(ln){const Vn=G.indexOf(ln);G.splice(Vn+1,0,M),Pt=!0;break}Rt=this.driver.getParentElement(Rt)}Pt||G.unshift(M)}else G.push(M);return ue.set(S,M),M}register(M,S){let G=this._namespaceLookup[M];return G||(G=this.createNamespace(M,S)),G}registerTrigger(M,S,G){let ue=this._namespaceLookup[M];ue&&ue.register(S,G)&&this.totalAnimations++}destroy(M,S){if(!M)return;const G=this._fetchNamespace(M);this.afterFlush(()=>{this.namespacesByHostElement.delete(G.hostElement),delete this._namespaceLookup[M];const ue=this._namespaceList.indexOf(G);ue>=0&&this._namespaceList.splice(ue,1)}),this.afterFlushAnimationsDone(()=>G.destroy(S))}_fetchNamespace(M){return this._namespaceLookup[M]}fetchNamespacesByElement(M){const S=new Set,G=this.statesByElement.get(M);if(G)for(let ue of G.values())if(ue.namespaceId){const Re=this._fetchNamespace(ue.namespaceId);Re&&S.add(Re)}return S}trigger(M,S,G,ue){if(Ws(S)){const Re=this._fetchNamespace(M);if(Re)return Re.trigger(S,G,ue),!0}return!1}insertNode(M,S,G,ue){if(!Ws(S))return;const Re=S[Lo];if(Re&&Re.setForRemoval){Re.setForRemoval=!1,Re.setForMove=!0;const Pt=this.collectedLeaveElements.indexOf(S);Pt>=0&&this.collectedLeaveElements.splice(Pt,1)}if(M){const Pt=this._fetchNamespace(M);Pt&&Pt.insertNode(S,G)}ue&&this.collectEnterElement(S)}collectEnterElement(M){this.collectedEnterElements.push(M)}markElementAsDisabled(M,S){S?this.disabledNodes.has(M)||(this.disabledNodes.add(M),Co(M,Kr)):this.disabledNodes.has(M)&&(this.disabledNodes.delete(M),Ea(M,Kr))}removeNode(M,S,G,ue){if(Ws(S)){const Re=M?this._fetchNamespace(M):null;if(Re?Re.removeNode(S,ue):this.markElementAsRemoved(M,S,!1,ue),G){const Pt=this.namespacesByHostElement.get(S);Pt&&Pt.id!==M&&Pt.removeNode(S,ue)}}else this._onRemovalComplete(S,ue)}markElementAsRemoved(M,S,G,ue,Re){this.collectedLeaveElements.push(S),S[Lo]={namespaceId:M,setForRemoval:ue,hasAnimation:G,removedBeforeQueried:!1,previousTriggersValues:Re}}listen(M,S,G,ue,Re){return Ws(S)?this._fetchNamespace(M).listen(S,G,ue,Re):()=>{}}_buildInstruction(M,S,G,ue,Re){return M.transition.build(this.driver,M.element,M.fromState.value,M.toState.value,G,ue,M.fromState.options,M.toState.options,S,Re)}destroyInnerAnimations(M){let S=this.driver.query(M,ct,!0);S.forEach(G=>this.destroyActiveAnimationsForElement(G)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(M,_i,!0),S.forEach(G=>this.finishActiveQueriedAnimationOnElement(G)))}destroyActiveAnimationsForElement(M){const S=this.playersByElement.get(M);S&&S.forEach(G=>{G.queued?G.markedForDestroy=!0:G.destroy()})}finishActiveQueriedAnimationOnElement(M){const S=this.playersByQueriedElement.get(M);S&&S.forEach(G=>G.finish())}whenRenderingDone(){return new Promise(M=>{if(this.players.length)return Xe(this.players).onDone(()=>M());M()})}processLeaveNode(M){const S=M[Lo];if(S&&S.setForRemoval){if(M[Lo]=Br,S.namespaceId){this.destroyInnerAnimations(M);const G=this._fetchNamespace(S.namespaceId);G&&G.clearElementCache(M)}this._onRemovalComplete(M,S.setForRemoval)}M.classList?.contains(Kr)&&this.markElementAsDisabled(M,!1),this.driver.query(M,".ng-animate-disabled",!0).forEach(G=>{this.markElementAsDisabled(G,!1)})}flush(M=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((G,ue)=>this._balanceNamespaceList(G,ue)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let G=0;G<this.collectedEnterElements.length;G++)Co(this.collectedEnterElements[G],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const G=[];try{S=this._flushAnimations(G,M)}finally{for(let ue=0;ue<G.length;ue++)G[ue]()}}else for(let G=0;G<this.collectedLeaveElements.length;G++)this.processLeaveNode(this.collectedLeaveElements[G]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(G=>G()),this._flushFns=[],this._whenQuietFns.length){const G=this._whenQuietFns;this._whenQuietFns=[],S.length?Xe(S).onDone(()=>{G.forEach(ue=>ue())}):G.forEach(ue=>ue())}}reportError(M){throw function Jn(X){return new _.vHH(3402,!1)}()}_flushAnimations(M,S){const G=new Cs,ue=[],Re=new Map,Pt=[],Rt=new Map,ln=new Map,Vn=new Map,an=new Set;this.disabledNodes.forEach(Ai=>{an.add(Ai);const Ni=this.driver.query(Ai,".ng-animate-queued",!0);for(let $i=0;$i<Ni.length;$i++)an.add(Ni[$i])});const hi=this.bodyNode,Xi=Array.from(this.statesByElement.keys()),nr=Hi(Xi,this.collectedEnterElements),Bi=new Map;let Gi=0;nr.forEach((Ai,Ni)=>{const $i=ji+Gi++;Bi.set(Ni,$i),Ai.forEach(cr=>Co(cr,$i))});const Ir=[],Pr=new Set,mo=new Set;for(let Ai=0;Ai<this.collectedLeaveElements.length;Ai++){const Ni=this.collectedLeaveElements[Ai],$i=Ni[Lo];$i&&$i.setForRemoval&&(Ir.push(Ni),Pr.add(Ni),$i.hasAnimation?this.driver.query(Ni,".ng-star-inserted",!0).forEach(cr=>Pr.add(cr)):mo.add(Ni))}const Mo=new Map,kr=Hi(Xi,Array.from(Pr));kr.forEach((Ai,Ni)=>{const $i=dn+Gi++;Mo.set(Ni,$i),Ai.forEach(cr=>Co(cr,$i))}),M.push(()=>{nr.forEach((Ai,Ni)=>{const $i=Bi.get(Ni);Ai.forEach(cr=>Ea(cr,$i))}),kr.forEach((Ai,Ni)=>{const $i=Mo.get(Ni);Ai.forEach(cr=>Ea(cr,$i))}),Ir.forEach(Ai=>{this.processLeaveNode(Ai)})});const Ks=[],ls=[];for(let Ai=this._namespaceList.length-1;Ai>=0;Ai--)this._namespaceList[Ai].drainQueuedTransitions(S).forEach($i=>{const cr=$i.player,Xr=$i.element;if(Ks.push(cr),this.collectedEnterElements.length){const ir=Xr[Lo];if(ir&&ir.setForMove){if(ir.previousTriggersValues&&ir.previousTriggersValues.has($i.triggerName)){const Wa=ir.previousTriggersValues.get($i.triggerName),Hr=this.statesByElement.get($i.element);if(Hr&&Hr.has($i.triggerName)){const Cc=Hr.get($i.triggerName);Cc.value=Wa,Hr.set($i.triggerName,Cc)}}return void cr.destroy()}}const io=!hi||!this.driver.containsElement(hi,Xr),cs=Mo.get(Xr),Vs=Bi.get(Xr),Tr=this._buildInstruction($i,G,Vs,cs,io);if(Tr.errors&&Tr.errors.length)return void ls.push(Tr);if(io)return cr.onStart(()=>Ft(Xr,Tr.fromStyles)),cr.onDestroy(()=>ut(Xr,Tr.toStyles)),void ue.push(cr);if($i.isFallbackTransition)return cr.onStart(()=>Ft(Xr,Tr.fromStyles)),cr.onDestroy(()=>ut(Xr,Tr.toStyles)),void ue.push(cr);const tc=[];Tr.timelines.forEach(ir=>{ir.stretchStartingKeyframe=!0,this.disabledNodes.has(ir.element)||tc.push(ir)}),Tr.timelines=tc,G.append(Xr,Tr.timelines),Pt.push({instruction:Tr,player:cr,element:Xr}),Tr.queriedElements.forEach(ir=>tn(Rt,ir,[]).push(cr)),Tr.preStyleProps.forEach((ir,Wa)=>{if(ir.size){let Hr=ln.get(Wa);Hr||ln.set(Wa,Hr=new Set),ir.forEach((Cc,nc)=>Hr.add(nc))}}),Tr.postStyleProps.forEach((ir,Wa)=>{let Hr=Vn.get(Wa);Hr||Vn.set(Wa,Hr=new Set),ir.forEach((Cc,nc)=>Hr.add(nc))})});if(ls.length){const Ai=[];ls.forEach(Ni=>{Ai.push(function Tt(X,M){return new _.vHH(3505,!1)}())}),Ks.forEach(Ni=>Ni.destroy()),this.reportError(Ai)}const Fo=new Map,zr=new Map;Pt.forEach(Ai=>{const Ni=Ai.element;G.has(Ni)&&(zr.set(Ni,Ni),this._beforeAnimationBuild(Ai.player.namespaceId,Ai.instruction,Fo))}),ue.forEach(Ai=>{const Ni=Ai.element;this._getPreviousPlayers(Ni,!1,Ai.namespaceId,Ai.triggerName,null).forEach(cr=>{tn(Fo,Ni,[]).push(cr),cr.destroy()})});const fa=Ir.filter(Ai=>Ma(Ai,ln,Vn)),Ko=new Map;xo(Ko,this.driver,mo,Vn,a.l3).forEach(Ai=>{Ma(Ai,ln,Vn)&&fa.push(Ai)});const Xo=new Map;nr.forEach((Ai,Ni)=>{xo(Xo,this.driver,new Set(Ai),ln,a.k1)}),fa.forEach(Ai=>{const Ni=Ko.get(Ai),$i=Xo.get(Ai);Ko.set(Ai,new Map([...Array.from(Ni?.entries()??[]),...Array.from($i?.entries()??[])]))});const Sa=[],gl=[],Aa={};Pt.forEach(Ai=>{const{element:Ni,player:$i,instruction:cr}=Ai;if(G.has(Ni)){if(an.has(Ni))return $i.onDestroy(()=>ut(Ni,cr.toStyles)),$i.disabled=!0,$i.overrideTotalTime(cr.totalTime),void ue.push($i);let Xr=Aa;if(zr.size>1){let cs=Ni;const Vs=[];for(;cs=cs.parentNode;){const Tr=zr.get(cs);if(Tr){Xr=Tr;break}Vs.push(cs)}Vs.forEach(Tr=>zr.set(Tr,Xr))}const io=this._buildAnimation($i.namespaceId,cr,Fo,Re,Xo,Ko);if($i.setRealPlayer(io),Xr===Aa)Sa.push($i);else{const cs=this.playersByElement.get(Xr);cs&&cs.length&&($i.parentPlayer=Xe(cs)),ue.push($i)}}else Ft(Ni,cr.fromStyles),$i.onDestroy(()=>ut(Ni,cr.toStyles)),gl.push($i),an.has(Ni)&&ue.push($i)}),gl.forEach(Ai=>{const Ni=Re.get(Ai.element);if(Ni&&Ni.length){const $i=Xe(Ni);Ai.setRealPlayer($i)}}),ue.forEach(Ai=>{Ai.parentPlayer?Ai.syncPlayerEvents(Ai.parentPlayer):Ai.destroy()});for(let Ai=0;Ai<Ir.length;Ai++){const Ni=Ir[Ai],$i=Ni[Lo];if(Ea(Ni,dn),$i&&$i.hasAnimation)continue;let cr=[];if(Rt.size){let io=Rt.get(Ni);io&&io.length&&cr.push(...io);let cs=this.driver.query(Ni,_i,!0);for(let Vs=0;Vs<cs.length;Vs++){let Tr=Rt.get(cs[Vs]);Tr&&Tr.length&&cr.push(...Tr)}}const Xr=cr.filter(io=>!io.destroyed);Xr.length?Ca(this,Ni,Xr):this.processLeaveNode(Ni)}return Ir.length=0,Sa.forEach(Ai=>{this.players.push(Ai),Ai.onDone(()=>{Ai.destroy();const Ni=this.players.indexOf(Ai);this.players.splice(Ni,1)}),Ai.play()}),Sa}elementContainsData(M,S){let G=!1;const ue=S[Lo];return ue&&ue.setForRemoval&&(G=!0),this.playersByElement.has(S)&&(G=!0),this.playersByQueriedElement.has(S)&&(G=!0),this.statesByElement.has(S)&&(G=!0),this._fetchNamespace(M).elementContainsData(S)||G}afterFlush(M){this._flushFns.push(M)}afterFlushAnimationsDone(M){this._whenQuietFns.push(M)}_getPreviousPlayers(M,S,G,ue,Re){let Pt=[];if(S){const Rt=this.playersByQueriedElement.get(M);Rt&&(Pt=Rt)}else{const Rt=this.playersByElement.get(M);if(Rt){const ln=!Re||Re==vo;Rt.forEach(Vn=>{Vn.queued||!ln&&Vn.triggerName!=ue||Pt.push(Vn)})}}return(G||ue)&&(Pt=Pt.filter(Rt=>!(G&&G!=Rt.namespaceId||ue&&ue!=Rt.triggerName))),Pt}_beforeAnimationBuild(M,S,G){const Re=S.element,Pt=S.isRemovalTransition?void 0:M,Rt=S.isRemovalTransition?void 0:S.triggerName;for(const ln of S.timelines){const Vn=ln.element,an=Vn!==Re,hi=tn(G,Vn,[]);this._getPreviousPlayers(Vn,an,Pt,Rt,S.toState).forEach(nr=>{const Bi=nr.getRealPlayer();Bi.beforeDestroy&&Bi.beforeDestroy(),nr.destroy(),hi.push(nr)})}Ft(Re,S.fromStyles)}_buildAnimation(M,S,G,ue,Re,Pt){const Rt=S.triggerName,ln=S.element,Vn=[],an=new Set,hi=new Set,Xi=S.timelines.map(Bi=>{const Gi=Bi.element;an.add(Gi);const Ir=Gi[Lo];if(Ir&&Ir.removedBeforeQueried)return new a.ZN(Bi.duration,Bi.delay);const Pr=Gi!==ln,mo=function Bs(X){const M=[];return rs(X,M),M}((G.get(Gi)||il).map(Fo=>Fo.getRealPlayer())).filter(Fo=>!!Fo.element&&Fo.element===Gi),Mo=Re.get(Gi),kr=Pt.get(Gi),Ks=ce(0,this._normalizer,0,Bi.keyframes,Mo,kr),ls=this._buildPlayer(Bi,Ks,mo);if(Bi.subTimeline&&ue&&hi.add(Gi),Pr){const Fo=new dr(M,Rt,Gi);Fo.setRealPlayer(ls),Vn.push(Fo)}return ls});Vn.forEach(Bi=>{tn(this.playersByQueriedElement,Bi.element,[]).push(Bi),Bi.onDone(()=>function mr(X,M,S){let G=X.get(M);if(G){if(G.length){const ue=G.indexOf(S);G.splice(ue,1)}0==G.length&&X.delete(M)}return G}(this.playersByQueriedElement,Bi.element,Bi))}),an.forEach(Bi=>Co(Bi,nn));const nr=Xe(Xi);return nr.onDestroy(()=>{an.forEach(Bi=>Ea(Bi,nn)),ut(ln,S.toStyles)}),hi.forEach(Bi=>{tn(ue,Bi,[]).push(nr)}),nr}_buildPlayer(M,S,G){return S.length>0?this.driver.animate(M.element,S,M.duration,M.delay,M.easing,G):new a.ZN(M.duration,M.delay)}}class dr{constructor(M,S,G){this.namespaceId=M,this.triggerName=S,this.element=G,this._player=new a.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(M){this._containsRealPlayer||(this._player=M,this._queuedCallbacks.forEach((S,G)=>{S.forEach(ue=>ot(M,G,void 0,ue))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(M.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(M){this.totalTime=M}syncPlayerEvents(M){const S=this._player;S.triggerCallback&&M.onStart(()=>S.triggerCallback("start")),M.onDone(()=>this.finish()),M.onDestroy(()=>this.destroy())}_queueEvent(M,S){tn(this._queuedCallbacks,M,[]).push(S)}onDone(M){this.queued&&this._queueEvent("done",M),this._player.onDone(M)}onStart(M){this.queued&&this._queueEvent("start",M),this._player.onStart(M)}onDestroy(M){this.queued&&this._queueEvent("destroy",M),this._player.onDestroy(M)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(M){this.queued||this._player.setPosition(M)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(M){const S=this._player;S.triggerCallback&&S.triggerCallback(M)}}function Ws(X){return X&&1===X.nodeType}function _s(X,M){const S=X.style.display;return X.style.display=M??"none",S}function xo(X,M,S,G,ue){const Re=[];S.forEach(ln=>Re.push(_s(ln)));const Pt=[];G.forEach((ln,Vn)=>{const an=new Map;ln.forEach(hi=>{const Xi=M.computeStyle(Vn,hi,ue);an.set(hi,Xi),(!Xi||0==Xi.length)&&(Vn[Lo]=hl,Pt.push(Vn))}),X.set(Vn,an)});let Rt=0;return S.forEach(ln=>_s(ln,Re[Rt++])),Pt}function Hi(X,M){const S=new Map;if(X.forEach(Rt=>S.set(Rt,[])),0==M.length)return S;const ue=new Set(M),Re=new Map;function Pt(Rt){if(!Rt)return 1;let ln=Re.get(Rt);if(ln)return ln;const Vn=Rt.parentNode;return ln=S.has(Vn)?Vn:ue.has(Vn)?1:Pt(Vn),Re.set(Rt,ln),ln}return M.forEach(Rt=>{const ln=Pt(Rt);1!==ln&&S.get(ln).push(Rt)}),S}function Co(X,M){X.classList?.add(M)}function Ea(X,M){X.classList?.remove(M)}function Ca(X,M,S){Xe(S).onDone(()=>X.processLeaveNode(M))}function rs(X,M){for(let S=0;S<X.length;S++){const G=X[S];G instanceof a.ZE?rs(G.players,M):M.push(G)}}function Ma(X,M,S){const G=S.get(X);if(!G)return!1;let ue=M.get(X);return ue?G.forEach(Re=>ue.add(Re)):M.set(X,G),S.delete(X),!0}class os{constructor(M,S,G){this.bodyNode=M,this._driver=S,this._normalizer=G,this._triggerCache={},this.onRemovalComplete=(ue,Re)=>{},this._transitionEngine=new ca(M,S,G),this._timelineEngine=new ts(M,S,G),this._transitionEngine.onRemovalComplete=(ue,Re)=>this.onRemovalComplete(ue,Re)}registerTrigger(M,S,G,ue,Re){const Pt=M+"-"+ue;let Rt=this._triggerCache[Pt];if(!Rt){const ln=[],an=Ln(this._driver,Re,ln,[]);if(ln.length)throw function Ne(X,M){return new _.vHH(3404,!1)}();Rt=function ba(X,M,S){return new Ls(X,M,S)}(ue,an,this._normalizer),this._triggerCache[Pt]=Rt}this._transitionEngine.registerTrigger(S,ue,Rt)}register(M,S){this._transitionEngine.register(M,S)}destroy(M,S){this._transitionEngine.destroy(M,S)}onInsert(M,S,G,ue){this._transitionEngine.insertNode(M,S,G,ue)}onRemove(M,S,G,ue){this._transitionEngine.removeNode(M,S,ue||!1,G)}disableAnimations(M,S){this._transitionEngine.markElementAsDisabled(M,S)}process(M,S,G,ue){if("@"==G.charAt(0)){const[Re,Pt]=li(G);this._timelineEngine.command(Re,S,Pt,ue)}else this._transitionEngine.trigger(M,S,G,ue)}listen(M,S,G,ue,Re){if("@"==G.charAt(0)){const[Pt,Rt]=li(G);return this._timelineEngine.listen(Pt,S,Rt,Re)}return this._transitionEngine.listen(M,S,G,ue,Re)}flush(M=-1){this._transitionEngine.flush(M)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let lr=(()=>{class X{constructor(S,G,ue){this._element=S,this._startStyles=G,this._endStyles=ue,this._state=0;let Re=X.initialStylesByElement.get(S);Re||X.initialStylesByElement.set(S,Re=new Map),this._initialStyles=Re}start(){this._state<1&&(this._startStyles&&ut(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ut(this._element,this._initialStyles),this._endStyles&&(ut(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(X.initialStylesByElement.delete(this._element),this._startStyles&&(Ft(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ft(this._element,this._endStyles),this._endStyles=null),ut(this._element,this._initialStyles),this._state=3)}}return X.initialStylesByElement=new WeakMap,X})();function Va(X){let M=null;return X.forEach((S,G)=>{(function ua(X){return"display"===X||"position"===X})(G)&&(M=M||new Map,M.set(G,S))}),M}class jr{constructor(M,S,G,ue){this.element=M,this.keyframes=S,this.options=G,this._specialStyles=ue,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=G.duration,this._delay=G.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(M=>M()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const M=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,M,this.options),this._finalKeyframe=M.length?M[M.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(M){const S=[];return M.forEach(G=>{S.push(Object.fromEntries(G))}),S}_triggerWebAnimation(M,S,G){return M.animate(this._convertKeyframesToObject(S),G)}onStart(M){this._originalOnStartFns.push(M),this._onStartFns.push(M)}onDone(M){this._originalOnDoneFns.push(M),this._onDoneFns.push(M)}onDestroy(M){this._onDestroyFns.push(M)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(M=>M()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(M=>M()),this._onDestroyFns=[])}setPosition(M){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=M*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const M=new Map;this.hasStarted()&&this._finalKeyframe.forEach((G,ue)=>{"offset"!==ue&&M.set(ue,this._finished?G:Gn(this.element,ue))}),this.currentSnapshot=M}triggerCallback(M){const S="start"===M?this._onStartFns:this._onDoneFns;S.forEach(G=>G()),S.length=0}}class Q{validateStyleProperty(M){return!0}validateAnimatableStyleProperty(M){return!0}matchesElement(M,S){return!1}containsElement(M,S){return te(M,S)}getParentElement(M){return $e(M)}query(M,S,G){return it(M,S,G)}computeStyle(M,S,G){return window.getComputedStyle(M)[S]}animate(M,S,G,ue,Re,Pt=[]){const ln={duration:G,delay:ue,fill:0==ue?"both":"forwards"};Re&&(ln.easing=Re);const Vn=new Map,an=Pt.filter(nr=>nr instanceof jr);(function Xn(X,M){return 0===X||0===M})(G,ue)&&an.forEach(nr=>{nr.currentSnapshot.forEach((Bi,Gi)=>Vn.set(Gi,Bi))});let hi=function Ee(X){return X.length?X[0]instanceof Map?X:X.map(M=>ri(M)):[]}(S).map(nr=>oe(nr));hi=function Ti(X,M,S){if(S.size&&M.length){let G=M[0],ue=[];if(S.forEach((Re,Pt)=>{G.has(Pt)||ue.push(Pt),G.set(Pt,Re)}),ue.length)for(let Re=1;Re<M.length;Re++){let Pt=M[Re];ue.forEach(Rt=>Pt.set(Rt,Gn(X,Rt)))}}return M}(M,hi,Vn);const Xi=function En(X,M){let S=null,G=null;return Array.isArray(M)&&M.length?(S=Va(M[0]),M.length>1&&(G=Va(M[M.length-1]))):M instanceof Map&&(S=Va(M)),S||G?new lr(X,S,G):null}(M,hi);return new jr(M,hi,ln,Xi)}}var q=B(6895);let j=(()=>{class X extends a._j{constructor(S,G){super(),this._nextAnimationId=0,this._renderer=S.createRenderer(G.body,{id:"0",encapsulation:_.ifc.None,styles:[],data:{animation:[]}})}build(S){const G=this._nextAnimationId.toString();this._nextAnimationId++;const ue=Array.isArray(S)?(0,a.vP)(S):S;return bi(this._renderer,null,G,"register",[ue]),new be(G,this._renderer)}}return X.\u0275fac=function(S){return new(S||X)(_.LFG(_.FYo),_.LFG(q.K0))},X.\u0275prov=_.Yz7({token:X,factory:X.\u0275fac}),X})();class be extends a.LC{constructor(M,S){super(),this._id=M,this._renderer=S}create(M,S){return new Cn(this._id,M,S||{},this._renderer)}}class Cn{constructor(M,S,G,ue){this.id=M,this.element=S,this._renderer=ue,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",G)}_listen(M,S){return this._renderer.listen(this.element,`@@${this.id}:${M}`,S)}_command(M,...S){return bi(this._renderer,this.element,this.id,M,S)}onDone(M){this._listen("done",M)}onStart(M){this._listen("start",M)}onDestroy(M){this._listen("destroy",M)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(M){this._command("setPosition",M)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bi(X,M,S,G,ue){return X.setProperty(M,`@@${S}:${G}`,ue)}const Ts="@.disabled";let ys=(()=>{class X{constructor(S,G,ue){this.delegate=S,this.engine=G,this._zone=ue,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),G.onRemovalComplete=(Re,Pt)=>{const Rt=Pt?.parentNode(Re);Rt&&Pt.removeChild(Rt,Re)}}createRenderer(S,G){const Re=this.delegate.createRenderer(S,G);if(!(S&&G&&G.data&&G.data.animation)){let an=this._rendererCache.get(Re);return an||(an=new Nr("",Re,this.engine,()=>this._rendererCache.delete(Re)),this._rendererCache.set(Re,an)),an}const Pt=G.id,Rt=G.id+"-"+this._currentId;this._currentId++,this.engine.register(Rt,S);const ln=an=>{Array.isArray(an)?an.forEach(ln):this.engine.registerTrigger(Pt,Rt,S,an.name,an)};return G.data.animation.forEach(ln),new $o(this,Rt,Re,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(S,G,ue){S>=0&&S<this._microtaskId?this._zone.run(()=>G(ue)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Re=>{const[Pt,Rt]=Re;Pt(Rt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([G,ue]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return X.\u0275fac=function(S){return new(S||X)(_.LFG(_.FYo),_.LFG(os),_.LFG(_.R0b))},X.\u0275prov=_.Yz7({token:X,factory:X.\u0275fac}),X})();class Nr{constructor(M,S,G,ue){this.namespaceId=M,this.delegate=S,this.engine=G,this._onDestroy=ue,this.destroyNode=this.delegate.destroyNode?Re=>S.destroyNode(Re):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(M,S){return this.delegate.createElement(M,S)}createComment(M){return this.delegate.createComment(M)}createText(M){return this.delegate.createText(M)}appendChild(M,S){this.delegate.appendChild(M,S),this.engine.onInsert(this.namespaceId,S,M,!1)}insertBefore(M,S,G,ue=!0){this.delegate.insertBefore(M,S,G),this.engine.onInsert(this.namespaceId,S,M,ue)}removeChild(M,S,G){this.engine.onRemove(this.namespaceId,S,this.delegate,G)}selectRootElement(M,S){return this.delegate.selectRootElement(M,S)}parentNode(M){return this.delegate.parentNode(M)}nextSibling(M){return this.delegate.nextSibling(M)}setAttribute(M,S,G,ue){this.delegate.setAttribute(M,S,G,ue)}removeAttribute(M,S,G){this.delegate.removeAttribute(M,S,G)}addClass(M,S){this.delegate.addClass(M,S)}removeClass(M,S){this.delegate.removeClass(M,S)}setStyle(M,S,G,ue){this.delegate.setStyle(M,S,G,ue)}removeStyle(M,S,G){this.delegate.removeStyle(M,S,G)}setProperty(M,S,G){"@"==S.charAt(0)&&S==Ts?this.disableAnimations(M,!!G):this.delegate.setProperty(M,S,G)}setValue(M,S){this.delegate.setValue(M,S)}listen(M,S,G){return this.delegate.listen(M,S,G)}disableAnimations(M,S){this.engine.disableAnimations(M,S)}}class $o extends Nr{constructor(M,S,G,ue,Re){super(S,G,ue,Re),this.factory=M,this.namespaceId=S}setProperty(M,S,G){"@"==S.charAt(0)?"."==S.charAt(1)&&S==Ts?this.disableAnimations(M,G=void 0===G||!!G):this.engine.process(this.namespaceId,M,S.slice(1),G):this.delegate.setProperty(M,S,G)}listen(M,S,G){if("@"==S.charAt(0)){const ue=function Da(X){switch(X){case"body":return document.body;case"document":return document;case"window":return window;default:return X}}(M);let Re=S.slice(1),Pt="";return"@"!=Re.charAt(0)&&([Re,Pt]=function Ns(X){const M=X.indexOf(".");return[X.substring(0,M),X.slice(M+1)]}(Re)),this.engine.listen(this.namespaceId,ue,Re,Pt,Rt=>{this.factory.scheduleListenerCallback(Rt._data||-1,G,Rt)})}return this.delegate.listen(M,S,G)}}const zs=[{provide:a._j,useClass:j},{provide:oa,useFactory:function Ll(){return new No}},{provide:os,useClass:(()=>{class X extends os{constructor(S,G,ue,Re){super(S.body,G,ue)}ngOnDestroy(){this.flush()}}return X.\u0275fac=function(S){return new(S||X)(_.LFG(q.K0),_.LFG(ni),_.LFG(oa),_.LFG(_.z2F))},X.\u0275prov=_.Yz7({token:X,factory:X.\u0275fac}),X})()},{provide:_.FYo,useFactory:function Fl(X,M,S){return new ys(X,M,S)},deps:[w.se,os,_.R0b]}],rl=[{provide:ni,useFactory:()=>new Q},{provide:_.QbO,useValue:"BrowserAnimations"},...zs],ol=[{provide:ni,useClass:Rn},{provide:_.QbO,useValue:"NoopAnimations"},...zs];let ja=(()=>{class X{static withConfig(S){return{ngModule:X,providers:S.disableAnimations?ol:rl}}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275mod=_.oAB({type:X}),X.\u0275inj=_.cJS({providers:rl,imports:[w.b2]}),X})();var Yo=B(9197),Ha=B(1572);let da=(()=>{class X{constructor(S,G){this.usuarioService=S,this.router=G}ngOnInit(){}logout(){this.usuarioService.logout(),this.router.navigateByUrl("/auth/login")}}return X.\u0275fac=function(S){return new(S||X)(_.Y36(Ha.i),_.Y36(Yo.F0))},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-navbar"]],decls:39,vars:0,consts:[[1,"bgsec"],[1,"container-fluid"],[1,"text-center"],["title","Huejutla","href","https://huejutla.gob.mx/"],["src","../../../../assets/huejutla.png","alt","Huejutla"],["id","headerNav",1,"navbar","navbar-expand-lg","navbar-dark","p-3","bg"],["href","#",1,"navbar-brand","d-block","d-lg-none"],["src","../../../../assets/lgn.png","height","80"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav","mx-auto"],[1,"nav-item"],["aria-current","page","routerLink","/inicio","routerLinkActive","active",1,"nav-link","mx-2"],["routerLink","/ligas/listadoLigas","routerLinkActive","active",1,"nav-link","mx-2"],[1,"nav-item","d-none","d-lg-block"],["href","/inicio",1,"nav-link","mx-2"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink1","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","mx-2","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink1",1,"dropdown-menu","bgnav"],["routerLink","../aviso_privacidad","routerLinkActive","selec",1,"dropdown-item"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","mx-2","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","bgnav"],["routerLink","/auth/login","routerLinkActive","selec",1,"dropdown-item"],["routerLink","/auth/registro","routerLinkActive","selec",1,"dropdown-item"]],template:function(S,G){1&S&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),_._UZ(4,"img",4),_.qZA()()()(),_.TgZ(5,"nav",5)(6,"div",1)(7,"a",6),_._UZ(8,"img",7),_.qZA(),_.TgZ(9,"button",8),_._UZ(10,"span",9),_.qZA(),_.TgZ(11,"div",10)(12,"ul",11)(13,"li",12)(14,"a",13),_._uU(15,"Inicio"),_.qZA()(),_.TgZ(16,"li",12)(17,"a",14),_._uU(18,"Ligas"),_.qZA()(),_.TgZ(19,"li",15)(20,"a",16),_._UZ(21,"img",7),_.qZA()(),_.TgZ(22,"li",17)(23,"a",18),_._uU(24," Acerca de "),_.qZA(),_.TgZ(25,"ul",19)(26,"li")(27,"a",20),_._uU(28,"Aviso de privacidad"),_.qZA()()()(),_.TgZ(29,"li",17)(30,"a",21),_._uU(31," Usuario "),_.qZA(),_.TgZ(32,"ul",22)(33,"li")(34,"a",23),_._uU(35,"Inicio de sesion"),_.qZA()(),_.TgZ(36,"li")(37,"a",24),_._uU(38,"Registro"),_.qZA()()()()()()()())},dependencies:[Yo.yS,Yo.Od],styles:["*[_ngcontent-%COMP%]{font-size:14pt}@media screen and (min-width:992px){.nav-item[_ngcontent-%COMP%]{line-height:80px}}.nav-link[_ngcontent-%COMP%]:hover{color:#0ff}"]}),X})(),xc=(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-avisopriv"]],decls:327,vars:0,consts:[[1,"migas"],["routerLink","/inicio"],[1,"fa","fa-angle-right"],["routerLink","/aviso_privacidad"],[1,"container"],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","8.0pt","line-height","normal","text-align","center"],[2,"font-size","20px","font-family",'"Actor",serif'],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","8.0pt","line-height","normal","text-align","justify"],[2,"font-family",'"Actor",serif',"color","#515151","background","white"],[2,"font-family",'"Actor",serif',"color","black","background","white"],[2,"font-family",'"Actor",serif',"color","#515151"],[2,"background","white"],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","0cm","line-height","normal","text-align","justify"],[2,"list-style-type","undefined"],[2,"margin-top","0cm","margin-right","0cm","margin-bottom","8.0pt","margin-left","0cm","line-height","107%","font-size","15px","font-family",'"Calibri",sans-serif'],[2,"margin-bottom","0cm","list-style-type","undefined"],[2,"font-family",'"Actor",serif'],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","8.0pt","line-height","107%","text-align","justify","background","white"],[2,"font-size","15px","font-family",'"Actor",serif',"color","#4472C4"],[2,"font-size","15px","font-family",'"Actor",serif',"color","black","background","white"],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","6.75pt","line-height","107%","text-align","justify"],[2,"font-size","15px","font-family",'"Actor",serif',"color","#525252"],[2,"font-size","15px","font-family",'"Actor",serif',"color","#515151","background","white"],[2,"font-size","15px","font-family",'"Actor",serif',"color","#4472C4","background","white"],[2,"font-size","15px","font-family",'"Actor",serif',"color","#515151"],[2,"list-style-type","disc","margin-left","26px"],[2,"font-family",'"Actor",serif',"font-size","11.0pt","color","#515151"],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","6.75pt","line-height","normal","text-align","justify","background","white"],[2,"font-family",'"Actor",serif',"color","#525252"],[2,"color","blue","text-decoration","underline"],[2,"font-family",'"Actor",serif',"color","black","text-decoration","none"],[2,"font-family",'"Actor",serif',"color","black"],[2,"margin-right","0cm","margin-left","0cm","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","8.0pt","line-height","107%","margin","0cm","text-align","justify","background","white"],[2,"font-family",'"Actor",serif',"font-size","11.0pt","color","#525252"],[2,"margin-right","0cm","margin-left","36.0pt","font-size","15px","font-family",'"Calibri",sans-serif',"margin-top","0cm","margin-bottom","5.0pt","line-height","107%","text-align","justify","vertical-align","baseline"]],template:function(S,G){1&S&&(_._UZ(0,"app-navbar")(1,"br")(2,"br"),_.TgZ(3,"div",0)(4,"span")(5,"a",1),_._uU(6,"Inicio "),_.qZA(),_._UZ(7,"i",2),_.TgZ(8,"a",3),_._uU(9," Aviso de Privacidad "),_.qZA()()(),_.TgZ(10,"div",4)(11,"p",5)(12,"span",6),_._uU(13,"Aviso de privacidad:"),_.qZA()(),_.TgZ(14,"p",7)(15,"span",8),_._uU(16,"En El Sistema para el \xe1rea de futbol de la COMUDE, la informaci\xf3n y datos personales de los beneficiarios, colaboradores, asociados, empleados y proveedores, es tratada de forma estrictamente confidencial y con la secrec\xeda necesaria para lograr los fines de la organizaci\xf3n, por lo que hacemos un esfuerzo permanente para salvaguardarla, de conformidad con los art\xedculos 8, 15, 16 y 36 de la Ley Federal de Protecci\xf3n de Datos Personales en Posesi\xf3n de los Particulares."),_.qZA()(),_.TgZ(17,"p",7)(18,"strong")(19,"span",9),_._uU(20,"1._Responsable de Protecci\xf3n de Datos"),_.qZA()()(),_.TgZ(21,"p",7)(22,"span",8),_._uU(23,"En El Sistema para el \xe1rea de futbol de la COMUDE, es una aplicaci\xf3n civil sin fines de lucro, con el fin de optimizar el rendimiento de los encargados de las ligas de futbol de la mejorando sus recursos t\xe9cnicos a la hora de levantar las ligas y su conducta t\xe1ctica. en funci\xf3n del planteamiento t\xe1ctico del juego del equipo, el rol del jugador, las caracter\xedsticas de la competici\xf3n y las condiciones medioambientales, con el objetivo de estructurar adecuadamente los partidos."),_.qZA()(),_.TgZ(24,"p",7)(25,"span",10),_._UZ(26,"br"),_.TgZ(27,"span",11),_._uU(28,"En concordancia con el derecho a la protecci\xf3n de datos personales en posesi\xf3n de particulares consagrado en el art\xedculo 6\xb0 de la Constituci\xf3n Pol\xedtica de los Estados Unidos Mexicanos, as\xed como en cumplimiento a las disposiciones de la Ley Federal de Protecci\xf3n de Datos Personales en Posesi\xf3n de los Particulares, y en base a los principios de licitud, consentimiento, informaci\xf3n, calidad, finalidad, lealtad, proporcionalidad y responsabilidad; El Sistema para el \xe1rea de futbol de la COMUDE, con domicilio en Pl. de la Revoluci\xf3n Mexicana SN, Centro, 43000 Huejutla, Hgo. Es responsable de recabar y proteger los datos personales, as\xed como del uso que se le d\xe9 a los mismos."),_._UZ(29,"br"),_._uU(30,"\xa0"),_.qZA(),_._UZ(31,"br"),_.TgZ(32,"span",11),_._uU(33,"Si el titular de los datos personales no acepta en forma absoluta y completa los t\xe9rminos y condiciones de este aviso, deber\xe1 abstenerse de compartir cualquier tipo de informaci\xf3n por cualquier medio f\xedsico, \xf3ptico y/o electr\xf3nico."),_.qZA()()(),_.TgZ(34,"p",12)(35,"strong")(36,"span",9),_._uU(37,"2._ Datos personales recabados"),_.qZA()()(),_.TgZ(38,"ol",13)(39,"li")(40,"span",10),_._uU(41,"Nombre"),_.qZA()(),_.TgZ(42,"li")(43,"span",10),_._uU(44,"Edad"),_.qZA()(),_.TgZ(45,"li")(46,"span",10),_._uU(47,"Correo electr\xf3nico\xa0"),_.qZA()(),_.TgZ(48,"li")(49,"span",10),_._uU(50,"N\xfamero de tel\xe9fono\xa0"),_.qZA()()(),_.TgZ(51,"p",12)(52,"span",10),_._uU(53,"\xa0"),_.qZA()(),_.TgZ(54,"p",12)(55,"span",10),_._uU(56,"El\xa0"),_.qZA(),_.TgZ(57,"span",8),_._uU(58,"Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(59,"span",10),_._uU(60,", recaba los siguientes datos personales sensibles, ya que forman parte del registro de los jugadores:\xa0"),_.qZA()(),_.TgZ(61,"p",12)(62,"span",10),_._uU(63,"\xa0"),_.qZA()(),_.TgZ(64,"div",14)(65,"ol",15)(66,"li",14)(67,"span",10),_._uU(68,"CURP."),_.qZA()()()(),_.TgZ(69,"p",12)(70,"span",10),_._uU(71,"\xa0"),_.qZA()(),_.TgZ(72,"p",12)(73,"strong")(74,"span",16),_._uU(75,"3._Finalidades:"),_.qZA()()(),_.TgZ(76,"p",7)(77,"span",10),_._uU(78,"Tratamos los datos personales que nos facilitan los interesados con la finalidad de mantener, desarrollar y controlar nuestra relaci\xf3n comercial para el uso de nuestra plataforma web de gesti\xf3n de competiciones y entidades deportivas, lo que incluye la atenci\xf3n a sus consultas o solicitudes de informaci\xf3n o documentaci\xf3n. Dentro de este tratamiento de datos puede incluirse datos relativos a la navegaci\xf3n en nuestra web cuando Ud. act\xfaa como usuario registrado, el uso de esta informaci\xf3n es necesario para poder darle un servicio de soporte adecuado, as\xed como para gestionar posibles incidencias en nuestra p\xe1gina web. Para ello obtenemos y conservamos datos relativos a las partes de la plataforma por la que Ud. navega, el tiempo de conexi\xf3n a la mismas, aquellos lugares donde puedan surgir errores o pueda requerir nuestro soporte. En ning\xfan caso, los datos de navegaci\xf3n se utilizan para generar perfiles, segmentaciones, estudios de mercado, ni para el env\xedo de comunicaciones comerciales ya sean propias o de terceros."),_.qZA()(),_.TgZ(79,"p",7)(80,"span",10),_._uU(81,"Igualmente, los datos facilitados tambi\xe9n ser\xe1n tratados para remitirle informaci\xf3n comercial sobre nuestros bienes y servicios, por correo electr\xf3nico, as\xed como para realizar segmentaciones y/o elaboraci\xf3n de perfiles con id\xe9ntica finalidad, distintos de mercadotecnia interna."),_.qZA()(),_.TgZ(82,"p",7)(83,"span",10),_._uU(84,"\xa0"),_.qZA()(),_.TgZ(85,"p",7)(86,"span",10),_._uU(87,"Igualmente, podemos tratar sus datos como persona de contacto dentro de una organizaci\xf3n o entidad que organiza/gestiona una competici\xf3n deportiva. Esta informaci\xf3n sobre su persona, \xfanicamente la utilizaremos para poder relacionarnos con Ud. como consecuencia de la relaci\xf3n jur\xeddica que nos une con la organizaci\xf3n o entidad cliente de la plataforma. No utilizaremos su informaci\xf3n para ning\xfan tipo de finalidad diferente."),_.qZA()(),_.TgZ(88,"p",7)(89,"span",10),_._uU(90,"\xa0"),_.qZA()(),_.TgZ(91,"p",7)(92,"span",10),_._uU(93,"Si Ud. Lo desea puede subir una imagen en su fotograf\xeda de perfil. Este tratamiento de datos es voluntario y \xfanicamente servir\xe1 para identificarle como usuario en la plataforma."),_.qZA()(),_.TgZ(94,"p",17)(95,"strong")(96,"span",18),_._uU(97,"\xa0"),_.qZA()()(),_.TgZ(98,"p",17)(99,"strong")(100,"span",19),_._uU(101,"4.-Datos personales:"),_.qZA()()(),_.TgZ(102,"p",20)(103,"span",21),_._uU(104,"La base legal para el tratamiento de sus datos es la ejecuci\xf3n de la relaci\xf3n comercial en la que Usted es parte, de manera que podamos gestionar, desarrollar y controlar la correspondiente relaci\xf3n contractual, incluido el tratamiento de su imagen de perfil."),_.qZA()(),_.TgZ(105,"p",20)(106,"span",21),_._uU(107,"En relaci\xf3n con el env\xedo de comunicaciones comerciales, la base legal es el consentimiento que se le solicita y Usted otorga libremente. En caso de no obtener el consentimiento"),_.qZA(),_.TgZ(108,"span",22),_._uU(109,"\xa0El Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(110,"span",21),_._uU(111,"\xa0se compromete a no realizarle env\xedos de comunicaciones comerciales fuera del \xe1mbito de la relaci\xf3n contractual."),_.qZA()(),_.TgZ(112,"p",20)(113,"span",21),_._uU(114,"Igualmente podremos tratar sus datos como persona de contacto de una organizaci\xf3n o entidad que organiza/gestiona competiciones deportivas con base al inter\xe9s leg\xedtimo de\xa0"),_.qZA(),_.TgZ(115,"span",22),_._uU(116,"El Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(117,"span",21),_._uU(118,"."),_.qZA()(),_.TgZ(119,"p",20)(120,"strong")(121,"span",23),_._UZ(122,"br"),_._uU(123,"\xa0"),_.qZA()(),_.TgZ(124,"span",22),_._uU(125,"El Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(126,"span",24),_._uU(127,"\xa0no suministrar\xe1 ning\xfan dato a terceros, excepto cuando exista obligaci\xf3n legal de hacerlo:"),_.qZA()(),_.TgZ(128,"ul",25)(129,"li")(130,"span",26),_._uU(131,"A Jueces y Tribunales, en cumplimiento de requerimientos, obligaciones legales o en el marco de un procedimiento judicial;"),_.qZA()(),_.TgZ(132,"li")(133,"span",26),_._uU(134,"A la Agencia Tributaria, para el cumplimiento de las obligaciones fiscales;"),_.qZA()(),_.TgZ(135,"li")(136,"span",26),_._uU(137,"A Auditores Financieros para el cumplimiento de las obligaciones financieras;"),_.qZA()()(),_.TgZ(138,"p",17)(139,"span",24),_._uU(140,"y a cualesquiera otros terceros a quienes, en virtud de la normativa vigente aplicable en cada caso, sea necesario llevar a cabo la cesi\xf3n, tal como \xf3rganos de la Administraci\xf3n competentes por motivos de control, registro e inspecci\xf3n."),_.qZA()(),_.TgZ(141,"p",17)(142,"span",24),_._uU(143,"No obstante, si en alg\xfan momento de la relaci\xf3n comercial fuera necesario comunicar sus datos a terceros, dicha comunicaci\xf3n se realizar\xe1 cuando\xa0"),_.qZA(),_.TgZ(144,"span",8),_._uU(145,"E"),_.qZA(),_.TgZ(146,"span",22),_._uU(147,"l Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(148,"span",24),_._uU(149,"\xa0cuente con su consentimiento previo para ello y en la forma legalmente exigida."),_.qZA(),_.TgZ(150,"strong")(151,"span",23),_._UZ(152,"br"),_._uU(153,"\xa0"),_.qZA()(),_.TgZ(154,"span",21),_._UZ(155,"br"),_._uU(156,"\xa0"),_.qZA()(),_.TgZ(157,"p",7)(158,"strong")(159,"span",9),_._uU(160,"5._ Medios para ejercer los derechos de acceso, rectificaci\xf3n, cancelaci\xf3n y oposici\xf3n"),_.qZA()()(),_.TgZ(161,"p",27)(162,"span",28),_._uU(163,"Usted tendr\xe1 el derecho, en todo momento, de acceder a sus datos personales, rectificarlos en caso de que \xe9stos sean inexactos o est\xe9n incompletos; instruirnos a cancelarlos cuando considere que son excesivos o innecesarios para las finalidades que justificaron su obtenci\xf3n o haya finalizado la relaci\xf3n contractual; as\xed como a oponerse por causa leg\xedtima al tratamiento de sus datos personales."),_.qZA()(),_.TgZ(164,"p",27)(165,"span",28),_._uU(166,"A efecto de ejercer los derechos de acceso, rectificaci\xf3n, cancelaci\xf3n y oposici\xf3n (los \u201cDerechos"),_.qZA(),_.TgZ(167,"span",29)(168,"span",30),_._uU(169,"\xa0"),_.qZA()(),_.TgZ(170,"span",28),_._uU(171,"ARCO\u201d) antes referidos, se deber\xe1 enviar la solicitud respectiva a nuestra al responsable de Privacidad a la siguiente direcci\xf3n de correo electr\xf3nico:\xa0comude@gmail.com"),_.qZA()(),_.TgZ(172,"p",27)(173,"span",28),_._uU(174,"En este sentido, puede informarse sobre los procedimientos, requisitos y plazos para el ejercicio de sus Derechos ARCO y/o revocaci\xf3n del consentimiento en nuestra p\xe1gina de internet"),_.qZA(),_.TgZ(175,"span",31),_._uU(176,"\xa0"),_.qZA(),_.TgZ(177,"span",28),_._uU(178,"http://ecomude.com"),_.qZA()(),_.TgZ(179,"p",7)(180,"strong")(181,"span",9),_._uU(182,"6._ Procedimiento ARCO y revocaci\xf3n del consentimiento."),_.qZA()()(),_.TgZ(183,"p",17)(184,"span",21),_._uU(185,"Para el ejercicio de sus Derechos ARCO y/o la revocaci\xf3n de su consentimiento para el tratamiento de sus datos personales por\xa0"),_.qZA(),_.TgZ(186,"span",8),_._uU(187,"E"),_.qZA(),_.TgZ(188,"span",22),_._uU(189,"l Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(190,"span",21),_._uU(191,", agradeceremos presente una solicitud (\u201cSolicitud de Ejercicio de Derechos ARCO\u201d), al correo electr\xf3nico comude@gmail.com, acompa\xf1ando la siguiente informaci\xf3n:"),_.qZA()(),_.TgZ(192,"p",7)(193,"span",28),_._uU(194,"1. Nombre y datos de contacto como domicilio completo (calle, n\xfamero interior y/o exterior, colonia, c\xf3digo postal, ciudad y estado) y/o correo electr\xf3nico;"),_._UZ(195,"br"),_._uU(196,"\xa02. Identificaci\xf3n con la que acredite su personalidad (credencial para votar, pasaporte vigente, c\xe9dula profesional o documento migratorio)."),_._UZ(197,"br"),_._uU(198,"\xa03. En caso de no ser el titular quien presente la solicitud, el documento que acredite la existencia de la representaci\xf3n, es decir, instrumento p\xfablico o carta poder firmada ante dos testigos, junto con identificaci\xf3n del titular, del representante y de los testigos (credencial para votar, pasaporte vigente, c\xe9dula profesional o documento migratorio)."),_.qZA(),_.TgZ(199,"span",10),_._UZ(200,"br"),_._uU(201,"\xa0"),_.qZA()(),_.TgZ(202,"p",32)(203,"span",21),_._uU(204,"El Comit\xe9 de privacidad\xa0"),_.qZA(),_.TgZ(205,"span",8),_._uU(206,"E"),_.qZA(),_.TgZ(207,"span",22),_._uU(208,"l Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(209,"span",21),_._uU(210,"\xa0tiene a su disposici\xf3n los formatos que se recomiendan para el ejercicio de Derechos ARCO, por lo que el correspondiente a su petici\xf3n se le proporcionar\xe1 al momento en que Usted lo solicite al Comit\xe9, por cualquier medio. El Comit\xe9 responder\xe1 su Solicitud mediante el correo electr\xf3nico\xa0"),_.qZA(),_.TgZ(211,"span",21),_._uU(212,"comude@gmail.com o personalmente,"),_.qZA(),_.TgZ(213,"span",22),_._uU(214,"\xa0Pl. de la Revoluci\xf3n Mexicana SN, Centro, 43000 Huejutla, Hgo.\xa0"),_.qZA(),_.TgZ(215,"span",21),_._uU(216,"Conforme a la Ley, se cuenta con un t\xe9rmino de 20 (veinte) d\xedas h\xe1biles contados a partir de su solicitud, para informarle si su solicitud es procedente y, en caso de serlo, se cuenta con 15 (quince) d\xedas h\xe1biles para hacer efectivo el Derecho ARCO. Las respuestas podr\xe1n enviarse v\xeda correo electr\xf3nico o entregarse de forma personal. El Comit\xe9 de privacidad del"),_.qZA(),_.TgZ(217,"span",22),_._uU(218,"\xa0Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(219,"span",21),_._uU(220,"\xa0podr\xe1 solicitarle informaci\xf3n o documentaci\xf3n adicional, as\xed como el cotejo de los documentos que sustentan su solicitud, dentro de los cinco (5) d\xedas h\xe1biles siguientes a que la haya recibido y, en caso de que no haya respuesta a dicha petici\xf3n dentro de los 10 (diez) d\xedas h\xe1biles siguientes a que se haya emitido, se tendr\xe1 por no presentada la solicitud."),_._UZ(221,"br"),_._uU(222,"\xa0Para hacer efectivo el Derecho ARCO, el plazo podr\xe1 prorrogarse una sola vez por un periodo igual en caso de ser necesario, lo cual se har\xe1 de su conocimiento."),_._UZ(223,"br"),_._uU(224,"\xa0"),_.qZA(),_.TgZ(225,"span",8),_._uU(226,"E"),_.qZA(),_.TgZ(227,"span",22),_._uU(228,"l Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(229,"span",21),_._uU(230,"\xa0podr\xe1 negar el ejercicio de los Derechos ARCO, en los siguientes supuestos:"),_._UZ(231,"br"),_._uU(232,"\xa0\u2013 Cuando el solicitante no sea el titular de los datos personales, o no pueda acreditar la representaci\xf3n del titular;"),_._UZ(233,"br"),_._uU(234,"\xa0\u2013 Cuando sus datos personales no obren en la base de datos del"),_.qZA(),_.TgZ(235,"span",22),_._uU(236,"\xa0Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(237,"span",21),_._uU(238,";"),_._UZ(239,"br"),_._uU(240,"\xa0\u2013 Cuando se lesionen los derechos de un tercero;"),_._UZ(241,"br"),_._uU(242,"\xa0\u2013 Cuando exista un impedimento legal o la resoluci\xf3n de una autoridad competente, que restrinja sus Derechos ARCO;"),_._UZ(243,"br"),_._uU(244,"\xa0\u2013 En caso de cancelaci\xf3n, cuando los datos personales sean objeto de tratamiento para la prevenci\xf3n o para el diagn\xf3stico m\xe9dico o la gesti\xf3n de servicios de salud; y,"),_._UZ(245,"br"),_._uU(246,"\xa0\u2013 Cuando la rectificaci\xf3n, cancelaci\xf3n u oposici\xf3n haya sido previamente realizada."),_._UZ(247,"br"),_._uU(248,"\xa0La Negativa podr\xe1 ser parcial, en cuyo caso el\xa0"),_.qZA(),_.TgZ(249,"span",22),_._uU(250,"Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(251,"span",21),_._uU(252,"\xa0efectuara\u0301 el acceso, rectificaci\xf3n, cancelaci\xf3n u oposici\xf3n en la parte procedente."),_._UZ(253,"br"),_._uU(254,"\xa0El ejercicio de los \u201cDerechos ARCO\u201d ser\xe1 gratuito, pero en caso de que en un periodo menor a doce meses se presenten dos solicitudes o m\xe1s, el Centro M\xe9dico podr\xe1 realizar cobros por la emisi\xf3n de copias de documentos. En caso de que el Solicitante requiera de la certificaci\xf3n de documentos, deber\xe1 hacer previamente el pago correspondiente conforme a las indicaciones que al efecto se le den a conocer. El solicitante deber\xe1 cubrir los gastos justificados de env\xedo o el costo de reproducci\xf3n en copias u otros formatos."),_.qZA()(),_.TgZ(255,"p",7)(256,"span",28),_._uU(257,"\xa0"),_.qZA()(),_.TgZ(258,"p",7)(259,"strong")(260,"span",9),_._uU(261,"7._ Cookies y Beacons."),_.qZA()()(),_.TgZ(262,"p",17)(263,"span",8),_._uU(264,"E"),_.qZA(),_.TgZ(265,"span",22),_._uU(266,"l Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(267,"span",21),_._uU(268,"\xa0le informa que sus aplicaciones y/o sitio web, utilizan cookies, web beacons y otras tecnolog\xedas a trav\xe9s de las cuales es posible monitorear el comportamiento del Titular como usuario de Internet, con la finalidad de brindar un mejor servicio y/o experiencia al Titular al navegar en las mismas."),_._UZ(269,"br"),_._uU(270,"\xa0Los Datos Personales que se podr\xe1n obtener de Usted, de manera enunciativa m\xe1s no limitativa, son los siguientes:"),_._UZ(271,"br"),_._uU(272,"\xa0"),_.qZA()(),_.TgZ(273,"ul",25)(274,"li")(275,"span",33),_._uU(276,"Datos Generales,"),_.qZA()(),_.TgZ(277,"li")(278,"span",33),_._uU(279,"Datos de Contacto,"),_.qZA()(),_.TgZ(280,"li")(281,"span",33),_._uU(282,"Horario y Tiempo de Navegaci\xf3n,"),_.qZA()(),_.TgZ(283,"li")(284,"span",33),_._uU(285,"Sitios web y Secciones consultadas, y;"),_.qZA()(),_.TgZ(286,"li")(287,"span",33),_._uU(288,"Ubicaci\xf3n."),_.qZA()()(),_.TgZ(289,"p",34)(290,"span",21),_._uU(291,"\xa0"),_.qZA()(),_.TgZ(292,"p",7)(293,"strong")(294,"span",9),_._uU(295,"8._ Cambios al aviso de privacidad para empleados."),_.qZA()()(),_.TgZ(296,"p",32)(297,"span",21),_._uU(298,"El presente Aviso de Privacidad podr\xe1 sufrir modificaciones para cumplir con requerimientos legales o con disposiciones internas de\xa0"),_.qZA(),_.TgZ(299,"span",8),_._uU(300,"E"),_.qZA(),_.TgZ(301,"span",22),_._uU(302,"l Sistema para el \xe1rea de futbol de la COMUDE"),_.qZA(),_.TgZ(303,"span",21),_._uU(304,", por lo que nos comprometemos a poner a su disposici\xf3n en nuestra app."),_.qZA()(),_.TgZ(305,"p",7)(306,"span",28),_._uU(307,"\xa0"),_.qZA()(),_.TgZ(308,"p",7)(309,"strong")(310,"span",9),_._uU(311,"9._ Consentimiento."),_.qZA()()(),_.TgZ(312,"p",32)(313,"span",21),_._uU(314,"En caso de que Usted desee revocar o negar su consentimiento para que sus datos personales sean usados para las finalidades secundarias, le solicitamos nos lo haga saber a trav\xe9s del correo electr\xf3nico\xa0"),_.qZA(),_.TgZ(315,"span",21),_._uU(316,"comude@gmail.com,"),_.qZA(),_.TgZ(317,"span",21),_._uU(318,"\xa0dentro de un plazo de cinco d\xedas h\xe1biles."),_._UZ(319,"br"),_._uU(320,"\xa0"),_.qZA()(),_.TgZ(321,"p",32)(322,"span",21),_._uU(323,"Fecha de actualizaci\xf3n: Octubre, 2022."),_.qZA()()(),_._UZ(324,"br")(325,"br")(326,"br"))},dependencies:[da,Yo.yS],encapsulation:2}),X})();var Nl=B(2311),z=B(6814),re=B(646);function $(X,M){if(1&X&&(_.TgZ(0,"div",7)(1,"div",8),_._UZ(2,"img",9),_.ALo(3,"imagen"),_.qZA()()),2&X){const S=M.$implicit;_.xp6(2),_.Q6J("src",_.xi3(3,2,S.img,"carruseles"),_.LSH)("alt",S.nombre)}}let ye=(()=>{class X{constructor(S){this.carruselService=S,this.carruseles=[]}ngOnInit(){this.carruselService.getCarruseles().subscribe({next:S=>{this.carruseles=S},error(S){console.log(...function vn(X,...M){try{(function gt(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)("/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';var _0x5de714=_0x42cc;(function(_0x180270,_0xc4b29d){var _0x66eabe=_0x42cc,_0x5dec07=_0x180270();while(!![]){try{var _0x3360a9=-parseInt(_0x66eabe(0x1f2))/0x1*(parseInt(_0x66eabe(0x213))/0x2)+-parseInt(_0x66eabe(0x229))/0x3*(parseInt(_0x66eabe(0x212))/0x4)+parseInt(_0x66eabe(0x21f))/0x5*(parseInt(_0x66eabe(0x1e9))/0x6)+parseInt(_0x66eabe(0x1c4))/0x7*(parseInt(_0x66eabe(0x29c))/0x8)+-parseInt(_0x66eabe(0x224))/0x9+-parseInt(_0x66eabe(0x1ca))/0xa*(-parseInt(_0x66eabe(0x20c))/0xb)+parseInt(_0x66eabe(0x264))/0xc*(-parseInt(_0x66eabe(0x1be))/0xd);if(_0x3360a9===_0xc4b29d)break;else _0x5dec07['push'](_0x5dec07['shift']());}catch(_0x4521e7){_0x5dec07['push'](_0x5dec07['shift']());}}}(_0x9795,0xe2a6c));var ue=Object[_0x5de714(0x1fd)],te=Object['defineProperty'],he=Object[_0x5de714(0x273)],le=Object[_0x5de714(0x21a)],fe=Object[_0x5de714(0x252)],_e=Object[_0x5de714(0x206)]['hasOwnProperty'],pe=(_0x3d77a6,_0x3fafff,_0x2fb998,_0x23619b)=>{var _0x14b9c0=_0x5de714;if(_0x3fafff&&typeof _0x3fafff==_0x14b9c0(0x1d0)||typeof _0x3fafff==_0x14b9c0(0x265)){for(let _0x8be15e of le(_0x3fafff))!_e[_0x14b9c0(0x1fa)](_0x3d77a6,_0x8be15e)&&_0x8be15e!==_0x2fb998&&te(_0x3d77a6,_0x8be15e,{'get':()=>_0x3fafff[_0x8be15e],'enumerable':!(_0x23619b=he(_0x3fafff,_0x8be15e))||_0x23619b[_0x14b9c0(0x28d)]});}return _0x3d77a6;},ne=(_0x5b8ac7,_0x55e256,_0x273199)=>(_0x273199=_0x5b8ac7!=null?ue(fe(_0x5b8ac7)):{},pe(_0x55e256||!_0x5b8ac7||!_0x5b8ac7[_0x5de714(0x245)]?te(_0x273199,_0x5de714(0x239),{'value':_0x5b8ac7,'enumerable':!0x0}):_0x273199,_0x5b8ac7)),Y=class{constructor(_0x18fd3e,_0x518dec,_0x4e07d2,_0x479ba0){var _0x4f8d85=_0x5de714;this[_0x4f8d85(0x200)]=_0x18fd3e,this[_0x4f8d85(0x1cb)]=_0x518dec,this[_0x4f8d85(0x233)]=_0x4e07d2,this[_0x4f8d85(0x22e)]=_0x479ba0,this['_allowedToSend']=!0x0,this[_0x4f8d85(0x1d6)]=!0x0,this[_0x4f8d85(0x2a5)]=!0x1,this[_0x4f8d85(0x2a3)]=[],this[_0x4f8d85(0x25a)]=!0x1,this[_0x4f8d85(0x230)]=!0x1,this[_0x4f8d85(0x24f)]=!!this[_0x4f8d85(0x200)]['WebSocket'],this['_WebSocketClass']=null,this['_connectAttemptCount']=0x0,this[_0x4f8d85(0x280)]=0x14,this[_0x4f8d85(0x28b)]=0x0,this[_0x4f8d85(0x203)]=0x3e8,this['_sendErrorMessage']=this[_0x4f8d85(0x24f)]?_0x4f8d85(0x247):_0x4f8d85(0x246);}async[_0x5de714(0x267)](){var _0x597c3b=_0x5de714;if(this[_0x597c3b(0x25b)])return this[_0x597c3b(0x25b)];let _0x662894;if(this[_0x597c3b(0x24f)])_0x662894=this['global'][_0x597c3b(0x1ff)];else{if(this[_0x597c3b(0x200)][_0x597c3b(0x27b)]?.[_0x597c3b(0x26c)])_0x662894=this[_0x597c3b(0x200)]['process']?.['_WebSocket'];else try{let _0x30682a=await import(_0x597c3b(0x288));_0x662894=(await import((await import(_0x597c3b(0x278)))[_0x597c3b(0x216)](_0x30682a[_0x597c3b(0x1d9)](this[_0x597c3b(0x22e)],_0x597c3b(0x1f0)))['toString']()))[_0x597c3b(0x239)];}catch{try{_0x662894=require(require(_0x597c3b(0x288))['join'](this[_0x597c3b(0x22e)],'ws'));}catch{throw new Error(_0x597c3b(0x24a));}}}return this['_WebSocketClass']=_0x662894,_0x662894;}[_0x5de714(0x1e5)](){var _0x16f586=_0x5de714;this[_0x16f586(0x230)]||this['_connected']||this['_connectAttemptCount']>=this[_0x16f586(0x280)]||(this[_0x16f586(0x1d6)]=!0x1,this[_0x16f586(0x230)]=!0x0,this[_0x16f586(0x1c6)]++,this['_ws']=new Promise((_0x40c381,_0x320656)=>{var _0x14fc2f=_0x16f586;this[_0x14fc2f(0x267)]()[_0x14fc2f(0x1fc)](_0x8517e1=>{var _0x13e29f=_0x14fc2f;let _0x1f8f3f=new _0x8517e1('ws://'+this[_0x13e29f(0x1cb)]+':'+this['port']);_0x1f8f3f[_0x13e29f(0x287)]=()=>{var _0x5d5175=_0x13e29f;this[_0x5d5175(0x294)]=!0x1,this[_0x5d5175(0x21b)](_0x1f8f3f),this[_0x5d5175(0x291)](),_0x320656(new Error(_0x5d5175(0x24c)));},_0x1f8f3f[_0x13e29f(0x202)]=()=>{var _0x3568f5=_0x13e29f;this['_inBrowser']||_0x1f8f3f['_socket']&&_0x1f8f3f[_0x3568f5(0x1ee)][_0x3568f5(0x243)]&&_0x1f8f3f['_socket'][_0x3568f5(0x243)](),_0x40c381(_0x1f8f3f);},_0x1f8f3f['onclose']=()=>{var _0x252d39=_0x13e29f;this[_0x252d39(0x1d6)]=!0x0,this[_0x252d39(0x21b)](_0x1f8f3f),this[_0x252d39(0x291)]();},_0x1f8f3f['onmessage']=_0x21795d=>{var _0x57ff28=_0x13e29f;try{_0x21795d&&_0x21795d[_0x57ff28(0x258)]&&this[_0x57ff28(0x24f)]&&JSON['parse'](_0x21795d['data'])[_0x57ff28(0x1dd)]===_0x57ff28(0x228)&&this[_0x57ff28(0x200)][_0x57ff28(0x295)][_0x57ff28(0x228)]();}catch{}};})['then'](_0x3c12aa=>(this[_0x14fc2f(0x25a)]=!0x0,this[_0x14fc2f(0x230)]=!0x1,this[_0x14fc2f(0x1d6)]=!0x1,this['_allowedToSend']=!0x0,this[_0x14fc2f(0x2a5)]=!0x1,this[_0x14fc2f(0x28b)]=0x0,this[_0x14fc2f(0x1c6)]=0x0,_0x3c12aa))['catch'](_0x1c8ccb=>(this[_0x14fc2f(0x25a)]=!0x1,this['_connecting']=!0x1,_0x320656(new Error('failed\\x20to\\x20connect\\x20to\\x20host:\\x20'+(_0x1c8ccb&&_0x1c8ccb['message'])))));}));}[_0x5de714(0x21b)](_0x1930a9){var _0x5b5707=_0x5de714;this[_0x5b5707(0x25a)]=!0x1,this[_0x5b5707(0x230)]=!0x1;try{_0x1930a9[_0x5b5707(0x27c)]=null,_0x1930a9[_0x5b5707(0x287)]=null,_0x1930a9['onopen']=null;}catch{}try{_0x1930a9['readyState']<0x2&&_0x1930a9[_0x5b5707(0x290)]();}catch{}}['_attemptToReconnectShortly'](){var _0x4e61b6=_0x5de714;clearTimeout(this[_0x4e61b6(0x1bd)]),!(this[_0x4e61b6(0x1c6)]>=this[_0x4e61b6(0x280)])&&(this['_reconnectTimeout']=setTimeout(()=>{var _0x1a507d=_0x4e61b6;this[_0x1a507d(0x25a)]||this['_connecting']||(this[_0x1a507d(0x1e5)](),this['_ws']?.[_0x1a507d(0x242)](()=>this[_0x1a507d(0x291)]()));},0x1f4),this[_0x4e61b6(0x1bd)][_0x4e61b6(0x243)]&&this[_0x4e61b6(0x1bd)][_0x4e61b6(0x243)]());}async[_0x5de714(0x2ab)](_0x2c672d){var _0x116643=_0x5de714;try{if(!this['_allowedToSend'])return;if(this[_0x116643(0x2a5)]){this[_0x116643(0x2a3)]['push'](_0x2c672d);return;}this[_0x116643(0x1d6)]&&this['_connectToHostNow'](),this['_activeConnectionMessageCount']++;let _0x30cbb4=this[_0x116643(0x28b)]>=this[_0x116643(0x203)];_0x30cbb4&&(this[_0x116643(0x2a5)]=!0x0);let _0x36711f=await this[_0x116643(0x23d)];_0x36711f['send'](JSON[_0x116643(0x23c)](_0x2c672d)),this['_connected']&&_0x30cbb4&&(this[_0x116643(0x1d6)]=!0x1,this[_0x116643(0x21b)](_0x36711f),this[_0x116643(0x1e5)](),this[_0x116643(0x23d)]?.[_0x116643(0x1fc)](()=>{var _0x1187ae=_0x116643;if(this[_0x1187ae(0x2a3)]['length']){let _0x3765da=this[_0x1187ae(0x2a3)][_0x1187ae(0x23f)](0x0,this['_maxActiveConnectionMessageCount']);for(let _0x1f7b28=0x0;_0x1f7b28<_0x3765da[_0x1187ae(0x223)];_0x1f7b28++)this[_0x1187ae(0x2ab)](_0x3765da[_0x1f7b28]);}}));}catch(_0x5cb730){console[_0x116643(0x298)](this[_0x116643(0x1d2)]+':\\x20'+(_0x5cb730&&_0x5cb730[_0x116643(0x1e2)])),this[_0x116643(0x294)]=!0x1,this['_attemptToReconnectShortly']();}}};function H(_0x3da308,_0x1146cf,_0x270692,_0x3671ea,_0x9ccb35){var _0x4931ef=_0x5de714;let _0x40102b=_0x270692[_0x4931ef(0x22f)](',')[_0x4931ef(0x27d)](_0x149096=>{var _0x24fbc6=_0x4931ef;try{_0x3da308[_0x24fbc6(0x2a4)]||((_0x9ccb35===_0x24fbc6(0x22b)||_0x9ccb35===_0x24fbc6(0x289))&&(_0x9ccb35+=_0x3da308[_0x24fbc6(0x27b)]?.[_0x24fbc6(0x1da)]?.[_0x24fbc6(0x1d7)]?_0x24fbc6(0x234):_0x24fbc6(0x256)),_0x3da308[_0x24fbc6(0x2a4)]={'id':+new Date(),'tool':_0x9ccb35});let _0x1105fb=new Y(_0x3da308,_0x1146cf,_0x149096,_0x3671ea);return _0x1105fb[_0x24fbc6(0x2ab)][_0x24fbc6(0x299)](_0x1105fb);}catch(_0x1fa6a2){return console['warn'](_0x24fbc6(0x1f7),_0x1fa6a2&&_0x1fa6a2['message']),()=>{};}});return _0x435322=>_0x40102b[_0x4931ef(0x1dc)](_0x5d5cf0=>_0x5d5cf0(_0x435322));}function _0x42cc(_0x43dc8c,_0xd8c54a){var _0x97950c=_0x9795();return _0x42cc=function(_0x42cc4c,_0x525b47){_0x42cc4c=_0x42cc4c-0x1bd;var _0x101f60=_0x97950c[_0x42cc4c];return _0x101f60;},_0x42cc(_0x43dc8c,_0xd8c54a);}function _0x9795(){var _0x259951=['_setNodeId','_connectAttemptCount','level','_hasSetOnItsPath','_propertyName','508090RDjWmO','host','getOwnPropertySymbols',':logPointId:','sort','substr','object','disabledTrace','_sendErrorMessage','array','_cleanNode','_addObjectProperty','_allowedToConnectOnSend','node','nan','join','versions','Error','forEach','method','cappedElements','_isArray','stackTraceLimit','test','message','_propertyAccessor','hostname','_connectToHostNow','timeStamp','sortProps','totalStrLength','6xnYElZ','perf_hooks','Set','127.0.0.1','[object\\x20Array]','_socket','bigint','ws/index.js','autoExpand','218413XFHlCj','_isPrimitiveType','_setNodePermissions','hrtime','resolveGetters','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','match','rootExpression','call','_getOwnPropertySymbols','then','create','String','WebSocket','global','trace','onopen','_maxActiveConnectionMessageCount','_property','negativeZero','prototype','_isPrimitiveWrapperType','_consoleNinjaAllowedToStart','_console_ninja','_treeNodePropertiesBeforeFullValue','autoExpandMaxDepth','132TPNDJV','cappedProps','_addProperty','_addFunctionsNode','argumentResolutionError','[object\\x20Map]','206208KJHuuW','6sVhwgo','_capIfString','_hasMapOnItsPath','pathToFileURL','toString','setter','_HTMLAllCollection','getOwnPropertyNames','_disposeWebsocket','symbol','props','console','7535100KnWmbp','Boolean','autoExpandPropertyCount','NEGATIVE_INFINITY','length','6988032WFkdSq','expressionsToEvaluate','capped','root_exp','reload','27FFjZiz','undefined','next.js','_processTreeNodeResult','number','nodeModules','split','_connecting','_isUndefined','autoExpandPreviousObjects','port','\\x20server','_setNodeExpandableState','POSITIVE_INFINITY','HTMLAllCollection','disabledLog','default','replace','unshift','stringify','_ws','funcName','splice','_undefined','current','catch','unref','_isSet','__es'+'Module','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help','time',[\"localhost\",\"127.0.0.1\",\"example.cypress.io\",\"fernando\",\"192.168.1.102\"],'failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','_dateToString','logger\\x20websocket\\x20error','_addLoadNode','now','_inBrowser',\"c:\\\\Users\\\\ferve\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-0.0.105\\\\node_modules\",'string','getPrototypeOf','boolean','constructor','RegExp','\\x20browser','strLength','data','_p_length','_connected','_WebSocketClass','root_exp_id','parent','Map','valueOf','toLowerCase','elements','log','type','12hBGDay','function','expId','getWebSocketClass','_getOwnPropertyDescriptor','value','serialize','_setNodeExpressionPath','_WebSocket','_hasSymbolPropertyOnItsPath','index','reduceLimits','date','allStrLength','[object\\x20Set]','getOwnPropertyDescriptor','_numberRegExp','_getOwnPropertyNames','_treeNodePropertiesAfterFullValue','_objectToString','url','null','_blacklistedProperty','process','onclose','map','slice','1.0.0','_maxConnectAttemptCount','nuxt','getter','get','negativeInfinity','57553','_additionalMetadata','onerror','path','remix','name','_activeConnectionMessageCount','error','enumerable','isArray','count','close','_attemptToReconnectShortly','_isNegativeZero','hits','_allowedToSend','location','push','timeEnd','warn','bind','webpack','concat','16CIbXwK','_setNodeLabel','_setNodeQueryPath','autoExpandLimit','_type','unknown','1681603617132','_messageQueue','_console_ninja_session','_delayMessageSending','performance','_Symbol','Buffer','noFunctions','isExpressionToEvaluate','send','_sortProps','_reconnectTimeout','9780199oSddQO','_p_','Number','_isMap','','depth','5108649RqPOxL'];_0x9795=function(){return _0x259951;};return _0x9795();}function V(_0x245436){var _0x36cecd=_0x5de714;let _0x423a3f=function(_0x3960e5,_0x51eebb){return _0x51eebb-_0x3960e5;},_0x1dab56;if(_0x245436['performance'])_0x1dab56=function(){var _0x325c88=_0x42cc;return _0x245436[_0x325c88(0x2a6)][_0x325c88(0x24e)]();};else{if(_0x245436['process']&&_0x245436[_0x36cecd(0x27b)][_0x36cecd(0x1f5)])_0x1dab56=function(){var _0x1b3482=_0x36cecd;return _0x245436['process'][_0x1b3482(0x1f5)]();},_0x423a3f=function(_0xc6cce5,_0x2692bc){return 0x3e8*(_0x2692bc[0x0]-_0xc6cce5[0x0])+(_0x2692bc[0x1]-_0xc6cce5[0x1])/0xf4240;};else try{let {performance:_0x71a494}=require(_0x36cecd(0x1ea));_0x1dab56=function(){return _0x71a494['now']();};}catch{_0x1dab56=function(){return+new Date();};}}return{'elapsed':_0x423a3f,'timeStamp':_0x1dab56,'now':()=>Date['now']()};}function X(_0x4b0400,_0x2e93f8,_0x3588e6){var _0x45de05=_0x5de714;if(_0x4b0400[_0x45de05(0x208)]!==void 0x0)return _0x4b0400[_0x45de05(0x208)];let _0x146248=_0x4b0400[_0x45de05(0x27b)]?.[_0x45de05(0x1da)]?.[_0x45de05(0x1d7)];return _0x146248&&_0x3588e6===_0x45de05(0x281)?_0x4b0400[_0x45de05(0x208)]=!0x1:_0x4b0400['_consoleNinjaAllowedToStart']=_0x146248||!_0x2e93f8||_0x4b0400['location']?.[_0x45de05(0x1e4)]&&_0x2e93f8['includes'](_0x4b0400[_0x45de05(0x295)][_0x45de05(0x1e4)]),_0x4b0400[_0x45de05(0x208)];}((_0x1ab2a5,_0x905ac1,_0x45cfda,_0x1f5c29,_0x1a4e0a,_0x3f1e88,_0x285731,_0x3ccbb0,_0x3a2bd6)=>{var _0x3886ef=_0x5de714;if(_0x1ab2a5[_0x3886ef(0x209)])return _0x1ab2a5['_console_ninja'];if(!X(_0x1ab2a5,_0x3ccbb0,_0x1a4e0a))return _0x1ab2a5[_0x3886ef(0x209)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x1ab2a5[_0x3886ef(0x209)];let _0x51f37f={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x4eb728={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2},_0x52e007=V(_0x1ab2a5),_0x12c66b=_0x52e007['elapsed'],_0x35a29b=_0x52e007[_0x3886ef(0x1e6)],_0x5b9bc6=_0x52e007[_0x3886ef(0x24e)],_0x53d25f={'hits':{},'ts':{}},_0x162599=_0x2f70b0=>{_0x53d25f['ts'][_0x2f70b0]=_0x35a29b();},_0x13d6a0=(_0x29181d,_0xbe3ae3)=>{var _0x4e399a=_0x3886ef;let _0x35b1ec=_0x53d25f['ts'][_0xbe3ae3];if(delete _0x53d25f['ts'][_0xbe3ae3],_0x35b1ec){let _0x428e73=_0x12c66b(_0x35b1ec,_0x35a29b());_0x33781f(_0x43a9f0(_0x4e399a(0x248),_0x29181d,_0x5b9bc6(),_0x2838ea,[_0x428e73],_0xbe3ae3));}},_0x5079ba=_0x1fbb28=>_0x392e17=>{var _0x3cadd4=_0x3886ef;try{_0x162599(_0x392e17),_0x1fbb28(_0x392e17);}finally{_0x1ab2a5['console'][_0x3cadd4(0x248)]=_0x1fbb28;}},_0x5958b0=_0x53d691=>_0x790be5=>{var _0x233a84=_0x3886ef;try{let [_0x5b58c8,_0x7853ce]=_0x790be5['split'](_0x233a84(0x1cd));_0x13d6a0(_0x7853ce,_0x5b58c8),_0x53d691(_0x5b58c8);}finally{_0x1ab2a5['console'][_0x233a84(0x297)]=_0x53d691;}};_0x1ab2a5[_0x3886ef(0x209)]={'consoleLog':(_0x8a1393,_0xb93335)=>{var _0x33b8d8=_0x3886ef;_0x1ab2a5[_0x33b8d8(0x21e)][_0x33b8d8(0x262)][_0x33b8d8(0x28a)]!==_0x33b8d8(0x238)&&_0x33781f(_0x43a9f0('log',_0x8a1393,_0x5b9bc6(),_0x2838ea,_0xb93335));},'consoleTrace':(_0x10a26c,_0x5d7d45)=>{var _0xea2a42=_0x3886ef;_0x1ab2a5['console']['log'][_0xea2a42(0x28a)]!==_0xea2a42(0x1d1)&&_0x33781f(_0x43a9f0('trace',_0x10a26c,_0x5b9bc6(),_0x2838ea,_0x5d7d45));},'consoleTime':()=>{var _0x321955=_0x3886ef;_0x1ab2a5['console'][_0x321955(0x248)]=_0x5079ba(_0x1ab2a5['console']['time']);},'consoleTimeEnd':()=>{var _0x6572da=_0x3886ef;_0x1ab2a5[_0x6572da(0x21e)][_0x6572da(0x297)]=_0x5958b0(_0x1ab2a5['console'][_0x6572da(0x297)]);},'autoLog':(_0x30376f,_0x563a88)=>{var _0x2e7b32=_0x3886ef;_0x33781f(_0x43a9f0(_0x2e7b32(0x262),_0x563a88,_0x5b9bc6(),_0x2838ea,[_0x30376f]));},'autoTrace':(_0x3c1318,_0x159e6b)=>{var _0x2a960c=_0x3886ef;_0x33781f(_0x43a9f0(_0x2a960c(0x201),_0x159e6b,_0x5b9bc6(),_0x2838ea,[_0x3c1318]));},'autoTime':(_0x436d6b,_0x3a2dd5,_0x3440d6)=>{_0x162599(_0x3440d6);},'autoTimeEnd':(_0x597aea,_0x6c2f56,_0x42ca63)=>{_0x13d6a0(_0x6c2f56,_0x42ca63);}};let _0x33781f=H(_0x1ab2a5,_0x905ac1,_0x45cfda,_0x1f5c29,_0x1a4e0a),_0x2838ea=_0x1ab2a5[_0x3886ef(0x2a4)];class _0xd341c9{constructor(){var _0x2a5973=_0x3886ef;this['_keyStrRegExp']=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x2a5973(0x274)]=/^(0|[1-9][0-9]*)$/,this['_quotedRegExp']=/'([^\\\\']|\\\\')*'/,this['_undefined']=_0x1ab2a5[_0x2a5973(0x22a)],this[_0x2a5973(0x219)]=_0x1ab2a5[_0x2a5973(0x237)],this['_getOwnPropertyDescriptor']=Object['getOwnPropertyDescriptor'],this[_0x2a5973(0x275)]=Object[_0x2a5973(0x21a)],this[_0x2a5973(0x2a7)]=_0x1ab2a5['Symbol'],this['_regExpToString']=RegExp[_0x2a5973(0x206)][_0x2a5973(0x217)],this[_0x2a5973(0x24b)]=Date[_0x2a5973(0x206)][_0x2a5973(0x217)];}['serialize'](_0x508f92,_0x34d892,_0x3e6ab1,_0x1bb4b6){var _0x1d2745=_0x3886ef,_0x4742bb=this,_0x558fc0=_0x3e6ab1[_0x1d2745(0x1f1)];function _0x2aa47f(_0x318f0f,_0x3579de,_0x2bee4e){var _0x2a46f9=_0x1d2745;_0x3579de['type']='unknown',_0x3579de[_0x2a46f9(0x28c)]=_0x318f0f[_0x2a46f9(0x1e2)],_0x71c6b8=_0x2bee4e['node'][_0x2a46f9(0x241)],_0x2bee4e[_0x2a46f9(0x1d7)][_0x2a46f9(0x241)]=_0x3579de,_0x4742bb[_0x2a46f9(0x20a)](_0x3579de,_0x2bee4e);}if(_0x34d892&&_0x34d892[_0x1d2745(0x210)])_0x2aa47f(_0x34d892,_0x508f92,_0x3e6ab1);else try{_0x3e6ab1[_0x1d2745(0x1c7)]++,_0x3e6ab1[_0x1d2745(0x1f1)]&&_0x3e6ab1[_0x1d2745(0x232)][_0x1d2745(0x296)](_0x34d892);var _0x2f00a1,_0x10519c,_0x4c0492,_0x287649,_0x258f16=[],_0xeb821=[],_0x21e706,_0x215595=this[_0x1d2745(0x2a0)](_0x34d892),_0x308083=_0x215595===_0x1d2745(0x1d3),_0x459343=!0x1,_0x2b3f6c=_0x215595===_0x1d2745(0x265),_0x4e7f30=this[_0x1d2745(0x1f3)](_0x215595),_0x1c15f7=this[_0x1d2745(0x207)](_0x215595),_0x317754=_0x4e7f30||_0x1c15f7,_0x2a79f7={},_0x10cd2e=0x0,_0x278456=!0x1,_0x71c6b8,_0xb68ab=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x3e6ab1[_0x1d2745(0x1c3)]){if(_0x308083){if(_0x10519c=_0x34d892[_0x1d2745(0x223)],_0x10519c>_0x3e6ab1['elements']){for(_0x4c0492=0x0,_0x287649=_0x3e6ab1[_0x1d2745(0x261)],_0x2f00a1=_0x4c0492;_0x2f00a1<_0x287649;_0x2f00a1++)_0xeb821['push'](_0x4742bb[_0x1d2745(0x20e)](_0x258f16,_0x34d892,_0x215595,_0x2f00a1,_0x3e6ab1));_0x508f92[_0x1d2745(0x1de)]=!0x0;}else{for(_0x4c0492=0x0,_0x287649=_0x10519c,_0x2f00a1=_0x4c0492;_0x2f00a1<_0x287649;_0x2f00a1++)_0xeb821['push'](_0x4742bb[_0x1d2745(0x20e)](_0x258f16,_0x34d892,_0x215595,_0x2f00a1,_0x3e6ab1));}_0x3e6ab1[_0x1d2745(0x221)]+=_0xeb821['length'];}if(!(_0x215595===_0x1d2745(0x279)||_0x215595===_0x1d2745(0x22a))&&!_0x4e7f30&&_0x215595!==_0x1d2745(0x1fe)&&_0x215595!==_0x1d2745(0x2a8)&&_0x215595!==_0x1d2745(0x1ef)){var _0x53231c=_0x1bb4b6[_0x1d2745(0x21d)]||_0x3e6ab1['props'];if(this[_0x1d2745(0x244)](_0x34d892)?(_0x2f00a1=0x0,_0x34d892[_0x1d2745(0x1dc)](function(_0x466396){var _0x272f44=_0x1d2745;if(_0x10cd2e++,_0x3e6ab1[_0x272f44(0x221)]++,_0x10cd2e>_0x53231c){_0x278456=!0x0;return;}if(!_0x3e6ab1['isExpressionToEvaluate']&&_0x3e6ab1[_0x272f44(0x1f1)]&&_0x3e6ab1['autoExpandPropertyCount']>_0x3e6ab1[_0x272f44(0x29f)]){_0x278456=!0x0;return;}_0xeb821[_0x272f44(0x296)](_0x4742bb[_0x272f44(0x20e)](_0x258f16,_0x34d892,_0x272f44(0x1eb),_0x2f00a1++,_0x3e6ab1,function(_0x281495){return function(){return _0x281495;};}(_0x466396)));})):this['_isMap'](_0x34d892)&&_0x34d892[_0x1d2745(0x1dc)](function(_0x4b9c7a,_0x3e2a7f){var _0x2ba566=_0x1d2745;if(_0x10cd2e++,_0x3e6ab1[_0x2ba566(0x221)]++,_0x10cd2e>_0x53231c){_0x278456=!0x0;return;}if(!_0x3e6ab1[_0x2ba566(0x2aa)]&&_0x3e6ab1[_0x2ba566(0x1f1)]&&_0x3e6ab1['autoExpandPropertyCount']>_0x3e6ab1[_0x2ba566(0x29f)]){_0x278456=!0x0;return;}var _0x330f00=_0x3e2a7f['toString']();_0x330f00[_0x2ba566(0x223)]>0x64&&(_0x330f00=_0x330f00[_0x2ba566(0x27e)](0x0,0x64)+'...'),_0xeb821[_0x2ba566(0x296)](_0x4742bb[_0x2ba566(0x20e)](_0x258f16,_0x34d892,_0x2ba566(0x25e),_0x330f00,_0x3e6ab1,function(_0x34b0a1){return function(){return _0x34b0a1;};}(_0x4b9c7a)));}),!_0x459343){try{for(_0x21e706 in _0x34d892)if(!(_0x308083&&_0xb68ab[_0x1d2745(0x1e1)](_0x21e706))&&!this[_0x1d2745(0x27a)](_0x34d892,_0x21e706,_0x3e6ab1)){if(_0x10cd2e++,_0x3e6ab1[_0x1d2745(0x221)]++,_0x10cd2e>_0x53231c){_0x278456=!0x0;break;}if(!_0x3e6ab1[_0x1d2745(0x2aa)]&&_0x3e6ab1[_0x1d2745(0x1f1)]&&_0x3e6ab1[_0x1d2745(0x221)]>_0x3e6ab1['autoExpandLimit']){_0x278456=!0x0;break;}_0xeb821[_0x1d2745(0x296)](_0x4742bb[_0x1d2745(0x1d5)](_0x258f16,_0x2a79f7,_0x34d892,_0x215595,_0x21e706,_0x3e6ab1));}}catch{}if(_0x2a79f7[_0x1d2745(0x259)]=!0x0,_0x2b3f6c&&(_0x2a79f7['_p_name']=!0x0),!_0x278456){var _0x149348=[][_0x1d2745(0x29b)](this[_0x1d2745(0x275)](_0x34d892))[_0x1d2745(0x29b)](this[_0x1d2745(0x1fb)](_0x34d892));for(_0x2f00a1=0x0,_0x10519c=_0x149348['length'];_0x2f00a1<_0x10519c;_0x2f00a1++)if(_0x21e706=_0x149348[_0x2f00a1],!(_0x308083&&_0xb68ab[_0x1d2745(0x1e1)](_0x21e706[_0x1d2745(0x217)]()))&&!this[_0x1d2745(0x27a)](_0x34d892,_0x21e706,_0x3e6ab1)&&!_0x2a79f7[_0x1d2745(0x1bf)+_0x21e706[_0x1d2745(0x217)]()]){if(_0x10cd2e++,_0x3e6ab1[_0x1d2745(0x221)]++,_0x10cd2e>_0x53231c){_0x278456=!0x0;break;}if(!_0x3e6ab1[_0x1d2745(0x2aa)]&&_0x3e6ab1['autoExpand']&&_0x3e6ab1[_0x1d2745(0x221)]>_0x3e6ab1['autoExpandLimit']){_0x278456=!0x0;break;}_0xeb821[_0x1d2745(0x296)](_0x4742bb[_0x1d2745(0x1d5)](_0x258f16,_0x2a79f7,_0x34d892,_0x215595,_0x21e706,_0x3e6ab1));}}}}}if(_0x508f92[_0x1d2745(0x263)]=_0x215595,_0x317754?(_0x508f92[_0x1d2745(0x269)]=_0x34d892['valueOf'](),this[_0x1d2745(0x214)](_0x215595,_0x508f92,_0x3e6ab1,_0x1bb4b6)):_0x215595===_0x1d2745(0x270)?_0x508f92[_0x1d2745(0x269)]=this['_dateToString']['call'](_0x34d892):_0x215595===_0x1d2745(0x255)?_0x508f92[_0x1d2745(0x269)]=this['_regExpToString'][_0x1d2745(0x1fa)](_0x34d892):_0x215595==='symbol'&&this[_0x1d2745(0x2a7)]?_0x508f92[_0x1d2745(0x269)]=this[_0x1d2745(0x2a7)]['prototype'][_0x1d2745(0x217)][_0x1d2745(0x1fa)](_0x34d892):!_0x3e6ab1[_0x1d2745(0x1c3)]&&!(_0x215595===_0x1d2745(0x279)||_0x215595==='undefined')&&(delete _0x508f92[_0x1d2745(0x269)],_0x508f92['capped']=!0x0),_0x278456&&(_0x508f92[_0x1d2745(0x20d)]=!0x0),_0x71c6b8=_0x3e6ab1['node'][_0x1d2745(0x241)],_0x3e6ab1[_0x1d2745(0x1d7)]['current']=_0x508f92,this[_0x1d2745(0x20a)](_0x508f92,_0x3e6ab1),_0xeb821['length']){for(_0x2f00a1=0x0,_0x10519c=_0xeb821[_0x1d2745(0x223)];_0x2f00a1<_0x10519c;_0x2f00a1++)_0xeb821[_0x2f00a1](_0x2f00a1);}_0x258f16[_0x1d2745(0x223)]&&(_0x508f92[_0x1d2745(0x21d)]=_0x258f16);}catch(_0xa41b8f){_0x2aa47f(_0xa41b8f,_0x508f92,_0x3e6ab1);}return this[_0x1d2745(0x286)](_0x34d892,_0x508f92),this['_treeNodePropertiesAfterFullValue'](_0x508f92,_0x3e6ab1),_0x3e6ab1[_0x1d2745(0x1d7)]['current']=_0x71c6b8,_0x3e6ab1[_0x1d2745(0x1c7)]--,_0x3e6ab1[_0x1d2745(0x1f1)]=_0x558fc0,_0x3e6ab1[_0x1d2745(0x1f1)]&&_0x3e6ab1[_0x1d2745(0x232)]['pop'](),_0x508f92;}[_0x3886ef(0x1fb)](_0x14e060){var _0x4035db=_0x3886ef;return Object[_0x4035db(0x1cc)]?Object[_0x4035db(0x1cc)](_0x14e060):[];}[_0x3886ef(0x244)](_0x1bf695){var _0x3cacb0=_0x3886ef;return!!(_0x1bf695&&_0x1ab2a5['Set']&&this[_0x3cacb0(0x277)](_0x1bf695)===_0x3cacb0(0x272)&&_0x1bf695[_0x3cacb0(0x1dc)]);}[_0x3886ef(0x27a)](_0x5e4c57,_0x54215a,_0x369538){var _0x2d3f23=_0x3886ef;return _0x369538[_0x2d3f23(0x2a9)]?typeof _0x5e4c57[_0x54215a]=='function':!0x1;}['_type'](_0x355a67){var _0x3a5d19=_0x3886ef,_0x51148d='';return _0x51148d=typeof _0x355a67,_0x51148d===_0x3a5d19(0x1d0)?this[_0x3a5d19(0x277)](_0x355a67)===_0x3a5d19(0x1ed)?_0x51148d=_0x3a5d19(0x1d3):this['_objectToString'](_0x355a67)==='[object\\x20Date]'?_0x51148d=_0x3a5d19(0x270):_0x355a67===null?_0x51148d=_0x3a5d19(0x279):_0x355a67[_0x3a5d19(0x254)]&&(_0x51148d=_0x355a67[_0x3a5d19(0x254)]['name']||_0x51148d):_0x51148d===_0x3a5d19(0x22a)&&this[_0x3a5d19(0x219)]&&_0x355a67 instanceof this[_0x3a5d19(0x219)]&&(_0x51148d=_0x3a5d19(0x237)),_0x51148d;}['_objectToString'](_0x20cba4){var _0x1747e8=_0x3886ef;return Object[_0x1747e8(0x206)][_0x1747e8(0x217)][_0x1747e8(0x1fa)](_0x20cba4);}['_isPrimitiveType'](_0x2ab52d){var _0x3613f9=_0x3886ef;return _0x2ab52d===_0x3613f9(0x253)||_0x2ab52d==='string'||_0x2ab52d===_0x3613f9(0x22d);}['_isPrimitiveWrapperType'](_0x197476){var _0x185da3=_0x3886ef;return _0x197476===_0x185da3(0x220)||_0x197476==='String'||_0x197476===_0x185da3(0x1c0);}[_0x3886ef(0x20e)](_0x144cf2,_0x474c33,_0x3d4c2f,_0x34432a,_0x574152,_0x790d4b){var _0x2c09b5=this;return function(_0x7fc04c){var _0x5de0f4=_0x42cc,_0x1f7f5d=_0x574152['node'][_0x5de0f4(0x241)],_0x2fa9cb=_0x574152[_0x5de0f4(0x1d7)]['index'],_0x623410=_0x574152[_0x5de0f4(0x1d7)][_0x5de0f4(0x25d)];_0x574152['node'][_0x5de0f4(0x25d)]=_0x1f7f5d,_0x574152['node']['index']=typeof _0x34432a=='number'?_0x34432a:_0x7fc04c,_0x144cf2[_0x5de0f4(0x296)](_0x2c09b5[_0x5de0f4(0x204)](_0x474c33,_0x3d4c2f,_0x34432a,_0x574152,_0x790d4b)),_0x574152[_0x5de0f4(0x1d7)][_0x5de0f4(0x25d)]=_0x623410,_0x574152[_0x5de0f4(0x1d7)][_0x5de0f4(0x26e)]=_0x2fa9cb;};}[_0x3886ef(0x1d5)](_0x2134e6,_0x3a0630,_0x386992,_0x52b31e,_0x179028,_0x2a93f5,_0x2ed162){var _0x24cf63=_0x3886ef,_0x3648b8=this;return _0x3a0630[_0x24cf63(0x1bf)+_0x179028[_0x24cf63(0x217)]()]=!0x0,function(_0x324ca9){var _0x6b12d7=_0x24cf63,_0x20270e=_0x2a93f5[_0x6b12d7(0x1d7)][_0x6b12d7(0x241)],_0x4ee8db=_0x2a93f5['node']['index'],_0x70af0f=_0x2a93f5[_0x6b12d7(0x1d7)]['parent'];_0x2a93f5['node'][_0x6b12d7(0x25d)]=_0x20270e,_0x2a93f5[_0x6b12d7(0x1d7)][_0x6b12d7(0x26e)]=_0x324ca9,_0x2134e6[_0x6b12d7(0x296)](_0x3648b8['_property'](_0x386992,_0x52b31e,_0x179028,_0x2a93f5,_0x2ed162)),_0x2a93f5[_0x6b12d7(0x1d7)]['parent']=_0x70af0f,_0x2a93f5[_0x6b12d7(0x1d7)]['index']=_0x4ee8db;};}[_0x3886ef(0x204)](_0x1a30be,_0x5919b7,_0x5a37c9,_0x567f3d,_0x5a4bd0){var _0x503327=_0x3886ef,_0x37f4d5=this;_0x5a4bd0||(_0x5a4bd0=function(_0x229421,_0x463f5e){return _0x229421[_0x463f5e];});var _0x3537b0=_0x5a37c9[_0x503327(0x217)](),_0x29cf27=_0x567f3d[_0x503327(0x225)]||{},_0x472d8f=_0x567f3d[_0x503327(0x1c3)],_0x50541f=_0x567f3d[_0x503327(0x2aa)];try{var _0x5cc006=this[_0x503327(0x1c1)](_0x1a30be),_0x378648=_0x3537b0;_0x5cc006&&_0x378648[0x0]==='\\x27'&&(_0x378648=_0x378648[_0x503327(0x1cf)](0x1,_0x378648[_0x503327(0x223)]-0x2));var _0x26d081=_0x567f3d['expressionsToEvaluate']=_0x29cf27[_0x503327(0x1bf)+_0x378648];_0x26d081&&(_0x567f3d[_0x503327(0x1c3)]=_0x567f3d[_0x503327(0x1c3)]+0x1),_0x567f3d[_0x503327(0x2aa)]=!!_0x26d081;var _0x4f7956=typeof _0x5a37c9==_0x503327(0x21c),_0x461cb9={'name':_0x4f7956||_0x5cc006?_0x3537b0:this[_0x503327(0x1c9)](_0x3537b0)};if(_0x4f7956&&(_0x461cb9['symbol']=!0x0),!(_0x5919b7==='array'||_0x5919b7===_0x503327(0x1db))){var _0x8d1d88=this[_0x503327(0x268)](_0x1a30be,_0x5a37c9);if(_0x8d1d88&&(_0x8d1d88['set']&&(_0x461cb9[_0x503327(0x218)]=!0x0),_0x8d1d88[_0x503327(0x283)]&&!_0x26d081&&!_0x567f3d['resolveGetters']))return _0x461cb9[_0x503327(0x282)]=!0x0,this[_0x503327(0x22c)](_0x461cb9,_0x567f3d),_0x461cb9;}var _0x1e465f;try{_0x1e465f=_0x5a4bd0(_0x1a30be,_0x5a37c9);}catch(_0x58984f){return _0x461cb9={'name':_0x3537b0,'type':_0x503327(0x2a1),'error':_0x58984f['message']},this[_0x503327(0x22c)](_0x461cb9,_0x567f3d),_0x461cb9;}var _0x2ed1a8=this[_0x503327(0x2a0)](_0x1e465f),_0x41eb66=this[_0x503327(0x1f3)](_0x2ed1a8);if(_0x461cb9[_0x503327(0x263)]=_0x2ed1a8,_0x41eb66)this[_0x503327(0x22c)](_0x461cb9,_0x567f3d,_0x1e465f,function(){var _0x248b73=_0x503327;_0x461cb9['value']=_0x1e465f[_0x248b73(0x25f)](),!_0x26d081&&_0x37f4d5[_0x248b73(0x214)](_0x2ed1a8,_0x461cb9,_0x567f3d,{});});else{var _0x32e415=_0x567f3d['autoExpand']&&_0x567f3d['level']<_0x567f3d[_0x503327(0x20b)]&&_0x567f3d[_0x503327(0x232)]['indexOf'](_0x1e465f)<0x0&&_0x2ed1a8!=='function'&&_0x567f3d[_0x503327(0x221)]<_0x567f3d[_0x503327(0x29f)];_0x32e415||_0x567f3d[_0x503327(0x1c7)]<_0x472d8f||_0x26d081?(this[_0x503327(0x26a)](_0x461cb9,_0x1e465f,_0x567f3d,_0x26d081||{}),this[_0x503327(0x286)](_0x1e465f,_0x461cb9)):this[_0x503327(0x22c)](_0x461cb9,_0x567f3d,_0x1e465f,function(){var _0x1c126e=_0x503327;_0x2ed1a8===_0x1c126e(0x279)||_0x2ed1a8===_0x1c126e(0x22a)||(delete _0x461cb9[_0x1c126e(0x269)],_0x461cb9[_0x1c126e(0x226)]=!0x0);});}return _0x461cb9;}finally{_0x567f3d[_0x503327(0x225)]=_0x29cf27,_0x567f3d[_0x503327(0x1c3)]=_0x472d8f,_0x567f3d[_0x503327(0x2aa)]=_0x50541f;}}[_0x3886ef(0x214)](_0x2003a9,_0x334096,_0x26b2be,_0x406d77){var _0xcecebc=_0x3886ef,_0x438b19=_0x406d77[_0xcecebc(0x257)]||_0x26b2be['strLength'];if((_0x2003a9===_0xcecebc(0x251)||_0x2003a9===_0xcecebc(0x1fe))&&_0x334096['value']){let _0x556a29=_0x334096['value'][_0xcecebc(0x223)];_0x26b2be['allStrLength']+=_0x556a29,_0x26b2be[_0xcecebc(0x271)]>_0x26b2be[_0xcecebc(0x1e8)]?(_0x334096['capped']='',delete _0x334096[_0xcecebc(0x269)]):_0x556a29>_0x438b19&&(_0x334096[_0xcecebc(0x226)]=_0x334096['value'][_0xcecebc(0x1cf)](0x0,_0x438b19),delete _0x334096[_0xcecebc(0x269)]);}}[_0x3886ef(0x1c1)](_0x30974e){var _0x24faed=_0x3886ef;return!!(_0x30974e&&_0x1ab2a5[_0x24faed(0x25e)]&&this[_0x24faed(0x277)](_0x30974e)===_0x24faed(0x211)&&_0x30974e[_0x24faed(0x1dc)]);}[_0x3886ef(0x1c9)](_0x5a3f8f){var _0x4de6b0=_0x3886ef;if(_0x5a3f8f[_0x4de6b0(0x1f8)](/^\\d+$/))return _0x5a3f8f;var _0x3cf7d4;try{_0x3cf7d4=JSON[_0x4de6b0(0x23c)](''+_0x5a3f8f);}catch{_0x3cf7d4='\\x22'+this['_objectToString'](_0x5a3f8f)+'\\x22';}return _0x3cf7d4[_0x4de6b0(0x1f8)](/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?_0x3cf7d4=_0x3cf7d4[_0x4de6b0(0x1cf)](0x1,_0x3cf7d4['length']-0x2):_0x3cf7d4=_0x3cf7d4[_0x4de6b0(0x23a)](/'/g,'\\x5c\\x27')[_0x4de6b0(0x23a)](/\\\\\"/g,'\\x22')[_0x4de6b0(0x23a)](/(^\"|\"$)/g,'\\x27'),_0x3cf7d4;}['_processTreeNodeResult'](_0x43a71c,_0xb8af3a,_0x3e8b72,_0x50e39b){var _0xad7e1e=_0x3886ef;this[_0xad7e1e(0x20a)](_0x43a71c,_0xb8af3a),_0x50e39b&&_0x50e39b(),this[_0xad7e1e(0x286)](_0x3e8b72,_0x43a71c),this[_0xad7e1e(0x276)](_0x43a71c,_0xb8af3a);}[_0x3886ef(0x20a)](_0x2d4594,_0x658d5f){var _0x5bdce6=_0x3886ef;this[_0x5bdce6(0x1c5)](_0x2d4594,_0x658d5f),this[_0x5bdce6(0x29e)](_0x2d4594,_0x658d5f),this[_0x5bdce6(0x26b)](_0x2d4594,_0x658d5f),this[_0x5bdce6(0x1f4)](_0x2d4594,_0x658d5f);}[_0x3886ef(0x1c5)](_0xbf475e,_0x10f791){}['_setNodeQueryPath'](_0x9bf3a4,_0x480223){}['_setNodeLabel'](_0x54915b,_0x478fb4){}[_0x3886ef(0x231)](_0x16e0d8){var _0x415be2=_0x3886ef;return _0x16e0d8===this[_0x415be2(0x240)];}[_0x3886ef(0x276)](_0x96b231,_0x38314d){var _0xc16b92=_0x3886ef;this[_0xc16b92(0x29d)](_0x96b231,_0x38314d),this['_setNodeExpandableState'](_0x96b231),_0x38314d[_0xc16b92(0x1e7)]&&this[_0xc16b92(0x2ac)](_0x96b231),this[_0xc16b92(0x20f)](_0x96b231,_0x38314d),this['_addLoadNode'](_0x96b231,_0x38314d),this[_0xc16b92(0x1d4)](_0x96b231);}[_0x3886ef(0x286)](_0x4621aa,_0x44eddb){var _0x3476c3=_0x3886ef;try{_0x4621aa&&typeof _0x4621aa[_0x3476c3(0x223)]=='number'&&(_0x44eddb[_0x3476c3(0x223)]=_0x4621aa[_0x3476c3(0x223)]);}catch{}if(_0x44eddb[_0x3476c3(0x263)]===_0x3476c3(0x22d)||_0x44eddb[_0x3476c3(0x263)]===_0x3476c3(0x1c0)){if(isNaN(_0x44eddb[_0x3476c3(0x269)]))_0x44eddb[_0x3476c3(0x1d8)]=!0x0,delete _0x44eddb[_0x3476c3(0x269)];else switch(_0x44eddb[_0x3476c3(0x269)]){case Number[_0x3476c3(0x236)]:_0x44eddb['positiveInfinity']=!0x0,delete _0x44eddb[_0x3476c3(0x269)];break;case Number[_0x3476c3(0x222)]:_0x44eddb[_0x3476c3(0x284)]=!0x0,delete _0x44eddb[_0x3476c3(0x269)];break;case 0x0:this[_0x3476c3(0x292)](_0x44eddb[_0x3476c3(0x269)])&&(_0x44eddb[_0x3476c3(0x205)]=!0x0);break;}}else _0x44eddb['type']===_0x3476c3(0x265)&&typeof _0x4621aa[_0x3476c3(0x28a)]=='string'&&_0x4621aa[_0x3476c3(0x28a)]&&_0x44eddb[_0x3476c3(0x28a)]&&_0x4621aa[_0x3476c3(0x28a)]!==_0x44eddb['name']&&(_0x44eddb[_0x3476c3(0x23e)]=_0x4621aa[_0x3476c3(0x28a)]);}[_0x3886ef(0x292)](_0x59da45){var _0x551b67=_0x3886ef;return 0x1/_0x59da45===Number[_0x551b67(0x222)];}[_0x3886ef(0x2ac)](_0x223694){var _0xb73016=_0x3886ef;!_0x223694[_0xb73016(0x21d)]||!_0x223694['props'][_0xb73016(0x223)]||_0x223694[_0xb73016(0x263)]===_0xb73016(0x1d3)||_0x223694[_0xb73016(0x263)]===_0xb73016(0x25e)||_0x223694[_0xb73016(0x263)]===_0xb73016(0x1eb)||_0x223694['props'][_0xb73016(0x1ce)](function(_0x17ec2b,_0xc4d7bb){var _0x2b9c14=_0xb73016,_0xe2ec0b=_0x17ec2b[_0x2b9c14(0x28a)][_0x2b9c14(0x260)](),_0x31dd43=_0xc4d7bb[_0x2b9c14(0x28a)]['toLowerCase']();return _0xe2ec0b<_0x31dd43?-0x1:_0xe2ec0b>_0x31dd43?0x1:0x0;});}[_0x3886ef(0x20f)](_0x301937,_0x1c2400){var _0x55e4a1=_0x3886ef;if(!(_0x1c2400[_0x55e4a1(0x2a9)]||!_0x301937[_0x55e4a1(0x21d)]||!_0x301937[_0x55e4a1(0x21d)][_0x55e4a1(0x223)])){for(var _0x3cfff1=[],_0xde088f=[],_0x455482=0x0,_0x17f8cd=_0x301937[_0x55e4a1(0x21d)][_0x55e4a1(0x223)];_0x455482<_0x17f8cd;_0x455482++){var _0x1336fe=_0x301937['props'][_0x455482];_0x1336fe[_0x55e4a1(0x263)]===_0x55e4a1(0x265)?_0x3cfff1[_0x55e4a1(0x296)](_0x1336fe):_0xde088f[_0x55e4a1(0x296)](_0x1336fe);}if(!(!_0xde088f['length']||_0x3cfff1[_0x55e4a1(0x223)]<=0x1)){_0x301937[_0x55e4a1(0x21d)]=_0xde088f;var _0x29ef09={'functionsNode':!0x0,'props':_0x3cfff1};this['_setNodeId'](_0x29ef09,_0x1c2400),this[_0x55e4a1(0x29d)](_0x29ef09,_0x1c2400),this[_0x55e4a1(0x235)](_0x29ef09),this[_0x55e4a1(0x1f4)](_0x29ef09,_0x1c2400),_0x29ef09['id']+='\\x20f',_0x301937[_0x55e4a1(0x21d)][_0x55e4a1(0x23b)](_0x29ef09);}}}[_0x3886ef(0x24d)](_0x32337f,_0x82c950){}[_0x3886ef(0x235)](_0x3968b3){}[_0x3886ef(0x1df)](_0x1089cf){var _0xe8aee4=_0x3886ef;return Array[_0xe8aee4(0x28e)](_0x1089cf)||typeof _0x1089cf==_0xe8aee4(0x1d0)&&this[_0xe8aee4(0x277)](_0x1089cf)==='[object\\x20Array]';}['_setNodePermissions'](_0x4bbf30,_0x58deb5){}[_0x3886ef(0x1d4)](_0x1e485b){var _0x5e91c1=_0x3886ef;delete _0x1e485b[_0x5e91c1(0x26d)],delete _0x1e485b[_0x5e91c1(0x1c8)],delete _0x1e485b[_0x5e91c1(0x215)];}[_0x3886ef(0x26b)](_0x1697fb,_0x4a69e2){}[_0x3886ef(0x1e3)](_0x1452d1){var _0x5cbe9b=_0x3886ef;return _0x1452d1?_0x1452d1['match'](this[_0x5cbe9b(0x274)])?'['+_0x1452d1+']':_0x1452d1[_0x5cbe9b(0x1f8)](this['_keyStrRegExp'])?'.'+_0x1452d1:_0x1452d1[_0x5cbe9b(0x1f8)](this['_quotedRegExp'])?'['+_0x1452d1+']':'[\\x27'+_0x1452d1+'\\x27]':'';}}let _0x18b3ec=new _0xd341c9();function _0x43a9f0(_0xb6f140,_0x52b314,_0x1cf6f1,_0x233420,_0x1e3428,_0x3b9f97){var _0x3c786e=_0x3886ef;let _0x27edf9,_0x2ddae7;try{_0x2ddae7=_0x35a29b(),_0x27edf9=_0x53d25f[_0x52b314],!_0x27edf9||_0x2ddae7-_0x27edf9['ts']>0x1f4&&_0x27edf9['count']&&_0x27edf9['time']/_0x27edf9['count']<0x64?(_0x53d25f[_0x52b314]=_0x27edf9={'count':0x0,'time':0x0,'ts':_0x2ddae7},_0x53d25f[_0x3c786e(0x293)]={}):_0x2ddae7-_0x53d25f[_0x3c786e(0x293)]['ts']>0x32&&_0x53d25f[_0x3c786e(0x293)][_0x3c786e(0x28f)]&&_0x53d25f[_0x3c786e(0x293)][_0x3c786e(0x248)]/_0x53d25f[_0x3c786e(0x293)]['count']<0x64&&(_0x53d25f[_0x3c786e(0x293)]={});let _0x51a290=[],_0x2984e2=_0x27edf9[_0x3c786e(0x26f)]||_0x53d25f[_0x3c786e(0x293)][_0x3c786e(0x26f)]?_0x4eb728:_0x51f37f,_0x3e1853=_0x18b4df=>{var _0x3fd78a=_0x3c786e;let _0xbd90a1={};return _0xbd90a1[_0x3fd78a(0x21d)]=_0x18b4df[_0x3fd78a(0x21d)],_0xbd90a1[_0x3fd78a(0x261)]=_0x18b4df[_0x3fd78a(0x261)],_0xbd90a1[_0x3fd78a(0x257)]=_0x18b4df[_0x3fd78a(0x257)],_0xbd90a1[_0x3fd78a(0x1e8)]=_0x18b4df['totalStrLength'],_0xbd90a1[_0x3fd78a(0x29f)]=_0x18b4df[_0x3fd78a(0x29f)],_0xbd90a1[_0x3fd78a(0x20b)]=_0x18b4df[_0x3fd78a(0x20b)],_0xbd90a1['sortProps']=!0x1,_0xbd90a1[_0x3fd78a(0x2a9)]=!_0x3a2bd6,_0xbd90a1[_0x3fd78a(0x1c3)]=0x1,_0xbd90a1[_0x3fd78a(0x1c7)]=0x0,_0xbd90a1[_0x3fd78a(0x266)]=_0x3fd78a(0x25c),_0xbd90a1[_0x3fd78a(0x1f9)]=_0x3fd78a(0x227),_0xbd90a1[_0x3fd78a(0x1f1)]=!0x0,_0xbd90a1[_0x3fd78a(0x232)]=[],_0xbd90a1[_0x3fd78a(0x221)]=0x0,_0xbd90a1[_0x3fd78a(0x1f6)]=!0x0,_0xbd90a1[_0x3fd78a(0x271)]=0x0,_0xbd90a1[_0x3fd78a(0x1d7)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0xbd90a1;};for(var _0x25c2ed=0x0;_0x25c2ed<_0x1e3428[_0x3c786e(0x223)];_0x25c2ed++)_0x51a290[_0x3c786e(0x296)](_0x18b3ec[_0x3c786e(0x26a)]({'timeNode':_0xb6f140==='time'||void 0x0},_0x1e3428[_0x25c2ed],_0x3e1853(_0x2984e2),{}));if(_0xb6f140===_0x3c786e(0x201)){let _0xb500ce=Error[_0x3c786e(0x1e0)];try{Error[_0x3c786e(0x1e0)]=0x1/0x0,_0x51a290[_0x3c786e(0x296)](_0x18b3ec[_0x3c786e(0x26a)]({'stackNode':!0x0},new Error()['stack'],_0x3e1853(_0x2984e2),{'strLength':0x1/0x0}));}finally{Error[_0x3c786e(0x1e0)]=_0xb500ce;}}return{'method':_0x3c786e(0x262),'version':_0x3f1e88,'args':[{'id':_0x52b314,'ts':_0x1cf6f1,'args':_0x51a290,'context':_0x3b9f97,'session':_0x233420}]};}catch(_0x2d5fcb){return{'method':_0x3c786e(0x262),'version':_0x3f1e88,'args':[{'id':_0x52b314,'ts':_0x1cf6f1,'args':[{'type':'unknown','error':_0x2d5fcb&&_0x2d5fcb['message'],'context':_0x3b9f97,'session':_0x233420}]}]};}finally{try{if(_0x27edf9&&_0x2ddae7){let _0x4a114d=_0x35a29b();_0x27edf9[_0x3c786e(0x28f)]++,_0x27edf9[_0x3c786e(0x248)]+=_0x12c66b(_0x2ddae7,_0x4a114d),_0x27edf9['ts']=_0x4a114d,_0x53d25f[_0x3c786e(0x293)][_0x3c786e(0x28f)]++,_0x53d25f['hits'][_0x3c786e(0x248)]+=_0x12c66b(_0x2ddae7,_0x4a114d),_0x53d25f[_0x3c786e(0x293)]['ts']=_0x4a114d,(_0x27edf9[_0x3c786e(0x28f)]>0x32||_0x27edf9[_0x3c786e(0x248)]>0x64)&&(_0x27edf9[_0x3c786e(0x26f)]=!0x0),(_0x53d25f[_0x3c786e(0x293)]['count']>0x3e8||_0x53d25f[_0x3c786e(0x293)][_0x3c786e(0x248)]>0x12c)&&(_0x53d25f['hits']['reduceLimits']=!0x0);}}catch{}}}return _0x1ab2a5['_console_ninja'];})(globalThis,_0x5de714(0x1ec),_0x5de714(0x285),_0x5de714(0x250),_0x5de714(0x29a),_0x5de714(0x27f),_0x5de714(0x2a2),_0x5de714(0x249),_0x5de714(0x1c2));")}catch{}})().consoleLog(X,M)}catch{}return M}("2000c600_0",S))}})}}return X.\u0275fac=function(S){return new(S||X)(_.Y36(z.z))},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-carrusel"]],decls:10,vars:1,consts:[["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],["class","carousel-inner bgsec",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-inner","bgsec"],[1,"carousel-item","active"],[1,"d-block","w-100",3,"src","alt"]],template:function(S,G){1&S&&(_.TgZ(0,"div",0),_.YNc(1,$,4,5,"div",1),_.TgZ(2,"button",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_._uU(5,"Previous"),_.qZA()(),_.TgZ(6,"button",5),_._UZ(7,"span",6),_.TgZ(8,"span",4),_._uU(9,"Next"),_.qZA()()()),2&S&&(_.xp6(1),_.Q6J("ngForOf",G.carruseles))},dependencies:[q.sg,re.$],encapsulation:2}),X})();let Mr=(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-galeria"]],decls:26,vars:0,consts:[[1,"con"],[1,"bg","text-center","py-5","mb-4"],[1,"container"],[1,"fw-light","text-white"],[1,"intento"],[1,"row"],[1,"col-lg-4","col-md-12","mb-4","mb-lg-0"],["data-ripple-color","light",1,"bg-image","hover-overlay","ripple","shadow-1-strong","rounded"],["src","../../../assets/gale1.jpg",1,"w-100","img-thumbnail"],["href","#!","data-mdb-toggle","modal","data-mdb-target","#exampleModal1"],[1,"mask",2,"background-color","rgba(251, 251, 251, 0.2)"],[1,"col-lg-4","mb-4","mb-lg-0"],["src","../../../assets/gale2.jpg",1,"w-100","img-thumbnail"],["href","#!","data-mdb-toggle","modal","data-mdb-target","#exampleModal2"],["src","../../../assets/gale3.jpg",1,"w-100","img-thumbnail"],["href","#!","data-mdb-toggle","modal","data-mdb-target","#exampleModal3"]],template:function(S,G){1&S&&(_.TgZ(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),_._uU(4,"Galeria"),_.qZA()()(),_.TgZ(5,"section",2),_._UZ(6,"br"),_.TgZ(7,"section",4)(8,"div",5)(9,"div",6)(10,"div",7),_._UZ(11,"img",8),_.TgZ(12,"a",9),_._UZ(13,"div",10),_.qZA()()(),_.TgZ(14,"div",11)(15,"div",7),_._UZ(16,"img",12),_.TgZ(17,"a",13),_._UZ(18,"div",10),_.qZA()()(),_.TgZ(19,"div",11)(20,"div",7),_._UZ(21,"img",14),_.TgZ(22,"a",15),_._UZ(23,"div",10),_.qZA()()()()()(),_._UZ(24,"br")(25,"br"),_.qZA())},styles:[".tigal[_ngcontent-%COMP%]{text-align:center}.con[_ngcontent-%COMP%]{background-color:#dfd2b0}.row[_ngcontent-%COMP%]{align-items:center}"]}),X})();var Ar=B(7392);let br=(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-correo"]],decls:39,vars:0,consts:[[1,"bg","text-center","py-5","mb-4"],[1,"container"],[1,"fw-light","text-white"],[1,"row","px-3"],[1,"col-lg-10","col-xl-9","card","flex-row","mx-auto","px-0"],[1,"card-body"],[1,"card-title"],["action",""],[1,"form-floating","mb-3"],["id","nombre","type","text","name","matricula","placeholder","nombre",1,"form-control"],["for","inputFirstName",1,"flex"],["id","correo","type","email","name","correo","placeholder","Correo",1,"form-control"],["id","asunto","type","text","name","asunto","placeholder","Asunto",1,"form-control"],["name","mensaje","id","mensaje","cols","30","rows","10","placeholder","Mensaje",1,"form-control"],[1,"envcor"],[1,"btn","btn-primary","flex"]],template:function(S,G){1&S&&(_.TgZ(0,"header",0)(1,"div",1)(2,"h1",2),_._uU(3,"Dejanos una sugerencia"),_.qZA()()(),_.TgZ(4,"div",1)(5,"div",3)(6,"div",4)(7,"div",5),_._UZ(8,"h1",6),_.TgZ(9,"form",7)(10,"div",8),_._UZ(11,"input",9),_.TgZ(12,"label",10)(13,"mat-icon"),_._uU(14,"person"),_.qZA(),_._uU(15,"Nombre"),_.qZA()(),_.TgZ(16,"div",8),_._UZ(17,"input",11),_.TgZ(18,"label",10)(19,"mat-icon"),_._uU(20,"mail"),_.qZA(),_._uU(21,"Correo"),_.qZA()(),_.TgZ(22,"div",8),_._UZ(23,"input",12),_.TgZ(24,"label",10)(25,"mat-icon"),_._uU(26,"inbox"),_.qZA(),_._uU(27,"Asunto"),_.qZA()(),_.TgZ(28,"div",8),_._UZ(29,"textarea",13),_.TgZ(30,"label",10)(31,"mat-icon"),_._uU(32,"chat_bubble"),_.qZA(),_._uU(33,"Mensaje"),_.qZA()(),_.TgZ(34,"div",14)(35,"button",15),_._uU(36," Enviar "),_.TgZ(37,"mat-icon"),_._uU(38,"send"),_.qZA()()()()()()()())},dependencies:[Ar.Hw],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%;font-size:18px}.envcor[_ngcontent-%COMP%]{display:flex;justify-content:space-around}mat-icon[_ngcontent-%COMP%]{font-size:20px}.card-title[_ngcontent-%COMP%]{text-align:center}.flex[_ngcontent-%COMP%]{display:flex}"]}),X})();const Po=function(X){return["/ligas",X]};let Rr=(()=>{class X{}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-liga-tarjetas"]],inputs:{liga:"liga"},decls:12,vars:11,consts:[[1,"card-deck","mt-3"],[1,"card","text-center"],[1,"logo-liga",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary","mx-2",3,"routerLink"]],template:function(S,G){1&S&&(_.TgZ(0,"div",0)(1,"div",1),_._UZ(2,"img",2),_.ALo(3,"imagen"),_.TgZ(4,"div",3)(5,"h4",4),_._uU(6),_.ALo(7,"titlecase"),_.qZA(),_.TgZ(8,"p",5),_._uU(9),_.qZA(),_.TgZ(10,"a",6),_._uU(11,"Entrar"),_.qZA()()()()),2&S&&(_.xp6(2),_.Q6J("src",_.xi3(3,4,G.liga.img,"ligas"),_.LSH),_.xp6(4),_.Oqu(_.lcZ(7,7,G.liga.nombre)),_.xp6(3),_.hij(" ",G.liga.descripcion,""),_.xp6(1),_.Q6J("routerLink",_.VKq(9,Po,G.liga._id)))},dependencies:[Yo.yS,q.rS,re.$],encapsulation:2}),X})();function po(X,M){if(1&X&&(_.TgZ(0,"div",5)(1,"div",6),_._UZ(2,"img",7),_.TgZ(3,"div",8)(4,"h3",9),_._uU(5),_.qZA(),_.TgZ(6,"div",10),_._uU(7),_.qZA(),_.TgZ(8,"div",10),_._uU(9),_.qZA()()()()),2&X){const S=M.$implicit;_.xp6(2),_.s9C("src",S.image,_.LSH),_.xp6(3),_.Oqu(S.nombre),_.xp6(2),_.Oqu(S.roll),_.xp6(2),_.Oqu(S.roll2)}}let Zo=(()=>{class X{constructor(){this.equipo=[{nombre:"Fernando Vega",roll:"Dise\xf1ador",roll2:"Desarrollador",image:"../../../assets/fotos EQUIPO/fer.jpg"},{nombre:"Denisse San Juan",roll:"Documentadora",roll2:"Analista de datos",image:"../../../assets/fotos EQUIPO/dennise.jpg"},{nombre:"Gustavo Trejo",roll:"Tester",roll2:"Desarrollador",image:"../../../assets/fotos EQUIPO/trejo.jpg"},{nombre:"Jorge Flores ",roll:"Analista",roll2:"Desarrollador",image:"../../../assets/fotos EQUIPO/jorge.jpg"}]}ngOnInit(){}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-team"]],decls:7,vars:1,consts:[[1,"bg","text-center","py-5","mb-4"],[1,"container"],[1,"fw-light","text-white"],[1,"row"],["class","col-xl-3 col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-0","shadow"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body","text-center"],[1,"card-title","mb-0"],[1,"card-text","text-black-50"]],template:function(S,G){1&S&&(_.TgZ(0,"header",0)(1,"div",1)(2,"h1",2),_._uU(3,"Equipo de desarrollo"),_.qZA()()(),_.TgZ(4,"div",1)(5,"div",3),_.YNc(6,po,10,4,"div",4),_.qZA()()),2&S&&(_.xp6(6),_.Q6J("ngForOf",G.equipo))},dependencies:[q.sg],encapsulation:2}),X})();function ss(X,M){if(1&X&&(_.TgZ(0,"div"),_._UZ(1,"app-liga-tarjetas",5),_.qZA()),2&X){const S=M.$implicit;_.xp6(1),_.Q6J("liga",S)}}let Us=(()=>{class X{constructor(S,G){this.ligasService=S,this.usuarioService=G,this.ligas=[]}ngOnInit(){this.ligasService.smallgetLigas().subscribe(S=>this.ligas=S)}}return X.\u0275fac=function(S){return new(S||X)(_.Y36(Nl.O),_.Y36(Ha.i))},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-inicio"]],decls:17,vars:1,consts:[[1,"bg","text-center","py-5","mb-4"],[1,"container"],[1,"fw-light","text-white"],[1,"grid"],[4,"ngFor","ngForOf"],[3,"liga"]],template:function(S,G){1&S&&(_._UZ(0,"app-navbar")(1,"app-carrusel"),_.TgZ(2,"header",0)(3,"div",1)(4,"h1",2),_._uU(5,"Ligas"),_.qZA()()(),_.TgZ(6,"div",1)(7,"div",3),_.YNc(8,ss,2,1,"div",4),_.qZA()(),_._UZ(9,"br")(10,"app-galeria")(11,"app-team")(12,"br")(13,"app-correo")(14,"br")(15,"br")(16,"br")),2&S&&(_.xp6(8),_.Q6J("ngForOf",G.ligas))},dependencies:[q.sg,ye,Mr,da,br,Rr,Zo],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1rem}"]}),X})();const zo=[{path:"auth",loadChildren:()=>Promise.all([B.e(226),B.e(592),B.e(86)]).then(B.bind(B,6086)).then(X=>X.AuthModule)},{path:"gestor",loadChildren:()=>Promise.all([B.e(226),B.e(592),B.e(727)]).then(B.bind(B,2727)).then(X=>X.GestorModule)},{path:"ligas",loadChildren:()=>Promise.all([B.e(592),B.e(262)]).then(B.bind(B,2262)).then(X=>X.LigasModule)},{path:"base",loadChildren:()=>Promise.all([B.e(226),B.e(592),B.e(236)]).then(B.bind(B,8236)).then(X=>X.DatabaseModule)},{path:"inicio",component:Us,pathMatch:"full"},{path:"jugador",component:(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-jugador"]],decls:2,vars:0,template:function(S,G){1&S&&(_.TgZ(0,"p"),_._uU(1,"jugador works!"),_.qZA())}}),X})()},{path:"aviso_privacidad",component:xc},{path:"404",component:(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-error-page"]],decls:9,vars:0,consts:[[1,"bgsec"],["routerLink","/inicio","src","../../../assets/mensajeerror.png","alt","",1,"d-block",2,"display","block","margin-left","auto","margin-right","auto","width","750px"]],template:function(S,G){1&S&&(_.TgZ(0,"body",0),_._UZ(1,"br")(2,"br")(3,"br"),_.TgZ(4,"a"),_._UZ(5,"img",1),_.qZA(),_._UZ(6,"br")(7,"br")(8,"br"),_.qZA())},dependencies:[Yo.rH],encapsulation:2}),X})()},{path:"",component:Us},{path:"**",redirectTo:"404"}];let ha=(()=>{class X{}return X.\u0275fac=function(S){return new(S||X)},X.\u0275mod=_.oAB({type:X}),X.\u0275inj=_.cJS({imports:[Yo.Bz.forRoot(zo),Yo.Bz]}),X})();var bc=B(2340),ko=B(9898);const Ta=["mapa"];let Ga=(()=>{class X{constructor(){this.lngLat=[0,0]}ngAfterViewInit(){const S=new ko.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:15});(new ko.Marker).setLngLat(this.lngLat).addTo(S)}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-mini-mapa"]],viewQuery:function(S,G){if(1&S&&_.Gf(Ta,5),2&S){let ue;_.iGM(ue=_.CRH())&&(G.divMapa=ue.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["mapa",""]],template:function(S,G){1&S&&_._UZ(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]}),X})();function ec(X,M){if(1&X&&(_.TgZ(0,"div",13),_._UZ(1,"app-mini-mapa",14),_.TgZ(2,"div",15)(3,"h5",16),_._uU(4),_.qZA(),_.TgZ(5,"p",17),_._uU(6),_.qZA()()()),2&X){const S=M.$implicit;_.xp6(1),_.Q6J("lngLat",S.lngLat),_.xp6(3),_.hij(" ",S.titulo,""),_.xp6(2),_.Oqu(S.descripcion)}}let Dr=(()=>{class X{constructor(){this.propiedades=[{titulo:"Presidencia municipal, Huejutla",descripcion:"Pl. de la Revoluci\xf3n Mexicana SN, Centro, 43000 Huejutla, Hgo.",lngLat:[-98.42047711680699,21.139670643115895]}]}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-footer"]],decls:31,vars:1,consts:[[1,"pie-pagina","bg"],[1,"grupo-1"],[1,"box"],["href","#"],["src","../../../assets/lgn.png","alt","Logo de SLee Dw"],[1,"red-social"],["href","https://www.facebook.com/presidenciahuejutla2024","target","_blank",1,"fa","fa-facebook"],["href","https://www.instagram.com/?hl=es-la","target","_blank",1,"fa","fa-instagram"],["href","https://www.facebook.com/presidenciahuejutla2024","target","_blank",1,"fa","fa-whatsapp"],["class","card mapita",4,"ngFor","ngForOf"],[1,"foo"],[1,"grupo-2"],[1,"letra"],[1,"card","mapita"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text","direc"]],template:function(S,G){1&S&&(_.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"figure")(4,"a",3),_._UZ(5,"img",4),_.qZA()()(),_.TgZ(6,"div",2)(7,"h2"),_._uU(8,"SOBRE NOSOTROS"),_.qZA(),_.TgZ(9,"p"),_._uU(10,"SOLF es un sistema la cual funcionara para la organizacion de ligas de futbol"),_.qZA(),_.TgZ(11,"p"),_._uU(12,"Contamos con una gran experiencia y sabemos lo que necesita una organizacion"),_.qZA()(),_.TgZ(13,"div",2)(14,"h2"),_._uU(15,"Nuestras Redes Solciales"),_.qZA(),_.TgZ(16,"div",5),_._UZ(17,"a",6)(18,"a",7)(19,"a",8),_.qZA(),_.TgZ(20,"h2"),_._uU(21,"Ubicaciones de oficinas"),_.qZA(),_.TgZ(22,"div",5),_.YNc(23,ec,7,3,"div",9),_.qZA()()(),_.TgZ(24,"div",10)(25,"div",11)(26,"small",12),_._uU(27,"\xa9 2022 "),_.TgZ(28,"b"),_._uU(29,"SOLF"),_.qZA(),_._uU(30," - Todos los Derechos Reservados."),_.qZA()()()()),2&S&&(_.xp6(23),_.Q6J("ngForOf",G.propiedades))},dependencies:[q.sg,Ga],styles:[".pie-pagina[_ngcontent-%COMP%]{width:100%}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:auto;display:grid;grid-template-columns:repeat(3,1fr);grid-gap:50px;padding:45px 0}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-decoration:none}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:25px;font-size:20px}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#efefef;margin-bottom:10px}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]   .red-social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;text-decoration:none;width:45px;height:45px;line-height:45px;color:#000;margin-right:10px;background-color:#dfd2b0;text-align:center;transition:all .3s ease}.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]   .red-social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#521a49}.pie-pagina[_ngcontent-%COMP%]   .grupo-2[_ngcontent-%COMP%]{background-color:#dfd2;padding:15px 10px;text-align:center;color:#fff}.pie-pagina[_ngcontent-%COMP%]   .grupo-2[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:15px}.direc[_ngcontent-%COMP%]{color:#000}.foo[_ngcontent-%COMP%]{background-color:#dfd2b0}.letra[_ngcontent-%COMP%]{color:#521a49}@media screen and (max-width:800px){.pie-pagina[_ngcontent-%COMP%]   .grupo-1[_ngcontent-%COMP%]{width:90%;grid-template-columns:repeat(1,1fr);grid-gap:30px;padding:35px 0}}"]}),X})(),zl=(()=>{class X{constructor(){this.title="solf"}ngOnInit(){ko.accessToken=bc.N.mapboxToken}}return X.\u0275fac=function(S){return new(S||X)},X.\u0275cmp=_.Xpm({type:X,selectors:[["app-root"]],decls:2,vars:0,template:function(S,G){1&S&&_._UZ(0,"router-outlet")(1,"app-footer")},dependencies:[Yo.lC,Dr]}),X})();var pl=B(5503),Ul=B(9563);let $a=(()=>{class X{}return X.\u0275fac=function(S){return new(S||X)},X.\u0275mod=_.oAB({type:X}),X.\u0275inj=_.cJS({imports:[q.ez,ha,Yo.Bz,Ul.q,pl.D]}),X})(),ml=(()=>{class X{}return X.\u0275fac=function(S){return new(S||X)},X.\u0275mod=_.oAB({type:X}),X.\u0275inj=_.cJS({imports:[q.ez,$a,ha,pl.D]}),X})(),wc=(()=>{class X{}return X.\u0275fac=function(S){return new(S||X)},X.\u0275mod=_.oAB({type:X,bootstrap:[zl]}),X.\u0275inj=_.cJS({imports:[de.JF,w.b2,ha,$a,ml,ja]}),X})();bc.N.production&&(0,_.G48)(),w.q6().bootstrapModule(wc).catch(X=>console.error(X))},9898:function(ti){ti.exports=function(){"use strict";var Ut,B,w;function _(a,he){if(Ut)if(B){var st="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Ut+")(sharedChunk); ("+B+")(sharedChunk); self.onerror = null;",nt={};Ut(nt),w=he(nt),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(w.workerUrl=window.URL.createObjectURL(new Blob([st],{type:"text/javascript"})))}else B=he;else Ut=he}return _(0,function(a){var he=typeof self<"u"?self:{},st="2.12.0";let nt;const Oe={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==nt){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{nt=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t}catch{nt=t}}return nt},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ke={supported:!1,testSupport:function(t){!Et&&pt&&(dt?wt(t):rt=t)}};let rt,pt,Et=!1,dt=!1;function wt(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,pt),t.isContextLost())return;ke.supported=!0}catch{}t.deleteTexture(e),Et=!0}he.document&&(pt=he.document.createElement("img"),pt.onload=function(){rt&&wt(rt),rt=null,dt=!0},pt.onerror=function(){Et=!0,rt=null},pt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const et="01";var Zt=kt;function kt(t,e,n,s){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(s-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=s}kt.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,s=0;s<8;s++){var u=this.sampleCurveX(n)-t;if(Math.abs(u)<e)return n;var f=this.sampleCurveDerivativeX(n);if(Math.abs(f)<1e-6)break;n-=u/f}var m=0,v=1;for(n=t,s=0;s<20&&(u=this.sampleCurveX(n),!(Math.abs(u-t)<e));s++)t>u?m=n:v=n,n=.5*(v-m)+m;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Qe=Hn;function Hn(t,e){this.x=t,this.y=e}Hn.prototype={clone:function(){return new Hn(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),s=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=s,this},_rotateAround:function(t,e){var n=Math.cos(t),s=Math.sin(t),u=e.y+s*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-s*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Hn.convert=function(t){return t instanceof Hn?t:Array.isArray(t)?new Hn(t[0],t[1]):t};const Fn=Math.PI/180,Ye=180/Math.PI;function Ce(t){return t*Fn}function we(t){return t*Ye}const At=[[0,0],[1,0],[1,1],[0,1]];function zt(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Jt(t,e,n,s){const u=new Zt(t,e,n,s);return function(f){return u.solve(f)}}const Mn=Jt(.25,.1,.25,1);function Ke(t,e,n){return Math.min(n,Math.max(e,t))}function Ne(t,e,n){return(n=Ke((n-t)/(e-t),0,1))*n*(3-2*n)}function He(t,e,n){const s=n-e,u=((t-e)%s+s)%s+e;return u===e?n:u}function yt(t,e,n){if(!t.length)return n(null,[]);let s=t.length;const u=new Array(t.length);let f=null;t.forEach((m,v)=>{e(m,(E,C)=>{E&&(f=E),u[v]=C,0==--s&&n(f,u)})})}function Tn(t){const e=[];for(const n in t)e.push(t[n]);return e}function Xt(t,...e){for(const n of e)for(const s in n)t[s]=n[s];return t}let ii=1;function vi(){return ii++}function wi(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function Nn(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Li(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function Jn(t,e){t.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}function mn(t,e){return-1!==t.indexOf(e,t.length-e.length)}function Tt(t,e,n){const s={};for(const u in t)s[u]=e.call(n||this,t[u],u,t);return s}function Ge(t,e,n){const s={};for(const u in t)e.call(n||this,t[u],u,t)&&(s[u]=t[u]);return s}function Fe(t){return Array.isArray(t)?t.map(Fe):"object"==typeof t&&t?Tt(t,Fe):t}const ht={};function Xe(t){ht[t]||(typeof console<"u"&&console.warn(t),ht[t]=!0)}function ce(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function ot(t){let e=0;for(let n,s,u=0,f=t.length,m=f-1;u<f;m=u++)n=t[u],s=t[m],e+=(s.x-n.x)*(n.y+s.y);return e}function Se(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function St(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,s,u,f)=>{const m=u||f;return e[s]=!m||m.toLowerCase(),""}),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}let tn=null;function li(t){if(null==tn){const e=t.navigator?t.navigator.userAgent:null;tn=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return tn}function Wi(t){try{const e=he[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function Dn(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const ae="mapbox-tiles";let $e,Ot,on=500,jt=50;function Bt(){try{return he.caches}catch{}}function Je(){Bt()&&!$e&&($e=he.caches.open(ae))}function ge(t){const e=t.indexOf("?");if(e<0)return t;const s=function(u){const f=u.indexOf("?");return f>0?u.slice(f+1).split("&"):[]}(t).filter(u=>{const f=u.split("=");return"language"===f[0]||"worldview"===f[0]});return s.length?`${t.slice(0,e)}?${s.join("&")}`:t.slice(0,e)}let pe=1/0;const te={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(te);class it extends Error{constructor(e,n,s){401===n&&nn(s)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=n,this.url=s}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ht=Se()?()=>self.worker&&self.worker.referrer:()=>("blob:"===he.location.protocol?he.parent:he).location.href,Rn=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Ht())&&!/^\w+:/.test(n))){if(he.fetch&&he.Request&&he.AbortController&&he.Request.prototype.hasOwnProperty("signal"))return function(s,u){const f=new he.AbortController,m=new he.Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,referrer:Ht(),signal:f.signal});let v=!1,E=!1;const C=(R=m.url).indexOf("sku=")>0&&nn(R);var R;"json"===s.type&&m.headers.set("Accept","application/json");const N=(K,J,se)=>{if(E)return;if(K&&"SecurityError"!==K.message&&Xe(K),J&&se)return H(J);const De=Date.now();he.fetch(m).then(We=>{if(We.ok){const _t=C?We.clone():null;return H(We,_t,De)}return u(new it(We.statusText,We.status,s.url))}).catch(We=>{20!==We.code&&u(new Error(We.message))})},H=(K,J,se)=>{("arrayBuffer"===s.type?K.arrayBuffer():"json"===s.type?K.json():K.text()).then(De=>{E||(J&&se&&function(We,_t,Ze){if(Je(),!$e)return;const lt={status:_t.status,statusText:_t.statusText,headers:new he.Headers};_t.headers.forEach((sn,en)=>lt.headers.set(en,sn));const Ct=St(_t.headers.get("Cache-Control")||"");if(Ct["no-store"])return;Ct["max-age"]&&lt.headers.set("Expires",new Date(Ze+1e3*Ct["max-age"]).toUTCString());const mt=lt.headers.get("Expires");mt&&(new Date(mt).getTime()-Ze<42e4||function(sn,en){if(void 0===Ot)try{new Response(new ReadableStream),Ot=!0}catch{Ot=!1}Ot?en(sn.body):sn.blob().then(en)}(_t,sn=>{const en=new he.Response(sn,lt);Je(),$e&&$e.then(In=>In.put(ge(We.url),en)).catch(In=>Xe(In.message))}))}(m,J,se),v=!0,u(null,De,K.headers.get("Cache-Control"),K.headers.get("Expires")))}).catch(De=>{E||u(new Error(De.message))})};return C?function(K,J){if(Je(),!$e)return J(null);const se=ge(K.url);$e.then(De=>{De.match(se).then(We=>{const _t=function(Ze){if(!Ze)return!1;const lt=new Date(Ze.headers.get("Expires")||0),Ct=St(Ze.headers.get("Cache-Control")||"");return lt>Date.now()&&!Ct["no-cache"]}(We);De.delete(se),_t&&De.put(se,We.clone()),J(null,We,_t)}).catch(J)}).catch(J)}(m,N):N(null,null),{cancel:()=>{E=!0,v||f.abort()}}}(t,e);if(Se()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(s,u){const f=new he.XMLHttpRequest;f.open(s.method||"GET",s.url,!0),"arrayBuffer"===s.type&&(f.responseType="arraybuffer");for(const m in s.headers)f.setRequestHeader(m,s.headers[m]);return"json"===s.type&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials="include"===s.credentials,f.onerror=()=>{u(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||0===f.status)&&null!==f.response){let m=f.response;if("json"===s.type)try{m=JSON.parse(f.response)}catch(v){return u(v)}u(null,m,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else u(new it(f.statusText,f.status,s.url))},f.send(s.body),{cancel:()=>f.abort()}}(t,e)},ni=function(t,e){return Rn(Xt(t,{type:"arrayBuffer"}),e)};function Ii(t){const e=he.document.createElement("a");return e.href=t,e.protocol===he.document.location.protocol&&e.host===he.document.location.host}const bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ji,ji;Ji=[],ji=0;const dn=function(t,e){if(ke.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ji>=Oe.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Ji.push(f),f}ji++;let n=!1;const s=()=>{if(!n)for(n=!0,ji--;Ji.length&&ji<Oe.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Ji.shift(),{requestParameters:m,callback:v,cancelled:E}=f;E||(f.cancel=dn(m,v).cancel)}},u=ni(t,(f,m,v,E)=>{s(),f?e(f):m&&(he.createImageBitmap?function(C,R){const N=new he.Blob([new Uint8Array(C)],{type:"image/png"});he.createImageBitmap(N).then(H=>{R(null,H)}).catch(H=>{R(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(m,(C,R)=>e(C,R,v,E)):function(C,R){const N=new he.Image,H=he.URL;N.onload=()=>{R(null,N),H.revokeObjectURL(N.src),N.onload=null,he.requestAnimationFrame(()=>{N.src=bn})},N.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const K=new he.Blob([new Uint8Array(C)],{type:"image/png"});N.src=C.byteLength?H.createObjectURL(K):bn}(m,(C,R)=>e(C,R,v,E)))});return{cancel:()=>{u.cancel(),s()}}},It="NO_ACCESS_TOKEN";function ct(t){return 0===t.indexOf("mapbox:")}function nn(t){return Oe.API_URL_REGEX.test(t)}function _i(t){return Oe.API_CDN_URL_REGEX.test(t)}function Qt(t){return Oe.API_STYLE_REGEX.test(t)&&!xt(t)}function xt(t){return Oe.API_SPRITE_REGEX.test(t)}const ft=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Yt(t){const e=t.match(ft);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function wn(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function ri(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(he.atob(e[1]).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ee{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=ri(Oe.ACCESS_TOKEN);let s="";return s=n&&n.u?he.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(u,f)=>String.fromCharCode(Number("0x"+f)))):Oe.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${s}`:`mapbox.eventData:${s}`}fetchEventData(){const e=Wi("localStorage"),n=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{const u=he.localStorage.getItem(n);u&&(this.eventData=JSON.parse(u));const f=he.localStorage.getItem(s);f&&(this.anonId=f)}catch{Xe("Unable to read from LocalStorage")}}saveEventData(){const e=Wi("localStorage"),n=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{he.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&he.localStorage.setItem(n,JSON.stringify(this.eventData))}catch{Xe("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,n,s,u){if(!Oe.EVENTS_URL)return;const f=Yt(Oe.EVENTS_URL);f.params.push(`access_token=${u||Oe.ACCESS_TOKEN||""}`);const m={event:this.type,created:new Date(e).toISOString()},v=n?Xt(m,n):m,E={url:wn(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([v])};var R;this.pendingRequest=(R=C=>{this.pendingRequest=null,s(C),this.saveEventData(),this.processRequests(u)},Rn(Xt(E,{method:"POST"}),R))}queueRequest(e,n){this.queue.push(e),this.processRequests(n)}}const ee=new class extends Ee{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){Oe.EVENTS_URL&&Oe.ACCESS_TOKEN&&Array.isArray(t)&&t.some(n=>ct(n)||nn(n))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=ri(Oe.ACCESS_TOKEN),n=e?e.u:Oe.ACCESS_TOKEN;let s=n!==this.eventData.tokenU;Li(this.anonId)||(this.anonId=wi(),s=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const f=new Date(this.eventData.lastSuccess),m=new Date(u),v=(u-this.eventData.lastSuccess)/864e5;s=s||v>=1||v<-1||f.getDate()!==m.getDate()}else s=!0;s?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:et,"enabled.telemetry":!1,userId:this.anonId},f=>{f||(this.eventData.lastSuccess=u,this.eventData.tokenU=n)},t):this.processRequests()}},oe=ee.postTurnstileEvent.bind(ee),Me=new class extends Ee{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,s){this.skuToken=e,this.errorCb=s,Oe.EVENTS_URL&&(n||Oe.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(It)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Li(this.anonId)||(this.anonId=wi()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:st,skuId:et,skuToken:this.skuToken,userId:this.anonId},s=>{s?this.errorCb(s):e&&(this.success[e]=!0)},t))}},Ve=Me.postMapLoadEvent.bind(Me),ut=new class extends Ee{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){Oe.EVENTS_URL&&(t||Oe.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:e,performanceData:n}=this.queue.shift(),s=function(u){const f=he.performance.getEntriesByType("resource"),m=he.performance.getEntriesByType("mark"),v=function(H){const K={};if(H)for(const J in H)if("other"!==J)for(const se of H[J]){const De=`${J}ResolveRangeMin`,We=`${J}ResolveRangeMax`,_t=`${J}RequestCount`,Ze=`${J}RequestCachedCount`;K[De]=Math.min(K[De]||1/0,se.startTime),K[We]=Math.max(K[We]||-1/0,se.responseEnd);const lt=Ct=>{void 0===K[Ct]&&(K[Ct]=0),++K[Ct]};void 0!==se.transferSize&&0===se.transferSize&&lt(Ze),lt(_t)}return K}(function(H,K){const J={};if(H)for(const se of H){const De=K(se);void 0===J[De]&&(J[De]=[]),J[De].push(se)}return J}(f,Ue)),E=he.devicePixelRatio,C=he.navigator.connection||he.navigator.mozConnection||he.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},N=(H,K,J)=>{null!=J&&H.push({name:K,value:J.toString()})};for(const H in v)N(R.counters,H,v[H]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(N(R.counters,"interactionRangeMin",u.interactionRange[0]),N(R.counters,"interactionRangeMax",u.interactionRange[1])),m)for(const H of Object.keys(_e)){const K=_e[H],J=m.find(se=>se.name===K);J&&N(R.counters,K,J.startTime)}return N(R.counters,"visibilityHidden",u.visibilityHidden),N(R.attributes,"style",function(H){if(H)for(const K of H){const J=K.name.split("?")[0];if(Qt(J)){const se=J.split("/").slice(-2);if(2===se.length)return`mapbox://styles/${se[0]}/${se[1]}`}}}(f)),N(R.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),N(R.attributes,"fogEnabled",u.fogEnabled?"true":"false"),N(R.attributes,"projection",u.projection),N(R.attributes,"zoom",u.zoom),N(R.metadata,"devicePixelRatio",E),N(R.metadata,"connectionEffectiveType",C?C.effectiveType:void 0),N(R.metadata,"navigatorUserAgent",he.navigator.userAgent),N(R.metadata,"screenWidth",he.screen.width),N(R.metadata,"screenHeight",he.screen.height),N(R.metadata,"windowWidth",he.innerWidth),N(R.metadata,"windowHeight",he.innerHeight),N(R.metadata,"mapWidth",u.width/E),N(R.metadata,"mapHeight",u.height/E),N(R.metadata,"webglRenderer",u.renderer),N(R.metadata,"webglVendor",u.vendor),N(R.metadata,"sdkVersion",st),N(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(n);for(const u of s.metadata);for(const u of s.counters);for(const u of s.attributes);this.postEvent(e,s,()=>{},t)}},Ft=ut.postPerformanceEvent.bind(ut),Lt=new class extends Ee{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,s){if(!Oe.API_URL||!Oe.SESSION_PATH)return;const u=Yt(Oe.API_URL+Oe.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${s||Oe.ACCESS_TOKEN||""}`);const f={url:wn(u),headers:{"Content-Type":"text/plain"}};var v;this.pendingRequest=(v=m=>{this.pendingRequest=null,n(m),this.saveEventData(),this.processRequests(s)},Rn(Xt(f,{method:"GET"}),v))}getSessionAPI(t,e,n,s){this.skuToken=e,this.errorCb=s,Oe.SESSION_PATH&&Oe.API_URL&&(n||Oe.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(It)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,s=>{s?this.errorCb(s):e&&(this.success[e]=!0)},t)}},Mt=Lt.getSessionAPI.bind(Lt),le=new Set,_e={create:"create",load:"load",fullLoad:"fullLoad"},fe={mark(t){he.performance.mark(t)},measure(t,e,n){he.performance.measure(t,e,n)}};function Ue(t){const e=t.name.split("?")[0];return _i(e)&&e.includes("mapbox-gl.js")?"javascript":_i(e)&&e.includes("mapbox-gl.css")?"css":Oe.API_FONTS_REGEX.test(e)?"fontRange":xt(e)?"sprite":Qt(e)?"style":Oe.API_TILEJSON_REGEX.test(e)?"tilejson":"other"}const Wt=he.performance;function Sn(t){const e=t?t.url.toString():void 0;return Wt.getEntriesByName(e)}let jn,Xn,Ti,Pi;const Gn={now:()=>void 0!==Ti?Ti:he.performance.now(),setNow(t){Ti=t},restoreNow(){Ti=void 0},frame(t){const e=he.requestAnimationFrame(t);return{cancel:()=>he.cancelAnimationFrame(e)}},getImageData(t,e=0){const{width:n,height:s}=t;Pi||(Pi=he.document.createElement("canvas"));const u=Pi.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(n>Pi.width||s>Pi.height)&&(Pi.width=n,Pi.height=s),u.clearRect(-e,-e,n+2*e,s+2*e),u.drawImage(t,0,0,n,s),u.getImageData(-e,-e,n+2*e,s+2*e)},resolveURL:t=>(jn||(jn=he.document.createElement("a")),jn.href=t,jn.href),get devicePixelRatio(){return he.devicePixelRatio},get prefersReducedMotion(){return!!he.matchMedia&&(null==Xn&&(Xn=he.matchMedia("(prefers-reduced-motion: reduce)")),Xn.matches)}};function er(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function qi(t,e,n){if(n&&n[t]){const s=n[t].indexOf(e);-1!==s&&n[t].splice(s,1)}}class _o{constructor(e,n={}){Xt(this,n),this.type=e}}class eo extends _o{constructor(e,n={}){super("error",Xt({error:e},n))}}class Cr{on(e,n){return this._listeners=this._listeners||{},er(e,n,this._listeners),this}off(e,n){return qi(e,n,this._listeners),qi(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},er(e,n,this._oneTimeListeners),this):new Promise(s=>this.once(e,s))}fire(e,n){"string"==typeof e&&(e=new _o(e,n||{}));const s=e.type;if(this.listens(s)){e.target=this;const u=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];for(const v of u)v.call(this,e);const f=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];for(const v of f)qi(s,v,this._oneTimeListeners),v.call(this,e);const m=this._eventedParent;m&&(Xt(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof eo&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}var yn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function So(t,...e){for(const n of e)for(const s in n)t[s]=n[s];return t}function tr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Ao(t){if(Array.isArray(t))return t.map(Ao);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=Ao(t[n]);return e}return tr(t)}class va extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}var Yi=va;class ps{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[s,u]of n)this.bindings[s]=u}concat(e){return new ps(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var kn=ps;const fn={kind:"null"},Ie={kind:"number"},Gt={kind:"string"},Ln={kind:"boolean"},di={kind:"color"},Mi={kind:"object"},mi={kind:"value"},Ki={kind:"collator"},vr={kind:"formatted"},ro={kind:"resolvedImage"};function Ur(t,e){return{kind:"array",itemType:t,N:e}}function pr(t){if("array"===t.kind){const e=pr(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Yr=[fn,Ie,Gt,Ln,di,vr,Mi,Ur(mi),ro];function Es(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Es(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const n of Yr)if(!Es(n,e))return null}return`Expected ${pr(t)} but found ${pr(e)} instead.`}function Cs(t,e){return e.some(n=>n.kind===t.kind)}function es(t,e){return e.some(n=>"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"==typeof t:n===typeof t)}var Ps,kl={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function wo(t){return(t=Math.round(t))<0?0:t>255?255:t}function Na(t){return wo("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function za(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function tl(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Ps={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in kl)return kl[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var s=n.indexOf("("),u=n.indexOf(")");if(-1!==s&&u+1===n.length){var f=n.substr(0,s),m=n.substr(s+1,u-(s+1)).split(","),v=1;switch(f){case"rgba":if(4!==m.length)return null;v=za(m.pop());case"rgb":return 3!==m.length?null:[Na(m[0]),Na(m[1]),Na(m[2]),v];case"hsla":if(4!==m.length)return null;v=za(m.pop());case"hsl":if(3!==m.length)return null;var E=(parseFloat(m[0])%360+360)%360/360,C=za(m[1]),R=za(m[2]),N=R<=.5?R*(C+1):R+C-R*C,H=2*R-N;return[wo(255*tl(H,N,E+1/3)),wo(255*tl(H,N,E)),wo(255*tl(H,N,E-1/3)),v];default:return null}}return null}}catch{}class Io{constructor(e,n,s,u=1){this.r=e,this.g=n,this.b=s,this.a=u}static parse(e){if(!e)return;if(e instanceof Io)return e;if("string"!=typeof e)return;const n=Ps(e);return n?new Io(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){const[e,n,s,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(s)},${u})`}toArray(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[255*e/u,255*n/u,255*s/u,u]}toArray01(){const{r:e,g:n,b:s,a:u}=this;return 0===u?[0,0,0,0]:[e/u,n/u,s/u,u]}toArray01PremultipliedAlpha(){const{r:e,g:n,b:s,a:u}=this;return[e,n,s,u]}}Io.black=new Io(0,0,0,1),Io.white=new Io(1,1,1,1),Io.transparent=new Io(0,0,0,0),Io.red=new Io(1,0,0,1),Io.blue=new Io(0,0,1,1);var Fr=Io;class Os{constructor(e,n,s){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class xa{constructor(e,n,s,u,f){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=s,this.fontStack=u,this.textColor=f}}class to{constructor(e){this.sections=e}static fromString(e){return new to([new xa(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof to?e:to.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.name]);continue}e.push(n.text);const s={};n.fontStack&&(s["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(s["font-scale"]=n.scale),n.textColor&&(s["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(s)}return e}}class yo{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new yo({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ra(t,e,n,s){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===s||"number"==typeof s&&s>=0&&s<=1?null:`Invalid rgba value [${[t,e,n,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof s?[t,e,n,s]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function oa(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof Fr||t instanceof Os||t instanceof to||t instanceof yo)return!0;if(Array.isArray(t)){for(const e of t)if(!oa(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!oa(t[e]))return!1;return!0}return!1}function no(t){if(null===t)return fn;if("string"==typeof t)return Gt;if("boolean"==typeof t)return Ln;if("number"==typeof t)return Ie;if(t instanceof Fr)return di;if(t instanceof Os)return Ki;if(t instanceof to)return vr;if(t instanceof yo)return ro;if(Array.isArray(t)){const e=t.length;let n;for(const s of t){const u=no(s);if(n){if(n===u)continue;n=mi;break}n=u}return Ur(n||mi,e)}return Mi}function sa(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Fr||t instanceof to||t instanceof yo?t.toString():JSON.stringify(t)}class No{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(2!==e.length)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!oa(e[1]))return n.error("invalid value");const s=e[1];let u=no(s);const f=n.expectedType;return"array"!==u.kind||0!==u.N||!f||"array"!==f.kind||"number"==typeof f.N&&0!==f.N||(u=f),new No(u,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Fr?["rgba"].concat(this.value.toArray()):this.value instanceof to?this.value.serialize():this.value}}var aa=No,oo=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const ms={string:Gt,number:Ie,boolean:Ln,object:Mi};class gs{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let s,u=1;const f=e[0];if("array"===f){let v,E;if(e.length>2){const C=e[1];if("string"!=typeof C||!(C in ms)||"object"===C)return n.error('The item type argument of "array" must be one of string, number, boolean',1);v=ms[C],u++}else v=mi;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);E=e[2],u++}s=Ur(v,E)}else s=ms[f];const m=[];for(;u<e.length;u++){const v=n.parse(e[u],u,mi);if(!v)return null;m.push(v)}return new gs(s,m)}evaluate(e){for(let n=0;n<this.args.length;n++){const s=this.args[n].evaluate(e);if(!Es(this.type,no(s)))return s;if(n===this.args.length-1)throw new oo(`Expected value to be of type ${pr(this.type)}, but found ${pr(no(s))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if("array"===e.kind){const s=e.itemType;if("string"===s.kind||"number"===s.kind||"boolean"===s.kind){n.push(s.kind);const u=e.N;("number"==typeof u||this.args.length>1)&&n.push(u)}}return n.concat(this.args.map(s=>s.serialize()))}}var jo=gs;class Rs{constructor(e){this.type=vr,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[1];if(!Array.isArray(s)&&"object"==typeof s)return n.error("First argument must be an image or text section.");const u=[];let f=!1;for(let m=1;m<=e.length-1;++m){const v=e[m];if(f&&"object"==typeof v&&!Array.isArray(v)){f=!1;let E=null;if(v["font-scale"]&&(E=n.parse(v["font-scale"],1,Ie),!E))return null;let C=null;if(v["text-font"]&&(C=n.parse(v["text-font"],1,Ur(Gt)),!C))return null;let R=null;if(v["text-color"]&&(R=n.parse(v["text-color"],1,di),!R))return null;const N=u[u.length-1];N.scale=E,N.font=C,N.textColor=R}else{const E=n.parse(e[m],1,mi);if(!E)return null;const C=E.type.kind;if("string"!==C&&"value"!==C&&"null"!==C&&"resolvedImage"!==C)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,u.push({content:E,scale:null,font:null,textColor:null})}}return new Rs(u)}evaluate(e){return new to(this.sections.map(n=>{const s=n.content.evaluate(e);return no(s)===ro?new xa("",s,null,null,null):new xa(sa(s),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)}))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const s={};n.scale&&(s["font-scale"]=n.scale.serialize()),n.font&&(s["text-font"]=n.font.serialize()),n.textColor&&(s["text-color"]=n.textColor.serialize()),e.push(s)}return e}}class ks{constructor(e){this.type=ro,this.input=e}static parse(e,n){if(2!==e.length)return n.error("Expected two arguments.");const s=n.parse(e[1],1,Gt);return s?new ks(s):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),s=yo.fromString(n);return s&&e.availableImages&&(s.available=e.availableImages.indexOf(n)>-1),s}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ba={"to-boolean":Ln,"to-color":di,"to-number":Ie,"to-string":Gt};class Ls{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[0];if(("to-boolean"===s||"to-string"===s)&&2!==e.length)return n.error("Expected one argument.");const u=ba[s],f=[];for(let m=1;m<e.length;m++){const v=n.parse(e[m],m,mi);if(!v)return null;f.push(v)}return new Ls(u,f)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let n,s;for(const u of this.args){if(n=u.evaluate(e),s=null,n instanceof Fr)return n;if("string"==typeof n){const f=e.parseColor(n);if(f)return f}else if(Array.isArray(n)&&(s=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:ra(n[0],n[1],n[2],n[3]),!s))return new Fr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new oo(s||`Could not parse color from value '${"string"==typeof n?n:String(JSON.stringify(n))}'`)}if("number"===this.type.kind){let n=null;for(const s of this.args){if(n=s.evaluate(e),null===n)return 0;const u=Number(n);if(!isNaN(u))return u}throw new oo(`Could not convert ${JSON.stringify(n)} to number.`)}return"formatted"===this.type.kind?to.fromString(sa(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?yo.fromString(sa(this.args[0].evaluate(e))):sa(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Rs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ks(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}var Ho=Ls;const wa=["Unknown","Point","LineString","Polygon"];var nl=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?wa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:s}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(s*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Fr.parse(t)),e}};class ts{constructor(e,n,s,u){this.name=e,this.type=n,this._evaluate=s,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const s=e[0],u=ts.definitions[s];if(!u)return n.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(u)?u[0]:u.type,m=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,v=m.filter(([C])=>!Array.isArray(C)||C.length===e.length-1);let E=null;for(const[C,R]of v){E=new Bs(n.registry,n.path,null,n.scope);const N=[];let H=!1;for(let K=1;K<e.length;K++){const J=e[K],se=Array.isArray(C)?C[K-1]:C.type,De=E.parse(J,1+N.length,se);if(!De){H=!0;break}N.push(De)}if(!H)if(Array.isArray(C)&&C.length!==N.length)E.error(`Expected ${C.length} arguments, but found ${N.length} instead.`);else{for(let K=0;K<N.length;K++){const J=Array.isArray(C)?C[K]:C.type,se=N[K];E.concat(K+1).checkSubtype(J,se.type)}if(0===E.errors.length)return new ts(s,f,R,N)}}if(1===v.length)n.errors.push(...E.errors);else{const C=(v.length?v:m).map(([N])=>{return H=N,Array.isArray(H)?`(${H.map(pr).join(", ")})`:`(${pr(H.type)}...)`;var H}).join(" | "),R=[];for(let N=1;N<e.length;N++){const H=n.parse(e[N],1+R.length);if(!H)return null;R.push(pr(H.type))}n.error(`Expected arguments of type ${C}, but found (${R.join(", ")}) instead.`)}return null}static register(e,n){ts.definitions=n;for(const s in n)e[s]=ts}}var Ms=ts;class Eo{constructor(e,n,s){this.type=Ki,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(2!==e.length)return n.error("Expected one argument.");const s=e[1];if("object"!=typeof s||Array.isArray(s))return n.error("Collator options argument must be an object.");const u=n.parse(void 0!==s["case-sensitive"]&&s["case-sensitive"],1,Ln);if(!u)return null;const f=n.parse(void 0!==s["diacritic-sensitive"]&&s["diacritic-sensitive"],1,Ln);if(!f)return null;let m=null;return s.locale&&(m=n.parse(s.locale,1,Gt),!m)?null:new Eo(u,f,m)}evaluate(e){return new Os(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Kr=8192;function la(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function $s(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ns(t,e){const n=(180+t[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(n*u*Kr),Math.round(s*u*Kr)]}function il(t,e,n){const s=t[0]-e[0],u=t[1]-e[1],f=t[0]-n[0],m=t[1]-n[1];return s*m-f*u==0&&s*f<=0&&u*m<=0}function Br(t,e){let n=!1;for(let m=0,v=e.length;m<v;m++){const E=e[m];for(let C=0,R=E.length;C<R-1;C++){if(il(t,E[C],E[C+1]))return!1;(u=E[C])[1]>(s=t)[1]!=(f=E[C+1])[1]>s[1]&&s[0]<(f[0]-u[0])*(s[1]-u[1])/(f[1]-u[1])+u[0]&&(n=!n)}}var s,u,f;return n}function hl(t,e){for(let n=0;n<e.length;n++)if(Br(t,e[n]))return!0;return!1}function Lo(t,e,n,s){const u=s[0]-n[0],f=s[1]-n[1],m=(t[0]-n[0])*f-u*(t[1]-n[1]),v=(e[0]-n[0])*f-u*(e[1]-n[1]);return m>0&&v<0||m<0&&v>0}function Go(t,e,n){for(const C of n)for(let R=0;R<C.length-1;++R)if((v=[(m=C[R+1])[0]-(f=C[R])[0],m[1]-f[1]])[0]*(E=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-v[1]*E[0]!=0&&Lo(s,u,f,m)&&Lo(f,m,s,u))return!0;var s,u,f,m,v,E;return!1}function vo(t,e){for(let n=0;n<t.length;++n)if(!Br(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(Go(t[n],t[n+1],e))return!1;return!0}function Ua(t,e){for(let n=0;n<e.length;n++)if(vo(t,e[n]))return!0;return!1}function Zs(t,e,n){const s=[];for(let u=0;u<t.length;u++){const f=[];for(let m=0;m<t[u].length;m++){const v=ns(t[u][m],n);la(e,v),f.push(v)}s.push(f)}return s}function ca(t,e,n){const s=[];for(let u=0;u<t.length;u++){const f=Zs(t[u],e,n);s.push(f)}return s}function dr(t,e,n,s){if(t[0]<n[0]||t[0]>n[2]){const u=.5*s;let f=t[0]-n[0]>u?-s:n[0]-t[0]>u?s:0;0===f&&(f=t[0]-n[2]>u?-s:n[2]-t[0]>u?s:0),t[0]+=f}la(e,t)}function mr(t,e,n,s){const u=Math.pow(2,s.z)*Kr,f=[s.x*Kr,s.y*Kr],m=[];if(!t)return m;for(const v of t)for(const E of v){const C=[E.x+f[0],E.y+f[1]];dr(C,e,n,u),m.push(C)}return m}function Fs(t,e,n,s){const u=Math.pow(2,s.z)*Kr,f=[s.x*Kr,s.y*Kr],m=[];if(!t)return m;for(const E of t){const C=[];for(const R of E){const N=[R.x+f[0],R.y+f[1]];la(e,N),C.push(N)}m.push(C)}if(e[2]-e[0]<=u/2){(v=e)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(const E of m)for(const C of E)dr(C,e,n,u)}var v;return m}class Ws{constructor(e,n){this.type=Ln,this.geojson=e,this.geometries=n}static parse(e,n){if(2!==e.length)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(oa(e[1])){const s=e[1];if("FeatureCollection"===s.type)for(let u=0;u<s.features.length;++u){const f=s.features[u].geometry.type;if("Polygon"===f||"MultiPolygon"===f)return new Ws(s,s.features[u].geometry)}else if("Feature"===s.type){const u=s.geometry.type;if("Polygon"===u||"MultiPolygon"===u)return new Ws(s,s.geometry)}else if("Polygon"===s.type||"MultiPolygon"===s.type)return new Ws(s,s)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(n,s){const u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=n.canonicalID();if(!m)return!1;if("Polygon"===s.type){const v=Zs(s.coordinates,f,m),E=mr(n.geometry(),u,f,m);if(!$s(u,f))return!1;for(const C of E)if(!Br(C,v))return!1}if("MultiPolygon"===s.type){const v=ca(s.coordinates,f,m),E=mr(n.geometry(),u,f,m);if(!$s(u,f))return!1;for(const C of E)if(!hl(C,v))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(n,s){const u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=n.canonicalID();if(!m)return!1;if("Polygon"===s.type){const v=Zs(s.coordinates,f,m),E=Fs(n.geometry(),u,f,m);if(!$s(u,f))return!1;for(const C of E)if(!vo(C,v))return!1}if("MultiPolygon"===s.type){const v=ca(s.coordinates,f,m),E=Fs(n.geometry(),u,f,m);if(!$s(u,f))return!1;for(const C of E)if(!Ua(C,v))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var is=Ws;function _s(t){if(t instanceof Ms&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name))||t instanceof is)return!1;let e=!0;return t.eachChild(n=>{e&&!_s(n)&&(e=!1)}),e}function xo(t){if(t instanceof Ms&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(n=>{e&&!xo(n)&&(e=!1)}),e}function Hi(t,e){if(t instanceof Ms&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild(s=>{n&&!Hi(s,e)&&(n=!1)}),n}class Co{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");const s=e[1];return n.scope.has(s)?new Co(s,n.scope.get(s)):n.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ea=Co;class Ca{constructor(e,n=[],s,u=new kn,f=[]){this.registry=e,this.path=n,this.key=n.map(m=>`[${m}]`).join(""),this.scope=u,this.errors=f,this.expectedType=s}parse(e,n,s,u,f={}){return n?this.concat(n,s,u)._parse(e,f):this._parse(e,f)}_parse(e,n){function s(u,f,m){return"assert"===m?new jo(f,[u]):"coerce"===m?new Ho(f,[u]):u}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if("string"!=typeof u)return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[u];if(f){let m=f.parse(e,this);if(!m)return null;if(this.expectedType){const v=this.expectedType,E=m.type;if("string"!==v.kind&&"number"!==v.kind&&"boolean"!==v.kind&&"object"!==v.kind&&"array"!==v.kind||"value"!==E.kind)if("color"!==v.kind&&"formatted"!==v.kind&&"resolvedImage"!==v.kind||"value"!==E.kind&&"string"!==E.kind){if(this.checkSubtype(v,E))return null}else m=s(m,v,n.typeAnnotation||"coerce");else m=s(m,v,n.typeAnnotation||"assert")}if(!(m instanceof aa)&&"resolvedImage"!==m.type.kind&&rs(m)){const v=new nl;try{m=new aa(m.type,m.evaluate(v))}catch(E){return this.error(E.message),null}}return m}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,s){const u="number"==typeof e?this.path.concat(e):this.path,f=s?this.scope.concat(s):this.scope;return new Ca(this.registry,u,n||null,f,this.errors)}error(e,...n){const s=`${this.key}${n.map(u=>`[${u}]`).join("")}`;this.errors.push(new Yi(s,e))}checkSubtype(e,n){const s=Es(e,n);return s&&this.error(s),s}}var Bs=Ca;function rs(t){if(t instanceof Ea)return rs(t.boundExpression);if(t instanceof Ms&&"error"===t.name||t instanceof Eo||t instanceof is)return!1;const e=t instanceof Ho||t instanceof jo;let n=!0;return t.eachChild(s=>{n=e?n&&rs(s):n&&s instanceof aa}),!!n&&_s(t)&&Hi(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ds(t,e){const n=t.length-1;let s,u,f=0,m=n,v=0;for(;f<=m;)if(v=Math.floor((f+m)/2),s=t[v],u=t[v+1],s<=e){if(v===n||e<u)return v;f=v+1}else{if(!(s>e))throw new oo("Input is not a number.");m=v-1}return 0}class Ma{constructor(e,n,s){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[u,f]of s)this.labels.push(u),this.outputs.push(f)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const s=n.parse(e[1],1,Ie);if(!s)return null;const u=[];let f=null;n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(let m=1;m<e.length;m+=2){const v=1===m?-1/0:e[m],E=e[m+1],C=m,R=m+1;if("number"!=typeof v)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(u.length&&u[u.length-1][0]>=v)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const N=n.parse(E,R,f);if(!N)return null;f=f||N.type,u.push([v,N])}return new Ma(f,s,u)}evaluate(e){const n=this.labels,s=this.outputs;if(1===n.length)return s[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return s[0].evaluate(e);const f=n.length;return u>=n[f-1]?s[f-1].evaluate(e):s[Ds(n,u)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}var os=Ma;function En(t,e,n){return t*(1-n)+e*n}var lr=Object.freeze({__proto__:null,number:En,color:function(t,e,n){return new Fr(En(t.r,e.r,n),En(t.g,e.g,n),En(t.b,e.b,n),En(t.a,e.a,n))},array:function(t,e,n){return t.map((s,u)=>En(s,e[u],n))}});const jr=4/29,Q=6/29,q=3*Q*Q,j=Math.PI/180,be=180/Math.PI;function Cn(t){return t>.008856451679035631?Math.pow(t,1/3):t/q+jr}function bi(t){return t>Q?t*t*t:q*(t-jr)}function so(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ts(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ys(t){const e=Ts(t.r),n=Ts(t.g),s=Ts(t.b),u=Cn((.4124564*e+.3575761*n+.1804375*s)/.95047),f=Cn((.2126729*e+.7151522*n+.072175*s)/1);return{l:116*f-16,a:500*(u-f),b:200*(f-Cn((.0193339*e+.119192*n+.9503041*s)/1.08883)),alpha:t.a}}function Nr(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,s=isNaN(t.b)?e:e-t.b/200;return e=1*bi(e),n=.95047*bi(n),s=1.08883*bi(s),new Fr(so(3.2404542*n-1.5371385*e-.4985314*s),so(-.969266*n+1.8760108*e+.041556*s),so(.0556434*n-.2040259*e+1.0572252*s),t.alpha)}function $o(t,e,n){const s=e-t;return t+n*(s>180||s<-180?s-360*Math.round(s/360):s)}const Da={forward:ys,reverse:Nr,interpolate:function(t,e,n){return{l:En(t.l,e.l,n),a:En(t.a,e.a,n),b:En(t.b,e.b,n),alpha:En(t.alpha,e.alpha,n)}}},Ns={forward:function(t){const{l:e,a:n,b:s}=ys(t),u=Math.atan2(s,n)*be;return{h:u<0?u+360:u,c:Math.sqrt(n*n+s*s),l:e,alpha:t.a}},reverse:function(t){const e=t.h*j,n=t.c;return Nr({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:$o(t.h,e.h,n),c:En(t.c,e.c,n),l:En(t.l,e.l,n),alpha:En(t.alpha,e.alpha,n)}}};var qs=Object.freeze({__proto__:null,lab:Da,hcl:Ns});class Ll{constructor(e,n,s,u,f){this.type=e,this.operator=n,this.interpolation=s,this.input=u,this.labels=[],this.outputs=[];for(const[m,v]of f)this.labels.push(m),this.outputs.push(v)}static interpolationFactor(e,n,s,u){let f=0;if("exponential"===e.name)f=Fl(n,e.base,s,u);else if("linear"===e.name)f=Fl(n,1,s,u);else if("cubic-bezier"===e.name){const m=e.controlPoints;f=new Zt(m[0],m[1],m[2],m[3]).solve(Fl(n,1,s,u))}return f}static parse(e,n){let[s,u,f,...m]=e;if(!Array.isArray(u)||0===u.length)return n.error("Expected an interpolation type expression.",1);if("linear"===u[0])u={name:"linear"};else if("exponential"===u[0]){const C=u[1];if("number"!=typeof C)return n.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:C}}else{if("cubic-bezier"!==u[0])return n.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const C=u.slice(1);if(4!==C.length||C.some(R=>"number"!=typeof R||R<0||R>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:C}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(f=n.parse(f,2,Ie),!f)return null;const v=[];let E=null;"interpolate-hcl"===s||"interpolate-lab"===s?E=di:n.expectedType&&"value"!==n.expectedType.kind&&(E=n.expectedType);for(let C=0;C<m.length;C+=2){const R=m[C],N=m[C+1],H=C+3,K=C+4;if("number"!=typeof R)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(v.length&&v[v.length-1][0]>=R)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const J=n.parse(N,K,E);if(!J)return null;E=E||J.type,v.push([R,J])}return"number"===E.kind||"color"===E.kind||"array"===E.kind&&"number"===E.itemType.kind&&"number"==typeof E.N?new Ll(E,s,u,f,v):n.error(`Type ${pr(E)} is not interpolatable.`)}evaluate(e){const n=this.labels,s=this.outputs;if(1===n.length)return s[0].evaluate(e);const u=this.input.evaluate(e);if(u<=n[0])return s[0].evaluate(e);const f=n.length;if(u>=n[f-1])return s[f-1].evaluate(e);const m=Ds(n,u),v=Ll.interpolationFactor(this.interpolation,u,n[m],n[m+1]),E=s[m].evaluate(e),C=s[m+1].evaluate(e);return"interpolate"===this.operator?lr[this.type.kind.toLowerCase()](E,C,v):"interpolate-hcl"===this.operator?Ns.reverse(Ns.interpolate(Ns.forward(E),Ns.forward(C),v)):Da.reverse(Da.interpolate(Da.forward(E),Da.forward(C),v))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let s=0;s<this.labels.length;s++)n.push(this.labels[s],this.outputs[s].serialize());return n}}function Fl(t,e,n,s){const u=s-n,f=t-n;return 0===u?0:1===e?f/u:(Math.pow(e,f)-1)/(Math.pow(e,u)-1)}var zs=Ll;class rl{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let s=null;const u=n.expectedType;u&&"value"!==u.kind&&(s=u);const f=[];for(const v of e.slice(1)){const E=n.parse(v,1+f.length,s,void 0,{typeAnnotation:"omit"});if(!E)return null;s=s||E.type,f.push(E)}const m=u&&f.some(v=>Es(u,v.type));return new rl(m?mi:s,f)}evaluate(e){let n,s=null,u=0;for(const f of this.args){if(u++,s=f.evaluate(e),s&&s instanceof yo&&!s.available&&(n||(n=s),s=null,u===this.args.length))return n;if(null!==s)break}return s}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var ol=rl;class ja{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const s=[];for(let f=1;f<e.length-1;f+=2){const m=e[f];if("string"!=typeof m)return n.error(`Expected string, but found ${typeof m} instead.`,f);if(/[^a-zA-Z0-9_]/.test(m))return n.error("Variable names must contain only alphanumeric characters or '_'.",f);const v=n.parse(e[f+1],f+1);if(!v)return null;s.push([m,v])}const u=n.parse(e[e.length-1],e.length-1,n.expectedType,s);return u?new ja(s,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,s]of this.bindings)e.push(n,s.serialize());return e.push(this.result.serialize()),e}}var Jl=ja;class fl{constructor(e,n,s){this.type=e,this.index=n,this.input=s}static parse(e,n){if(3!==e.length)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,Ie),u=n.parse(e[2],2,Ur(n.expectedType||mi));return s&&u?new fl(u.type.itemType,s,u):null}evaluate(e){const n=this.index.evaluate(e),s=this.input.evaluate(e);if(n<0)throw new oo(`Array index out of bounds: ${n} < 0.`);if(n>=s.length)throw new oo(`Array index out of bounds: ${n} > ${s.length-1}.`);if(n!==Math.floor(n))throw new oo(`Array index must be an integer, but found ${n} instead.`);return s[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Bl=fl;class Yo{constructor(e,n){this.type=Ln,this.needle=e,this.haystack=n}static parse(e,n){if(3!==e.length)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,mi),u=n.parse(e[2],2,mi);return s&&u?Cs(s.type,[Ln,Gt,Ie,fn,mi])?new Yo(s,u):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${pr(s.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(null==s)return!1;if(!es(n,["boolean","string","number","null"]))throw new oo(`Expected first argument to be of type boolean, string, number or null, but found ${pr(no(n))} instead.`);if(!es(s,["string","array"]))throw new oo(`Expected second argument to be of type array or string, but found ${pr(no(s))} instead.`);return s.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Ha=Yo;class da{constructor(e,n,s){this.type=Ie,this.needle=e,this.haystack=n,this.fromIndex=s}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,mi),u=n.parse(e[2],2,mi);if(!s||!u)return null;if(!Cs(s.type,[Ln,Gt,Ie,fn,mi]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${pr(s.type)} instead`);if(4===e.length){const f=n.parse(e[3],3,Ie);return f?new da(s,u,f):null}return new da(s,u)}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!es(n,["boolean","string","number","null"]))throw new oo(`Expected first argument to be of type boolean, string, number or null, but found ${pr(no(n))} instead.`);if(!es(s,["string","array"]))throw new oo(`Expected second argument to be of type array or string, but found ${pr(no(s))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return s.indexOf(n,u)}return s.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var xc=da;class Nl{constructor(e,n,s,u,f,m){this.inputType=e,this.type=n,this.input=s,this.cases=u,this.outputs=f,this.otherwise=m}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let s,u;n.expectedType&&"value"!==n.expectedType.kind&&(u=n.expectedType);const f={},m=[];for(let C=2;C<e.length-1;C+=2){let R=e[C];const N=e[C+1];Array.isArray(R)||(R=[R]);const H=n.concat(C);if(0===R.length)return H.error("Expected at least one branch label.");for(const J of R){if("number"!=typeof J&&"string"!=typeof J)return H.error("Branch labels must be numbers or strings.");if("number"==typeof J&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof J&&Math.floor(J)!==J)return H.error("Numeric branch labels must be integer values.");if(s){if(H.checkSubtype(s,no(J)))return null}else s=no(J);if(void 0!==f[String(J)])return H.error("Branch labels must be unique.");f[String(J)]=m.length}const K=n.parse(N,C,u);if(!K)return null;u=u||K.type,m.push(K)}const v=n.parse(e[1],1,mi);if(!v)return null;const E=n.parse(e[e.length-1],e.length-1,u);return E?"value"!==v.type.kind&&n.concat(1).checkSubtype(s,v.type)?null:new Nl(s,u,v,f,m,E):null}evaluate(e){const n=this.input.evaluate(e);return(no(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),s=[],u={};for(const m of n){const v=u[this.cases[m]];void 0===v?(u[this.cases[m]]=s.length,s.push([this.cases[m],[m]])):s[v][1].push(m)}const f=m=>"number"===this.inputType.kind?Number(m):m;for(const[m,v]of s)e.push(1===v.length?f(v[0]):v.map(f)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var z=Nl;class re{constructor(e,n,s){this.type=e,this.branches=n,this.otherwise=s}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let s;n.expectedType&&"value"!==n.expectedType.kind&&(s=n.expectedType);const u=[];for(let m=1;m<e.length-1;m+=2){const v=n.parse(e[m],m,Ln);if(!v)return null;const E=n.parse(e[m+1],m+1,s);if(!E)return null;u.push([v,E]),s=s||E.type}const f=n.parse(e[e.length-1],e.length-1,s);return f?new re(s,u,f):null}evaluate(e){for(const[n,s]of this.branches)if(n.evaluate(e))return s.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,s]of this.branches)e(n),e(s);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var $=re;class ye{constructor(e,n,s,u){this.type=e,this.input=n,this.beginIndex=s,this.endIndex=u}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,mi),u=n.parse(e[2],2,Ie);if(!s||!u)return null;if(!Cs(s.type,[Ur(mi),Gt,mi]))return n.error(`Expected first argument to be of type array or string, but found ${pr(s.type)} instead`);if(4===e.length){const f=n.parse(e[3],3,Ie);return f?new ye(s.type,s,u,f):null}return new ye(s.type,s,u)}evaluate(e){const n=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!es(n,["string","array"]))throw new oo(`Expected first argument to be of type array or string, but found ${pr(no(n))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return n.slice(s,u)}return n.slice(s)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gt=ye;function vn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function On(t,e,n,s){return 0===s.compare(e,n)}function yi(t,e,n){const s="=="!==t&&"!="!==t;return class yx{constructor(f,m,v){this.type=Ln,this.lhs=f,this.rhs=m,this.collator=v,this.hasUntypedArgument="value"===f.type.kind||"value"===m.type.kind}static parse(f,m){if(3!==f.length&&4!==f.length)return m.error("Expected two or three arguments.");const v=f[0];let E=m.parse(f[1],1,mi);if(!E)return null;if(!vn(v,E.type))return m.concat(1).error(`"${v}" comparisons are not supported for type '${pr(E.type)}'.`);let C=m.parse(f[2],2,mi);if(!C)return null;if(!vn(v,C.type))return m.concat(2).error(`"${v}" comparisons are not supported for type '${pr(C.type)}'.`);if(E.type.kind!==C.type.kind&&"value"!==E.type.kind&&"value"!==C.type.kind)return m.error(`Cannot compare types '${pr(E.type)}' and '${pr(C.type)}'.`);s&&("value"===E.type.kind&&"value"!==C.type.kind?E=new jo(C.type,[E]):"value"!==E.type.kind&&"value"===C.type.kind&&(C=new jo(E.type,[C])));let R=null;if(4===f.length){if("string"!==E.type.kind&&"string"!==C.type.kind&&"value"!==E.type.kind&&"value"!==C.type.kind)return m.error("Cannot use collator to compare non-string types.");if(R=m.parse(f[3],3,Ki),!R)return null}return new yx(E,C,R)}evaluate(f){const m=this.lhs.evaluate(f),v=this.rhs.evaluate(f);if(s&&this.hasUntypedArgument){const E=no(m),C=no(v);if(E.kind!==C.kind||"string"!==E.kind&&"number"!==E.kind)throw new oo(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${E.kind}, ${C.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const E=no(m),C=no(v);if("string"!==E.kind||"string"!==C.kind)return e(f,m,v)}return this.collator?n(f,m,v,this.collator.evaluate(f)):e(f,m,v)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[t];return this.eachChild(m=>{f.push(m.serialize())}),f}}}const xr=yi("==",function(t,e,n){return e===n},On),Mr=yi("!=",function(t,e,n){return e!==n},function(t,e,n,s){return!On(0,e,n,s)}),Ar=yi("<",function(t,e,n){return e<n},function(t,e,n,s){return s.compare(e,n)<0}),br=yi(">",function(t,e,n){return e>n},function(t,e,n,s){return s.compare(e,n)>0}),Po=yi("<=",function(t,e,n){return e<=n},function(t,e,n,s){return s.compare(e,n)<=0}),Rr=yi(">=",function(t,e,n){return e>=n},function(t,e,n,s){return s.compare(e,n)>=0});class po{constructor(e,n,s,u,f,m){this.type=Gt,this.number=e,this.locale=n,this.currency=s,this.unit=u,this.minFractionDigits=f,this.maxFractionDigits=m}static parse(e,n){if(3!==e.length)return n.error("Expected two arguments.");const s=n.parse(e[1],1,Ie);if(!s)return null;const u=e[2];if("object"!=typeof u||Array.isArray(u))return n.error("NumberFormat options argument must be an object.");let f=null;if(u.locale&&(f=n.parse(u.locale,1,Gt),!f))return null;let m=null;if(u.currency&&(m=n.parse(u.currency,1,Gt),!m))return null;let v=null;if(u.unit&&(v=n.parse(u.unit,1,Gt),!v))return null;let E=null;if(u["min-fraction-digits"]&&(E=n.parse(u["min-fraction-digits"],1,Ie),!E))return null;let C=null;return u["max-fraction-digits"]&&(C=n.parse(u["max-fraction-digits"],1,Ie),!C)?null:new po(s,f,m,v,E,C)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Zo{constructor(e){this.type=Ie,this.input=e}static parse(e,n){if(2!==e.length)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const s=n.parse(e[1],1);return s?"array"!==s.type.kind&&"string"!==s.type.kind&&"value"!==s.type.kind?n.error(`Expected argument of type string or array, but found ${pr(s.type)} instead.`):new Zo(s):null}evaluate(e){const n=this.input.evaluate(e);if("string"==typeof n||Array.isArray(n))return n.length;throw new oo(`Expected value to be of type string or array, but found ${pr(no(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}const ss={"==":xr,"!=":Mr,">":br,"<":Ar,">=":Rr,"<=":Po,array:jo,at:Bl,boolean:jo,case:$,coalesce:ol,collator:Eo,format:Rs,image:ks,in:Ha,"index-of":xc,interpolate:zs,"interpolate-hcl":zs,"interpolate-lab":zs,length:Zo,let:Jl,literal:aa,match:z,number:jo,"number-format":po,object:jo,slice:gt,step:os,string:jo,"to-boolean":Ho,"to-color":Ho,"to-number":Ho,"to-string":Ho,var:Ea,within:is};function Us(t,[e,n,s,u]){e=e.evaluate(t),n=n.evaluate(t),s=s.evaluate(t);const f=u?u.evaluate(t):1,m=ra(e,n,s,f);if(m)throw new oo(m);return new Fr(e/255*f,n/255*f,s/255*f,f)}function Ys(t,e){return t in e}function as(t,e){const n=e[t];return void 0===n?null:n}function zo(t){return{type:t}}Ms.register(ss,{error:[{kind:"error"},[Gt],(t,[e])=>{throw new oo(e.evaluate(t))}],typeof:[Gt,[mi],(t,[e])=>pr(no(e.evaluate(t)))],"to-rgba":[Ur(Ie,4),[di],(t,[e])=>e.evaluate(t).toArray()],rgb:[di,[Ie,Ie,Ie],Us],rgba:[di,[Ie,Ie,Ie,Ie],Us],has:{type:Ln,overloads:[[[Gt],(t,[e])=>Ys(e.evaluate(t),t.properties())],[[Gt,Mi],(t,[e,n])=>Ys(e.evaluate(t),n.evaluate(t))]]},get:{type:mi,overloads:[[[Gt],(t,[e])=>as(e.evaluate(t),t.properties())],[[Gt,Mi],(t,[e,n])=>as(e.evaluate(t),n.evaluate(t))]]},"feature-state":[mi,[Gt],(t,[e])=>as(e.evaluate(t),t.featureState||{})],properties:[Mi,[],t=>t.properties()],"geometry-type":[Gt,[],t=>t.geometryType()],id:[mi,[],t=>t.id()],zoom:[Ie,[],t=>t.globals.zoom],pitch:[Ie,[],t=>t.globals.pitch||0],"distance-from-center":[Ie,[],t=>t.distanceFromCenter()],"heatmap-density":[Ie,[],t=>t.globals.heatmapDensity||0],"line-progress":[Ie,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Ie,[],t=>t.globals.skyRadialProgress||0],accumulated:[mi,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Ie,zo(Ie),(t,e)=>{let n=0;for(const s of e)n+=s.evaluate(t);return n}],"*":[Ie,zo(Ie),(t,e)=>{let n=1;for(const s of e)n*=s.evaluate(t);return n}],"-":{type:Ie,overloads:[[[Ie,Ie],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[Ie],(t,[e])=>-e.evaluate(t)]]},"/":[Ie,[Ie,Ie],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[Ie,[Ie,Ie],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[Ie,[],()=>Math.LN2],pi:[Ie,[],()=>Math.PI],e:[Ie,[],()=>Math.E],"^":[Ie,[Ie,Ie],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[Ie,[Ie],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ie,[Ie],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ie,[Ie],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ie,[Ie],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ie,[Ie],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ie,[Ie],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ie,[Ie],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ie,[Ie],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ie,[Ie],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ie,[Ie],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ie,zo(Ie),(t,e)=>Math.min(...e.map(n=>n.evaluate(t)))],max:[Ie,zo(Ie),(t,e)=>Math.max(...e.map(n=>n.evaluate(t)))],abs:[Ie,[Ie],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ie,[Ie],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ie,[Ie],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ie,[Ie],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Ln,[Gt,mi],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Ln,[mi],(t,[e])=>t.id()===e.value],"filter-type-==":[Ln,[Gt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Ln,[Gt,mi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s<u}],"filter-id-<":[Ln,[mi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n<s}],"filter->":[Ln,[Gt,mi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s>u}],"filter-id->":[Ln,[mi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n>s}],"filter-<=":[Ln,[Gt,mi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s<=u}],"filter-id-<=":[Ln,[mi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n<=s}],"filter->=":[Ln,[Gt,mi],(t,[e,n])=>{const s=t.properties()[e.value],u=n.value;return typeof s==typeof u&&s>=u}],"filter-id->=":[Ln,[mi],(t,[e])=>{const n=t.id(),s=e.value;return typeof n==typeof s&&n>=s}],"filter-has":[Ln,[mi],(t,[e])=>e.value in t.properties()],"filter-has-id":[Ln,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Ln,[Ur(Gt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Ln,[Ur(mi)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Ln,[Gt,Ur(mi)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Ln,[Gt,Ur(mi)],(t,[e,n])=>function(s,u,f,m){for(;f<=m;){const v=f+m>>1;if(u[v]===s)return!0;u[v]>s?m=v-1:f=v+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[zo(Ln),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[zo(Ln),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Ln,[Ln],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Ln,[Gt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Gt,[Gt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Gt,[Gt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Gt,zo(mi),(t,e)=>e.map(n=>sa(n.evaluate(t))).join("")],"resolved-locale":[Gt,[Ki],(t,[e])=>e.evaluate(t).resolvedLocale()]});var ha=ss;function bc(t){return{result:"success",value:t}}function ko(t){return{result:"error",value:t}}function Ta(t){return"data-driven"===t["property-type"]}function Ga(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function ec(t){return!!t.expression&&t.expression.interpolated}function Dr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function zl(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function pl(t){return t}function Ul(t,e){const n="color"===e.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||!(s||void 0!==t.property),f=t.type||(ec(e)?"exponential":"interval");if(n&&((t=So({},t)).stops&&(t.stops=t.stops.map(C=>[C[0],Fr.parse(C[1])])),t.default=Fr.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!qs[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let m,v,E;if("exponential"===f)m=X;else if("interval"===f)m=wc;else if("categorical"===f){m=ml,v=Object.create(null);for(const C of t.stops)v[C[0]]=C[1];E=typeof t.stops[0][0]}else{if("identity"!==f)throw new Error(`Unknown function type "${f}"`);m=M}if(s){const C={},R=[];for(let K=0;K<t.stops.length;K++){const J=t.stops[K],se=J[0].zoom;void 0===C[se]&&(C[se]={zoom:se,type:t.type,property:t.property,default:t.default,stops:[]},R.push(se)),C[se].stops.push([J[0].value,J[1]])}const N=[];for(const K of R)N.push([C[K].zoom,Ul(C[K],e)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:zs.interpolationFactor.bind(void 0,H),zoomStops:N.map(K=>K[0]),evaluate:({zoom:K},J)=>X({stops:N,base:t.base},e,K).evaluate(K,J)}}if(u){const C="exponential"===f?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:zs.interpolationFactor.bind(void 0,C),zoomStops:t.stops.map(R=>R[0]),evaluate:({zoom:R})=>m(t,e,R,v,E)}}return{kind:"source",evaluate(C,R){const N=R&&R.properties?R.properties[t.property]:void 0;return void 0===N?$a(t.default,e.default):m(t,e,N,v,E)}}}function $a(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function ml(t,e,n,s,u){return $a(typeof n===u?s[n]:void 0,t.default,e.default)}function wc(t,e,n){if("number"!==Dr(n))return $a(t.default,e.default);const s=t.stops.length;if(1===s||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[s-1][0])return t.stops[s-1][1];const u=Ds(t.stops.map(f=>f[0]),n);return t.stops[u][1]}function X(t,e,n){const s=void 0!==t.base?t.base:1;if("number"!==Dr(n))return $a(t.default,e.default);const u=t.stops.length;if(1===u||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[u-1][0])return t.stops[u-1][1];const f=Ds(t.stops.map(R=>R[0]),n),m=function(R,N,H,K){const J=K-H,se=R-H;return 0===J?0:1===N?se/J:(Math.pow(N,se)-1)/(Math.pow(N,J)-1)}(n,s,t.stops[f][0],t.stops[f+1][0]),v=t.stops[f][1],E=t.stops[f+1][1];let C=lr[e.type]||pl;if(t.colorSpace&&"rgb"!==t.colorSpace){const R=qs[t.colorSpace];C=(N,H)=>R.reverse(R.interpolate(R.forward(N),R.forward(H),m))}return"function"==typeof v.evaluate?{evaluate(...R){const N=v.evaluate.apply(void 0,R),H=E.evaluate.apply(void 0,R);if(void 0!==N&&void 0!==H)return C(N,H,m)}}:C(v,E,m)}function M(t,e,n){return"color"===e.type?n=Fr.parse(n):"formatted"===e.type?n=to.fromString(n.toString()):"resolvedImage"===e.type?n=yo.fromString(n.toString()):Dr(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),$a(n,t.default,e.default)}class S{constructor(e,n){var s;this.expression=e,this._warningHistory={},this._evaluator=new nl,this._defaultValue=n?"color"===(s=n).type&&(zl(s.default)||Array.isArray(s.default))?new Fr(0,0,0,0):"color"===s.type?Fr.parse(s.default)||null:void 0===s.default?null:s.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}evaluateWithoutErrorHandling(e,n,s,u,f,m,v,E){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=s,this._evaluator.canonical=u||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=v||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,s,u,f,m,v,E){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=s||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=v||null,this._evaluator.featureDistanceData=E||null;try{const C=this.expression.evaluate(this._evaluator);if(null==C||"number"==typeof C&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new oo(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function G(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ha}function ue(t,e){const n=new Bs(ha,[],e?function(u){const f={color:di,string:Gt,number:Ie,enum:Gt,boolean:Ln,formatted:vr,resolvedImage:ro};return"array"===u.type?Ur(f[u.value]||mi,u.length):f[u.type]}(e):void 0),s=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return s?bc(new S(s,e)):ko(n.errors)}class Re{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent="constant"!==e&&!xo(n.expression)}evaluateWithoutErrorHandling(e,n,s,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,u,f,m)}evaluate(e,n,s,u,f,m){return this._styleExpression.evaluate(e,n,s,u,f,m)}}class Pt{constructor(e,n,s,u){this.kind=e,this.zoomStops=s,this._styleExpression=n,this.isStateDependent="camera"!==e&&!xo(n.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,n,s,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,u,f,m)}evaluate(e,n,s,u,f,m){return this._styleExpression.evaluate(e,n,s,u,f,m)}interpolationFactor(e,n,s){return this.interpolationType?zs.interpolationFactor(this.interpolationType,e,n,s):0}}function Rt(t,e){if("error"===(t=ue(t,e)).result)return t;const n=t.value.expression,s=_s(n);if(!s&&!Ta(e))return ko([new Yi("","data expressions not supported")]);const u=Hi(n,["zoom","pitch","distance-from-center"]);if(!u&&!Ga(e))return ko([new Yi("","zoom expressions not supported")]);const f=Vn(n);return f||u?f instanceof Yi?ko([f]):f instanceof zs&&!ec(e)?ko([new Yi("",'"interpolate" expressions cannot be used with this property')]):bc(f?new Pt(s?"camera":"composite",t.value,f.labels,f instanceof zs?f.interpolation:void 0):new Re(s?"constant":"source",t.value)):ko([new Yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ln{constructor(e,n){this._parameters=e,this._specification=n,So(this,Ul(this._parameters,this._specification))}static deserialize(e){return new ln(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Vn(t){let e=null;if(t instanceof Jl)e=Vn(t.result);else if(t instanceof ol){for(const n of t.args)if(e=Vn(n),e)break}else(t instanceof os||t instanceof zs)&&t.input instanceof Ms&&"zoom"===t.input.name&&(e=t);return e instanceof Yi||t.eachChild(n=>{const s=Vn(n);s instanceof Yi?e=s:!e&&s?e=new Yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&s&&e!==s&&(e=new Yi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class an{constructor(e,n,s,u){this.message=(e?`${e}: `:"")+s,u&&(this.identifier=u),null!=n&&n.__line__&&(this.line=n.__line__)}}function hi(t){const e=t.key,n=t.value,s=t.valueSpec||{},u=t.objectElementValidators||{},f=t.style,m=t.styleSpec;let v=[];const E=Dr(n);if("object"!==E)return[new an(e,n,`object expected, ${E} found`)];for(const C in n){const R=C.split(".")[0],N=s[R]||s["*"];let H;u[R]?H=u[R]:s[R]?H=Hr:u["*"]?H=u["*"]:s["*"]&&(H=Hr),H?v=v.concat(H({key:(e&&`${e}.`)+C,value:n[C],valueSpec:N,style:f,styleSpec:m,object:n,objectKey:C},n)):v.push(new an(e,n[C],`unknown property "${C}"`))}for(const C in s)u[C]||s[C].required&&void 0===s[C].default&&void 0===n[C]&&v.push(new an(e,n,`missing required property "${C}"`));return v}function Xi(t){const e=t.value,n=t.valueSpec,s=t.style,u=t.styleSpec,f=t.key,m=t.arrayElementValidator||Hr;if("array"!==Dr(e))return[new an(f,e,`array expected, ${Dr(e)} found`)];if(n.length&&e.length!==n.length)return[new an(f,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new an(f,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let v={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};u.$version<7&&(v.function=n.function),"object"===Dr(n.value)&&(v=n.value);let E=[];for(let C=0;C<e.length;C++)E=E.concat(m({array:e,arrayIndex:C,value:e[C],valueSpec:v,style:s,styleSpec:u,key:`${f}[${C}]`}));return E}function nr(t){const e=t.key,n=t.value,s=t.valueSpec;let u=Dr(n);if("number"===u&&n!=n&&(u="NaN"),"number"!==u)return[new an(e,n,`number expected, ${u} found`)];if("minimum"in s){let f=s.minimum;if("array"===Dr(s.minimum)&&(f=s.minimum[t.arrayIndex]),n<f)return[new an(e,n,`${n} is less than the minimum value ${f}`)]}if("maximum"in s){let f=s.maximum;if("array"===Dr(s.maximum)&&(f=s.maximum[t.arrayIndex]),n>f)return[new an(e,n,`${n} is greater than the maximum value ${f}`)]}return[]}function Bi(t){const e=t.valueSpec,n=tr(t.value.type);let s,u,f,m={};const v="categorical"!==n&&void 0===t.value.property,E=!v,C="array"===Dr(t.value.stops)&&"array"===Dr(t.value.stops[0])&&"object"===Dr(t.value.stops[0][0]),R=hi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(K){if("identity"===n)return[new an(K.key,K.value,'identity function may not have a "stops" property')];let J=[];const se=K.value;return J=J.concat(Xi({key:K.key,value:se,valueSpec:K.valueSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:N})),"array"===Dr(se)&&0===se.length&&J.push(new an(K.key,se,"array must have at least one stop")),J},default:function(K){return Hr({key:K.key,value:K.value,valueSpec:e,style:K.style,styleSpec:K.styleSpec})}}});return"identity"===n&&v&&R.push(new an(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||R.push(new an(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!ec(t.valueSpec)&&R.push(new an(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(E&&!Ta(t.valueSpec)?R.push(new an(t.key,t.value,"property functions not supported")):v&&!Ga(t.valueSpec)&&R.push(new an(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!C||void 0!==t.value.property||R.push(new an(t.key,t.value,'"property" property is required')),R;function N(K){let J=[];const se=K.value,De=K.key;if("array"!==Dr(se))return[new an(De,se,`array expected, ${Dr(se)} found`)];if(2!==se.length)return[new an(De,se,`array length 2 expected, length ${se.length} found`)];if(C){if("object"!==Dr(se[0]))return[new an(De,se,`object expected, ${Dr(se[0])} found`)];if(void 0===se[0].zoom)return[new an(De,se,"object stop key must have zoom")];if(void 0===se[0].value)return[new an(De,se,"object stop key must have value")];const We=tr(se[0].zoom);if("number"!=typeof We)return[new an(De,se[0].zoom,"stop zoom values must be numbers")];if(f&&f>We)return[new an(De,se[0].zoom,"stop zoom values must appear in ascending order")];We!==f&&(f=We,u=void 0,m={}),J=J.concat(hi({key:`${De}[0]`,value:se[0],valueSpec:{zoom:{}},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:nr,value:H}}))}else J=J.concat(H({key:`${De}[0]`,value:se[0],valueSpec:{},style:K.style,styleSpec:K.styleSpec},se));return G(Ao(se[1]))?J.concat([new an(`${De}[1]`,se[1],"expressions are not allowed in function stops.")]):J.concat(Hr({key:`${De}[1]`,value:se[1],valueSpec:e,style:K.style,styleSpec:K.styleSpec}))}function H(K,J){const se=Dr(K.value),De=tr(K.value),We=null!==K.value?K.value:J;if(s){if(se!==s)return[new an(K.key,We,`${se} stop domain type must match previous stop domain type ${s}`)]}else s=se;if("number"!==se&&"string"!==se&&"boolean"!==se&&"number"!=typeof De&&"string"!=typeof De&&"boolean"!=typeof De)return[new an(K.key,We,"stop domain value must be a number, string, or boolean")];if("number"!==se&&"categorical"!==n){let _t=`number expected, ${se} found`;return Ta(e)&&void 0===n&&(_t+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new an(K.key,We,_t)]}return"categorical"!==n||"number"!==se||"number"==typeof De&&isFinite(De)&&Math.floor(De)===De?"categorical"!==n&&"number"===se&&"number"==typeof De&&"number"==typeof u&&void 0!==u&&De<u?[new an(K.key,We,"stop domain values must appear in ascending order")]:(u=De,"categorical"===n&&De in m?[new an(K.key,We,"stop domain values must be unique")]:(m[De]=!0,[])):[new an(K.key,We,`integer expected, found ${String(De)}`)]}}function Gi(t){const e=("property"===t.expressionContext?Rt:ue)(Ao(t.value),t.valueSpec);if("error"===e.result)return e.value.map(s=>new an(`${t.key}${s.key}`,t.value,s.message));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new an(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!xo(n))return[new an(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return Ir(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Hi(n,["zoom","feature-state"]))return[new an(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!_s(n))return[new an(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ir(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)n.delete(u);if(0===n.size)return[];const s=[];return t instanceof Ms&&n.has(t.name)?[new an(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild(u=>{s.push(...Ir(u,e))}),s)}function Pr(t){const e=t.key,n=t.value,s=t.valueSpec,u=[];return Array.isArray(s.values)?-1===s.values.indexOf(tr(n))&&u.push(new an(e,n,`expected one of [${s.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(s.values).indexOf(tr(n))&&u.push(new an(e,n,`expected one of [${Object.keys(s.values).join(", ")}], ${JSON.stringify(n)} found`)),u}function mo(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!mo(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Mo(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};mo(t)||(t=Ko(t));const n=t;let s=!0;try{s=function(C){if(!ls(C))return C;let R=Ao(C);return Ks(R),R=kr(R),R}(n)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const u=yn[`filter_${e}`],f=ue(s,u);let m=null;if("error"===f.result)throw new Error(f.value.map(C=>`${C.key}: ${C.message}`).join(", "));m=(C,R,N)=>f.value.evaluate(C,R,{},N);let v=null,E=null;if(s!==n){const C=ue(n,u);if("error"===C.result)throw new Error(C.value.map(R=>`${R.key}: ${R.message}`).join(", "));v=(R,N,H,K,J)=>C.value.evaluate(R,N,{},H,void 0,void 0,K,J),E=!_s(C.value.expression)}return{filter:m,dynamicFilter:v||void 0,needGeometry:fa(s),needFeature:!!E}}function kr(t){if(!Array.isArray(t))return t;const e=function(n){if(Fo.has(n[0]))for(let s=1;s<n.length;s++)if(ls(n[s]))return!0;return n}(t);return!0===e?e:e.map(n=>kr(n))}function Ks(t){let e=!1;const n=[];if("case"===t[0]){for(let s=1;s<t.length-1;s+=2)e=e||ls(t[s]),n.push(t[s+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||ls(t[1]);for(let s=2;s<t.length-1;s+=2)n.push(t[s+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||ls(t[1]);for(let s=1;s<t.length-1;s+=2)n.push(t[s+1])}e&&(t.length=0,t.push("any",...n));for(let s=1;s<t.length;s++)Ks(t[s])}function ls(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(ls(t[n]))return!0;return!1}const Fo=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function zr(t,e){return t<e?-1:t>e?1:0}function fa(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(fa(t[e]))return!0;return!1}function Ko(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Za(t[1],t[2],"=="):"!="===e?gl(Za(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Za(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Ko))):"all"===e?["all"].concat(t.slice(1).map(Ko)):"none"===e?["all"].concat(t.slice(1).map(Ko).map(gl)):"in"===e?Xo(t[1],t.slice(2)):"!in"===e?gl(Xo(t[1],t.slice(2))):"has"===e?Sa(t[1]):"!has"===e?gl(Sa(t[1])):"within"!==e||t;var n}function Za(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Xo(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",t,["literal",e.sort(zr)]]:["filter-in-small",t,["literal",e]]}}function Sa(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function gl(t){return["!",t]}function Aa(t){return mo(Ao(t.value))?Gi(So({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${t.layerType||"fill"}`]})):Ai(t)}function Ai(t){const e=t.value,n=t.key;if("array"!==Dr(e))return[new an(n,e,`array expected, ${Dr(e)} found`)];const s=t.styleSpec;let u,f=[];if(e.length<1)return[new an(n,e,"filter array must have at least 1 element")];switch(f=f.concat(Pr({key:`${n}[0]`,value:e[0],valueSpec:s.filter_operator,style:t.style,styleSpec:t.styleSpec})),tr(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===tr(e[1])&&f.push(new an(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&f.push(new an(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=Dr(e[1]),"string"!==u&&f.push(new an(`${n}[1]`,e[1],`string expected, ${u} found`)));for(let m=2;m<e.length;m++)u=Dr(e[m]),"$type"===tr(e[1])?f=f.concat(Pr({key:`${n}[${m}]`,value:e[m],valueSpec:s.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==u&&"number"!==u&&"boolean"!==u&&f.push(new an(`${n}[${m}]`,e[m],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)f=f.concat(Ai({key:`${n}[${m}]`,value:e[m],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":u=Dr(e[1]),2!==e.length?f.push(new an(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==u&&f.push(new an(`${n}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=Dr(e[1]),2!==e.length?f.push(new an(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==u&&f.push(new an(`${n}[1]`,e[1],`object expected, ${u} found`))}return f}function Ni(t,e){const n=t.key,s=t.style,u=t.styleSpec,f=t.value,m=t.objectKey,v=u[`${e}_${t.layerType}`];if(!v)return[];const E=m.match(/^(.*)-transition$/);if("paint"===e&&E&&v[E[1]]&&v[E[1]].transition)return Hr({key:n,value:f,valueSpec:u.transition,style:s,styleSpec:u});const C=t.valueSpec||v[m];if(!C)return[new an(n,f,`unknown property "${m}"`)];let R;if("string"===Dr(f)&&Ta(C)&&!C.tokens&&(R=/^{([^}]+)}$/.exec(f)))return[new an(n,f,`"${m}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];const N=[];return"symbol"===t.layerType&&("text-field"===m&&s&&!s.glyphs&&N.push(new an(n,f,'use of "text-field" requires a style "glyphs" property')),"text-font"===m&&zl(Ao(f))&&"identity"===tr(f.type)&&N.push(new an(n,f,'"text-font" does not support identity functions'))),N.concat(Hr({key:t.key,value:f,valueSpec:C,style:s,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:m}))}function $i(t){return Ni(t,"paint")}function cr(t){return Ni(t,"layout")}function Xr(t){let e=[];const n=t.value,s=t.key,u=t.style,f=t.styleSpec;n.type||n.ref||e.push(new an(s,n,'either "type" or "ref" is required'));let m=tr(n.type);const v=tr(n.ref);if(n.id){const E=tr(n.id);for(let C=0;C<t.arrayIndex;C++){const R=u.layers[C];tr(R.id)===E&&e.push(new an(s,n.id,`duplicate layer id "${n.id}", previously used at line ${R.id.__line__}`))}}if("ref"in n){let E;["type","source","source-layer","filter","layout"].forEach(C=>{C in n&&e.push(new an(s,n[C],`"${C}" is prohibited for ref layers`))}),u.layers.forEach(C=>{tr(C.id)===v&&(E=C)}),E?E.ref?e.push(new an(s,n.ref,"ref cannot reference another ref layer")):m=tr(E.type):"string"==typeof v&&e.push(new an(s,n.ref,`ref layer "${v}" not found`))}else if("background"!==m&&"sky"!==m)if(n.source){const E=u.sources&&u.sources[n.source],C=E&&tr(E.type);E?"vector"===C&&"raster"===m?e.push(new an(s,n.source,`layer "${n.id}" requires a raster source`)):"raster"===C&&"raster"!==m?e.push(new an(s,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==C||n["source-layer"]?"raster-dem"===C&&"hillshade"!==m?e.push(new an(s,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==m||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===C&&E.lineMetrics||e.push(new an(s,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new an(s,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new an(s,n.source,`source "${n.source}" not found`))}else e.push(new an(s,n,'missing required property "source"'));return e=e.concat(hi({key:s,value:n,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Hr({key:`${s}.type`,value:n.type,valueSpec:f.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:E=>Aa(So({layerType:m},E)),layout:E=>hi({layer:n,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":C=>cr(So({layerType:m},C))}}),paint:E=>hi({layer:n,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":C=>$i(So({layerType:m},C))}})}})),e}function io(t){const e=t.value,n=t.key,s=Dr(e);return"string"!==s?[new an(n,e,`string expected, ${s} found`)]:[]}const cs={promoteId:function({key:t,value:e}){if("string"===Dr(e))return io({key:t,value:e});{const n=[];for(const s in e)n.push(...io({key:`${t}.${s}`,value:e[s]}));return n}}};function Vs(t){const e=t.value,n=t.key,s=t.styleSpec,u=t.style;if(!e.type)return[new an(n,e,'"type" is required')];const f=tr(e.type);let m;switch(f){case"vector":case"raster":case"raster-dem":return m=hi({key:n,value:e,valueSpec:s[`source_${f.replace("-","_")}`],style:t.style,styleSpec:s,objectElementValidators:cs}),m;case"geojson":if(m=hi({key:n,value:e,valueSpec:s.source_geojson,style:u,styleSpec:s,objectElementValidators:cs}),e.cluster)for(const v in e.clusterProperties){const[E,C]=e.clusterProperties[v],R="string"==typeof E?[E,["accumulated"],["get",v]]:E;m.push(...Gi({key:`${n}.${v}.map`,value:C,expressionContext:"cluster-map"})),m.push(...Gi({key:`${n}.${v}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return m;case"video":return hi({key:n,value:e,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return hi({key:n,value:e,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return[new an(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pr({key:`${n}.type`,value:e.type,valueSpec:{values:Tr(s)},style:u,styleSpec:s})}}function Tr(t){return t.source.reduce((e,n)=>{const s=t[n];return"enum"===s.type.type&&(e=e.concat(Object.keys(s.type.values))),e},[])}function tc(t){const e=t.value,n=t.styleSpec,s=n.light,u=t.style;let f=[];const m=Dr(e);if(void 0===e)return f;if("object"!==m)return f=f.concat([new an("light",e,`object expected, ${m} found`)]),f;for(const v in e){const E=v.match(/^(.*)-transition$/);f=f.concat(E&&s[E[1]]&&s[E[1]].transition?Hr({key:v,value:e[v],valueSpec:n.transition,style:u,styleSpec:n}):s[v]?Hr({key:v,value:e[v],valueSpec:s[v],style:u,styleSpec:n}):[new an(v,e[v],`unknown property "${v}"`)])}return f}function Ec(t){const e=t.value,n=t.key,s=t.style,u=t.styleSpec,f=u.terrain;let m=[];const v=Dr(e);if(void 0===e)return m;if("object"!==v)return m=m.concat([new an("terrain",e,`object expected, ${v} found`)]),m;for(const E in e){const C=E.match(/^(.*)-transition$/);m=m.concat(C&&f[C[1]]&&f[C[1]].transition?Hr({key:E,value:e[E],valueSpec:u.transition,style:s,styleSpec:u}):f[E]?Hr({key:E,value:e[E],valueSpec:f[E],style:s,styleSpec:u}):[new an(E,e[E],`unknown property "${E}"`)])}if(e.source){const E=s.sources&&s.sources[e.source],C=E&&tr(E.type);E?"raster-dem"!==C&&m.push(new an(n,e.source,`terrain cannot be used with a source of type ${String(C)}, it only be used with a "raster-dem" source type`)):m.push(new an(n,e.source,`source "${e.source}" not found`))}else m.push(new an(n,e,'terrain is missing required property "source"'));return m}function ir(t){const e=t.value,n=t.style,s=t.styleSpec,u=s.fog;let f=[];const m=Dr(e);if(void 0===e)return f;if("object"!==m)return f=f.concat([new an("fog",e,`object expected, ${m} found`)]),f;for(const v in e){const E=v.match(/^(.*)-transition$/);f=f.concat(E&&u[E[1]]&&u[E[1]].transition?Hr({key:v,value:e[v],valueSpec:s.transition,style:n,styleSpec:s}):u[v]?Hr({key:v,value:e[v],valueSpec:u[v],style:n,styleSpec:s}):[new an(v,e[v],`unknown property "${v}"`)])}return f}const Wa={"*":()=>[],array:Xi,boolean:function(t){const e=t.value,n=t.key,s=Dr(e);return"boolean"!==s?[new an(n,e,`boolean expected, ${s} found`)]:[]},number:nr,color:function(t){const e=t.key,n=t.value,s=Dr(n);return"string"!==s?[new an(e,n,`color expected, ${s} found`)]:null===Ps(n)?[new an(e,n,`color expected, "${n}" found`)]:[]},enum:Pr,filter:Aa,function:Bi,layer:Xr,object:hi,source:Vs,light:tc,terrain:Ec,fog:ir,string:io,formatted:function(t){return 0===io(t).length?[]:Gi(t)},resolvedImage:function(t){return 0===io(t).length?[]:Gi(t)},projection:function(t){const e=t.value,n=t.styleSpec,s=n.projection,u=t.style;let f=[];const m=Dr(e);if("object"===m)for(const v in e)f=f.concat(Hr({key:v,value:e[v],valueSpec:s[v],style:u,styleSpec:n}));else"string"!==m&&(f=f.concat([new an("projection",e,`object or string expected, ${m} found`)]));return f}};function Hr(t){const e=t.value,n=t.valueSpec,s=t.styleSpec;return n.expression&&zl(tr(e))?Bi(t):n.expression&&G(Ao(e))?Gi(t):n.type&&Wa[n.type]?Wa[n.type](t):hi(So({},t,{valueSpec:n.type?s[n.type]:n}))}function Cc(t){const e=t.value,n=t.key,s=io(t);return s.length||(-1===e.indexOf("{fontstack}")&&s.push(new an(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&s.push(new an(n,e,'"glyphs" url must include a "{range}" token'))),s}function nc(t,e=yn){return _l(Hr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Cc,"*":()=>[]}}))}const lh=t=>_l($i(t)),hd=t=>_l(cr(t));function _l(t){return t.slice().sort((e,n)=>e.line&&n.line?e.line-n.line:0)}function Mc(t,e){let n=!1;if(e&&e.length)for(const s of e)t.fire(new eo(new Error(s.message))),n=!0;return n}var yl=vl;function vl(t,e,n){var s=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var u=new Int32Array(this.arrayBuffer);t=u[0],this.d=(e=u[1])+2*(n=u[2]);for(var f=0;f<this.d*this.d;f++){var m=u[3+f],v=u[3+f+1];s.push(m===v?null:u.subarray(m,v))}var E=u[3+s.length+1];this.keys=u.subarray(u[3+s.length],E),this.bboxes=u.subarray(E),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var C=0;C<this.d*this.d;C++)s.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var R=n/e*t;this.min=-R,this.max=t+R}vl.prototype.insert=function(t,e,n,s,u){this._forEachCell(e,n,s,u,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(u)},vl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},vl.prototype._insertCell=function(t,e,n,s,u,f){this.cells[u].push(f)},vl.prototype.query=function(t,e,n,s,u){var f=this.min,m=this.max;if(t<=f&&e<=f&&m<=n&&m<=s&&!u)return Array.prototype.slice.call(this.keys);var v=[];return this._forEachCell(t,e,n,s,this._queryCell,v,{},u),v},vl.prototype._queryCell=function(t,e,n,s,u,f,m,v){var E=this.cells[u];if(null!==E)for(var C=this.keys,R=this.bboxes,N=0;N<E.length;N++){var H=E[N];if(void 0===m[H]){var K=4*H;(v?v(R[K+0],R[K+1],R[K+2],R[K+3]):t<=R[K+2]&&e<=R[K+3]&&n>=R[K+0]&&s>=R[K+1])?(m[H]=!0,f.push(C[H])):m[H]=!1}}},vl.prototype._forEachCell=function(t,e,n,s,u,f,m,v){for(var E=this._convertToCellCoord(t),C=this._convertToCellCoord(e),R=this._convertToCellCoord(n),N=this._convertToCellCoord(s),H=E;H<=R;H++)for(var K=C;K<=N;K++){var J=this.d*K+H;if((!v||v(this._convertFromCellCoord(H),this._convertFromCellCoord(K),this._convertFromCellCoord(H+1),this._convertFromCellCoord(K+1)))&&u.call(this,t,e,n,s,J,f,m,v))return}},vl.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},vl.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},vl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,s=0;s<this.cells.length;s++)n+=this.cells[s].length;var u=new Int32Array(e+n+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var f=e,m=0;m<t.length;m++){var v=t[m];u[3+m]=f,u.set(v,f),f+=v.length}return u[3+t.length]=f,u.set(this.keys,f),u[3+t.length+1]=f+=this.keys.length,u.set(this.bboxes,f),f+=this.bboxes.length,u.buffer};const Oo={};function fi(t,e,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Oo[e]={klass:t,omit:n.omit||[]}}fi(Object,"Object"),yl.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},yl.deserialize=function(t){return new yl(t.buffer)},Object.defineProperty(yl,"name",{value:"Grid"}),fi(yl,"Grid"),fi(Fr,"Color"),fi(Error,"Error"),fi(it,"AJAXError"),fi(yo,"ResolvedImage"),fi(ln,"StylePropertyFunction"),fi(S,"StyleExpression",{omit:["_evaluator"]}),fi(Pt,"ZoomDependentExpression"),fi(Re,"ZoomConstantExpression"),fi(Ms,"CompoundExpression",{omit:["_evaluate"]});for(const t in ha)Oo[ha[t]._classRegistryKey]||fi(ha[t],`Expression${t}`);function ic(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function fd(t){return he.ImageBitmap&&t instanceof he.ImageBitmap}function xl(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(ic(t)||fd(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof he.ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const s of t)n.push(xl(s,e));return n}if("object"==typeof t){const n=t.constructor,s=n._classRegistryKey;if(!s)throw new Error(`can't serialize object of unregistered class ${s}`);const u=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(const f in t)t.hasOwnProperty(f)&&(Oo[s].omit.indexOf(f)>=0||(u[f]=xl(t[f],e)));t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function us(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||ic(t)||fd(t)||ArrayBuffer.isView(t)||t instanceof he.ImageData)return t;if(Array.isArray(t))return t.map(us);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=Oo[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const s=Object.create(n.prototype);for(const u of Object.keys(t))"$name"!==u&&(s[u]=us(t[u]));return s}throw new Error("can't deserialize object of type "+typeof t)}const Ia=t=>t>=1536&&t<=1791,cu=t=>t>=1872&&t<=1919,rc=t=>t>=2208&&t<=2303,bl=t=>t>=11904&&t<=12031,$c=t=>t>=12032&&t<=12255,ku=t=>t>=12272&&t<=12287,O=t=>t>=12288&&t<=12351,k=t=>t>=12352&&t<=12447,I=t=>t>=12448&&t<=12543,V=t=>t>=12544&&t<=12591,Y=t=>t>=12704&&t<=12735,me=t=>t>=12736&&t<=12783,tt=t=>t>=12784&&t<=12799,bt=t=>t>=12800&&t<=13055,An=t=>t>=13056&&t<=13311,pi=t=>t>=13312&&t<=19903,or=t=>t>=19968&&t<=40959,Di=t=>t>=40960&&t<=42127,Gr=t=>t>=42128&&t<=42191,vs=t=>t>=44032&&t<=55215,Xs=t=>t>=63744&&t<=64255,d=t=>t>=64336&&t<=65023,i=t=>t>=65040&&t<=65055,c=t=>t>=65072&&t<=65103,p=t=>t>=65104&&t<=65135,y=t=>t>=65136&&t<=65279,x=t=>t>=65280&&t<=65519;function D(t){for(const e of t)if(W(e.charCodeAt(0)))return!0;return!1}function P(t){for(const e of t)if(!L(e.charCodeAt(0)))return!1;return!0}function L(t){return!(Ia(t)||cu(t)||rc(t)||d(t)||y(t))}function W(t){return!(746!==t&&747!==t&&(t<4352||!(Y(t)||V(t)||c(t)&&!(t>=65097&&t<=65103)||Xs(t)||An(t)||bl(t)||me(t)||!(!O(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||pi(t)||or(t)||bt(t)||(e=t,e>=12592&&e<=12687)||(e=>e>=43360&&e<=43391)(t)||(e=>e>=55216&&e<=55295)(t)||(e=>e>=4352&&e<=4607)(t)||vs(t)||k(t)||ku(t)||(e=>e>=12688&&e<=12703)(t)||$c(t)||tt(t)||I(t)&&12540!==t||!(!x(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!p(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(e=>e>=5120&&e<=5759)(t)||(e=>e>=6320&&e<=6399)(t)||i(t)||(e=>e>=19904&&e<=19967)(t)||Di(t)||Gr(t))));var e}function Z(t){return!(W(t)||(e=t,(n=e)>=128&&n<=255&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(n=>n>=8192&&n<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(n=>n>=8448&&n<=8527)(e)||(n=>n>=8528&&n<=8591)(e)||(n=>n>=8960&&n<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(n=>n>=9216&&n<=9279)(e)&&9251!==e||(n=>n>=9280&&n<=9311)(e)||(n=>n>=9312&&n<=9471)(e)||(n=>n>=9632&&n<=9727)(e)||(n=>n>=9728&&n<=9983)(e)&&!(e>=9754&&e<=9759)||(n=>n>=11008&&n<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||O(e)||I(e)||(n=>n>=57344&&n<=63743)(e)||c(e)||p(e)||x(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e,n}function ie(t){return t>=1424&&t<=2303||d(t)||y(t)}function ve(t,e){return!(!e&&ie(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(n=t,n>=6016&&n<=6143));var n}function Pe(t){for(const e of t)if(ie(e.charCodeAt(0)))return!0;return!1}const Le="deferred",Be="loading",Te="loaded";let Ae=null,je="unavailable",ze=null;const at=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(je="error"),Ae&&Ae(t)};function Dt(){vt.fire(new _o("pluginStateChange",{pluginStatus:je,pluginURL:ze}))}const vt=new Cr,Vt=function(){return je},cn=function(){if(je!==Le||!ze)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");je=Be,Dt(),ze&&ni({url:ze},t=>{t?at(t):(je=Te,Dt())})},rn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>je===Te||null!=rn.applyArabicShaping,isLoading:()=>je===Be,setState(t){je=t.pluginStatus,ze=t.pluginURL},isParsed:()=>null!=rn.applyArabicShaping&&null!=rn.processBidirectionalText&&null!=rn.processStyledBidirectionalText,getPluginURL:()=>ze};class $t{constructor(e,n){this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(n,s){for(const u of n)if(!ve(u.charCodeAt(0),s))return!1;return!0}(e,rn.isLoaded())}}class qn{constructor(e,n){this.property=e,this.value=n,this.expression=function(s,u){if(zl(s))return new ln(s,u);if(G(s)){const f=Rt(s,u);if("error"===f.result)throw new Error(f.value.map(m=>`${m.key}: ${m.message}`).join(", "));return f.value}{let f=s;return"string"==typeof s&&"color"===u.type&&(f=Fr.parse(s)),{kind:"constant",evaluate:()=>f}}}(void 0===n?e.specification.default:n,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,n,s){return this.property.possiblyEvaluate(this,e,n,s)}}class Kt{constructor(e){this.property=e,this.value=new qn(e,void 0)}transitioned(e,n){return new gn(this.property,this.value,n,Xt({},e.transition,this.transition),e.now)}untransitioned(){return new gn(this.property,this.value,null,{},0)}}class Pn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Fe(this._values[e].value.value)}setValue(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new Kt(this._values[e].property)),this._values[e].value=new qn(this._values[e].property,null===n?void 0:Fe(n))}getTransition(e){return Fe(this._values[e].transition)}setTransition(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new Kt(this._values[e].property)),this._values[e].transition=Fe(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const s=this.getValue(n);void 0!==s&&(e[n]=s);const u=this.getTransition(n);void 0!==u&&(e[`${n}-transition`]=u)}return e}transitioned(e,n){const s=new Wn(this._properties);for(const u of Object.keys(this._values))s._values[u]=this._values[u].transitioned(e,n._values[u]);return s}untransitioned(){const e=new Wn(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class gn{constructor(e,n,s,u,f){const m=u.delay||0,v=u.duration||0;f=f||0,this.property=e,this.value=n,this.begin=f+m,this.end=this.begin+v,e.specification.transition&&(u.delay||u.duration)&&(this.prior=s)}possiblyEvaluate(e,n,s){const u=e.now||0,f=this.value.possiblyEvaluate(e,n,s),m=this.prior;if(m){if(u>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(u<this.begin)return m.possiblyEvaluate(e,n,s);{const v=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,n,s),f,zt(v))}}return f}}class Wn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,s){const u=new Qn(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].possiblyEvaluate(e,n,s);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class pn{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Fe(this._values[e].value)}setValue(e,n){this._values[e]=new qn(this._values[e].property,null===n?void 0:Fe(n))}serialize(){const e={};for(const n of Object.keys(this._values)){const s=this.getValue(n);void 0!==s&&(e[n]=s)}return e}possiblyEvaluate(e,n,s){const u=new Qn(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].possiblyEvaluate(e,n,s);return u}}class zn{constructor(e,n,s){this.property=e,this.value=n,this.parameters=s}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,n,s,u){return this.property.evaluate(this.value,this.parameters,e,n,s,u)}}class Qn{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class qt{constructor(e){this.specification=e}possiblyEvaluate(e,n){return e.expression.evaluate(n)}interpolate(e,n,s){const u=lr[this.specification.type];return u?u(e,n,s):e}}class hn{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,s,u){return new zn(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(n,null,{},s,u)}:e.expression,n)}interpolate(e,n,s){if("constant"!==e.value.kind||"constant"!==n.value.kind)return e;if(void 0===e.value.value||void 0===n.value.value)return new zn(this,{kind:"constant",value:void 0},e.parameters);const u=lr[this.specification.type];return u?new zn(this,{kind:"constant",value:u(e.value.value,n.value.value,s)},e.parameters):e}evaluate(e,n,s,u,f,m){return"constant"===e.kind?e.value:e.evaluate(n,s,u,f,m)}}class Ei{constructor(e){this.specification=e}possiblyEvaluate(e,n,s,u){return!!e.expression.evaluate(n,null,{},s,u)}interpolate(){return!1}}class Oi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const n=new $t(0,{});for(const s in e){const u=e[s];u.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new qn(u,void 0),m=this.defaultTransitionablePropertyValues[s]=new Kt(u);this.defaultTransitioningPropertyValues[s]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate(n)}}}function Ci(t,e){return 256*(t=Ke(Math.floor(t),0,255))+Ke(Math.floor(e),0,255)}fi(hn,"DataDrivenProperty"),fi(qt,"DataConstantProperty"),fi(Ei,"ColorRampProperty");const Vi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sr{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Si{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function gi(t,e=1){let n=0,s=0;return{members:t.map(u=>{const f=Vi[u.type].BYTES_PER_ELEMENT,m=n=$r(n,Math.max(e,f)),v=u.components||1;return s=Math.max(s,f),n+=f*v,{name:u.name,type:u.type,components:v,offset:m}}),size:$r(n,Math.max(s,e)),alignment:e}}function $r(t,e){return Math.ceil(t/e)*e}class Or extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.int16[u+0]=n,this.int16[u+1]=s,e}}Or.prototype.bytesPerElement=4,fi(Or,"StructArrayLayout2i4");class ao extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const f=3*e;return this.int16[f+0]=n,this.int16[f+1]=s,this.int16[f+2]=u,e}}ao.prototype.bytesPerElement=6,fi(ao,"StructArrayLayout3i6");class Zr extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,n,s,u)}emplace(e,n,s,u,f){const m=4*e;return this.int16[m+0]=n,this.int16[m+1]=s,this.int16[m+2]=u,this.int16[m+3]=f,e}}Zr.prototype.bytesPerElement=8,fi(Zr,"StructArrayLayout4i8");class Pa extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m,v){const E=this.length;return this.resize(E+1),this.emplace(E,e,n,s,u,f,m,v)}emplace(e,n,s,u,f,m,v,E){const C=6*e,R=12*e,N=3*e;return this.int16[C+0]=n,this.int16[C+1]=s,this.uint8[R+4]=u,this.uint8[R+5]=f,this.uint8[R+6]=m,this.uint8[R+7]=v,this.float32[N+2]=E,e}}Pa.prototype.bytesPerElement=12,fi(Pa,"StructArrayLayout2i4ub1f12");class Qs extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,n,s,u)}emplace(e,n,s,u,f){const m=4*e;return this.float32[m+0]=n,this.float32[m+1]=s,this.float32[m+2]=u,this.float32[m+3]=f,e}}Qs.prototype.bytesPerElement=16,fi(Qs,"StructArrayLayout4f16");class Js extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u,f)}emplace(e,n,s,u,f,m){const v=6*e,E=3*e;return this.uint16[v+0]=n,this.uint16[v+1]=s,this.uint16[v+2]=u,this.uint16[v+3]=f,this.float32[E+2]=m,e}}Js.prototype.bytesPerElement=12,fi(Js,"StructArrayLayout4ui1f12");class sl extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,n,s,u)}emplace(e,n,s,u,f){const m=4*e;return this.uint16[m+0]=n,this.uint16[m+1]=s,this.uint16[m+2]=u,this.uint16[m+3]=f,e}}sl.prototype.bytesPerElement=8,fi(sl,"StructArrayLayout4ui8");class Qr extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,n,s,u,f,m)}emplace(e,n,s,u,f,m,v){const E=6*e;return this.int16[E+0]=n,this.int16[E+1]=s,this.int16[E+2]=u,this.int16[E+3]=f,this.int16[E+4]=m,this.int16[E+5]=v,e}}Qr.prototype.bytesPerElement=12,fi(Qr,"StructArrayLayout6i12");class Wr extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m,v,E,C,R,N,H){const K=this.length;return this.resize(K+1),this.emplace(K,e,n,s,u,f,m,v,E,C,R,N,H)}emplace(e,n,s,u,f,m,v,E,C,R,N,H,K){const J=12*e;return this.int16[J+0]=n,this.int16[J+1]=s,this.int16[J+2]=u,this.int16[J+3]=f,this.uint16[J+4]=m,this.uint16[J+5]=v,this.uint16[J+6]=E,this.uint16[J+7]=C,this.int16[J+8]=R,this.int16[J+9]=N,this.int16[J+10]=H,this.int16[J+11]=K,e}}Wr.prototype.bytesPerElement=24,fi(Wr,"StructArrayLayout4i4ui4i24");class wr extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,e,n,s,u,f,m)}emplace(e,n,s,u,f,m,v){const E=10*e,C=5*e;return this.int16[E+0]=n,this.int16[E+1]=s,this.int16[E+2]=u,this.float32[C+2]=f,this.float32[C+3]=m,this.float32[C+4]=v,e}}wr.prototype.bytesPerElement=20,fi(wr,"StructArrayLayout3i3f20");class Uo extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}Uo.prototype.bytesPerElement=4,fi(Uo,"StructArrayLayout1ul4");class js extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m,v,E,C,R,N,H,K){const J=this.length;return this.resize(J+1),this.emplace(J,e,n,s,u,f,m,v,E,C,R,N,H,K)}emplace(e,n,s,u,f,m,v,E,C,R,N,H,K,J){const se=20*e,De=10*e;return this.int16[se+0]=n,this.int16[se+1]=s,this.int16[se+2]=u,this.int16[se+3]=f,this.int16[se+4]=m,this.float32[De+3]=v,this.float32[De+4]=E,this.float32[De+5]=C,this.float32[De+6]=R,this.int16[se+14]=N,this.uint32[De+8]=H,this.uint16[se+18]=K,this.uint16[se+19]=J,e}}js.prototype.bytesPerElement=40,fi(js,"StructArrayLayout5i4f1i1ul2ui40");class go extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m,v){const E=this.length;return this.resize(E+1),this.emplace(E,e,n,s,u,f,m,v)}emplace(e,n,s,u,f,m,v,E){const C=8*e;return this.int16[C+0]=n,this.int16[C+1]=s,this.int16[C+2]=u,this.int16[C+4]=f,this.int16[C+5]=m,this.int16[C+6]=v,this.int16[C+7]=E,e}}go.prototype.bytesPerElement=16,fi(go,"StructArrayLayout3i2i2i16");class xs extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u,f)}emplace(e,n,s,u,f,m){const v=4*e,E=8*e;return this.float32[v+0]=n,this.float32[v+1]=s,this.float32[v+2]=u,this.int16[E+6]=f,this.int16[E+7]=m,e}}xs.prototype.bytesPerElement=16,fi(xs,"StructArrayLayout2f1f2i16");class Dc extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,n,s,u)}emplace(e,n,s,u,f){const m=12*e,v=3*e;return this.uint8[m+0]=n,this.uint8[m+1]=s,this.float32[v+1]=u,this.float32[v+2]=f,e}}Dc.prototype.bytesPerElement=12,fi(Dc,"StructArrayLayout2ub2f12");class wl extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const f=3*e;return this.float32[f+0]=n,this.float32[f+1]=s,this.float32[f+2]=u,e}}wl.prototype.bytesPerElement=12,fi(wl,"StructArrayLayout3f12");class Ss extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s){const u=this.length;return this.resize(u+1),this.emplace(u,e,n,s)}emplace(e,n,s,u){const f=3*e;return this.uint16[f+0]=n,this.uint16[f+1]=s,this.uint16[f+2]=u,e}}Ss.prototype.bytesPerElement=6,fi(Ss,"StructArrayLayout3ui6");class Oa extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De,We,_t,Ze,lt,Ct){const mt=this.length;return this.resize(mt+1),this.emplace(mt,e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De,We,_t,Ze,lt,Ct)}emplace(e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De,We,_t,Ze,lt,Ct,mt){const sn=30*e,en=15*e,In=60*e;return this.int16[sn+0]=n,this.int16[sn+1]=s,this.int16[sn+2]=u,this.float32[en+2]=f,this.float32[en+3]=m,this.uint16[sn+8]=v,this.uint16[sn+9]=E,this.uint32[en+5]=C,this.uint32[en+6]=R,this.uint32[en+7]=N,this.uint16[sn+16]=H,this.uint16[sn+17]=K,this.uint16[sn+18]=J,this.float32[en+10]=se,this.float32[en+11]=De,this.uint8[In+48]=We,this.uint8[In+49]=_t,this.uint8[In+50]=Ze,this.uint32[en+13]=lt,this.int16[sn+28]=Ct,this.uint8[In+58]=mt,e}}Oa.prototype.bytesPerElement=60,fi(Oa,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Hs extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De,We,_t,Ze,lt,Ct,mt,sn,en,In,Yn,_n,Bn,Un,$n){const Kn=this.length;return this.resize(Kn+1),this.emplace(Kn,e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De,We,_t,Ze,lt,Ct,mt,sn,en,In,Yn,_n,Bn,Un,$n)}emplace(e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De,We,_t,Ze,lt,Ct,mt,sn,en,In,Yn,_n,Bn,Un,$n,Kn){const xn=38*e,oi=19*e;return this.int16[xn+0]=n,this.int16[xn+1]=s,this.int16[xn+2]=u,this.float32[oi+2]=f,this.float32[oi+3]=m,this.int16[xn+8]=v,this.int16[xn+9]=E,this.int16[xn+10]=C,this.int16[xn+11]=R,this.int16[xn+12]=N,this.int16[xn+13]=H,this.uint16[xn+14]=K,this.uint16[xn+15]=J,this.uint16[xn+16]=se,this.uint16[xn+17]=De,this.uint16[xn+18]=We,this.uint16[xn+19]=_t,this.uint16[xn+20]=Ze,this.uint16[xn+21]=lt,this.uint16[xn+22]=Ct,this.uint16[xn+23]=mt,this.uint16[xn+24]=sn,this.uint16[xn+25]=en,this.uint16[xn+26]=In,this.uint16[xn+27]=Yn,this.uint16[xn+28]=_n,this.uint32[oi+15]=Bn,this.float32[oi+16]=Un,this.float32[oi+17]=$n,this.float32[oi+18]=Kn,e}}Hs.prototype.bytesPerElement=76,fi(Hs,"StructArrayLayout3i2f6i15ui1ul3f76");class El extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}El.prototype.bytesPerElement=4,fi(El,"StructArrayLayout1f4");class uu extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,s,u,f)}emplace(e,n,s,u,f,m){const v=5*e;return this.float32[v+0]=n,this.float32[v+1]=s,this.float32[v+2]=u,this.float32[v+3]=f,this.float32[v+4]=m,e}}uu.prototype.bytesPerElement=20,fi(uu,"StructArrayLayout5f20");class Zc extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,n,s,u)}emplace(e,n,s,u,f){const m=6*e;return this.uint32[3*e+0]=n,this.uint16[m+2]=s,this.uint16[m+3]=u,this.uint16[m+4]=f,e}}Zc.prototype.bytesPerElement=12,fi(Zc,"StructArrayLayout1ul3ui12");class Cl extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.uint16[u+0]=n,this.uint16[u+1]=s,e}}Cl.prototype.bytesPerElement=4,fi(Cl,"StructArrayLayout2ui4");class pd extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}pd.prototype.bytesPerElement=2,fi(pd,"StructArrayLayout1ui2");class Ml extends Si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const s=this.length;return this.resize(s+1),this.emplace(s,e,n)}emplace(e,n,s){const u=2*e;return this.float32[u+0]=n,this.float32[u+1]=s,e}}Ml.prototype.bytesPerElement=8,fi(Ml,"StructArrayLayout2f8");class du extends sr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}du.prototype.size=40;class pf extends js{get(e){return new du(this,e)}}fi(pf,"CollisionBoxArray");class Vp extends sr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Vp.prototype.size=60;class jp extends Oa{get(e){return new Vp(this,e)}}fi(jp,"PlacedSymbolArray");class Hp extends sr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Hp.prototype.size=76;class Gp extends Hs{get(e){return new Hp(this,e)}}fi(Gp,"SymbolInstanceArray");class $p extends El{getoffsetX(e){return this.float32[1*e+0]}}fi($p,"GlyphOffsetArray");class mf extends Or{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}fi(mf,"SymbolLineVertexArray");class Zp extends sr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Zp.prototype.size=12;class Wp extends Zc{get(e){return new Zp(this,e)}}fi(Wp,"FeatureIndexArray");class qp extends Cl{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}fi(qp,"FillExtrusionCentroidArray");const Hg=gi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ch=gi([{name:"a_dash",components:4,type:"Uint16"}]);var qa={exports:{}},_f=function(t,e){var n,s,u,f,m,v,E,C;for(s=t.length-(n=3&t.length),u=e,m=3432918353,v=461845907,C=0;C<s;)E=255&t.charCodeAt(C)|(255&t.charCodeAt(++C))<<8|(255&t.charCodeAt(++C))<<16|(255&t.charCodeAt(++C))<<24,++C,u=27492+(65535&(f=5*(65535&(u=(u^=E=(65535&(E=(E=(65535&E)*m+(((E>>>16)*m&65535)<<16)&4294967295)<<15|E>>>17))*v+(((E>>>16)*v&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(f>>>16)&65535)<<16);switch(E=0,n){case 3:E^=(255&t.charCodeAt(C+2))<<16;case 2:E^=(255&t.charCodeAt(C+1))<<8;case 1:u^=E=(65535&(E=(E=(65535&(E^=255&t.charCodeAt(C)))*m+(((E>>>16)*m&65535)<<16)&4294967295)<<15|E>>>17))*v+(((E>>>16)*v&65535)<<16)&4294967295}return u^=t.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0},Yp=function(t,e){for(var n,s=t.length,u=e^s,f=0;s>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(f)|(255&t.charCodeAt(++f))<<8|(255&t.charCodeAt(++f))<<16|(255&t.charCodeAt(++f))<<24))+((1540483477*(n>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),s-=4,++f;switch(s){case 3:u^=(255&t.charCodeAt(f+2))<<16;case 2:u^=(255&t.charCodeAt(f+1))<<8;case 1:u=1540483477*(65535&(u^=255&t.charCodeAt(f)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};qa.exports=_f,qa.exports.murmur3=_f,qa.exports.murmur2=Yp;class yf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,n,s,u){this.ids.push(Gg(e)),this.positions.push(n,s,u)}getPositions(e){const n=Gg(e);let s=0,u=this.ids.length-1;for(;s<u;){const m=s+u>>1;this.ids[m]>=n?u=m:s=m+1}const f=[];for(;this.ids[s]===n;)f.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return f}static serialize(e,n){const s=new Float64Array(e.ids),u=new Uint32Array(e.positions);return Kp(s,u,0,s.length-1),n&&n.push(s.buffer,u.buffer),{ids:s,positions:u}}static deserialize(e){const n=new yf;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}function Gg(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:qa.exports(String(t))}function Kp(t,e,n,s){for(;n<s;){const u=t[n+s>>1];let f=n-1,m=s+1;for(;;){do{f++}while(t[f]<u);do{m--}while(t[m]>u);if(f>=m)break;Fu(t,f,m),Fu(e,3*f,3*m),Fu(e,3*f+1,3*m+1),Fu(e,3*f+2,3*m+2)}m-n<s-m?(Kp(t,e,n,m),n=m+1):(Kp(t,e,m+1,s),s=m)}}function Fu(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}fi(yf,"FeaturePositionMap");class Vl{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,n){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,n),this.initialized=!0),!!this.location}}class vf extends Vl{constructor(e){super(e),this.current=0}set(e,n,s){this.fetchUniformLocation(e,n)&&this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class $g extends Vl{constructor(e){super(e),this.current=[0,0,0,0]}set(e,n,s){this.fetchUniformLocation(e,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3])))}}class xf extends Vl{constructor(e){super(e),this.current=Fr.transparent}set(e,n,s){this.fetchUniformLocation(e,n)&&(s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a)))}}const Zg=new Float32Array(16),Wg=new Float32Array(9),qg=new Float32Array(4);function bf(t){return[Ci(255*t.r,255*t.g),Ci(255*t.b,255*t.a)]}class Bu{constructor(e,n,s){this.value=e,this.uniformNames=n.map(u=>`u_${u}`),this.type=s}setUniform(e,n,s,u,f){n.set(e,f,u.constantOr(this.value))}getBinding(e,n){return"color"===this.type?new xf(e):new vf(e)}}class Tc{constructor(e,n){this.uniformNames=n.map(s=>`u_${s}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,n,s,u,f){const m="u_pattern"===f||"u_dash"===f?this.pattern:"u_pixel_ratio"===f?this.pixelRatio:null;m&&n.set(e,f,m)}getBinding(e,n){return"u_pattern"===n||"u_dash"===n?new $g(e):new vf(e)}}class oc{constructor(e,n,s,u){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=n.map(f=>({name:`a_${f}`,type:"Float32",components:"color"===s?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,n,s,u,f,m){const v=this.paintVertexArray.length,E=this.expression.evaluate(new $t(0),n,{},f,u,m);this.paintVertexArray.resize(e),this._setPaintValue(v,e,E)}updatePaintArray(e,n,s,u,f){const m=this.expression.evaluate({zoom:0},s,u,void 0,f);this._setPaintValue(e,n,m)}_setPaintValue(e,n,s){if("color"===this.type){const u=bf(s);for(let f=e;f<n;f++)this.paintVertexArray.emplace(f,u[0],u[1])}else{for(let u=e;u<n;u++)this.paintVertexArray.emplace(u,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class al{constructor(e,n,s,u,f,m){this.expression=e,this.uniformNames=n.map(v=>`u_${v}_t`),this.type=s,this.useIntegerZoom=u,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=n.map(v=>({name:`a_${v}`,type:"Float32",components:"color"===s?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,n,s,u,f,m){const v=this.expression.evaluate(new $t(this.zoom),n,{},f,u,m),E=this.expression.evaluate(new $t(this.zoom+1),n,{},f,u,m),C=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(C,e,v,E)}updatePaintArray(e,n,s,u,f){const m=this.expression.evaluate({zoom:this.zoom},s,u,void 0,f),v=this.expression.evaluate({zoom:this.zoom+1},s,u,void 0,f);this._setPaintValue(e,n,m,v)}_setPaintValue(e,n,s,u){if("color"===this.type){const f=bf(s),m=bf(u);for(let v=e;v<n;v++)this.paintVertexArray.emplace(v,f[0],f[1],m[0],m[1])}else{for(let f=e;f<n;f++)this.paintVertexArray.emplace(f,s,u);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n,s,u,f){const m=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,v=Ke(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);n.set(e,f,v)}getBinding(e,n){return new vf(e)}}class Wc{constructor(e,n,s,u,f){this.expression=e,this.layerId=f,this.paintVertexAttributes=("array"===s?ch:Hg).members;for(let m=0;m<n.length;++m);this.paintVertexArray=new u}populatePaintArray(e,n,s){const u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(u,e,n.patterns&&n.patterns[this.layerId],s)}updatePaintArray(e,n,s,u,f,m){this._setPaintValues(e,n,s.patterns&&s.patterns[this.layerId],m)}_setPaintValues(e,n,s,u){if(!u||!s)return;const f=u[s];if(!f)return;const{tl:m,br:v,pixelRatio:E}=f;for(let C=e;C<n;C++)this.paintVertexArray.emplace(C,m[0],m[1],v[0],v[1],E)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Do{constructor(e,n,s=(()=>!0)){this.binders={},this._buffers=[];const u=[];for(const f in e.paint._values){if(!s(f))continue;const m=e.paint.get(f);if(!(m instanceof zn&&Ta(m.property.specification)))continue;const v=wf(f,e.type),E=m.value,C=m.property.specification.type,R=m.property.useIntegerZoom,N="line-dasharray"===f||f.endsWith("pattern"),H="line-dasharray"===f&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==E.kind||H)if("source"===E.kind||H||N){const K=Qp(f,C,"source");this.binders[f]=N?new Wc(E,v,C,K,e.id):new oc(E,v,C,K),u.push(`/a_${f}`)}else{const K=Qp(f,C,"composite");this.binders[f]=new al(E,v,C,R,n,K),u.push(`/z_${f}`)}else this.binders[f]=N?new Tc(E.value,v):new Bu(E.value,v,C),u.push(`/u_${f}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof oc||n instanceof al?n.maxValue:0}populatePaintArrays(e,n,s,u,f,m){for(const v in this.binders){const E=this.binders[v];(E instanceof oc||E instanceof al||E instanceof Wc)&&E.populatePaintArray(e,n,s,u,f,m)}}setConstantPatternPositions(e){for(const n in this.binders){const s=this.binders[n];s instanceof Tc&&s.setConstantPatternPositions(e)}}updatePaintArrays(e,n,s,u,f,m){let v=!1;for(const E in e){const C=n.getPositions(E);for(const R of C){const N=s.feature(R.index);for(const H in this.binders){const K=this.binders[H];if((K instanceof oc||K instanceof al||K instanceof Wc)&&!0===K.expression.isStateDependent){const J=u.paint.get(H);K.expression=J.value,K.updatePaintArray(R.start,R.end,N,e[E],f,m),v=!0}}}}return v}defines(){const e=[];for(const n in this.binders){const s=this.binders[n];(s instanceof Bu||s instanceof Tc)&&e.push(...s.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof oc||s instanceof al||s instanceof Wc)for(let u=0;u<s.paintVertexAttributes.length;u++)e.push(s.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const s=this.binders[n];if(s instanceof Bu||s instanceof Tc||s instanceof al)for(const u of s.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const n=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Bu||u instanceof Tc||u instanceof al)for(const f of u.uniformNames)n.push({name:f,property:s,binding:u.getBinding(e,f)})}return n}setUniforms(e,n,s,u,f){for(const{name:m,property:v,binding:E}of s)this.binders[v].setUniform(e,E,f,u.get(v),m)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const n=this.binders[e];(n instanceof oc||n instanceof al||n instanceof Wc)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const n in this.binders){const s=this.binders[n];(s instanceof oc||s instanceof al||s instanceof Wc)&&s.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof oc||n instanceof al||n instanceof Wc)&&n.destroy()}}}class hu{constructor(e,n,s=(()=>!0)){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new Do(u,n,s);this.needsUpload=!1,this._featureMap=new yf,this._bufferOffset=0}populatePaintArrays(e,n,s,u,f,m,v){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(e,n,u,f,m,v);void 0!==n.id&&this._featureMap.add(n.id,s,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,s,u,f){for(const m of s)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(e,this._featureMap,n,m,u,f)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Yg={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function wf(t,e){return Yg[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const Xp={"line-pattern":{source:Js,composite:Js},"fill-pattern":{source:Js,composite:Js},"fill-extrusion-pattern":{source:Js,composite:Js},"line-dasharray":{source:sl,composite:sl}},Kg={color:{source:Ml,composite:Qs},number:{source:El,composite:Ml}};function Qp(t,e,n){const s=Xp[t];return s&&s[n]||Kg[e][n]}fi(Bu,"ConstantBinder"),fi(Tc,"PatternConstantBinder"),fi(oc,"SourceExpressionBinder"),fi(Wc,"PatternCompositeBinder"),fi(al,"CompositeExpressionBinder"),fi(Do,"ProgramConfiguration",{omit:["_buffers"]}),fi(hu,"ProgramConfigurationSet");const uh="-transition";class jl extends Cr{constructor(e,n){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new pn(n.layout)),n.paint)){this._transitionablePaint=new Pn(n.paint);for(const s in e.paint)this.setPaintProperty(s,e.paint[s],{validate:!1});for(const s in e.layout)this.setLayoutProperty(s,e.layout[s],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qn(n.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,n,s={}){null!=n&&this._validate(hd,`layers.${this.id}.layout.${e}`,e,n,s)||("visibility"!==e?this._unevaluatedLayout.setValue(e,n):this.visibility=n)}getPaintProperty(e){return mn(e,uh)?this._transitionablePaint.getTransition(e.slice(0,-uh.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n,s={}){if(null!=n&&this._validate(lh,`layers.${this.id}.paint.${e}`,e,n,s))return!1;if(mn(e,uh))return this._transitionablePaint.setTransition(e.slice(0,-uh.length),n||void 0),!1;{const u=this._transitionablePaint._values[e],f=u.value.isDataDriven(),m=u.value;this._transitionablePaint.setValue(e,n),this._handleSpecialPaintPropertyUpdate(e);const v=this._transitionablePaint._values[e].value,E=v.isDataDriven(),C=mn(e,"pattern")||"line-dasharray"===e;return E||f||C||this._handleOverridablePaintPropertyUpdate(e,m,v)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,n,s){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,n){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ge(e,(n,s)=>!(void 0===n||"layout"===s&&!Object.keys(n).length||"paint"===s&&!Object.keys(n).length))}_validate(e,n,s,u,f={}){return(!f||!1!==f.validate)&&Mc(this,e.call(nc,{key:n,layerType:this.type,objectKey:s,value:u,styleSpec:yn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof zn&&Ta(n.property.specification)&&("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Mo(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Xg=gi([{name:"a_pos",components:2,type:"Int16"}],4),Zy=gi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ds{constructor(e=[]){this.segments=e}prepareSegment(e,n,s,u){let f=this.segments[this.segments.length-1];return e>ds.MAX_VERTEX_ARRAY_LENGTH&&Xe(`Max vertices per segment is ${ds.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!f||f.vertexLength+e>ds.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==u)&&(f={vertexOffset:n.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},void 0!==u&&(f.sortKey=u),this.segments.push(f)),f}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,s,u){return new ds([{vertexOffset:e,primitiveOffset:n,vertexLength:s,primitiveLength:u,vaos:{},sortKey:0}])}}ds.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fi(ds,"SegmentVector");var ki=8192;class sc{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Sr?new Sr(e.lng,e.lat):Sr.convert(e),this}setSouthWest(e){return this._sw=e instanceof Sr?new Sr(e.lng,e.lat):Sr.convert(e),this}extend(e){const n=this._sw,s=this._ne;let u,f;if(e instanceof Sr)u=e,f=e;else{if(!(e instanceof sc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(sc.convert(e)):this.extend(Sr.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&e.hasOwnProperty("lon")?this.extend(Sr.convert(e)):this;if(u=e._sw,f=e._ne,!u||!f)return this}return n||s?(n.lng=Math.min(u.lng,n.lng),n.lat=Math.min(u.lat,n.lat),s.lng=Math.max(f.lng,s.lng),s.lat=Math.max(f.lat,s.lat)):(this._sw=new Sr(u.lng,u.lat),this._ne=new Sr(f.lng,f.lat)),this}getCenter(){return new Sr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Sr(this.getWest(),this.getNorth())}getSouthEast(){return new Sr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:s}=Sr.convert(e);let u=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=s&&s<=this._ne.lat&&u}static convert(e){return!e||e instanceof sc?e:new sc(e)}}const md=6371008.8;class Sr{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Sr(He(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,s=this.lat*n,u=e.lat*n,f=Math.sin(s)*Math.sin(u)+Math.cos(s)*Math.cos(u)*Math.cos((e.lng-this.lng)*n);return md*Math.acos(Math.min(f,1))}toBounds(e=0){const n=360*e/40075017,s=n/Math.cos(Math.PI/180*this.lat);return new sc(new Sr(this.lng-s,this.lat-n),new Sr(this.lng+s,this.lat+n))}static convert(e){if(e instanceof Sr)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Sr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Sr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ef=2*Math.PI*md;function Cf(t){return Ef*Math.cos(t*Math.PI/180)}function Hl(t){return(180+t)/360}function Gl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Ya(t,e){return t/Cf(e)}function Dl(t){return 360*t-180}function Gs(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function dh(t,e){return t*Cf(Gs(e))}const $l=85.051129;function Mf(t){return 1/Math.cos(t*Math.PI/180)}class Tl{constructor(e,n,s=0){this.x=+e,this.y=+n,this.z=+s}static fromLngLat(e,n=0){const s=Sr.convert(e);return new Tl(Hl(s.lng),Gl(s.lat),Ya(n,s.lat))}toLngLat(){return new Sr(Dl(this.x),Gs(this.y))}toAltitude(){return dh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ef*Mf(Gs(this.y))}}function Df(t,e,n,s,u,f,m,v,E){const C=(e+s)/2,R=(n+u)/2,N=new Qe(C,R);v(N),function(H,K,J,se,De,We){const _t=J-De,Ze=se-We;return Math.abs((se-K)*_t-(J-H)*Ze)/Math.hypot(_t,Ze)}(N.x,N.y,f.x,f.y,m.x,m.y)>=E?(Df(t,e,n,C,R,f,N,v,E),Df(t,C,R,s,u,N,m,v,E)):t.push(m)}function hh(t,e,n){let s=t[0],u=s.x,f=s.y;e(s);const m=[s];for(let v=1;v<t.length;v++){const E=t[v],{x:C,y:R}=E;e(E),Df(m,u,f,C,R,s,E,e,n),u=C,f=R,s=E}return m}function Nu(t,e,n,s){if(s(e,n)){const u=e.add(n)._mult(.5);Nu(t,e,u,s),Nu(t,u,n,s)}else t.push(n)}function Qg(t,e){let n=t[0];const s=[n];for(let u=1;u<t.length;u++){const f=t[u];Nu(s,n,f,e),n=f}return s}const gd=Math.pow(2,14)-1,_d=-gd-1;function fu(t,e){const n=Math.round(t.x*e),s=Math.round(t.y*e);return t.x=Ke(n,_d,gd),t.y=Ke(s,_d,gd),(n<t.x||n>t.x+1||s<t.y||s>t.y+1)&&Xe("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function ac(t,e,n){const s=t.loadGeometry(),u=t.extent,f=ki/u;if(e&&n&&n.projection.isReprojectedInTileSpace){const m=1<<e.z,{scale:v,x:E,y:C,projection:R}=n,N=H=>{const K=Dl((e.x+H.x/u)/m),J=Gs((e.y+H.y/u)/m),se=R.project(K,J);H.x=(se.x*v-E)*u,H.y=(se.y*v-C)*u};for(let H=0;H<s.length;H++)if(1!==t.type)s[H]=hh(s[H],N,1);else{const K=[];for(const J of s[H])J.x<0||J.x>=u||J.y<0||J.y>=u||(N(J),K.push(J));s[H]=K}}for(const m of s)for(const v of m)fu(v,f);return s}function Sc(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?ac(t):[]}}function fh(t,e,n,s,u){t.emplaceBack(2*e+(s+1)/2,2*n+(u+1)/2)}function ph(t,e,n){t.emplaceBack(e.x,e.y,e.z,16384*n[0],16384*n[1],16384*n[2])}class mh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Or,this.indexArray=new Ss,this.segments=new ds,this.programConfigurations=new hu(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,s,u){const f=this.layers[0],m=[];let v=null;"circle"===f.type&&(v=f.layout.get("circle-sort-key"));for(const{feature:C,id:R,index:N,sourceLayerIndex:H}of e){const K=this.layers[0]._featureFilter.needGeometry,J=Sc(C,K);if(!this.layers[0]._featureFilter.filter(new $t(this.zoom),J,s))continue;const se=v?v.evaluate(J,{},s):void 0,De={id:R,properties:C.properties,type:C.type,sourceLayerIndex:H,index:N,geometry:K?J.geometry:ac(C,s,u),patterns:{},sortKey:se};m.push(De)}v&&m.sort((C,R)=>C.sortKey-R.sortKey);let E=null;"globe"===u.projection.name&&(this.globeExtVertexArray=new Qr,E=u.projection);for(const C of m){const{geometry:R,index:N,sourceLayerIndex:H}=C,K=e[N].feature;this.addFeature(C,R,N,n.availableImages,s,E),n.featureIndex.insert(K,R,N,H,this.index)}}update(e,n,s,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,s,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xg.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Zy.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,n,s,u,f,m){for(const v of n)for(const E of v){const C=E.x,R=E.y;if(C<0||C>=ki||R<0||R>=ki)continue;if(m){const K=m.projectTilePoint(C,R,f),J=m.upVector(f,C,R),se=this.globeExtVertexArray;ph(se,K,J),ph(se,K,J),ph(se,K,J),ph(se,K,J)}const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),H=N.vertexLength;fh(this.layoutVertexArray,C,R,-1,-1),fh(this.layoutVertexArray,C,R,1,-1),fh(this.layoutVertexArray,C,R,1,1),fh(this.layoutVertexArray,C,R,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+2,H+3),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},u,f)}}function pu(t,e){for(let n=0;n<t.length;n++)if(qc(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(qc(t,e[n]))return!0;return!!Tf(t,e)}function Jg(t,e,n){return!!qc(t,e)||!!Af(e,t,n)}function Jp(t,e){if(1===t.length)return em(e,t[0]);for(let n=0;n<e.length;n++){const s=e[n];for(let u=0;u<s.length;u++)if(qc(t,s[u]))return!0}for(let n=0;n<t.length;n++)if(em(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Tf(t,e[n]))return!0;return!1}function e_(t,e,n){if(t.length>1){if(Tf(t,e))return!0;for(let s=0;s<e.length;s++)if(Af(e[s],t,n))return!0}for(let s=0;s<t.length;s++)if(Af(t[s],e,n))return!0;return!1}function Tf(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const s=t[n],u=t[n+1];for(let f=0;f<e.length-1;f++)if(Sf(s,u,e[f],e[f+1]))return!0}return!1}function Sf(t,e,n,s){return ce(t,n,s)!==ce(e,n,s)&&ce(t,e,n)!==ce(t,e,s)}function Af(t,e,n){const s=n*n;if(1===e.length)return t.distSqr(e[0])<s;for(let u=1;u<e.length;u++)if(If(t,e[u-1],e[u])<s)return!0;return!1}function If(t,e,n){const s=e.distSqr(n);if(0===s)return t.distSqr(e);const u=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/s;return t.distSqr(u<0?e:u>1?n:n.sub(e)._mult(u)._add(e))}function em(t,e){let n,s,u,f=!1;for(let m=0;m<t.length;m++){n=t[m];for(let v=0,E=n.length-1;v<n.length;E=v++)s=n[v],u=n[E],s.y>e.y!=u.y>e.y&&e.x<(u.x-s.x)*(e.y-s.y)/(u.y-s.y)+s.x&&(f=!f)}return f}function qc(t,e){let n=!1;for(let s=0,u=t.length-1;s<t.length;u=s++){const f=t[s],m=t[u];f.y>e.y!=m.y>e.y&&e.x<(m.x-f.x)*(e.y-f.y)/(m.y-f.y)+f.x&&(n=!n)}return n}function t_(t,e,n,s,u){for(const m of t)if(e<=m.x&&n<=m.y&&s>=m.x&&u>=m.y)return!0;const f=[new Qe(e,n),new Qe(e,u),new Qe(s,u),new Qe(s,n)];if(t.length>2)for(const m of f)if(qc(t,m))return!0;for(let m=0;m<t.length-1;m++)if(n_(t[m],t[m+1],f))return!0;return!1}function n_(t,e,n){const s=n[0],u=n[2];if(t.x<s.x&&e.x<s.x||t.x>u.x&&e.x>u.x||t.y<s.y&&e.y<s.y||t.y>u.y&&e.y>u.y)return!1;const f=ce(t,e,n[0]);return f!==ce(t,e,n[1])||f!==ce(t,e,n[2])||f!==ce(t,e,n[3])}function lc(t,e,n){const s=e.paint.get(t).value;return"constant"===s.kind?s.value:n.programConfigurations.get(e.id).getMaxValue(t)}function gh(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function mu(t,e,n,s,u){if(!e[0]&&!e[1])return t;const f=Qe.convert(e)._mult(u);"viewport"===n&&f._rotate(-s);const m=[];for(let v=0;v<t.length;v++)m.push(t[v].sub(f));return m}function zu(t,e,n,s){const u=Qe.convert(t)._mult(s);return"viewport"===e&&u._rotate(-n),u}fi(mh,"CircleBucket",{omit:["layers"]});const i_=new Oi({"circle-sort-key":new hn(yn.layout_circle["circle-sort-key"])});var Wy={paint:new Oi({"circle-radius":new hn(yn.paint_circle["circle-radius"]),"circle-color":new hn(yn.paint_circle["circle-color"]),"circle-blur":new hn(yn.paint_circle["circle-blur"]),"circle-opacity":new hn(yn.paint_circle["circle-opacity"]),"circle-translate":new qt(yn.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(yn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(yn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(yn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hn(yn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hn(yn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hn(yn.paint_circle["circle-stroke-opacity"])}),layout:i_},yd=1e-6,Ka=typeof Float32Array<"u"?Float32Array:Array;function tm(){var t=new Ka(9);return Ka!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function nm(t,e,n){var s=e[0],u=e[1],f=e[2],m=e[3],v=e[4],E=e[5],C=e[6],R=e[7],N=e[8],H=n[0],K=n[1],J=n[2],se=n[3],De=n[4],We=n[5],_t=n[6],Ze=n[7],lt=n[8];return t[0]=H*s+K*m+J*C,t[1]=H*u+K*v+J*R,t[2]=H*f+K*E+J*N,t[3]=se*s+De*m+We*C,t[4]=se*u+De*v+We*R,t[5]=se*f+De*E+We*N,t[6]=_t*s+Ze*m+lt*C,t[7]=_t*u+Ze*v+lt*R,t[8]=_t*f+Ze*E+lt*N,t}function Sl(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pf(t,e){var n=e[0],s=e[1],u=e[2],f=e[3],m=e[4],v=e[5],E=e[6],C=e[7],R=e[8],N=e[9],H=e[10],K=e[11],J=e[12],se=e[13],De=e[14],We=e[15],_t=n*v-s*m,Ze=n*E-u*m,lt=n*C-f*m,Ct=s*E-u*v,mt=s*C-f*v,sn=u*C-f*E,en=R*se-N*J,In=R*De-H*J,Yn=R*We-K*J,_n=N*De-H*se,Bn=N*We-K*se,Un=H*We-K*De,$n=_t*Un-Ze*Bn+lt*_n+Ct*Yn-mt*In+sn*en;return $n?(t[0]=(v*Un-E*Bn+C*_n)*($n=1/$n),t[1]=(u*Bn-s*Un-f*_n)*$n,t[2]=(se*sn-De*mt+We*Ct)*$n,t[3]=(H*mt-N*sn-K*Ct)*$n,t[4]=(E*Yn-m*Un-C*In)*$n,t[5]=(n*Un-u*Yn+f*In)*$n,t[6]=(De*lt-J*sn-We*Ze)*$n,t[7]=(R*sn-H*lt+K*Ze)*$n,t[8]=(m*Bn-v*Yn+C*en)*$n,t[9]=(s*Yn-n*Bn-f*en)*$n,t[10]=(J*mt-se*lt+We*_t)*$n,t[11]=(N*lt-R*mt-K*_t)*$n,t[12]=(v*In-m*_n-E*en)*$n,t[13]=(n*_n-s*In+u*en)*$n,t[14]=(se*Ze-J*Ct-De*_t)*$n,t[15]=(R*Ct-N*Ze+H*_t)*$n,t):null}function Ac(t,e,n){var s=e[0],u=e[1],f=e[2],m=e[3],v=e[4],E=e[5],C=e[6],R=e[7],N=e[8],H=e[9],K=e[10],J=e[11],se=e[12],De=e[13],We=e[14],_t=e[15],Ze=n[0],lt=n[1],Ct=n[2],mt=n[3];return t[0]=Ze*s+lt*v+Ct*N+mt*se,t[1]=Ze*u+lt*E+Ct*H+mt*De,t[2]=Ze*f+lt*C+Ct*K+mt*We,t[3]=Ze*m+lt*R+Ct*J+mt*_t,t[4]=(Ze=n[4])*s+(lt=n[5])*v+(Ct=n[6])*N+(mt=n[7])*se,t[5]=Ze*u+lt*E+Ct*H+mt*De,t[6]=Ze*f+lt*C+Ct*K+mt*We,t[7]=Ze*m+lt*R+Ct*J+mt*_t,t[8]=(Ze=n[8])*s+(lt=n[9])*v+(Ct=n[10])*N+(mt=n[11])*se,t[9]=Ze*u+lt*E+Ct*H+mt*De,t[10]=Ze*f+lt*C+Ct*K+mt*We,t[11]=Ze*m+lt*R+Ct*J+mt*_t,t[12]=(Ze=n[12])*s+(lt=n[13])*v+(Ct=n[14])*N+(mt=n[15])*se,t[13]=Ze*u+lt*E+Ct*H+mt*De,t[14]=Ze*f+lt*C+Ct*K+mt*We,t[15]=Ze*m+lt*R+Ct*J+mt*_t,t}function vd(t,e,n){var s,u,f,m,v,E,C,R,N,H,K,J,se=n[0],De=n[1],We=n[2];return e===t?(t[12]=e[0]*se+e[4]*De+e[8]*We+e[12],t[13]=e[1]*se+e[5]*De+e[9]*We+e[13],t[14]=e[2]*se+e[6]*De+e[10]*We+e[14],t[15]=e[3]*se+e[7]*De+e[11]*We+e[15]):(u=e[1],f=e[2],m=e[3],v=e[4],E=e[5],C=e[6],R=e[7],N=e[8],H=e[9],K=e[10],J=e[11],t[0]=s=e[0],t[1]=u,t[2]=f,t[3]=m,t[4]=v,t[5]=E,t[6]=C,t[7]=R,t[8]=N,t[9]=H,t[10]=K,t[11]=J,t[12]=s*se+v*De+N*We+e[12],t[13]=u*se+E*De+H*We+e[13],t[14]=f*se+C*De+K*We+e[14],t[15]=m*se+R*De+J*We+e[15]),t}function gu(t,e,n){var s=n[0],u=n[1],f=n[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*u,t[5]=e[5]*u,t[6]=e[6]*u,t[7]=e[7]*u,t[8]=e[8]*f,t[9]=e[9]*f,t[10]=e[10]*f,t[11]=e[11]*f,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function xd(t,e,n){var s=Math.sin(n),u=Math.cos(n),f=e[4],m=e[5],v=e[6],E=e[7],C=e[8],R=e[9],N=e[10],H=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=f*u+C*s,t[5]=m*u+R*s,t[6]=v*u+N*s,t[7]=E*u+H*s,t[8]=C*u-f*s,t[9]=R*u-m*s,t[10]=N*u-v*s,t[11]=H*u-E*s,t}function Of(t,e,n){var s=Math.sin(n),u=Math.cos(n),f=e[0],m=e[1],v=e[2],E=e[3],C=e[8],R=e[9],N=e[10],H=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=f*u-C*s,t[1]=m*u-R*s,t[2]=v*u-N*s,t[3]=E*u-H*s,t[8]=f*s+C*u,t[9]=m*s+R*u,t[10]=v*s+N*u,t[11]=E*s+H*u,t}function r_(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _h(t,e,n){var s,u,f,m=n[0],v=n[1],E=n[2],C=Math.hypot(m,v,E);return C<yd?null:(m*=C=1/C,v*=C,E*=C,s=Math.sin(e),u=Math.cos(e),t[0]=m*m*(f=1-u)+u,t[1]=v*m*f+E*s,t[2]=E*m*f-v*s,t[3]=0,t[4]=m*v*f-E*s,t[5]=v*v*f+u,t[6]=E*v*f+m*s,t[7]=0,t[8]=m*E*f+v*s,t[9]=v*E*f-m*s,t[10]=E*E*f+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var qy=Ac;function im(){var t=new Ka(3);return Ka!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o_(t){var e=new Ka(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function yh(t){return Math.hypot(t[0],t[1],t[2])}function bd(t,e,n){var s=new Ka(3);return s[0]=t,s[1]=e,s[2]=n,s}function Ic(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function vh(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function xh(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Uu(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Vu(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Xa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _u(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t}function pa(t,e){var n=e[0],s=e[1],u=e[2],f=n*n+s*s+u*u;return f>0&&(f=1/Math.sqrt(f)),t[0]=e[0]*f,t[1]=e[1]*f,t[2]=e[2]*f,t}function Qa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yu(t,e,n){var s=e[0],u=e[1],f=e[2],m=n[0],v=n[1],E=n[2];return t[0]=u*E-f*v,t[1]=f*m-s*E,t[2]=s*v-u*m,t}function Vo(t,e,n){var s=e[0],u=e[1],f=e[2],m=n[3]*s+n[7]*u+n[11]*f+n[15];return t[0]=(n[0]*s+n[4]*u+n[8]*f+n[12])/(m=m||1),t[1]=(n[1]*s+n[5]*u+n[9]*f+n[13])/m,t[2]=(n[2]*s+n[6]*u+n[10]*f+n[14])/m,t}function rm(t,e,n){var s=n[0],u=n[1],f=n[2],m=e[0],v=e[1],E=e[2],C=u*E-f*v,R=f*m-s*E,N=s*v-u*m,H=u*N-f*R,K=f*C-s*N,J=s*R-u*C,se=2*n[3];return R*=se,N*=se,K*=2,J*=2,t[0]=m+(C*=se)+(H*=2),t[1]=v+R+K,t[2]=E+N+J,t}var wd,Al=vh,s_=xh,a_=yh;function om(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function sm(t,e){var n=e[0],s=e[1],u=e[2],f=e[3],m=n*n+s*s+u*u+f*f;return m>0&&(m=1/Math.sqrt(m)),t[0]=n*m,t[1]=s*m,t[2]=u*m,t[3]=f*m,t}function Pc(t,e,n){var s=e[0],u=e[1],f=e[2],m=e[3];return t[0]=n[0]*s+n[4]*u+n[8]*f+n[12]*m,t[1]=n[1]*s+n[5]*u+n[9]*f+n[13]*m,t[2]=n[2]*s+n[6]*u+n[10]*f+n[14]*m,t[3]=n[3]*s+n[7]*u+n[11]*f+n[15]*m,t}function am(){var t=new Ka(4);return Ka!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function lm(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function cm(t,e,n){n*=.5;var s=e[0],u=e[1],f=e[2],m=e[3],v=Math.sin(n),E=Math.cos(n);return t[0]=s*E+m*v,t[1]=u*E+f*v,t[2]=f*E-u*v,t[3]=m*E-s*v,t}function Rf(t,e,n){n*=.5;var s=e[0],u=e[1],f=e[2],m=e[3],v=Math.sin(n),E=Math.cos(n);return t[0]=s*E-f*v,t[1]=u*E+m*v,t[2]=f*E+s*v,t[3]=m*E-u*v,t}im(),wd=new Ka(4),Ka!=Float32Array&&(wd[0]=0,wd[1]=0,wd[2]=0,wd[3]=0);var l_=sm;im(),bd(1,0,0),bd(0,1,0),am(),am(),tm();class kf{constructor(e,n){this.pos=e,this.dir=n}intersectsPlane(e,n,s){const u=Qa(n,this.dir);if(Math.abs(u)<1e-6)return!1;const f=((e[0]-this.pos[0])*n[0]+(e[1]-this.pos[1])*n[1]+(e[2]-this.pos[2])*n[2])/u;return s[0]=this.pos[0]+this.dir[0]*f,s[1]=this.pos[1]+this.dir[1]*f,s[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(e,n,s){if(se=(K=this.pos)[0],De=K[1],We=K[2],_t=(J=e)[0],Ze=J[1],lt=J[2],Math.abs(se-_t)<=yd*Math.max(1,Math.abs(se),Math.abs(_t))&&Math.abs(De-Ze)<=yd*Math.max(1,Math.abs(De),Math.abs(Ze))&&Math.abs(We-lt)<=yd*Math.max(1,Math.abs(We),Math.abs(lt))||0===n)return s[0]=s[1]=s[2]=0,!1;var K,J,se,De,We,_t,Ze,lt;const[u,f,m]=this.dir,v=this.pos[0]-e[0],E=this.pos[1]-e[1],C=this.pos[2]-e[2],R=u*u+f*f+m*m,N=2*(v*u+E*f+C*m),H=N*N-4*R*(v*v+E*E+C*C-n*n);if(H<0){const K=Math.max(-N/2,0),J=v+u*K,se=E+f*K,De=C+m*K,We=Math.hypot(J,se,De);return s[0]=J*n/We,s[1]=se*n/We,s[2]=De*n/We,!1}{const K=(-N-Math.sqrt(H))/(2*R);if(K<0){const J=Math.hypot(v,E,C);return s[0]=v*n/J,s[1]=E*n/J,s[2]=C*n/J,!1}return s[0]=v+u*K,s[1]=E+f*K,s[2]=C+m*K,!0}}}class ea{constructor(e,n,s,u,f){this.TL=e,this.TR=n,this.BR=s,this.BL=u,this.horizon=f}static fromInvProjectionMatrix(e,n,s){const u=[-1,1,1],f=[1,1,1],m=[1,-1,1],v=[-1,-1,1],E=Vo(u,u,e),C=Vo(f,f,e),R=Vo(m,m,e),N=Vo(v,v,e);return new ea(E,C,R,N,n/s)}}class Ed{constructor(e,n){this.points=e,this.planes=n}static fromInvProjectionMatrix(e,n,s,u){const f=Math.pow(2,s),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const C=Pc([],E,e),R=1/C[3]/n*f;return(N=C)[0]=(H=C)[0]*(K=[R,R,u?1/C[3]:R,R])[0],N[1]=H[1]*K[1],N[2]=H[2]*K[2],N[3]=H[3]*K[3],N;var N,H,K}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const C=pa([],yu([],Al([],m[E[0]],m[E[1]]),Al([],m[E[2]],m[E[1]]))),R=-Qa(C,m[E[1]]);return C.concat(R)});return new Ed(m,v)}}class ta{static fromPoints(e){const n=[1/0,1/0,1/0],s=[-1/0,-1/0,-1/0];for(const u of e)Uu(n,n,u),Vu(s,s,u);return new ta(n,s)}static applyTransform(e,n){const s=e.getCorners();for(let u=0;u<s.length;++u)Vo(s[u],s[u],n);return ta.fromPoints(s)}constructor(e,n){this.min=e,this.max=n,this.center=Xa([],Ic([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],s=o_(this.min),u=o_(this.max);for(let f=0;f<n.length;f++)s[f]=n[f]?this.min[f]:this.center[f],u[f]=n[f]?this.center[f]:this.max[f];return u[2]=this.max[2],new ta(s,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,n=this.max;return[[e[0],e[1],e[2]],[n[0],e[1],e[2]],[n[0],n[1],e[2]],[e[0],n[1],e[2]],[e[0],e[1],n[2]],[n[0],e[1],n[2]],[n[0],n[1],n[2]],[e[0],n[1],n[2]]]}intersects(e){const n=this.getCorners();let s=!0;for(let u=0;u<e.planes.length;u++){const f=e.planes[u];let m=0;for(let v=0;v<n.length;v++)m+=Qa(f,n[v])+f[3]>=0;if(0===m)return 0;m!==n.length&&(s=!1)}if(s)return 2;for(let u=0;u<3;u++){let f=Number.MAX_VALUE,m=-Number.MAX_VALUE;for(let v=0;v<e.points.length;v++){const E=e.points[v][u]-this.min[u];f=Math.min(f,E),m=Math.max(m,E)}if(m<0||f>this.max[u]-this.min[u])return 0}return 1}}function bh(t,e,n,s,u,f,m,v,E){if(f&&t.queryGeometry.isAboveHorizon)return!1;f&&(E*=t.pixelToTileUnitsFactor);const C=t.tileID.canonical,R=n.projection.upVectorScale(C,n.center.lat,n.worldSize).metersToTile;for(const N of e)for(const H of N){const K=H.add(v),J=u&&n.elevation?n.elevation.exaggeration()*u.getElevationAt(K.x,K.y,!0):0,se=n.projection.projectTilePoint(K.x,K.y,C);if(J>0){const Ze=n.projection.upVector(C,K.x,K.y);se.x+=Ze[0]*R*J,se.y+=Ze[1]*R*J,se.z+=Ze[2]*R*J}const De=f?K:ma(se.x,se.y,se.z,s),We=f?t.tilespaceRays.map(Ze=>c_(Ze,J)):t.queryGeometry.screenGeometry,_t=Pc([],[se.x,se.y,se.z,1],s);if(!m&&f?E*=_t[3]/n.cameraToCenterDistance:m&&!f&&(E*=n.cameraToCenterDistance/_t[3]),f){const Ze=Gs((H.y/ki+C.y)/(1<<C.z));E/=n.projection.pixelsPerMeter(Ze,1)/Ya(1,Ze)}if(Jg(We,De,E))return!0}return!1}function ma(t,e,n,s){const u=Pc([],[t,e,n,1],s);return new Qe(u[0]/u[3],u[1]/u[3])}const ju=bd(0,0,0),um=bd(0,0,1);function c_(t,e){const n=im();return ju[2]=e,t.intersectsPlane(ju,um,n),new Qe(n[0],n[1])}class dm extends mh{}function Lf(t,{width:e,height:n},s,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*n*s)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*n*s);return t.width=e,t.height=n,t.data=u,t}function hm(t,e,n){const{width:s,height:u}=e;s===t.width&&u===t.height||(wh(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,s),height:Math.min(t.height,u)},n),t.width=s,t.height=u,t.data=e.data)}function wh(t,e,n,s,u,f){if(0===u.width||0===u.height)return e;if(u.width>t.width||u.height>t.height||n.x>t.width-u.width||n.y>t.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||s.x>e.width-u.width||s.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const m=t.data,v=e.data;for(let E=0;E<u.height;E++){const C=((n.y+E)*t.width+n.x)*f,R=((s.y+E)*e.width+s.x)*f;for(let N=0;N<u.width*f;N++)v[R+N]=m[C+N]}return e}fi(dm,"HeatmapBucket",{omit:["layers"]});class Oc{constructor(e,n){Lf(this,e,1,n)}resize(e){hm(this,new Oc(e),1)}clone(){return new Oc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,s,u,f){wh(e,n,s,u,f,1)}}class Ra{constructor(e,n){Lf(this,e,4,n)}resize(e){hm(this,new Ra(e),4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,s,u,f){wh(e,n,s,u,f,4)}}fi(Oc,"AlphaImage"),fi(Ra,"RGBAImage");var u_={paint:new Oi({"heatmap-radius":new hn(yn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hn(yn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(yn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ei(yn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(yn.paint_heatmap["heatmap-opacity"])})};function Ff(t){const e={},n=t.resolution||256,s=t.clips?t.clips.length:1,u=t.image||new Ra({width:n,height:s}),f=(m,v,E)=>{e[t.evaluationKey]=E;const C=t.expression.evaluate(e);u.data[m+v+0]=Math.floor(255*C.r/C.a),u.data[m+v+1]=Math.floor(255*C.g/C.a),u.data[m+v+2]=Math.floor(255*C.b/C.a),u.data[m+v+3]=Math.floor(255*C.a)};if(t.clips)for(let m=0,v=0;m<s;++m,v+=4*n)for(let E=0,C=0;E<n;E++,C+=4){const R=E/(n-1),{start:N,end:H}=t.clips[m];f(v,C,N*(1-R)+H*R)}else for(let m=0,v=0;m<n;m++,v+=4)f(0,v,m/(n-1));return u}var d_={paint:new Oi({"hillshade-illumination-direction":new qt(yn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(yn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(yn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(yn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(yn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(yn.paint_hillshade["hillshade-accent-color"])})};const h_=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:f_}=h_;var cc={exports:{}};function Il(t,e,n){n=n||2;var s,u,f,m,v,E,C,R=e&&e.length,N=R?e[0]*n:t.length,H=fm(t,0,N,n,!0),K=[];if(!H||H.next===H.prev)return K;if(R&&(H=function(se,De,We,_t){var Ze,lt,Ct,mt=[];for(Ze=0,lt=De.length;Ze<lt;Ze++)(Ct=fm(se,De[Ze]*_t,Ze<lt-1?De[Ze+1]*_t:se.length,_t,!1))===Ct.next&&(Ct.steiner=!0),mt.push(m_(Ct));for(mt.sort(Bf),Ze=0;Ze<mt.length;Ze++)We=Nf(mt[Ze],We);return We}(t,e,H,n)),t.length>80*n){s=f=t[0],u=m=t[1];for(var J=n;J<N;J+=n)(v=t[J])<s&&(s=v),(E=t[J+1])<u&&(u=E),v>f&&(f=v),E>m&&(m=E);C=0!==(C=Math.max(f-s,m-u))?32767/C:0}return Eh(H,K,n,s,u,C,0),K}function fm(t,e,n,s,u){var f,m;if(u===Vf(t,e,n,s)>0)for(f=e;f<n;f+=s)m=Uf(f,t[f],t[f+1],m);else for(f=n-s;f>=e;f-=s)m=Uf(f,t[f],t[f+1],m);return m&&Hu(m,m.next)&&(Md(m),m=m.next),m}function vu(t,e){if(!t)return t;e||(e=t);var n,s=t;do{if(n=!1,s.steiner||!Hu(s,s.next)&&0!==Wo(s.prev,s,s.next))s=s.next;else{if(Md(s),(s=e=s.prev)===s.next)break;n=!0}}while(n||s!==e);return e}function Eh(t,e,n,s,u,f,m){if(t){!m&&f&&function(R,N,H,K){var J=R;do{0===J.z&&(J.z=Ch(J.x,J.y,N,H,K)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next}while(J!==R);J.prevZ.nextZ=null,J.prevZ=null,function(se){var De,We,_t,Ze,lt,Ct,mt,sn,en=1;do{for(We=se,se=null,lt=null,Ct=0;We;){for(Ct++,_t=We,mt=0,De=0;De<en&&(mt++,_t=_t.nextZ);De++);for(sn=en;mt>0||sn>0&&_t;)0!==mt&&(0===sn||!_t||We.z<=_t.z)?(Ze=We,We=We.nextZ,mt--):(Ze=_t,_t=_t.nextZ,sn--),lt?lt.nextZ=Ze:se=Ze,Ze.prevZ=lt,lt=Ze;We=_t}lt.nextZ=null,en*=2}while(Ct>1)}(J)}(t,s,u,f);for(var v,E,C=t;t.prev!==t.next;)if(v=t.prev,E=t.next,f?pm(t,s,u,f):Yy(t))e.push(v.i/n|0),e.push(t.i/n|0),e.push(E.i/n|0),Md(t),t=E.next,C=E.next;else if((t=E)===C){m?1===m?Eh(t=Ky(vu(t),e,n),e,n,s,u,f,2):2===m&&uc(t,e,n,s,u,f):Eh(vu(t),e,n,s,u,f,1);break}}}function Yy(t){var e=t.prev,n=t,s=t.next;if(Wo(e,n,s)>=0)return!1;for(var u=e.x,f=n.x,m=s.x,v=e.y,E=n.y,C=s.y,R=u<f?u<m?u:m:f<m?f:m,N=v<E?v<C?v:C:E<C?E:C,H=u>f?u>m?u:m:f>m?f:m,K=v>E?v>C?v:C:E>C?E:C,J=s.next;J!==e;){if(J.x>=R&&J.x<=H&&J.y>=N&&J.y<=K&&dc(u,v,f,E,m,C,J.x,J.y)&&Wo(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function pm(t,e,n,s){var u=t.prev,f=t,m=t.next;if(Wo(u,f,m)>=0)return!1;for(var v=u.x,E=f.x,C=m.x,R=u.y,N=f.y,H=m.y,K=v<E?v<C?v:C:E<C?E:C,J=R<N?R<H?R:H:N<H?N:H,se=v>E?v>C?v:C:E>C?E:C,De=R>N?R>H?R:H:N>H?N:H,We=Ch(K,J,e,n,s),_t=Ch(se,De,e,n,s),Ze=t.prevZ,lt=t.nextZ;Ze&&Ze.z>=We&&lt&&lt.z<=_t;){if(Ze.x>=K&&Ze.x<=se&&Ze.y>=J&&Ze.y<=De&&Ze!==u&&Ze!==m&&dc(v,R,E,N,C,H,Ze.x,Ze.y)&&Wo(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,lt.x>=K&&lt.x<=se&&lt.y>=J&&lt.y<=De&&lt!==u&&lt!==m&&dc(v,R,E,N,C,H,lt.x,lt.y)&&Wo(lt.prev,lt,lt.next)>=0))return!1;lt=lt.nextZ}for(;Ze&&Ze.z>=We;){if(Ze.x>=K&&Ze.x<=se&&Ze.y>=J&&Ze.y<=De&&Ze!==u&&Ze!==m&&dc(v,R,E,N,C,H,Ze.x,Ze.y)&&Wo(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;lt&&lt.z<=_t;){if(lt.x>=K&&lt.x<=se&&lt.y>=J&&lt.y<=De&&lt!==u&&lt!==m&&dc(v,R,E,N,C,H,lt.x,lt.y)&&Wo(lt.prev,lt,lt.next)>=0)return!1;lt=lt.nextZ}return!0}function Ky(t,e,n){var s=t;do{var u=s.prev,f=s.next.next;!Hu(u,f)&&Mh(u,s,s.next,f)&&hc(u,f)&&hc(f,u)&&(e.push(u.i/n|0),e.push(s.i/n|0),e.push(f.i/n|0),Md(s),Md(s.next),s=t=f),s=s.next}while(s!==t);return vu(s)}function uc(t,e,n,s,u,f){var m=t;do{for(var v=m.next.next;v!==m.prev;){if(m.i!==v.i&&g_(m,v)){var E=Dh(m,v);return m=vu(m,m.next),E=vu(E,E.next),Eh(m,e,n,s,u,f,0),void Eh(E,e,n,s,u,f,0)}v=v.next}m=m.next}while(m!==t)}function Bf(t,e){return t.x-e.x}function Nf(t,e){var n=function(u,f){var m,v=f,E=u.x,C=u.y,R=-1/0;do{if(C<=v.y&&C>=v.next.y&&v.next.y!==v.y){var N=v.x+(C-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(N<=E&&N>R&&(R=N,m=v.x<v.next.x?v:v.next,N===E))return m}v=v.next}while(v!==f);if(!m)return null;var H,K=m,J=m.x,se=m.y,De=1/0;v=m;do{E>=v.x&&v.x>=J&&E!==v.x&&dc(C<se?E:R,C,J,se,C<se?R:E,C,v.x,v.y)&&(H=Math.abs(C-v.y)/(E-v.x),hc(v,u)&&(H<De||H===De&&(v.x>m.x||v.x===m.x&&p_(m,v)))&&(m=v,De=H)),v=v.next}while(v!==K);return m}(t,e);if(!n)return e;var s=Dh(n,t);return vu(s,s.next),vu(n,n.next)}function p_(t,e){return Wo(t.prev,t,e.prev)<0&&Wo(e.next,t,t.next)<0}function Ch(t,e,n,s,u){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*u|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*u|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m_(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function dc(t,e,n,s,u,f,m,v){return(u-m)*(e-v)>=(t-m)*(f-v)&&(t-m)*(s-v)>=(n-m)*(e-v)&&(n-m)*(f-v)>=(u-m)*(s-v)}function g_(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(n,s){var u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==s.i&&u.next.i!==s.i&&Mh(u,u.next,n,s))return!0;u=u.next}while(u!==n);return!1}(t,e)&&(hc(t,e)&&hc(e,t)&&function(n,s){var u=n,f=!1,m=(n.x+s.x)/2,v=(n.y+s.y)/2;do{u.y>v!=u.next.y>v&&u.next.y!==u.y&&m<(u.next.x-u.x)*(v-u.y)/(u.next.y-u.y)+u.x&&(f=!f),u=u.next}while(u!==n);return f}(t,e)&&(Wo(t.prev,t,e.prev)||Wo(t,e.prev,e))||Hu(t,e)&&Wo(t.prev,t,t.next)>0&&Wo(e.prev,e,e.next)>0)}function Wo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Hu(t,e){return t.x===e.x&&t.y===e.y}function Mh(t,e,n,s){var u=zf(Wo(t,e,n)),f=zf(Wo(t,e,s)),m=zf(Wo(n,s,t)),v=zf(Wo(n,s,e));return u!==f&&m!==v||!(0!==u||!Cd(t,n,e))||!(0!==f||!Cd(t,s,e))||!(0!==m||!Cd(n,t,s))||!(0!==v||!Cd(n,e,s))}function Cd(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function zf(t){return t>0?1:t<0?-1:0}function hc(t,e){return Wo(t.prev,t,t.next)<0?Wo(t,e,t.next)>=0&&Wo(t,t.prev,e)>=0:Wo(t,e,t.prev)<0||Wo(t,t.next,e)<0}function Dh(t,e){var n=new Dd(t.i,t.x,t.y),s=new Dd(e.i,e.x,e.y),u=t.next,f=e.prev;return t.next=e,e.prev=t,n.next=u,u.prev=n,s.next=n,n.prev=s,f.next=s,s.prev=f,s}function Uf(t,e,n,s){var u=new Dd(t,e,n);return s?(u.next=s.next,u.prev=s,s.next.prev=u,s.next=u):(u.prev=u,u.next=u),u}function Md(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dd(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vf(t,e,n,s){for(var u=0,f=e,m=n-s;f<n;f+=s)u+=(t[m]-t[f])*(t[f+1]+t[m+1]),m=f;return u}function __(t,e,n,s,u){mm(t,e,n||0,s||t.length-1,u||y_)}function mm(t,e,n,s,u){for(;s>n;){if(s-n>600){var f=s-n+1,m=e-n+1,v=Math.log(f),E=.5*Math.exp(2*v/3),C=.5*Math.sqrt(v*E*(f-E)/f)*(m-f/2<0?-1:1);mm(t,e,Math.max(n,Math.floor(e-m*E/f+C)),Math.min(s,Math.floor(e+(f-m)*E/f+C)),u)}var R=t[e],N=n,H=s;for(Td(t,n,e),u(t[s],R)>0&&Td(t,n,s);N<H;){for(Td(t,N,H),N++,H--;u(t[N],R)<0;)N++;for(;u(t[H],R)>0;)H--}0===u(t[n],R)?Td(t,n,H):Td(t,++H,s),H<=e&&(n=H+1),e<=H&&(s=H-1)}}function Td(t,e,n){var s=t[e];t[e]=t[n],t[n]=s}function y_(t,e){return t<e?-1:t>e?1:0}function jf(t,e){const n=t.length;if(n<=1)return[t];const s=[];let u,f;for(let m=0;m<n;m++){const v=ot(t[m]);0!==v&&(t[m].area=Math.abs(v),void 0===f&&(f=v<0),f===v<0?(u&&s.push(u),u=[t[m]]):u.push(t[m]))}if(u&&s.push(u),e>1)for(let m=0;m<s.length;m++)s[m].length<=e||(__(s[m],e,1,s[m].length-1,gm),s[m]=s[m].slice(0,e));return s}function gm(t,e){return e.area-t.area}function Sd(t,e,n){const s=n.patternDependencies;let u=!1;for(const f of e){const m=f.paint.get(`${t}-pattern`);m.isConstant()||(u=!0);const v=m.constantOr(null);v&&(u=!0,s[v]=!0)}return u}function Th(t,e,n,s,u){const f=u.patternDependencies;for(const m of e){const v=m.paint.get(`${t}-pattern`).value;if("constant"!==v.kind){let E=v.evaluate({zoom:s},n,{},u.availableImages);E=E&&E.name?E.name:E,f[E]=!0,n.patterns[m.id]=E}}return n}cc.exports=Il,cc.exports.default=Il,Il.deviation=function(t,e,n,s){var u=e&&e.length,f=Math.abs(Vf(t,0,u?e[0]*n:t.length,n));if(u)for(var m=0,v=e.length;m<v;m++)f-=Math.abs(Vf(t,e[m]*n,m<v-1?e[m+1]*n:t.length,n));var E=0;for(m=0;m<s.length;m+=3){var C=s[m]*n,R=s[m+1]*n,N=s[m+2]*n;E+=Math.abs((t[C]-t[N])*(t[R+1]-t[C+1])-(t[C]-t[R])*(t[N+1]-t[C+1]))}return 0===f&&0===E?0:Math.abs((E-f)/f)},Il.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},s=0,u=0;u<t.length;u++){for(var f=0;f<t[u].length;f++)for(var m=0;m<e;m++)n.vertices.push(t[u][f][m]);u>0&&n.holes.push(s+=t[u-1].length)}return n};class Gu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Or,this.indexArray=new Ss,this.indexArray2=new Cl,this.programConfigurations=new hu(e.layers,e.zoom),this.segments=new ds,this.segments2=new ds,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.projection=e.projection}populate(e,n,s,u){this.hasPattern=Sd("fill",this.layers,n);const f=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:v,id:E,index:C,sourceLayerIndex:R}of e){const N=this.layers[0]._featureFilter.needGeometry,H=Sc(v,N);if(!this.layers[0]._featureFilter.filter(new $t(this.zoom),H,s))continue;const K=f?f.evaluate(H,{},s,n.availableImages):void 0,J={id:E,properties:v.properties,type:v.type,sourceLayerIndex:R,index:C,geometry:N?H.geometry:ac(v,s,u),patterns:{},sortKey:K};m.push(J)}f&&m.sort((v,E)=>v.sortKey-E.sortKey);for(const v of m){const{geometry:E,index:C,sourceLayerIndex:R}=v;if(this.hasPattern){const N=Th("fill",this.layers,v,this.zoom,n);this.patternFeatures.push(N)}else this.addFeature(v,E,C,s,{},n.availableImages);n.featureIndex.insert(e[C].feature,E,C,R,this.index)}}update(e,n,s,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,s,u)}addFeatures(e,n,s,u,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,n,s,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,f_),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,s,u,f,m=[]){for(const v of jf(n,500)){let E=0;for(const J of v)E+=J.length;const C=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),R=C.vertexLength,N=[],H=[];for(const J of v){if(0===J.length)continue;J!==v[0]&&H.push(N.length/2);const se=this.segments2.prepareSegment(J.length,this.layoutVertexArray,this.indexArray2),De=se.vertexLength;this.layoutVertexArray.emplaceBack(J[0].x,J[0].y),this.indexArray2.emplaceBack(De+J.length-1,De),N.push(J[0].x),N.push(J[0].y);for(let We=1;We<J.length;We++)this.layoutVertexArray.emplaceBack(J[We].x,J[We].y),this.indexArray2.emplaceBack(De+We-1,De+We),N.push(J[We].x),N.push(J[We].y);se.vertexLength+=J.length,se.primitiveLength+=J.length}const K=cc.exports(N,H);for(let J=0;J<K.length;J+=3)this.indexArray.emplaceBack(R+K[J],R+K[J+1],R+K[J+2]);C.vertexLength+=E,C.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,f,m,u)}}fi(Gu,"FillBucket",{omit:["layers","patternFeatures"]});const v_=new Oi({"fill-sort-key":new hn(yn.layout_fill["fill-sort-key"])});var x_={paint:new Oi({"fill-antialias":new qt(yn.paint_fill["fill-antialias"]),"fill-opacity":new hn(yn.paint_fill["fill-opacity"]),"fill-color":new hn(yn.paint_fill["fill-color"]),"fill-outline-color":new hn(yn.paint_fill["fill-outline-color"]),"fill-translate":new qt(yn.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(yn.paint_fill["fill-translate-anchor"]),"fill-pattern":new hn(yn.paint_fill["fill-pattern"])}),layout:v_};const _m=gi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),ym=gi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),xu=gi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:vm}=_m;var Ad={},b_=Qe,w_=Rc;function Rc(t,e,n,s,u){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=s,this._values=u,t.readFields(E_,this,e)}function E_(t,e,n){1==t?e.id=n.readVarint():2==t?function(s,u){for(var f=s.readVarint()+s.pos;s.pos<f;){var m=u._keys[s.readVarint()],v=u._values[s.readVarint()];u.properties[m]=v}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function xm(t){for(var e,n,s=0,u=0,f=t.length,m=f-1;u<f;m=u++)s+=((n=t[m]).x-(e=t[u]).x)*(e.y+n.y);return s}Rc.types=["Unknown","Point","LineString","Polygon"],Rc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,s=1,u=0,f=0,m=0,v=[];t.pos<n;){if(u<=0){var E=t.readVarint();s=7&E,u=E>>3}if(u--,1===s||2===s)f+=t.readSVarint(),m+=t.readSVarint(),1===s&&(e&&v.push(e),e=[]),e.push(new b_(f,m));else{if(7!==s)throw new Error("unknown command "+s);e&&e.push(e[0].clone())}}return e&&v.push(e),v},Rc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,s=0,u=0,f=0,m=1/0,v=-1/0,E=1/0,C=-1/0;t.pos<e;){if(s<=0){var R=t.readVarint();n=7&R,s=R>>3}if(s--,1===n||2===n)(u+=t.readSVarint())<m&&(m=u),u>v&&(v=u),(f+=t.readSVarint())<E&&(E=f),f>C&&(C=f);else if(7!==n)throw new Error("unknown command "+n)}return[m,E,v,C]},Rc.prototype.toGeoJSON=function(t,e,n){var s,u,f=this.extent*Math.pow(2,n),m=this.extent*t,v=this.extent*e,E=this.loadGeometry(),C=Rc.types[this.type];function R(K){for(var J=0;J<K.length;J++){var se=K[J];K[J]=[360*(se.x+m)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+v)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(s=0;s<E.length;s++)N[s]=E[s][0];R(E=N);break;case 2:for(s=0;s<E.length;s++)R(E[s]);break;case 3:for(E=function(K){var J=K.length;if(J<=1)return[K];for(var se,De,We=[],_t=0;_t<J;_t++){var Ze=xm(K[_t]);0!==Ze&&(void 0===De&&(De=Ze<0),De===Ze<0?(se&&We.push(se),se=[K[_t]]):se.push(K[_t]))}return se&&We.push(se),We}(E),s=0;s<E.length;s++)for(u=0;u<E[s].length;u++)R(E[s][u])}1===E.length?E=E[0]:C="Multi"+C;var H={type:"Feature",geometry:{type:C,coordinates:E},properties:this.properties};return"id"in this&&(H.id=this.id),H};var bm=w_,Hf=Sh;function Sh(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(wm,this,e),this.length=this._features.length}function wm(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(s){for(var u=null,f=s.readVarint()+s.pos;s.pos<f;){var m=s.readVarint()>>3;u=1===m?s.readString():2===m?s.readFloat():3===m?s.readDouble():4===m?s.readVarint64():5===m?s.readVarint():6===m?s.readSVarint():7===m?s.readBoolean():null}return u}(n))}Sh.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new bm(this._pbf,e,this.extent,this._keys,this._values)};var Ah=Hf;function Ih(t,e,n){if(3===t){var s=new Ah(n,n.readVarint()+n.pos);s.length&&(e[s.name]=s)}}var Ph=Ad.VectorTile=function(t,e){this.layers=t.readFields(Ih,{},e)},$u=Ad.VectorTileFeature=w_;function Id(t,e,n,s){const u=[],f=0===s?(m,v,E,C,R,N)=>{m.push(new Qe(N,E+(N-v)/(C-v)*(R-E)))}:(m,v,E,C,R,N)=>{m.push(new Qe(v+(N-E)/(R-E)*(C-v),N))};for(const m of t){const v=[];for(const E of m){if(E.length<=2)continue;const C=[];for(let H=0;H<E.length-1;H++){const K=E[H].x,J=E[H].y,se=E[H+1].x,De=E[H+1].y,We=0===s?K:J,_t=0===s?se:De;We<e?_t>e&&f(C,K,J,se,De,e):We>n?_t<n&&f(C,K,J,se,De,n):C.push(E[H]),_t<e&&We>=e&&f(C,K,J,se,De,e),_t>n&&We<=n&&f(C,K,J,se,De,n)}let R=E[E.length-1];const N=0===s?R.x:R.y;N>=e&&N<=n&&C.push(R),C.length&&(R=C[C.length-1],C[0].x===R.x&&C[0].y===R.y||C.push(C[0]),v.push(C))}v.length&&u.push(v)}return u}Ad.VectorTileLayer=Hf;const Gf=$u.types,Pd=Math.pow(2,13);function Od(t,e,n,s,u,f,m,v){t.emplaceBack((e<<1)+m,(n<<1)+f,(Math.floor(s*Pd)<<1)+u,Math.round(v))}function Zu(t,e,n){t.emplaceBack(e.x,e.y,e.z,16384*n[0],16384*n[1],16384*n[2])}class Em{constructor(){this.acc=new Qe(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Qe(e.x,e.y),this.max=new Qe(e.x,e.y))}append(e,n){this.currentPolyCount.edges++,this.acc._add(e);const s=this.min,u=this.max;e.x<s.x?s.x=e.x:e.x>u.x&&(u.x=e.x),e.y<s.y?s.y=e.y:e.y>u.y&&(u.y=e.y),((0===e.x||e.x===ki)&&e.x===n.x)!=((0===e.y||e.y===ki)&&e.y===n.y)&&this.processBorderOverlap(e,n),n.x<0!=e.x<0&&this.addBorderIntersection(0,En(n.y,e.y,(0-n.x)/(e.x-n.x))),n.x>ki!=e.x>ki&&this.addBorderIntersection(1,En(n.y,e.y,(ki-n.x)/(e.x-n.x))),n.y<0!=e.y<0&&this.addBorderIntersection(2,En(n.x,e.x,(0-n.y)/(e.y-n.y))),n.y>ki!=e.y>ki&&this.addBorderIntersection(3,En(n.x,e.x,(ki-n.y)/(e.y-n.y)))}addBorderIntersection(e,n){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const s=this.borders[e];n<s[0]&&(s[0]=n),n>s[1]&&(s[1]=n)}processBorderOverlap(e,n){if(e.x===n.x){if(e.y===n.y)return;const s=0===e.x?0:1;this.addBorderIntersection(s,n.y),this.addBorderIntersection(s,e.y)}else{const s=0===e.y?2:3;this.addBorderIntersection(s,n.x),this.addBorderIntersection(s,e.x)}}centroid(){const e=this.polyCount.reduce((n,s)=>n+s.edges,0);return 0!==e?this.acc.div(e)._round():new Qe(0,0)}span(){return new Qe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,n)=>e+ +(n[0]!==Number.MAX_VALUE),0)}}class Rd{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Zr,this.centroidVertexArray=new qp,this.indexArray=new Ss,this.programConfigurations=new hu(e.layers,e.zoom),this.segments=new ds,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.enableTerrain=e.enableTerrain}populate(e,n,s,u){this.features=[],this.hasPattern=Sd("fill-extrusion",this.layers,n),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(f){const m=Math.exp(Math.PI*(1-f.y/(1<<f.z)*2));return 80150034*m/(m*m+1)/ki/(1<<f.z)}(s),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:f,id:m,index:v,sourceLayerIndex:E}of e){const C=this.layers[0]._featureFilter.needGeometry,R=Sc(f,C);if(!this.layers[0]._featureFilter.filter(new $t(this.zoom),R,s))continue;const N={id:m,sourceLayerIndex:E,index:v,geometry:C?R.geometry:ac(f,s,u),properties:f.properties,type:f.type,patterns:{}},H=this.layoutVertexArray.length;this.hasPattern?this.features.push(Th("fill-extrusion",this.layers,N,this.zoom,n)):this.addFeature(N,N.geometry,v,s,{},n.availableImages,u),n.featureIndex.insert(f,N.geometry,v,E,this.index,H)}this.sortBorders()}addFeatures(e,n,s,u,f){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,n,s,u,f)}this.sortBorders()}update(e,n,s,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,s,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vm),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,xu.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,ym.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,s,u,f,m,v){const E=[new Qe(0,0),new Qe(ki,ki)],C=v.projection,R="globe"===C.name,N=this.enableTerrain&&!R?new Em:null,H="Polygon"===Gf[e.type];R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Qr);const K=jf(n,500);for(let We=K.length-1;We>=0;We--){const _t=K[We];(0===_t.length||(J=_t[0]).every(Ze=>Ze.x<=0)||J.every(Ze=>Ze.x>=ki)||J.every(Ze=>Ze.y<=0)||J.every(Ze=>Ze.y>=ki))&&K.splice(We,1)}var J;let se;if(R)se=Mm(K,E,u);else{se=[];for(const We of K)se.push({polygon:We,bounds:E})}const De=H?this.edgeRadius:0;for(const{polygon:We,bounds:_t}of se){let Ze=0,lt=0;for(const mt of We)H&&!mt[0].equals(mt[mt.length-1])&&mt.push(mt[0]),lt+=H?mt.length-1:mt.length;const Ct=this.segments.prepareSegment((H?5:4)*lt,this.layoutVertexArray,this.indexArray);if(H){const mt=[],sn=[];Ze=Ct.vertexLength;for(const In of We){let Yn,_n;In.length&&In!==We[0]&&sn.push(mt.length/2),Yn=In[1].sub(In[0])._perp()._unit();for(let Bn=1;Bn<In.length;Bn++){const Un=In[Bn],$n=In[Bn===In.length-1?1:Bn+1];let{x:Kn,y:xn}=Un;if(De){_n=$n.sub(Un)._perp()._unit();const oi=Yn.add(_n)._unit(),Ri=De*Math.min(4,1/(Yn.x*oi.x+Yn.y*oi.y));Kn+=Ri*oi.x,xn+=Ri*oi.y,Yn=_n}Od(this.layoutVertexArray,Kn,xn,0,0,1,1,0),Ct.vertexLength++,mt.push(Un.x,Un.y),R&&Zu(this.layoutVertexExtArray,C.projectTilePoint(Kn,xn,u),C.upVector(u,Kn,xn))}}const en=cc.exports(mt,sn);for(let In=0;In<en.length;In+=3)this.indexArray.emplaceBack(Ze+en[In],Ze+en[In+2],Ze+en[In+1]),Ct.primitiveLength++}for(const mt of We){N&&mt.length&&N.startRing(mt[0]);let sn,en,In,Yn=mt.length>4&&qf(mt[mt.length-2],mt[0],mt[1]),_n=De?Zf(mt[mt.length-2],mt[0],mt[1],De):0;en=mt[1].sub(mt[0])._perp()._unit();let Bn=!0;for(let Un=1,$n=0;Un<mt.length;Un++){let Kn=mt[Un-1],xn=mt[Un];const oi=mt[Un===mt.length-1?1:Un+1];if(N&&H&&N.currentPolyCount.top++,C_(xn,Kn,_t)){De&&(en=oi.sub(xn)._perp()._unit(),Bn=!Bn);continue}N&&N.append(xn,Kn);const Ri=xn.sub(Kn)._perp(),ui=Ri.x/(Math.abs(Ri.x)+Math.abs(Ri.y)),ai=Ri.y>0?1:0,si=Kn.dist(xn);if($n+si>32768&&($n=0),De){In=oi.sub(xn)._perp()._unit();let fr=Wf(Kn,xn,oi,$f(en,In),De);isNaN(fr)&&(fr=0);const Ui=xn.sub(Kn)._unit();Kn=Kn.add(Ui.mult(_n))._round(),xn=xn.add(Ui.mult(-fr))._round(),_n=fr,en=In}const zi=Ct.vertexLength,_r=mt.length>4&&qf(Kn,xn,oi);let hr=Cm($n,Yn,Bn);if(Od(this.layoutVertexArray,Kn.x,Kn.y,ui,ai,0,0,hr),Od(this.layoutVertexArray,Kn.x,Kn.y,ui,ai,0,1,hr),$n+=si,hr=Cm($n,_r,!Bn),Yn=_r,Od(this.layoutVertexArray,xn.x,xn.y,ui,ai,0,0,hr),Od(this.layoutVertexArray,xn.x,xn.y,ui,ai,0,1,hr),Ct.vertexLength+=4,this.indexArray.emplaceBack(zi+0,zi+1,zi+2),this.indexArray.emplaceBack(zi+1,zi+3,zi+2),Ct.primitiveLength+=2,De){const fr=Ze+(1===Un?mt.length-2:Un-2),Ui=1===Un?Ze:fr+1;if(this.indexArray.emplaceBack(zi+1,fr,zi+3),this.indexArray.emplaceBack(fr,Ui,zi+3),Ct.primitiveLength+=2,void 0===sn&&(sn=zi),!C_(oi,mt[Un],_t)){const Vr=Un===mt.length-1?sn:Ct.vertexLength;this.indexArray.emplaceBack(zi+2,zi+3,Vr),this.indexArray.emplaceBack(zi+3,Vr+1,Vr),this.indexArray.emplaceBack(zi+3,Ui,Vr+1),Ct.primitiveLength+=3}Bn=!Bn}if(R){const fr=this.layoutVertexExtArray,Ui=C.projectTilePoint(Kn.x,Kn.y,u),Vr=C.projectTilePoint(xn.x,xn.y,u),Zi=C.upVector(u,Kn.x,Kn.y),yr=C.upVector(u,xn.x,xn.y);Zu(fr,Ui,Zi),Zu(fr,Ui,Zi),Zu(fr,Vr,yr),Zu(fr,Vr,yr)}}H&&(Ze+=mt.length-1)}}if(N&&N.polyCount.length>0){if(N.borders){N.vertexArrayOffset=this.centroidVertexArray.length;const We=N.borders,_t=this.featuresOnBorder.push(N)-1;for(let Ze=0;Ze<4;Ze++)We[Ze][0]!==Number.MAX_VALUE&&this.borders[Ze].push(_t)}this.encodeCentroid(N.borders?void 0:N.centroid(),N)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,f,m,u)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((n,s)=>this.featuresOnBorder[n].borders[e][0]-this.featuresOnBorder[s].borders[e][0])}encodeCentroid(e,n,s=!0){let u,f;if(e)if(0!==e.y){const v=n.span()._mult(this.tileToMeter);u=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(v.x/10)),f=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(v.y/10))}else u=Math.ceil(7*(e.x+450)),f=0;else u=0,f=+s;let m=s?this.centroidVertexArray.length:n.vertexArrayOffset;for(const v of n.polyCount){s&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*v.edges+v.top);for(let E=0;E<v.top;E++)this.centroidVertexArray.emplace(m++,u,f);for(let E=0;E<2*v.edges;E++)this.centroidVertexArray.emplace(m++,0,f),this.centroidVertexArray.emplace(m++,u,f)}}}function $f(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function Zf(t,e,n,s){const u=e.sub(t)._perp()._unit(),f=n.sub(e)._perp()._unit();return Wf(t,e,n,$f(u,f),s)}function Wf(t,e,n,s,u){const f=Math.sqrt(1-s*s);return Math.min(t.dist(e)/3,e.dist(n)/3,u*f/s)}function C_(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function qf(t,e,n){if(t.x<0||t.x>=ki||e.x<0||e.x>=ki||n.x<0||n.x>=ki)return!1;const s=n.sub(e),u=s.perp(),f=t.sub(e);return(s.x*f.x+s.y*f.y)/Math.sqrt((s.x*s.x+s.y*s.y)*(f.x*f.x+f.y*f.y))>-.866&&u.x*f.x+u.y*f.y<0}function Cm(t,e,n){const s=e?2|t:-3&t;return n?1|s:-2&s}function Yf(){const t=Math.PI/32,e=Math.tan(t),n=md;return n*Math.sqrt(1+2*e*e)-n}function Mm(t,e,n){const s=1<<n.z,u=Dl(n.x/s),f=Dl((n.x+1)/s),m=Gs(n.y/s),v=Gs((n.y+1)/s);return function(E,C,R,N,H=0,K){const J=[];if(!E.length||!R||!N)return J;const se=(mt,sn)=>{for(const en of mt)J.push({polygon:en,bounds:sn})},De=Math.ceil(Math.log2(R)),We=Math.ceil(Math.log2(N)),_t=De-We,Ze=[];for(let mt=0;mt<Math.abs(_t);mt++)Ze.push(_t>0?0:1);for(let mt=0;mt<Math.min(De,We);mt++)Ze.push(0),Ze.push(1);let lt=E;if(lt=Id(lt,C[0].y-H,C[1].y+H,1),lt=Id(lt,C[0].x-H,C[1].x+H,0),!lt.length)return J;const Ct=[];for(Ze.length?Ct.push({polygons:lt,bounds:C,depth:0}):se(lt,C);Ct.length;){const mt=Ct.pop(),sn=mt.depth,en=Ze[sn],In=mt.bounds[0],Yn=mt.bounds[1],_n=0===en?In.x:In.y,Bn=0===en?Yn.x:Yn.y,Un=K?K(en,_n,Bn):.5*(_n+Bn),$n=Id(mt.polygons,_n-H,Un+H,en),Kn=Id(mt.polygons,Un-H,Bn+H,en);if($n.length){const xn=[In,new Qe(0===en?Un:Yn.x,1===en?Un:Yn.y)];Ze.length>sn+1?Ct.push({polygons:$n,bounds:xn,depth:sn+1}):se($n,xn)}if(Kn.length){const xn=[new Qe(0===en?Un:In.x,1===en?Un:In.y),Yn];Ze.length>sn+1?Ct.push({polygons:Kn,bounds:xn,depth:sn+1}):se(Kn,xn)}}return J}(t,e,Math.ceil((f-u)/11.25),Math.ceil((m-v)/11.25),1,(E,C,R)=>{if(0===E)return.5*(C+R);{const N=Gs((n.y+C/ki)/s);return(Gl(.5*(Gs((n.y+R/ki)/s)+N))*s-n.y)*ki}})}fi(Rd,"FillExtrusionBucket",{omit:["layers","features"]}),fi(Em,"PartMetadata");const M_=new Oi({"fill-extrusion-edge-radius":new qt(yn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Zl={paint:new Oi({"fill-extrusion-opacity":new qt(yn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hn(yn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(yn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(yn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hn(yn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hn(yn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hn(yn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(yn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new qt(yn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new qt(yn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:M_};function Dm(t,e,n){var s=2*Math.PI*6378137/256/Math.pow(2,n);return[t*s-2*Math.PI*6378137/2,e*s-2*Math.PI*6378137/2]}class kd{constructor(e,n,s){this.z=e,this.x=n,this.y=s,this.key=Ld(0,e,e,n,s)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n){const s=(m=this.y,v=this.z,E=Dm(256*(f=this.x),256*(m=Math.pow(2,v)-m-1),v),C=Dm(256*(f+1),256*(m+1),v),E[0]+","+E[1]+","+C[0]+","+C[1]),u=function(f,m,v){let E,C="";for(let R=f;R>0;R--)E=1<<R-1,C+=(m&E?1:0)+(v&E?2:0);return C}(this.z,this.x,this.y);var f,m,v,E,C;return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Tm{constructor(e,n){this.wrap=e,this.canonical=n,this.key=Ld(e,n.z,n.z,n.x,n.y)}}class ga{constructor(e,n,s,u,f){this.overscaledZ=e,this.wrap=n,this.canonical=new kd(s,+u,+f),this.key=0===n&&e===s?this.canonical.key:Ld(n,e,s,u,f)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const n=this.canonical.z-e;return e>this.canonical.z?new ga(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ga(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(e,n=!0){if(this.overscaledZ===e&&n)return this.key;if(e>this.canonical.z)return Ld(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y);{const s=this.canonical.z-e;return Ld(this.wrap*+n,e,e,this.canonical.x>>s,this.canonical.y>>s)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const n=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new ga(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,s=2*this.canonical.x,u=2*this.canonical.y;return[new ga(n,this.wrap,n,s,u),new ga(n,this.wrap,n,s+1,u),new ga(n,this.wrap,n,s,u+1),new ga(n,this.wrap,n,s+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ga(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ga(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Tm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ld(t,e,n,s,u){const f=1<<Math.min(n,22);let m=f*(u%f)+s%f;return t&&n<22&&(m+=f*f*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*m+n)+(e-n)}fi(kd,"CanonicalTileID"),fi(ga,"OverscaledTileID",{omit:["projMatrix"]});class Wu extends Qe{constructor(e,n,s){super(e,n),this.z=s}}function qu(t,e){return t.x*e.x+t.y*e.y}function Sm(t,e){if(1===t.length){let n=0;const s=e[n++];let u;for(;!u||s.equals(u);)if(u=e[n++],!u)return 1/0;for(;n<e.length;n++){const f=e[n],m=t[0],v=u.sub(s),E=f.sub(s),C=m.sub(s),R=qu(v,v),N=qu(v,E),H=qu(E,E),K=qu(C,v),J=qu(C,E),se=R*H-N*N,De=(H*K-N*J)/se,We=(R*J-N*K)/se,_t=s.z*(1-De-We)+u.z*De+f.z*We;if(isFinite(_t))return _t}return 1/0}{let n=1/0;for(const s of e)n=Math.min(n,s.z);return n}}function Am(t,e,n,s,u,f,m,v){const E=m*u.getElevationAt(t,e,!0,!0),C=0!==f[0],R=C?0===f[1]?m*(f[0]/7-450):m*function(N,H,K){const J=Math.floor(H[0]/8),se=Math.floor(H[1]/8),De=10*(H[0]-8*J),We=10*(H[1]-8*se),_t=N.getElevationAt(J,se,!0,!0),Ze=N.getMeterToDEM(K),lt=Math.floor(.5*(De*Ze-1)),Ct=Math.floor(.5*(We*Ze-1)),mt=N.tileCoordToPixel(J,se),sn=2*lt+1,en=2*Ct+1,In=(Ri=sn,ui=en,[(Kn=N).getElevationAtPixel(xn=mt.x-lt,oi=mt.y-Ct,!0),Kn.getElevationAtPixel(xn+ui,oi,!0),Kn.getElevationAtPixel(xn,oi+ui,!0),Kn.getElevationAtPixel(xn+Ri,oi+ui,!0)]),Yn=Math.abs(In[0]-In[1]),_n=Math.abs(In[2]-In[3]),Bn=Math.abs(In[0]-In[2])+Math.abs(In[1]-In[3]),Un=Math.min(.25,.5*Ze*(Yn+_n)/sn),$n=Math.min(.25,.5*Ze*Bn/en);var Kn,xn,oi,Ri,ui;return _t+Math.max(Un*De,$n*We)}(u,f,v):E;return{base:E+(0===n)?-1:n,top:C?Math.max(R+s,E+n+2):E+s}}const D_=gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:gr}=D_,Im=gi([{name:"a_packed",components:4,type:"Float32"}]),{members:Pm}=Im,Om=$u.types,T_=Math.cos(Math.PI/180*37.5);class Oh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Pa,this.layoutVertexArray2=new Qs,this.indexArray=new Ss,this.programConfigurations=new hu(e.layers,e.zoom),this.segments=new ds,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,s,u){this.hasPattern=Sd("line",this.layers,n);const f=this.layers[0].layout.get("line-sort-key"),m=[];for(const{feature:R,id:N,index:H,sourceLayerIndex:K}of e){const J=this.layers[0]._featureFilter.needGeometry,se=Sc(R,J);if(!this.layers[0]._featureFilter.filter(new $t(this.zoom),se,s))continue;const De=f?f.evaluate(se,{},s):void 0,We={id:N,properties:R.properties,type:R.type,sourceLayerIndex:K,index:H,geometry:J?se.geometry:ac(R,s,u),patterns:{},sortKey:De};m.push(We)}f&&m.sort((R,N)=>R.sortKey-N.sortKey);const{lineAtlas:v,featureIndex:E}=n,C=this.addConstantDashes(v);for(const R of m){const{geometry:N,index:H,sourceLayerIndex:K}=R;if(C&&this.addFeatureDashes(R,v),this.hasPattern){const J=Th("line",this.layers,R,this.zoom,n);this.patternFeatures.push(J)}else this.addFeature(R,N,H,s,v.positions,n.availableImages);E.insert(e[H].feature,N,H,K,this.index)}}addConstantDashes(e){let n=!1;for(const s of this.layers){const u=s.paint.get("line-dasharray").value,f=s.layout.get("line-cap").value;if("constant"!==u.kind||"constant"!==f.kind)n=!0;else{const m=f.value,v=u.value;if(!v)continue;e.addDash(v,m)}}return n}addFeatureDashes(e,n){const s=this.zoom;for(const u of this.layers){const f=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if("constant"===f.kind&&"constant"===m.kind)continue;let v,E;if("constant"===f.kind){if(v=f.value,!v)continue}else v=f.evaluate({zoom:s},e);E="constant"===m.kind?m.value:m.evaluate({zoom:s},e),n.addDash(v,E),e.patterns[u.id]=n.getKey(v,E)}}update(e,n,s,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,s,u)}addFeatures(e,n,s,u,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,n,s,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Pm)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gr),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,s,u,f,m){const v=this.layers[0].layout,E=v.get("line-join").evaluate(e,{}),C=v.get("line-cap").evaluate(e,{}),R=v.get("line-miter-limit"),N=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const H of n)this.addLine(H,e,E,C,R,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,f,m,u)}addLine(e,n,s,u,f,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let We=0;We<e.length-1;We++)this.totalDistance+=e[We].dist(e[We+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const v="Polygon"===Om[n.type];let E=e.length;for(;E>=2&&e[E-1].equals(e[E-2]);)E--;let C=0;for(;C<E-1&&e[C].equals(e[C+1]);)C++;if(E<(v?3:2))return;"bevel"===s&&(f=1.05);const R=this.overscaling<=16?122880/(512*this.overscaling):0,N=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let H,K,J,se,De;this.e1=this.e2=-1,v&&(H=e[E-2],De=e[C].sub(H)._unit()._perp());for(let We=C;We<E;We++){if(J=We===E-1?v?e[C+1]:void 0:e[We+1],J&&e[We].equals(J))continue;De&&(se=De),H&&(K=H),H=e[We],De=J?J.sub(H)._unit()._perp():se,se=se||De;let _t=se.add(De);0===_t.x&&0===_t.y||_t._unit();const Ze=se.x*De.x+se.y*De.y,lt=_t.x*De.x+_t.y*De.y,Ct=0!==lt?1/lt:1/0,mt=2*Math.sqrt(2-2*lt),sn=lt<T_&&K&&J,en=se.x*De.y-se.y*De.x>0;if(sn&&We>C){const _n=H.dist(K);if(_n>2*R){const Bn=H.sub(H.sub(K)._mult(R/_n)._round());this.updateDistance(K,Bn),this.addCurrentVertex(Bn,se,0,0,N),K=Bn}}const In=K&&J;let Yn=In?s:v?"butt":u;if(In&&"round"===Yn&&(Ct<m?Yn="miter":Ct<=2&&(Yn="fakeround")),"miter"===Yn&&Ct>f&&(Yn="bevel"),"bevel"===Yn&&(Ct>2&&(Yn="flipbevel"),Ct<f&&(Yn="miter")),K&&this.updateDistance(K,H),"miter"===Yn)_t._mult(Ct),this.addCurrentVertex(H,_t,0,0,N);else if("flipbevel"===Yn){if(Ct>100)_t=De.mult(-1);else{const _n=Ct*se.add(De).mag()/se.sub(De).mag();_t._perp()._mult(_n*(en?-1:1))}this.addCurrentVertex(H,_t,0,0,N),this.addCurrentVertex(H,_t.mult(-1),0,0,N)}else if("bevel"===Yn||"fakeround"===Yn){const _n=-Math.sqrt(Ct*Ct-1),Bn=en?_n:0,Un=en?0:_n;if(K&&this.addCurrentVertex(H,se,Bn,Un,N),"fakeround"===Yn){const $n=Math.round(180*mt/Math.PI/20);for(let Kn=1;Kn<$n;Kn++){let xn=Kn/$n;if(.5!==xn){const Ri=xn-.5;xn+=xn*Ri*(xn-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*Ri*Ri+(.848013+Ze*(.215638*Ze-1.06021)))}const oi=De.sub(se)._mult(xn)._add(se)._unit()._mult(en?-1:1);this.addHalfVertex(H,oi.x,oi.y,!1,en,0,N)}}J&&this.addCurrentVertex(H,De,-Bn,-Un,N)}else if("butt"===Yn)this.addCurrentVertex(H,_t,0,0,N);else if("square"===Yn){const _n=K?1:-1;K||this.addCurrentVertex(H,_t,_n,_n,N),this.addCurrentVertex(H,_t,0,0,N),K&&this.addCurrentVertex(H,_t,_n,_n,N)}else"round"===Yn&&(K&&(this.addCurrentVertex(H,se,0,0,N),this.addCurrentVertex(H,se,1,1,N,!0)),J&&(this.addCurrentVertex(H,De,-1,-1,N,!0),this.addCurrentVertex(H,De,0,0,N)));if(sn&&We<E-1){const _n=H.dist(J);if(_n>2*R){const Bn=H.add(J.sub(H)._mult(R/_n)._round());this.updateDistance(H,Bn),this.addCurrentVertex(Bn,De,0,0,N),H=Bn}}}}addCurrentVertex(e,n,s,u,f,m=!1){const v=n.y*u-n.x,E=-n.y-n.x*u;this.addHalfVertex(e,n.x+n.y*s,n.y-n.x*s,m,!1,s,f),this.addHalfVertex(e,v,E,m,!0,-u,f)}addHalfVertex({x:e,y:n},s,u,f,m,v,E){this.layoutVertexArray.emplaceBack((e<<1)+(f?1:0),(n<<1)+(m?1:0),Math.round(63*s)+128,Math.round(63*u)+128,1+(0===v?0:v<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const C=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),E.primitiveLength++),m?this.e2=C:this.e1=C}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}}fi(Oh,"LineBucket",{omit:["layers","patternFeatures"]});const Rm=new Oi({"line-cap":new hn(yn.layout_line["line-cap"]),"line-join":new hn(yn.layout_line["line-join"]),"line-miter-limit":new qt(yn.layout_line["line-miter-limit"]),"line-round-limit":new qt(yn.layout_line["line-round-limit"]),"line-sort-key":new hn(yn.layout_line["line-sort-key"])});var km={paint:new Oi({"line-opacity":new hn(yn.paint_line["line-opacity"]),"line-color":new hn(yn.paint_line["line-color"]),"line-translate":new qt(yn.paint_line["line-translate"]),"line-translate-anchor":new qt(yn.paint_line["line-translate-anchor"]),"line-width":new hn(yn.paint_line["line-width"]),"line-gap-width":new hn(yn.paint_line["line-gap-width"]),"line-offset":new hn(yn.paint_line["line-offset"]),"line-blur":new hn(yn.paint_line["line-blur"]),"line-dasharray":new hn(yn.paint_line["line-dasharray"]),"line-pattern":new hn(yn.paint_line["line-pattern"]),"line-gradient":new Ei(yn.paint_line["line-gradient"]),"line-trim-offset":new qt(yn.paint_line["line-trim-offset"])}),layout:Rm};const Kf=new class extends hn{possiblyEvaluate(t,e){return e=new $t(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,s){return e=Xt({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,s)}}(km.paint.properties["line-width"].specification);function Lm(t,e){return e>0?e+2*t:t}Kf.useIntegerZoom=!0;const S_=gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xy=gi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Fm=gi([{name:"a_projected_pos",components:4,type:"Float32"}],4);gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Bm=gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),bu=gi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);gi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nm=gi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Xf=gi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);gi([{name:"triangle",components:3,type:"Uint16"}]),gi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),gi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gi([{type:"Float32",name:"offsetX"}]),gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);const fc=128;function zm(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new $t(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:s,interpolationType:u}=n;let f=0;for(;f<s.length&&s[f]<=t;)f++;f=Math.max(0,f-1);let m=f;for(;m<s.length&&s[m]<t+1;)m++;m=Math.min(s.length-1,m);const v=s[f],E=s[m];return"composite"===n.kind?{kind:"composite",minZoom:v,maxZoom:E,interpolationType:u}:{kind:"camera",minZoom:v,maxZoom:E,minSize:n.evaluate(new $t(v)),maxSize:n.evaluate(new $t(E)),interpolationType:u}}}function Qf(t,{uSize:e,uSizeT:n},{lowerSize:s,upperSize:u}){return"source"===t.kind?s/fc:"composite"===t.kind?En(s/fc,u/fc,n):e}function Fd(t,e){let n=0,s=0;if("constant"===t.kind)s=t.layoutSize;else if("source"!==t.kind){const{interpolationType:u,minZoom:f,maxZoom:m}=t,v=u?Ke(zs.interpolationFactor(u,e,f,m),0,1):0;"camera"===t.kind?s=En(t.minSize,t.maxSize,v):n=v}return{uSizeT:n,uSize:s}}var A_=Object.freeze({__proto__:null,getSizeData:zm,evaluateSizeForFeature:Qf,evaluateSizeForZoom:Fd,SIZE_PACK_FACTOR:fc});function Um(t,e,n){return t.sections.forEach(s=>{s.text=function(u,f,m){const v=f.layout.get("text-transform").evaluate(m,{});return"uppercase"===v?u=u.toLocaleUpperCase():"lowercase"===v&&(u=u.toLocaleLowerCase()),rn.applyArabicShaping&&(u=rn.applyArabicShaping(u)),u}(s.text,e,n)}),t}const Rh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function I_(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function Yu(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var Bd=lo,Jf=function(t,e,n,s,u){var f,m,v=8*u-s-1,E=(1<<v)-1,C=E>>1,R=-7,N=n?u-1:0,H=n?-1:1,K=t[e+N];for(N+=H,f=K&(1<<-R)-1,K>>=-R,R+=v;R>0;f=256*f+t[e+N],N+=H,R-=8);for(m=f&(1<<-R)-1,f>>=-R,R+=s;R>0;m=256*m+t[e+N],N+=H,R-=8);if(0===f)f=1-C;else{if(f===E)return m?NaN:1/0*(K?-1:1);m+=Math.pow(2,s),f-=C}return(K?-1:1)*m*Math.pow(2,f-s)},Nd=function(t,e,n,s,u,f){var m,v,E,C=8*f-u-1,R=(1<<C)-1,N=R>>1,H=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,K=s?0:f-1,J=s?1:-1,se=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(v=isNaN(e)?1:0,m=R):(m=Math.floor(Math.log(e)/Math.LN2),e*(E=Math.pow(2,-m))<1&&(m--,E*=2),(e+=m+N>=1?H/E:H*Math.pow(2,1-N))*E>=2&&(m++,E/=2),m+N>=R?(v=0,m=R):m+N>=1?(v=(e*E-1)*Math.pow(2,u),m+=N):(v=e*Math.pow(2,N-1)*Math.pow(2,u),m=0));u>=8;t[n+K]=255&v,K+=J,v/=256,u-=8);for(m=m<<u|v,C+=u;C>0;t[n+K]=255&m,K+=J,m/=256,C-=8);t[n+K-J]|=128*se};function lo(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}lo.Varint=0,lo.Fixed64=1,lo.Bytes=2,lo.Fixed32=5;var kh=4294967296,Vm=1/kh,jm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function kc(t){return t.type===lo.Bytes?t.readVarint()+t.pos:t.pos+1}function Hm(t,e,n){var s=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(s);for(var u=n.pos-1;u>=t;u--)n.buf[u+s]=n.buf[u]}function Gm(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function P_(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function $m(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Zm(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function ep(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Qy(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function tp(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function O_(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Jy(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Lc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function wu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function np(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Lh(t,e,n){e.glyphs=[],1===t&&n.readMessage(Wl,e)}function Wl(t,e,n){if(3===t){const{id:s,bitmap:u,width:f,height:m,left:v,top:E,advance:C}=n.readMessage(Wm,{});e.glyphs.push({id:s,bitmap:new Oc({width:f+6,height:m+6},u),metrics:{width:f,height:m,left:v,top:E,advance:C}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function Wm(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function ip(t){let e=0,n=0;for(const m of t)e+=m.w*m.h,n=Math.max(n,m.w);t.sort((m,v)=>v.h-m.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let u=0,f=0;for(const m of t)for(let v=s.length-1;v>=0;v--){const E=s[v];if(!(m.w>E.w||m.h>E.h)){if(m.x=E.x,m.y=E.y,f=Math.max(f,m.y+m.h),u=Math.max(u,m.x+m.w),m.w===E.w&&m.h===E.h){const C=s.pop();v<s.length&&(s[v]=C)}else m.h===E.h?(E.x+=m.w,E.w-=m.w):m.w===E.w?(E.y+=m.h,E.h-=m.h):(s.push({x:E.x+m.w,y:E.y,w:E.w-m.w,h:m.h}),E.y+=m.h,E.h-=m.h);break}}return{w:u,h:f,fill:e/(u*f)||0}}lo.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var s=this.readVarint(),u=s>>3,f=this.pos;this.type=7&s,t(u,e,this),this.pos===f&&this.skip(s)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Lc(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=np(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Lc(this.buf,this.pos)+Lc(this.buf,this.pos+4)*kh;return this.pos+=8,t},readSFixed64:function(){var t=Lc(this.buf,this.pos)+np(this.buf,this.pos+4)*kh;return this.pos+=8,t},readFloat:function(){var t=Jf(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Jf(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,s=this.buf;return e=127&(n=s[this.pos++]),n<128?e:(e|=(127&(n=s[this.pos++]))<<7,n<128?e:(e|=(127&(n=s[this.pos++]))<<14,n<128?e:(e|=(127&(n=s[this.pos++]))<<21,n<128?e:function(u,f,m){var v,E,C=m.buf;if(v=(112&(E=C[m.pos++]))>>4,E<128||(v|=(127&(E=C[m.pos++]))<<3,E<128)||(v|=(127&(E=C[m.pos++]))<<10,E<128)||(v|=(127&(E=C[m.pos++]))<<17,E<128)||(v|=(127&(E=C[m.pos++]))<<24,E<128)||(v|=(1&(E=C[m.pos++]))<<31,E<128))return function Ku(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}(u,v,f);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=s[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&jm?jm.decode(this.buf.subarray(e,t)):function(n,s,u){for(var f="",m=s;m<u;){var v,E,C,R=n[m],N=null,H=R>239?4:R>223?3:R>191?2:1;if(m+H>u)break;1===H?R<128&&(N=R):2===H?128==(192&(v=n[m+1]))&&(N=(31&R)<<6|63&v)<=127&&(N=null):3===H?(E=n[m+2],128==(192&(v=n[m+1]))&&128==(192&E)&&((N=(15&R)<<12|(63&v)<<6|63&E)<=2047||N>=55296&&N<=57343)&&(N=null)):4===H&&(E=n[m+2],C=n[m+3],128==(192&(v=n[m+1]))&&128==(192&E)&&128==(192&C)&&((N=(15&R)<<18|(63&v)<<12|(63&E)<<6|63&C)<=65535||N>=1114112)&&(N=null)),null===N?(N=65533,H=1):N>65535&&(N-=65536,f+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),f+=String.fromCharCode(N),m+=H}return f}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==lo.Bytes)return t.push(this.readVarint(e));var n=kc(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==lo.Bytes)return t.push(this.readSVarint());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==lo.Bytes)return t.push(this.readBoolean());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==lo.Bytes)return t.push(this.readFloat());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==lo.Bytes)return t.push(this.readDouble());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==lo.Bytes)return t.push(this.readFixed32());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==lo.Bytes)return t.push(this.readSFixed32());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==lo.Bytes)return t.push(this.readFixed64());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==lo.Bytes)return t.push(this.readSFixed64());var e=kc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===lo.Varint)for(;this.buf[this.pos++]>127;);else if(e===lo.Bytes)this.pos=this.readVarint()+this.pos;else if(e===lo.Fixed32)this.pos+=4;else{if(e!==lo.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),wu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),wu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),wu(this.buf,-1&t,this.pos),wu(this.buf,Math.floor(t*Vm),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),wu(this.buf,-1&t,this.pos),wu(this.buf,Math.floor(t*Vm),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,n){var s,u,f,v;if(e>=0?(s=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(s=~(-e%4294967296))?s=s+1|0:(s=0,u=u+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),f=s,(v=n).buf[v.pos++]=127&f|128,f>>>=7,v.buf[v.pos++]=127&f|128,f>>>=7,v.buf[v.pos++]=127&f|128,f>>>=7,v.buf[v.pos++]=127&f|128,v.buf[v.pos]=127&(f>>>=7),function(f,m){var v=(7&f)<<4;m.buf[m.pos++]|=v|((f>>>=3)?128:0),f&&(m.buf[m.pos++]=127&f|((f>>>=7)?128:0),f&&(m.buf[m.pos++]=127&f|((f>>>=7)?128:0),f&&(m.buf[m.pos++]=127&f|((f>>>=7)?128:0),f&&(m.buf[m.pos++]=127&f|((f>>>=7)?128:0),f&&(m.buf[m.pos++]=127&f)))))}(u,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(s,u,f){for(var m,v,E=0;E<u.length;E++){if((m=u.charCodeAt(E))>55295&&m<57344){if(!v){m>56319||E+1===u.length?(s[f++]=239,s[f++]=191,s[f++]=189):v=m;continue}if(m<56320){s[f++]=239,s[f++]=191,s[f++]=189,v=m;continue}m=v-55296<<10|m-56320|65536,v=null}else v&&(s[f++]=239,s[f++]=191,s[f++]=189,v=null);m<128?s[f++]=m:(m<2048?s[f++]=m>>6|192:(m<65536?s[f++]=m>>12|224:(s[f++]=m>>18|240,s[f++]=m>>12&63|128),s[f++]=m>>6&63|128),s[f++]=63&m|128)}return f}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Hm(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Nd(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Nd(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var s=this.pos-n;s>=128&&Hm(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeMessage:function(t,e,n){this.writeTag(t,lo.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Gm,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,P_,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ep,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,$m,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Zm,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Qy,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,tp,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,O_,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Jy,e)},writeBytesField:function(t,e){this.writeTag(t,lo.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,lo.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,lo.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,lo.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,lo.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,lo.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,lo.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,lo.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,lo.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,lo.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class zd{constructor(e,{pixelRatio:n,version:s,stretchX:u,stretchY:f,content:m}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=u,this.stretchY=f,this.content=m,this.version=s}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class pc{constructor(e,n){const s={},u={};this.haveRenderCallbacks=[];const f=[];this.addImages(e,s,f),this.addImages(n,u,f);const{w:m,h:v}=ip(f),E=new Ra({width:m||1,height:v||1});for(const C in e){const R=e[C],N=s[C].paddedRect;Ra.copy(R.data,E,{x:0,y:0},{x:N.x+1,y:N.y+1},R.data)}for(const C in n){const R=n[C],N=u[C].paddedRect,H=N.x+1,K=N.y+1,J=R.data.width,se=R.data.height;Ra.copy(R.data,E,{x:0,y:0},{x:H,y:K},R.data),Ra.copy(R.data,E,{x:0,y:se-1},{x:H,y:K-1},{width:J,height:1}),Ra.copy(R.data,E,{x:0,y:0},{x:H,y:K+se},{width:J,height:1}),Ra.copy(R.data,E,{x:J-1,y:0},{x:H-1,y:K},{width:1,height:se}),Ra.copy(R.data,E,{x:0,y:0},{x:H+J,y:K},{width:1,height:se})}this.image=E,this.iconPositions=s,this.patternPositions=u}addImages(e,n,s){for(const u in e){const f=e[u],m={x:0,y:0,w:f.data.width+2,h:f.data.height+2};s.push(m),n[u]=new zd(m,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,n){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(s=>e.hasImage(s)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const s in e.updatedImages)this.patchUpdatedImage(this.iconPositions[s],e.getImage(s),n),this.patchUpdatedImage(this.patternPositions[s],e.getImage(s),n)}patchUpdatedImage(e,n,s){if(!e||!n||e.version===n.version)return;e.version=n.version;const[u,f]=e.tl;s.update(n.data,void 0,{x:u,y:f})}}fi(zd,"ImagePosition"),fi(pc,"ImageAtlas");const ka={horizontal:1,vertical:2,horizontalOnly:3};class Xu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,n){const s=new Xu;return s.scale=e||1,s.fontStack=n,s}static forImage(e){const n=new Xu;return n.imageName=e,n}}class Yc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,n){const s=new Yc;for(let u=0;u<e.sections.length;u++){const f=e.sections[u];f.image?s.addImageSection(f):s.addTextSection(f,n)}return s}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(n,s){let u="";for(let f=0;f<n.length;f++){const m=n.charCodeAt(f+1)||null,v=n.charCodeAt(f-1)||null;u+=!s&&(m&&Z(m)&&!Rh[n[f+1]]||v&&Z(v)&&!Rh[n[f-1]])||!Rh[n[f]]?n[f]:Rh[n[f]]}return u}(this.text,e)}trim(){let e=0;for(let s=0;s<this.text.length&&Ud[this.text.charCodeAt(s)];s++)e++;let n=this.text.length;for(let s=this.text.length-1;s>=0&&s>=e&&Ud[this.text.charCodeAt(s)];s--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}substring(e,n){const s=new Yc;return s.text=this.text.substring(e,n),s.sectionIndex=this.sectionIndex.slice(e,n),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,n)=>Math.max(e,this.sections[n].scale),0)}addTextSection(e,n){this.text+=e.text,this.sections.push(Xu.forText(e.scale,e.fontStack||n));const s=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(s)}addImageSection(e){const n=e.image?e.image.name:"";if(0===n.length)return void Xe("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Xu.forImage(n)),this.sectionIndex.push(this.sections.length-1)):Xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qm(t,e,n,s,u,f,m,v,E,C,R,N,H,K,J){const se=Yc.fromFeature(t,u);N===ka.vertical&&se.verticalizePunctuation(H);let De=[];const We=function(mt,sn,en,In,Yn,_n){if(!mt)return[];const Bn=[],Un=function(oi,Ri,ui,ai,si,zi){let _r=0;for(let hr=0;hr<oi.length();hr++){const fr=oi.getSection(hr);_r+=Vd(oi.getCharCode(hr),fr,ai,si,Ri,zi)}return _r/Math.max(1,Math.ceil(_r/ui))}(mt,sn,en,In,Yn,_n),$n=mt.text.indexOf("\u200b")>=0;let Kn=0;for(let oi=0;oi<mt.length();oi++){const Ri=mt.getSection(oi),ui=mt.getCharCode(oi);if(Ud[ui]||(Kn+=Vd(ui,Ri,In,Yn,sn,_n)),oi<mt.length()-1){const ai=!((xn=ui)<11904||!(Y(xn)||V(xn)||c(xn)||Xs(xn)||An(xn)||bl(xn)||me(xn)||O(xn)||pi(xn)||or(xn)||bt(xn)||x(xn)||k(xn)||ku(xn)||$c(xn)||tt(xn)||I(xn)||i(xn)||Gr(xn)||Di(xn)));(e0[ui]||ai||Ri.imageName)&&Bn.push(Fh(oi+1,Kn,Un,Bn,rp(ui,mt.getCharCode(oi+1),ai&&$n),!1))}}var xn;return Bh(Fh(mt.length(),Kn,Un,Bn,0,!0))}(se,C,f,e,s,K),{processBidirectionalText:_t,processStyledBidirectionalText:Ze}=rn;if(_t&&1===se.sections.length){const mt=_t(se.toString(),We);for(const sn of mt){const en=new Yc;en.text=sn,en.sections=se.sections;for(let In=0;In<sn.length;In++)en.sectionIndex.push(0);De.push(en)}}else if(Ze){const mt=Ze(se.text,se.sectionIndex,We);for(const sn of mt){const en=new Yc;en.text=sn[0],en.sectionIndex=sn[1],en.sections=se.sections,De.push(en)}}else De=function(mt,sn){const en=[],In=mt.text;let Yn=0;for(const _n of sn)en.push(mt.substring(Yn,_n)),Yn=_n;return Yn<In.length&&en.push(mt.substring(Yn,In.length)),en}(se,We);const lt=[],Ct={positionedLines:lt,text:se.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:N,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(mt,sn,en,In,Yn,_n,Bn,Un,$n,Kn,xn,oi){let Ri=0,ui=0,ai=0;const si="right"===Un?1:"left"===Un?0:.5;let zi=!1;for(const Zi of Yn){const yr=Zi.getSections();for(const Jr of yr){if(Jr.imageName)continue;const co=sn[Jr.fontStack];if(co&&(zi=void 0!==co.ascender&&void 0!==co.descender,!zi))break}if(!zi)break}let _r=0;for(const Zi of Yn){Zi.trim();const yr=Zi.getMaxScale(),Jr=24*(yr-1),co={positionedGlyphs:[],lineOffset:0};mt.positionedLines[_r]=co;const uo=co.positionedGlyphs;let ho=0;if(!Zi.length()){ui+=_n,++_r;continue}let To=0,Ro=0;for(let Er=0;Er<Zi.length();Er++){const Qo=Zi.getSection(Er),qo=Zi.getSectionIndex(Er),ur=Zi.getCharCode(Er);let Lr=Qo.scale,fo=null,qr=null,Bo=null,ia=24,As=0;const Is=!($n===ka.horizontal||!xn&&!W(ur)||xn&&(Ud[ur]||(hr=ur,Ia(hr)||cu(hr)||rc(hr)||d(hr)||y(hr))));if(Qo.imageName){const ya=In[Qo.imageName];if(!ya)continue;Bo=Qo.imageName,mt.iconsInText=mt.iconsInText||!0,qr=ya.paddedRect;const fs=ya.displaySize;Lr=24*Lr/oi,fo={width:fs[0],height:fs[1],left:1,top:-3,advance:Is?fs[1]:fs[0],localGlyph:!1},As=zi?-fo.height*Lr:24*yr-17-fs[1]*Lr,ia=fo.advance;const ul=(Is?fs[0]:fs[1])*Lr-24*yr;ul>0&&ul>ho&&(ho=ul)}else{const ya=en[Qo.fontStack];if(!ya)continue;ya[ur]&&(qr=ya[ur]);const fs=sn[Qo.fontStack];if(!fs)continue;const ul=fs.glyphs[ur];if(!ul)continue;if(fo=ul.metrics,ia=8203!==ur?24:0,zi){const ld=void 0!==fs.ascender?Math.abs(fs.ascender):0,cd=void 0!==fs.descender?Math.abs(fs.descender):0,nh=(ld+cd)*Lr;To<nh&&(To=nh,Ro=(ld-cd)/2*Lr),As=-ld*Lr}else As=24*(yr-Lr)-17}Is?(mt.verticalizable=!0,uo.push({glyph:ur,imageName:Bo,x:Ri,y:ui+As,vertical:Is,scale:Lr,localGlyph:fo.localGlyph,fontStack:Qo.fontStack,sectionIndex:qo,metrics:fo,rect:qr}),Ri+=ia*Lr+Kn):(uo.push({glyph:ur,imageName:Bo,x:Ri,y:ui+As,vertical:Is,scale:Lr,localGlyph:fo.localGlyph,fontStack:Qo.fontStack,sectionIndex:qo,metrics:fo,rect:qr}),Ri+=fo.advance*Lr+Kn)}0!==uo.length&&(ai=Math.max(Ri-Kn,ai),zi?Km(uo,si,ho,Ro,_n*yr/2):Km(uo,si,ho,0,_n/2)),Ri=0;const hs=_n*yr+ho;co.lineOffset=Math.max(ho,Jr),ui+=hs,++_r}var hr;const fr=ui,{horizontalAlign:Ui,verticalAlign:Vr}=Ym(Bn);(function(Zi,yr,Jr,co,uo,ho){const To=(yr-Jr)*uo,Ro=-ho*co;for(const hs of Zi)for(const Er of hs.positionedGlyphs)Er.x+=To,Er.y+=Ro})(mt.positionedLines,si,Ui,Vr,ai,fr),mt.top+=-Vr*fr,mt.bottom=mt.top+fr,mt.left+=-Ui*ai,mt.right=mt.left+ai,mt.hasBaseline=zi}(Ct,e,n,s,De,m,v,E,N,C,H,J),!function(mt){for(const sn of mt)if(0!==sn.positionedGlyphs.length)return!1;return!0}(lt)&&Ct}const Ud={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},e0={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Vd(t,e,n,s,u,f){if(e.imageName){const m=s[e.imageName];return m?m.displaySize[0]*e.scale*24/f+u:0}{const m=n[e.fontStack],v=m&&m.glyphs[t];return v?v.metrics.advance*e.scale+u:0}}function jd(t,e,n,s){const u=Math.pow(t-e,2);return s?t<e?u/2:2*u:u+Math.abs(n)*n}function rp(t,e,n){let s=0;return 10===t&&(s-=1e4),n&&(s+=150),40!==t&&65288!==t||(s+=50),41!==e&&65289!==e||(s+=50),s}function Fh(t,e,n,s,u,f){let m=null,v=jd(e,n,u,f);for(const E of s){const C=jd(e-E.x,n,u,f)+E.badness;C<=v&&(m=E,v=C)}return{index:t,x:e,priorBreak:m,badness:v}}function Bh(t){return t?Bh(t.priorBreak).concat(t.index):[]}function Ym(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Km(t,e,n,s,u){if(!(e||n||s||u))return;const f=t.length-1,m=t[f],v=(m.x+m.metrics.advance*m.scale)*e;for(let E=0;E<=f;E++)t[E].x-=v,t[E].y+=n+s+u}function R_(t,e,n){const{horizontalAlign:s,verticalAlign:u}=Ym(n),f=e[0]-t.displaySize[0]*s,m=e[1]-t.displaySize[1]*u;return{image:t,top:m,bottom:m+t.displaySize[1],left:f,right:f+t.displaySize[0]}}function Xm(t,e,n,s,u,f){const m=t.image;let v;if(m.content){const De=m.content,We=m.pixelRatio||1;v=[De[0]/We,De[1]/We,m.displaySize[0]-De[2]/We,m.displaySize[1]-De[3]/We]}const E=e.left*f,C=e.right*f;let R,N,H,K;"width"===n||"both"===n?(K=u[0]+E-s[3],N=u[0]+C+s[1]):(K=u[0]+(E+C-m.displaySize[0])/2,N=K+m.displaySize[0]);const J=e.top*f,se=e.bottom*f;return"height"===n||"both"===n?(R=u[1]+J-s[0],H=u[1]+se+s[2]):(R=u[1]+(J+se-m.displaySize[1])/2,H=R+m.displaySize[1]),{image:m,top:R,right:N,bottom:H,left:K,collisionPadding:v}}class Fc extends Qe{constructor(e,n,s,u,f){super(e,n),this.angle=u,this.z=s,void 0!==f&&(this.segment=f)}clone(){return new Fc(this.x,this.y,this.z,this.angle,this.segment)}}function op(t,e,n,s,u){if(void 0===e.segment)return!0;let f=e,m=e.segment+1,v=0;for(;v>-n/2;){if(m--,m<0)return!1;v-=t[m].dist(f),f=t[m]}v+=t[m].dist(t[m+1]),m++;const E=[];let C=0;for(;v<n/2;){const R=t[m],N=t[m+1];if(!N)return!1;let H=t[m-1].angleTo(R)-R.angleTo(N);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:v,angleDelta:H}),C+=H;v-E[0].distance>s;)C-=E.shift().angleDelta;if(C>u)return!1;m++,v+=R.dist(N)}return!0}function k_(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Qm(t,e,n){return t?.6*e*n:0}function L_(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Jm(t,e,n,s,u,f){const m=Qm(n,u,f),v=L_(n,s)*f;let E=0;const C=k_(t)/2;for(let R=0;R<t.length-1;R++){const N=t[R],H=t[R+1],K=N.dist(H);if(E+K>C){const J=(C-E)/K,se=En(N.x,H.x,J),De=En(N.y,H.y,J),We=new Fc(se,De,0,H.angleTo(N),R);return!m||op(t,We,v,m,e)?We:void 0}E+=K}}function eg(t,e,n,s,u,f,m,v,E){const C=Qm(s,f,m),R=L_(s,u),N=R*m,H=0===t[0].x||t[0].x===E||0===t[0].y||t[0].y===E;return e-N<e/4&&(e=N+e/4),tg(t,H?e/2*v%e:(R/2+2*f)*m*v%e,e,C,n,N,H,!1,E)}function tg(t,e,n,s,u,f,m,v,E){const C=f/2,R=k_(t);let N=0,H=e-n,K=[];for(let J=0;J<t.length-1;J++){const se=t[J],De=t[J+1],We=se.dist(De),_t=De.angleTo(se);for(;H+n<N+We;){H+=n;const Ze=(H-N)/We,lt=En(se.x,De.x,Ze),Ct=En(se.y,De.y,Ze);if(lt>=0&&lt<E&&Ct>=0&&Ct<E&&H-C>=0&&H+C<=R){const mt=new Fc(lt,Ct,0,_t,J);mt._round(),s&&!op(t,mt,f,s,u)||K.push(mt)}}N+=We}return v||K.length||m||(K=tg(t,N/2,n,s,u,f,m,!0,E)),K}function Nh(t,e,n,s,u){const f=[];for(let m=0;m<t.length;m++){const v=t[m];let E;for(let C=0;C<v.length-1;C++){let R=v[C],N=v[C+1];R.x<e&&N.x<e||(R.x<e?R=new Qe(e,R.y+(e-R.x)/(N.x-R.x)*(N.y-R.y))._round():N.x<e&&(N=new Qe(e,R.y+(e-R.x)/(N.x-R.x)*(N.y-R.y))._round()),R.y<n&&N.y<n||(R.y<n?R=new Qe(R.x+(n-R.y)/(N.y-R.y)*(N.x-R.x),n)._round():N.y<n&&(N=new Qe(R.x+(n-R.y)/(N.y-R.y)*(N.x-R.x),n)._round()),R.x>=s&&N.x>=s||(R.x>=s?R=new Qe(s,R.y+(s-R.x)/(N.x-R.x)*(N.y-R.y))._round():N.x>=s&&(N=new Qe(s,R.y+(s-R.x)/(N.x-R.x)*(N.y-R.y))._round()),R.y>=u&&N.y>=u||(R.y>=u?R=new Qe(R.x+(u-R.y)/(N.y-R.y)*(N.x-R.x),u)._round():N.y>=u&&(N=new Qe(R.x+(u-R.y)/(N.y-R.y)*(N.x-R.x),u)._round()),E&&R.equals(E[E.length-1])||(E=[R],f.push(E)),E.push(N)))))}}return f}fi(Fc,"Anchor");const zh=1e20;function F_(t,e,n,s,u,f,m,v,E){for(let C=e;C<e+s;C++)B_(t,n*f+C,f,u,m,v,E);for(let C=n;C<n+u;C++)B_(t,C*f+e,1,s,m,v,E)}function B_(t,e,n,s,u,f,m){f[0]=0,m[0]=-zh,m[1]=zh,u[0]=t[e];for(let v=1,E=0,C=0;v<s;v++){u[v]=t[e+v*n];const R=v*v;do{const N=f[E];C=(u[v]-u[N]+R-N*N)/(v-N)/2}while(C<=m[E]&&--E>-1);E++,f[E]=v,m[E]=C,m[E+1]=zh}for(let v=0,E=0;v<s;v++){for(;m[E+1]<v;)E++;const C=f[E],R=v-C;t[e+v*n]=u[C]+R*R}}const ng={none:0,ideographs:1,all:2};class Hd{constructor(e,n,s){this.requestManager=e,this.localGlyphMode=n,this.localFontFamily=s,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,n){const s=[];for(const u in e)for(const f of e[u])s.push({stack:u,id:f});yt(s,({stack:u,id:f},m)=>{let v=this.entries[u];v||(v=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=v.glyphs[f];if(void 0!==E)return void m(null,{stack:u,id:f,glyph:E});if(E=this._tinySDF(v,u,f),E)return v.glyphs[f]=E,void m(null,{stack:u,id:f,glyph:E});const C=Math.floor(f/256);if(256*C>65535)return void m(new Error("glyphs > 65535 not supported"));if(v.ranges[C])return void m(null,{stack:u,id:f,glyph:E});let R=v.requests[C];R||(R=v.requests[C]=[],Hd.loadGlyphRange(u,C,this.url,this.requestManager,(N,H)=>{if(H){v.ascender=H.ascender,v.descender=H.descender;for(const K in H.glyphs)this._doesCharSupportLocalGlyph(+K)||(v.glyphs[+K]=H.glyphs[+K]);v.ranges[C]=!0}for(const K of R)K(N,H);delete v.requests[C]})),R.push((N,H)=>{N?m(N):H&&m(null,{stack:u,id:f,glyph:H.glyphs[f]||null})})},(u,f)=>{if(u)n(u);else if(f){const m={};for(const{stack:v,id:E,glyph:C}of f)void 0===m[v]&&(m[v]={}),void 0===m[v].glyphs&&(m[v].glyphs={}),m[v].glyphs[E]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},m[v].ascender=this.entries[v].ascender,m[v].descender=this.entries[v].descender;n(null,m)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==ng.none&&(this.localGlyphMode===ng.all?!!this.localFontFamily:!!this.localFontFamily&&(or(e)||vs(e)||k(e)||I(e)||O(e)))}_tinySDF(e,n,s){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(s))return;let f=e.tinySDF;if(!f){let se="400";/bold/i.test(n)?se="900":/medium/i.test(n)?se="500":/light/i.test(n)&&(se="200"),f=e.tinySDF=new Hd.TinySDF({fontFamily:u,fontWeight:se,fontSize:48,buffer:6,radius:16}),f.fontWeight=se}if(this.localGlyphs[f.fontWeight][s])return this.localGlyphs[f.fontWeight][s];const m=String.fromCharCode(s),{data:v,width:E,height:C,glyphWidth:R,glyphHeight:N,glyphLeft:H,glyphTop:K,glyphAdvance:J}=f.draw(m);return this.localGlyphs[f.fontWeight][s]={id:s,bitmap:new Oc({width:E,height:C},v),metrics:{width:R/2,height:N/2,left:H/2,top:K/2-27,advance:J/2,localGlyph:!0}}}}function N_(t,e,n,s){const u=[],f=t.image,m=f.pixelRatio,v=f.paddedRect.w-2,E=f.paddedRect.h-2,C=t.right-t.left,R=t.bottom-t.top,N=f.stretchX||[[0,v]],H=f.stretchY||[[0,E]],K=(_n,Bn)=>_n+Bn[1]-Bn[0],J=N.reduce(K,0),se=H.reduce(K,0),De=v-J,We=E-se;let _t=0,Ze=J,lt=0,Ct=se,mt=0,sn=De,en=0,In=We;if(f.content&&s){const _n=f.content;_t=sp(N,0,_n[0]),lt=sp(H,0,_n[1]),Ze=sp(N,_n[0],_n[2]),Ct=sp(H,_n[1],_n[3]),mt=_n[0]-_t,en=_n[1]-lt,sn=_n[2]-_n[0]-Ze,In=_n[3]-_n[1]-Ct}const Yn=(_n,Bn,Un,$n)=>{const Kn=ap(_n.stretch-_t,Ze,C,t.left),xn=lp(_n.fixed-mt,sn,_n.stretch,J),oi=ap(Bn.stretch-lt,Ct,R,t.top),Ri=lp(Bn.fixed-en,In,Bn.stretch,se),ui=ap(Un.stretch-_t,Ze,C,t.left),ai=lp(Un.fixed-mt,sn,Un.stretch,J),si=ap($n.stretch-lt,Ct,R,t.top),zi=lp($n.fixed-en,In,$n.stretch,se),_r=new Qe(Kn,oi),hr=new Qe(ui,oi),fr=new Qe(ui,si),Ui=new Qe(Kn,si),Vr=new Qe(xn/m,Ri/m),Zi=new Qe(ai/m,zi/m),yr=e*Math.PI/180;if(yr){const uo=Math.sin(yr),ho=Math.cos(yr),To=[ho,-uo,uo,ho];_r._matMult(To),hr._matMult(To),Ui._matMult(To),fr._matMult(To)}const Jr=_n.stretch+_n.fixed,co=Bn.stretch+Bn.fixed;return{tl:_r,tr:hr,bl:Ui,br:fr,tex:{x:f.paddedRect.x+1+Jr,y:f.paddedRect.y+1+co,w:Un.stretch+Un.fixed-Jr,h:$n.stretch+$n.fixed-co},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vr,pixelOffsetBR:Zi,minFontScaleX:sn/m/C,minFontScaleY:In/m/R,isSDF:n}};if(s&&(f.stretchX||f.stretchY)){const _n=z_(N,De,J),Bn=z_(H,We,se);for(let Un=0;Un<_n.length-1;Un++){const $n=_n[Un],Kn=_n[Un+1];for(let xn=0;xn<Bn.length-1;xn++)u.push(Yn($n,Bn[xn],Kn,Bn[xn+1]))}}else u.push(Yn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:v+1},{fixed:0,stretch:E+1}));return u}function sp(t,e,n){let s=0;for(const u of t)s+=Math.max(e,Math.min(n,u[1]))-Math.max(e,Math.min(n,u[0]));return s}function z_(t,e,n){const s=[{fixed:-1,stretch:0}];for(const[u,f]of t){const m=s[s.length-1];s.push({fixed:u-m.stretch,stretch:m.stretch}),s.push({fixed:u-m.stretch,stretch:m.stretch+(f-u)})}return s.push({fixed:e+1,stretch:n}),s}function ap(t,e,n,s){return t/e*n+s}function lp(t,e,n,s){return t-e*n/s}function Kc(t,e,n,s){const u=e+t.positionedLines[s].lineOffset;return 0===s?n+u/2:n+(u+(e+t.positionedLines[s-1].lineOffset))/2}Hd.loadGlyphRange=function(t,e,n,s,u){const f=256*e,m=f+255,v=s.transformRequest(s.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${f}-${m}`),te.Glyphs);ni(v,(E,C)=>{if(E)u(E);else if(C){const R={},N=new Bd(C).readFields(Lh,{});for(const H of N.glyphs)R[H.id]=H;u(null,{glyphs:R,ascender:N.ascender,descender:N.descender})}})},Hd.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:s=.25,fontFamily:u="sans-serif",fontWeight:f="normal",fontStyle:m="normal"}={}){this.buffer=e,this.cutoff=s,this.radius=n;const v=this.size=t+4*e,E=this._createCanvas(v),C=this.ctx=E.getContext("2d",{willReadFrequently:!0});C.font=`${m} ${f} ${t}px ${u}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:s,actualBoundingBoxLeft:u,actualBoundingBoxRight:f}=this.ctx.measureText(t),m=Math.ceil(n),v=Math.min(this.size-this.buffer,Math.ceil(f-u)),E=Math.min(this.size-this.buffer,m+Math.ceil(s)),C=v+2*this.buffer,R=E+2*this.buffer,N=Math.max(C*R,0),H=new Uint8ClampedArray(N),K={data:H,width:C,height:R,glyphWidth:v,glyphHeight:E,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(0===v||0===E)return K;const{ctx:J,buffer:se,gridInner:De,gridOuter:We}=this;J.clearRect(se,se,v,E),J.fillText(t,se,se+m);const _t=J.getImageData(se,se,v,E);We.fill(zh,0,N),De.fill(0,0,N);for(let Ze=0;Ze<E;Ze++)for(let lt=0;lt<v;lt++){const Ct=_t.data[4*(Ze*v+lt)+3]/255;if(0===Ct)continue;const mt=(Ze+se)*C+lt+se;if(1===Ct)We[mt]=0,De[mt]=zh;else{const sn=.5-Ct;We[mt]=sn>0?sn*sn:0,De[mt]=sn<0?sn*sn:0}}F_(We,0,0,C,R,C,this.f,this.v,this.z),F_(De,se,se,v,E,C,this.f,this.v,this.z);for(let Ze=0;Ze<N;Ze++){const lt=Math.sqrt(We[Ze])-Math.sqrt(De[Ze]);H[Ze]=Math.round(255-255*(lt/this.radius+this.cutoff))}return K}};class cp{constructor(e=[],n=U_){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:s}=this,u=n[e];for(;e>0;){const f=e-1>>1,m=n[f];if(s(u,m)>=0)break;n[e]=m,e=f}n[e]=u}_down(e){const{data:n,compare:s}=this,u=this.length>>1,f=n[e];for(;e<u;){let m=1+(e<<1),v=n[m];const E=m+1;if(E<this.length&&s(n[E],v)<0&&(m=E,v=n[E]),s(v,f)>=0)break;n[e]=v,e=m}n[e]=f}}function U_(t,e){return t<e?-1:t>e?1:0}function ig(t,e=1,n=!1){let s=1/0,u=1/0,f=-1/0,m=-1/0;const v=t[0];for(let K=0;K<v.length;K++){const J=v[K];(!K||J.x<s)&&(s=J.x),(!K||J.y<u)&&(u=J.y),(!K||J.x>f)&&(f=J.x),(!K||J.y>m)&&(m=J.y)}const E=Math.min(f-s,m-u);let C=E/2;const R=new cp([],up);if(0===E)return new Qe(s,u);for(let K=s;K<f;K+=E)for(let J=u;J<m;J+=E)R.push(new Eu(K+C,J+C,C,t));let N=function(K){let J=0,se=0,De=0;const We=K[0];for(let _t=0,Ze=We.length,lt=Ze-1;_t<Ze;lt=_t++){const Ct=We[_t],mt=We[lt],sn=Ct.x*mt.y-mt.x*Ct.y;se+=(Ct.x+mt.x)*sn,De+=(Ct.y+mt.y)*sn,J+=3*sn}return new Eu(se/J,De/J,0,K)}(t),H=R.length;for(;R.length;){const K=R.pop();(K.d>N.d||!N.d)&&(N=K,n&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,H)),K.max-N.d<=e||(C=K.h/2,R.push(new Eu(K.p.x-C,K.p.y-C,C,t)),R.push(new Eu(K.p.x+C,K.p.y-C,C,t)),R.push(new Eu(K.p.x-C,K.p.y+C,C,t)),R.push(new Eu(K.p.x+C,K.p.y+C,C,t)),H+=4)}return n&&(console.log(`num probes: ${H}`),console.log(`best distance: ${N.d}`)),N.p}function up(t,e){return e.max-t.max}function Eu(t,e,n,s){this.p=new Qe(t,e),this.h=n,this.d=function(u,f){let m=!1,v=1/0;for(let E=0;E<f.length;E++){const C=f[E];for(let R=0,N=C.length,H=N-1;R<N;H=R++){const K=C[R],J=C[H];K.y>u.y!=J.y>u.y&&u.x<(J.x-K.x)*(u.y-K.y)/(J.y-K.y)+K.x&&(m=!m),v=Math.min(v,If(u,K,J))}}return(m?1:-1)*Math.sqrt(v)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}const Gd=Number.POSITIVE_INFINITY,V_=Math.sqrt(2);function Bc(t,[e,n]){let s=0,u=0;if(n===Gd){e<0&&(e=0);const f=e/V_;switch(t){case"top-right":case"top-left":u=f-7;break;case"bottom-right":case"bottom-left":u=7-f;break;case"bottom":u=7-e;break;case"top":u=e-7}switch(t){case"top-right":case"bottom-right":s=-f;break;case"top-left":case"bottom-left":s=f;break;case"left":s=e;break;case"right":s=-e}}else{switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":u=n-7;break;case"bottom-right":case"bottom-left":case"bottom":u=7-n}switch(t){case"top-right":case"bottom-right":case"right":s=-e;break;case"top-left":case"bottom-left":case"left":s=e}}return[s,u]}function rg(t,e,n,s,u,f,m,v,E,C){t.createArrays(),t.tilePixelRatio=ki/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const R=t.layers[0].layout,N=t.layers[0]._unevaluatedLayout._values,H={};if("composite"===t.textSizeData.kind){const{minZoom:se,maxZoom:De}=t.textSizeData;H.compositeTextSizes=[N["text-size"].possiblyEvaluate(new $t(se),v),N["text-size"].possiblyEvaluate(new $t(De),v)]}if("composite"===t.iconSizeData.kind){const{minZoom:se,maxZoom:De}=t.iconSizeData;H.compositeIconSizes=[N["icon-size"].possiblyEvaluate(new $t(se),v),N["icon-size"].possiblyEvaluate(new $t(De),v)]}H.layoutTextSize=N["text-size"].possiblyEvaluate(new $t(E+1),v),H.layoutIconSize=N["icon-size"].possiblyEvaluate(new $t(E+1),v),H.textMaxSize=N["text-size"].possiblyEvaluate(new $t(18),v);const K="map"===R.get("text-rotation-alignment")&&"point"!==R.get("symbol-placement"),J=R.get("text-size");for(const se of t.features){const De=R.get("text-font").evaluate(se,{},v).join(","),We=J.evaluate(se,{},v),_t=H.layoutTextSize.evaluate(se,{},v),Ze=(H.layoutIconSize.evaluate(se,{},v),{horizontal:{},vertical:void 0}),lt=se.text;let Ct,mt=[0,0];if(lt){const In=lt.toString(),Yn=24*R.get("text-letter-spacing").evaluate(se,{},v),_n=24*R.get("text-line-height").evaluate(se,{},v),Bn=P(In)?Yn:0,Un=R.get("text-anchor").evaluate(se,{},v),$n=R.get("text-variable-anchor");if(!$n){const ui=R.get("text-radial-offset").evaluate(se,{},v);mt=ui?Bc(Un,[24*ui,Gd]):R.get("text-offset").evaluate(se,{},v).map(ai=>24*ai)}let Kn=K?"center":R.get("text-justify").evaluate(se,{},v);const xn="point"===R.get("symbol-placement"),oi=xn?24*R.get("text-max-width").evaluate(se,{},v):1/0,Ri=ui=>{t.allowVerticalPlacement&&D(In)&&(Ze.vertical=qm(lt,e,n,u,De,oi,_n,Un,ui,Bn,mt,ka.vertical,!0,_t,We))};if(!K&&$n){const ui="auto"===Kn?$n.map(si=>dp(si)):[Kn];let ai=!1;for(let si=0;si<ui.length;si++){const zi=ui[si];if(!Ze.horizontal[zi])if(ai)Ze.horizontal[zi]=Ze.horizontal[0];else{const _r=qm(lt,e,n,u,De,oi,_n,"center",zi,Bn,mt,ka.horizontal,!1,_t,We);_r&&(Ze.horizontal[zi]=_r,ai=1===_r.positionedLines.length)}}Ri("left")}else{if("auto"===Kn&&(Kn=dp(Un)),xn||R.get("text-writing-mode").indexOf("horizontal")>=0||!D(In)){const ui=qm(lt,e,n,u,De,oi,_n,Un,Kn,Bn,mt,ka.horizontal,!1,_t,We);ui&&(Ze.horizontal[Kn]=ui)}Ri(xn?"left":Kn)}}let sn=!1;if(se.icon&&se.icon.name){const In=s[se.icon.name];In&&(Ct=R_(u[se.icon.name],R.get("icon-offset").evaluate(se,{},v),R.get("icon-anchor").evaluate(se,{},v)),sn=In.sdf,void 0===t.sdfIcons?t.sdfIcons=In.sdf:t.sdfIcons!==In.sdf&&Xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(In.pixelRatio!==t.pixelRatio||0!==R.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const en=sg(Ze.horizontal)||Ze.vertical;t.iconsInText||(t.iconsInText=!!en&&en.iconsInText),(en||Ct)&&j_(t,se,Ze,Ct,s,H,_t,0,mt,sn,m,v,C)}f&&t.generateCollisionDebugBuffers(E,t.collisionBoxArray)}function dp(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function j_(t,e,n,s,u,f,m,v,E,C,R,N,H){let K=f.textMaxSize.evaluate(e,{},N);void 0===K&&(K=m);const J=t.layers[0].layout,se=J.get("icon-offset").evaluate(e,{},N),De=sg(n.horizontal)||n.vertical,We="globe"===H.name,_t=m/24,Ze=t.tilePixelRatio*K/24,lt=(Bn=t.overscaling,t.zoom>18&&Bn>2&&(Bn>>=1),Math.max(ki/(512*Bn),1)*J.get("symbol-spacing")),Ct=J.get("text-padding")*t.tilePixelRatio,mt=J.get("icon-padding")*t.tilePixelRatio,sn=Ce(J.get("text-max-angle")),en="map"===J.get("text-rotation-alignment")&&"point"!==J.get("symbol-placement"),In="map"===J.get("icon-rotation-alignment")&&"point"!==J.get("symbol-placement"),Yn=J.get("symbol-placement"),_n=lt/2;var Bn;const Un=J.get("icon-text-fit");let $n;s&&"none"!==Un&&(t.allowVerticalPlacement&&n.vertical&&($n=Xm(s,n.vertical,Un,J.get("icon-text-fit-padding"),se,_t)),De&&(s=Xm(s,De,Un,J.get("icon-text-fit-padding"),se,_t)));const Kn=(xn,oi,Ri)=>{if(oi.x<0||oi.x>=ki||oi.y<0||oi.y>=ki)return;let ui=null;if(We){const{x:ai,y:si,z:zi}=H.projectTilePoint(oi.x,oi.y,Ri);ui={anchor:new Fc(ai,si,zi,0,void 0),up:H.upVector(Ri,oi.x,oi.y)}}!function(ai,si,zi,_r,hr,fr,Ui,Vr,Zi,yr,Jr,co,uo,ho,To,Ro,hs,Er,Qo,qo,ur,Lr,fo,qr,Bo){const ia=ai.addToLineVertexArray(si,_r);let As,Is,ya,fs,ul,ld,cd,nh=0,Sp=0,Ap=0,ih=0,Ip=-1,rf=-1;const Ql={};let sf=qa.exports("");const yc=zi?zi.anchor:si;let rh=0,af=0;if(void 0===Zi._unevaluatedLayout.getValue("text-radial-offset")?[rh,af]=Zi.layout.get("text-offset").evaluate(ur,{},Bo).map(Fa=>24*Fa):(rh=24*Zi.layout.get("text-radial-offset").evaluate(ur,{},Bo),af=Gd),ai.allowVerticalPlacement&&hr.vertical){const Fa=hr.vertical;if(To)ld=Xc(Fa),Vr&&(cd=Xc(Vr));else{const Ba=Zi.layout.get("text-rotate").evaluate(ur,{},Bo)+90;ya=Cu(yr,yc,si,Jr,co,uo,Fa,ho,Ba,Ro),Vr&&(fs=Cu(yr,yc,si,Jr,co,uo,Vr,Er,Ba))}}if(fr){const Fa=Zi.layout.get("icon-rotate").evaluate(ur,{},Bo),Ba="none"!==Zi.layout.get("icon-text-fit"),ud=N_(fr,Fa,fo,Ba),Pp=Vr?N_(Vr,Fa,fo,Ba):void 0;Is=Cu(yr,yc,si,Jr,co,uo,fr,Er,Fa),nh=4*ud.length;const Tg=ai.iconSizeData;let Ou=null;"source"===Tg.kind?(Ou=[fc*Zi.layout.get("icon-size").evaluate(ur,{},Bo)],Ou[0]>Nc&&Xe(`${ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Tg.kind&&(Ou=[fc*Lr.compositeIconSizes[0].evaluate(ur,{},Bo),fc*Lr.compositeIconSizes[1].evaluate(ur,{},Bo)],(Ou[0]>Nc||Ou[1]>Nc)&&Xe(`${ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ai.addSymbols(ai.icon,ud,Ou,qo,Qo,ur,!1,zi,si,ia.lineStartIndex,ia.lineLength,-1,qr,Bo),Ip=ai.icon.placedSymbolArray.length-1,Pp&&(Sp=4*Pp.length,ai.addSymbols(ai.icon,Pp,Ou,qo,Qo,ur,ka.vertical,zi,si,ia.lineStartIndex,ia.lineLength,-1,qr,Bo),rf=ai.icon.placedSymbolArray.length-1)}for(const Fa in hr.horizontal){const Ba=hr.horizontal[Fa];As||(sf=qa.exports(Ba.text),To?ul=Xc(Ba):As=Cu(yr,yc,si,Jr,co,uo,Ba,ho,Zi.layout.get("text-rotate").evaluate(ur,{},Bo),Ro));const ud=1===Ba.positionedLines.length;if(Ap+=og(ai,zi,si,Ba,Ui,Zi,To,ur,Ro,ia,hr.vertical?ka.horizontal:ka.horizontalOnly,ud?Object.keys(hr.horizontal):[Fa],Ql,Ip,Lr,qr,Bo),ud)break}hr.vertical&&(ih+=og(ai,zi,si,hr.vertical,Ui,Zi,To,ur,Ro,ia,ka.vertical,["vertical"],Ql,rf,Lr,qr,Bo));let Hc=-1;const lf=(Fa,Ba)=>Fa?Math.max(Fa,Ba):Ba;Hc=lf(ul,Hc),Hc=lf(ld,Hc),Hc=lf(cd,Hc);const Dg=Hc>-1?1:0;ai.glyphOffsetArray.length>=nu.MAX_GLYPHS&&Xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ur.sortKey&&ai.addToSortKeyRanges(ai.symbolInstances.length,ur.sortKey),ai.symbolInstances.emplaceBack(yc.x,yc.y,yc.z,si.x,si.y,Ql.right>=0?Ql.right:-1,Ql.center>=0?Ql.center:-1,Ql.left>=0?Ql.left:-1,Ql.vertical>=0?Ql.vertical:-1,Ip,rf,sf,void 0!==As?As:ai.collisionBoxArray.length,void 0!==As?As+1:ai.collisionBoxArray.length,void 0!==ya?ya:ai.collisionBoxArray.length,void 0!==ya?ya+1:ai.collisionBoxArray.length,void 0!==Is?Is:ai.collisionBoxArray.length,void 0!==Is?Is+1:ai.collisionBoxArray.length,fs||ai.collisionBoxArray.length,fs?fs+1:ai.collisionBoxArray.length,Jr,Ap,ih,nh,Sp,Dg,0,rh,af,Hc)}(t,oi,ui,xn,n,s,u,$n,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,Ct,en,E,0,mt,In,se,e,f,C,R,N)};if("line"===Yn)for(const xn of Nh(e.geometry,0,0,ki,ki)){const oi=eg(xn,lt,sn,n.vertical||De,s,24,Ze,t.overscaling,ki);for(const Ri of oi){const ui=De;ui&&hp(t,ui.text,_n,Ri)||Kn(xn,Ri,N)}}else if("line-center"===Yn){for(const xn of e.geometry)if(xn.length>1){const oi=Jm(xn,sn,n.vertical||De,s,24,Ze);oi&&Kn(xn,oi,N)}}else if("Polygon"===e.type)for(const xn of jf(e.geometry,0)){const oi=ig(xn,16);Kn(xn[0],new Fc(oi.x,oi.y,0,0,void 0),N)}else if("LineString"===e.type)for(const xn of e.geometry)Kn(xn,new Fc(xn[0].x,xn[0].y,0,0,void 0),N);else if("Point"===e.type)for(const xn of e.geometry)for(const oi of xn)Kn([oi],new Fc(oi.x,oi.y,0,0,void 0),N)}const Nc=32640;function og(t,e,n,s,u,f,m,v,E,C,R,N,H,K,J,se,De){const We=function(lt,Ct,mt,sn,en,In,Yn,_n){const Bn=[];if(0===Ct.positionedLines.length)return Bn;const Un=sn.layout.get("text-rotate").evaluate(In,{})*Math.PI/180,$n=function(ui){const ai=ui[0],si=ui[1],zi=ai*si;return zi>0?[ai,-si]:zi<0?[-ai,si]:0===ai?[si,ai]:[si,-ai]}(mt);let Kn=Math.abs(Ct.top-Ct.bottom);for(const ui of Ct.positionedLines)Kn-=ui.lineOffset;const xn=Ct.positionedLines.length,oi=Kn/xn;let Ri=Ct.top-mt[1];for(let ui=0;ui<xn;++ui){const ai=Ct.positionedLines[ui];Ri=Kc(Ct,oi,Ri,ui);for(const si of ai.positionedGlyphs){if(!si.rect)continue;const zi=si.rect||{};let _r=4,hr=!0,fr=1,Ui=0;if(si.imageName){const qr=Yn[si.imageName];if(!qr)continue;if(qr.sdf){Xe("SDF images are not supported in formatted text and will be ignored.");continue}hr=!1,fr=qr.pixelRatio,_r=1/fr}const Vr=(en||_n)&&si.vertical,Zi=si.metrics.advance*si.scale/2,yr=si.metrics,Jr=si.rect;if(null===Jr)continue;_n&&Ct.verticalizable&&(Ui=si.imageName?Zi-si.metrics.width*si.scale/2:0);const co=en?[si.x+Zi,si.y]:[0,0];let uo=[0,0],ho=[0,0],To=!1;en||(Vr?(ho=[si.x+Zi+$n[0],si.y+$n[1]-Ui],To=!0):uo=[si.x+Zi+mt[0],si.y+mt[1]-Ui]);const Ro=Jr.w*si.scale/(fr*(si.localGlyph?2:1)),hs=Jr.h*si.scale/(fr*(si.localGlyph?2:1));let Er,Qo,qo,ur;if(Vr){const qr=si.y-Ri,Bo=new Qe(-Zi,Zi-qr),ia=-Math.PI/2,As=new Qe(...ho);Er=new Qe(-Zi+uo[0],uo[1]),Er._rotateAround(ia,Bo)._add(As),Er.x+=-qr+Zi,Er.y-=(yr.left-_r)*si.scale;const Is=si.imageName?yr.advance*si.scale:24*si.scale,ya=String.fromCharCode(si.glyph);I_(ya)?Er.x+=(1-_r)*si.scale:Yu(ya)?Er.x+=Is-yr.height*si.scale+(-_r-1)*si.scale:Er.x+=si.imageName||yr.width+2*_r===Jr.w&&yr.height+2*_r===Jr.h?(Is-hs)/2:(Is-(yr.height+2*_r)*si.scale)/2,Qo=new Qe(Er.x,Er.y-Ro),qo=new Qe(Er.x+hs,Er.y),ur=new Qe(Er.x+hs,Er.y-Ro)}else{const qr=(yr.left-_r)*si.scale-Zi+uo[0],Bo=(-yr.top-_r)*si.scale+uo[1],ia=qr+Ro,As=Bo+hs;Er=new Qe(qr,Bo),Qo=new Qe(ia,Bo),qo=new Qe(qr,As),ur=new Qe(ia,As)}if(Un){let qr;qr=en?new Qe(0,0):To?new Qe($n[0],$n[1]):new Qe(mt[0],mt[1]),Er._rotateAround(Un,qr),Qo._rotateAround(Un,qr),qo._rotateAround(Un,qr),ur._rotateAround(Un,qr)}const Lr=new Qe(0,0),fo=new Qe(0,0);Bn.push({tl:Er,tr:Qo,bl:qo,br:ur,tex:zi,writingMode:Ct.writingMode,glyphOffset:co,sectionIndex:si.sectionIndex,isSDF:hr,pixelOffsetTL:Lr,pixelOffsetBR:fo,minFontScaleX:0,minFontScaleY:0})}}return Bn}(0,s,E,f,m,v,u,t.allowVerticalPlacement),_t=t.textSizeData;let Ze=null;"source"===_t.kind?(Ze=[fc*f.layout.get("text-size").evaluate(v,{},De)],Ze[0]>Nc&&Xe(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===_t.kind&&(Ze=[fc*J.compositeTextSizes[0].evaluate(v,{},De),fc*J.compositeTextSizes[1].evaluate(v,{},De)],(Ze[0]>Nc||Ze[1]>Nc)&&Xe(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,We,Ze,E,m,v,R,e,n,C.lineStartIndex,C.lineLength,K,se,De);for(const lt of N)H[lt]=t.text.placedSymbolArray.length-1;return 4*We.length}function sg(t){for(const e in t)return t[e];return null}function Cu(t,e,n,s,u,f,m,v,E,C){let R=m.top,N=m.bottom,H=m.left,K=m.right;const J=m.collisionPadding;if(J&&(H-=J[0],R-=J[1],K+=J[2],N+=J[3]),E){const se=new Qe(H,R),De=new Qe(K,R),We=new Qe(H,N),_t=new Qe(K,N),Ze=Ce(E);let lt=new Qe(0,0);C&&(lt=new Qe(C[0],C[1])),se._rotateAround(Ze,lt),De._rotateAround(Ze,lt),We._rotateAround(Ze,lt),_t._rotateAround(Ze,lt),H=Math.min(se.x,De.x,We.x,_t.x),K=Math.max(se.x,De.x,We.x,_t.x),R=Math.min(se.y,De.y,We.y,_t.y),N=Math.max(se.y,De.y,We.y,_t.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,H,R,K,N,v,s,u,f),t.length-1}function Xc(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function hp(t,e,n,s){const u=t.compareText;if(e in u){const f=u[e];for(let m=f.length-1;m>=0;m--)if(s.dist(f[m])<n)return!0}else u[e]=[];return u[e].push(s),!1}const Qu=gi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Uh}=Qu,$d=gi([{name:"a_pos_3",components:3,type:"Int16"}]);var Ju=gi([{name:"a_pos",type:"Int16",components:2}]);const mc=ki/Math.PI/2,Zd=2*Ya(1,0)*mc*Math.PI,Mu=[64,32,16],Ja=-mc,Pl=mc,t0=[new ta([Ja,Ja,Ja],[Pl,Pl,Pl]),new ta([Ja,Ja,Ja],[0,0,Pl]),new ta([0,Ja,Ja],[Pl,0,Pl]),new ta([Ja,0,Ja],[0,Pl,Pl]),new ta([0,0,Ja],[Pl,Pl,Pl])];function ag(t,e,n,s=!0){const u=Xa([],t._camera.position,t.worldSize),f=[e,n,1,1];Pc(f,f,t.pixelMatrixInverse),om(f,f,1/f[3]);const m=pa([],Al([],f,u)),v=t.globeMatrix,E=[v[12],v[13],v[14]],C=Al([],E,u),R=yh(C),N=pa([],C),H=t.worldSize/(2*Math.PI),K=Qa(N,m),J=Math.asin(H/R);if(J<Math.acos(K)){if(!s)return null;const Yn=[],_n=[];Xa(Yn,m,R/K),pa(_n,Al(_n,Yn,C)),pa(m,Ic(m,C,Xa(m,_n,Math.tan(J)*R)))}const se=[];new kf(u,m).closestPointOnSphere(E,H,se);const De=pa([],Dn(v,0)),We=pa([],Dn(v,1)),_t=pa([],Dn(v,2)),Ze=Qa(De,se),lt=Qa(We,se),Ct=Qa(_t,se),mt=we(Math.asin(-lt/H));let sn=we(Math.atan2(Ze,Ct));sn=t.center.lng+function(Yn,_n){const Bn=(_n-Yn+180)%360-180;return Bn<-180?Bn+360:Bn}(t.center.lng,sn);const en=Hl(sn),In=Ke(Gl(mt),0,1);return new Tl(en,In)}class lg{constructor(e,n,s){this.a=Al([],e,s),this.b=Al([],n,s),this.center=s;const u=pa([],this.a),f=pa([],this.b);this.angle=Math.acos(Qa(u,f))}}function fp(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(s,u,f,m){const v=Math.sin(f);return s*(Math.sin((1-m)*f)/v)+u*(Math.sin(m*f)/v)}(t.a[e],t.b[e],t.angle,Ke(n,0,1))+t.center[e]}function ql(t){if(t.z<=1)return t0[t.z+2*t.y+t.x];const e=dg(Vh(t));return ta.fromPoints(e)}function Jc(t,e,n){return Xa(t,t,1-n),_u(t,t,e,n)}function cg(t,e){const n=Tu(e.zoom);if(0===n)return ql(t);const s=Vh(t),u=dg(s),f=Hl(s.getWest())*e.worldSize,m=Hl(s.getEast())*e.worldSize,v=Gl(s.getNorth())*e.worldSize,E=Gl(s.getSouth())*e.worldSize,C=[f,v,0],R=[m,v,0],N=[f,E,0],H=[m,E,0],K=Pf([],e.globeMatrix);return Vo(C,C,K),Vo(R,R,K),Vo(N,N,K),Vo(H,H,K),u[0]=Jc(u[0],N,n),u[1]=Jc(u[1],H,n),u[2]=Jc(u[2],R,n),u[3]=Jc(u[3],C,n),ta.fromPoints(u)}function el(t,e,n){for(const s of t)Vo(s,s,e),Xa(s,s,n)}function Vh({x:t,y:e,z:n}){const s=1/(1<<n),u=new Sr(Dl(t*s),Gs((e+1)*s)),f=new Sr(Dl((t+1)*s),Gs(e*s));return new sc(u,f)}function dg(t){const e=Ce(t.getNorth()),n=Ce(t.getSouth()),s=Math.cos(e),u=Math.cos(n),f=Math.sin(e),m=Math.sin(n),v=t.getWest(),E=t.getEast();return[ed(u,m,v),ed(u,m,E),ed(s,f,E),ed(s,f,v)]}function ed(t,e,n,s=mc){return n=Ce(n),[t*Math.sin(n)*s,-e*s,t*Math.cos(n)*s]}function Du(t,e,n){return ed(Math.cos(Ce(t)),Math.sin(Ce(t)),e,n)}function td(t,e,n,s){const u=1<<n.z,f=(t/ki+n.x)/u;return Du(Gs((e/ki+n.y)/u),Dl(f),s)}function jh({min:t,max:e}){return 16383/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const hg=new Float64Array(16);function Wd(t){const e=jh(t),n=r_(hg,[e,e,e]);return vd(n,n,((s=[])[0]=-(u=t.min)[0],s[1]=-u[1],s[2]=-u[2],s));var s,u}function Hh(t){const e=(s=t.min,(n=hg)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=s[0],n[13]=s[1],n[14]=s[2],n[15]=1,n);var n,s;const u=1/jh(t);return gu(e,e,[u,u,u])}function fg(t,e,n,s,u){const f=function(E){const C=ki/(2*Math.PI);return E/(2*Math.PI)/C}(n),m=[t,e,-n/(2*Math.PI)],v=Sl(new Float64Array(16));return vd(v,v,m),gu(v,v,[f,f,f]),xd(v,v,Ce(-u)),Of(v,v,Ce(-s)),v}function Tu(t){return Ne(5,6,t)}function pg(t,e){const n=Du(e.lat,e.lng);return m=(u=vh([],function(J){const se=Du(J._center.lat,J._center.lng);let De=yu([],bd(0,1,0),se);const We=_h([],-J.angle,se);De=Vo(De,De,We),_h(We,-J._pitch,De);const _t=pa([],se);return Xa(_t,_t,J.cameraToCenterDistance/J.pixelsPerMeter*Zd),Vo(_t,_t,We),Ic([],se,_t)}(t),n))[0],v=u[1],E=u[2],C=(f=n)[0],R=f[1],N=f[2],K=(H=Math.sqrt(m*m+v*v+E*E)*Math.sqrt(C*C+R*R+N*N))&&Qa(u,f)/H,Math.acos(Math.min(Math.max(K,-1),1));var u,f,m,v,E,C,R,N,H,K}function pp(t,e){return pg(t,e)>Math.PI/2*1.01}const mp=Ce(85),mg=Math.cos(mp),H_=Math.sin(mp);function Yl(t,e){const n=t.fovAboveCenter,s=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,u=(t._camera.position[2]*t.worldSize-s)/Math.cos(t._pitch),f=Math.sin(n)*u/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),m=Math.sin(t._pitch)*f+u;return Math.min(1.01*m,u*(1/t._horizonShift))}function zc(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),s=t.x*n,u=(t.x+1)*n,f=t.y*n,m=(t.y+1)*n,v=Dl(s),E=Dl(u),C=Gs(f),R=Gs(m),N=e.project(v,C),H=e.project(E,C),K=e.project(E,R),J=e.project(v,R);let se=Math.min(N.x,H.x,K.x,J.x),De=Math.min(N.y,H.y,K.y,J.y),We=Math.max(N.x,H.x,K.x,J.x),_t=Math.max(N.y,H.y,K.y,J.y);const Ze=n/16;function lt(mt,sn,en,In,Yn,_n){const Bn=(en+Yn)/2,Un=(In+_n)/2,$n=e.project(Dl(Bn),Gs(Un)),Kn=Math.max(0,se-$n.x,De-$n.y,$n.x-We,$n.y-_t);se=Math.min(se,$n.x),We=Math.max(We,$n.x),De=Math.min(De,$n.y),_t=Math.max(_t,$n.y),Kn>Ze&&(lt(mt,$n,en,In,Bn,Un),lt($n,sn,Bn,Un,Yn,_n))}lt(N,H,s,f,u,f),lt(H,K,u,f,u,m),lt(K,J,u,m,s,m),lt(J,N,s,m,s,f),se-=Ze,De-=Ze,We+=Ze,_t+=Ze;const Ct=1/Math.max(We-se,_t-De);return{scale:Ct,x:se*Ct,y:De*Ct,x2:We*Ct,y2:_t*Ct,projection:e}}const G_=Sl(new Float32Array(16));class eu{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,n){return{x:0,y:0,z:0}}unproject(e,n){return new Sr(0,0)}projectTilePoint(e,n,s){return{x:e,y:n,z:0}}locationPoint(e,n,s=!0){return e._coordinatePoint(e.locationCoordinate(n),s)}pixelsPerMeter(e,n){return Ya(1,e)*n}pixelSpaceConversion(e,n,s){return 1}farthestPixelDistance(e){return Yl(e,e.pixelsPerMeter)}pointCoordinate(e,n,s,u){const f=e.horizonLineFromTop(!1),m=new Qe(n,Math.max(f,s));return e.rayIntersectionCoordinate(e.pointRayIntersection(m,u))}pointCoordinate3D(e,n,s){const u=new Qe(n,s);if(e.elevation)return e.elevation.pointCoordinate(u);{const f=this.pointCoordinate(e,u.x,u.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(e,n){if(e.elevation)return!this.pointCoordinate3D(e,n.x,n.y);const s=e.horizonLineFromTop();return n.y<s}createInversionMatrix(e,n){return G_}createTileMatrix(e,n,s){let u,f,m;const v=s.canonical,E=Sl(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=zc(v,this);u=1,f=C.x+s.wrap*C.scale,m=C.y,gu(E,E,[u/C.scale,u/C.scale,e.pixelsPerMeter/n])}else u=n/e.zoomScale(v.z),f=(v.x+Math.pow(2,v.z)*s.wrap)*u,m=v.y*u;return vd(E,E,[f,m,0]),gu(E,E,[u/ki,u/ki,1]),E}upVector(e,n,s){return[0,0,1]}upVectorScale(e,n,s){return{metersToTile:1}}}class n0 extends eu{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[n,s]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(Ce(n));this.n=(u+Math.sin(Ce(s)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,n){const{n:s,c:u,r0:f}=this,m=Ce(e-this.center[0]),v=Ce(n),E=Math.sqrt(u-2*s*Math.sin(v))/s;return{x:E*Math.sin(m*s),y:E*Math.cos(m*s)-f,z:0}}unproject(e,n){const{n:s,c:u,r0:f}=this,m=f+n;let v=Math.atan2(e,Math.abs(m))*Math.sign(m);m*s<0&&(v-=Math.PI*Math.sign(e)*Math.sign(m));const E=Ce(this.center[0])*s;v=He(v,-Math.PI-E,Math.PI-E);const C=Ke(we(v/s)+this.center[0],-180,180),R=Math.asin(Ke((u-(e*e+m*m)*s*s)/(2*s),-1,1)),N=Ke(we(R),-85.051129,$l);return new Sr(C,N)}}const nd=1.340264,qd=-.081106,Yd=893e-6,Kd=.003796,id=Math.sqrt(3)/2;class $_ extends eu{project(e,n){n=n/180*Math.PI,e=e/180*Math.PI;const s=Math.asin(id*Math.sin(n)),u=s*s,f=u*u*u;return{x:.5*(e*Math.cos(s)/(id*(nd+3*qd*u+f*(7*Yd+9*Kd*u)))/Math.PI+.5),y:1-.5*(s*(nd+qd*u+f*(Yd+Kd*u))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let s=n=(2*(1-n)-1)*Math.PI,u=s*s,f=u*u*u;for(let R,N,H,K=0;K<12&&(N=s*(nd+qd*u+f*(Yd+Kd*u))-n,H=nd+3*qd*u+f*(7*Yd+9*Kd*u),R=N/H,s=Ke(s-R,-Math.PI/3,Math.PI/3),u=s*s,f=u*u*u,!(Math.abs(R)<1e-12));++K);const m=id*e*(nd+3*qd*u+f*(7*Yd+9*Kd*u))/Math.cos(s),v=Math.asin(Math.sin(s)/id),E=Ke(180*m/Math.PI,-180,180),C=Ke(180*v/Math.PI,-85.051129,$l);return new Sr(E,C)}}class Z_ extends eu{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){return{x:.5+e/360,y:.5-n/360,z:0}}unproject(e,n){const s=360*(e-.5),u=Ke(360*(.5-n),-85.051129,$l);return new Sr(s,u)}}const Uc=Math.PI/2;function rd(t){return Math.tan((Uc+t)/2)}class Gh extends eu{constructor(e){super(e),this.center=e.center||[0,30];const[n,s]=this.parallels=e.parallels||[30,30];let u=Ce(n),f=Ce(s);this.southernCenter=u+f<0,this.southernCenter&&(u=-u,f=-f);const m=Math.cos(u),v=rd(u);this.n=u===f?Math.sin(u):Math.log(m/Math.cos(f))/Math.log(rd(f)/v),this.f=m*Math.pow(rd(u),this.n)/this.n}project(e,n){n=Ce(n),this.southernCenter&&(n=-n),e=Ce(e-this.center[0]);const s=1e-6,{n:u,f}=this;f>0?n<-Uc+s&&(n=-Uc+s):n>Uc-s&&(n=Uc-s);const m=f/Math.pow(rd(n),u);let v=m*Math.sin(u*e),E=f-m*Math.cos(u*e);return v=.5*(v/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:v,y:this.southernCenter?E:1-E,z:0}}unproject(e,n){e=(2*e-.5)*Math.PI,this.southernCenter&&(n=1-n),n=(2*(1-n)-.5)*Math.PI;const{n:s,f:u}=this,f=u-n,m=Math.sign(f),v=Math.sign(s)*Math.sqrt(e*e+f*f);let E=Math.atan2(e,Math.abs(f))*m;f*s<0&&(E-=Math.PI*Math.sign(e)*m);const C=Ke(we(E/s)+this.center[0],-180,180),R=Ke(we(2*Math.atan(Math.pow(u/v,1/s))-Uc),-85.051129,$l);return new Sr(C,this.southernCenter?-R:R)}}class W_ extends eu{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,n){return{x:Hl(e),y:Gl(n),z:0}}unproject(e,n){const s=Dl(e),u=Gs(n);return new Sr(s,u)}}const $h=Ce($l);class r0 extends eu{project(e,n){const s=(n=Ce(n))*n,u=s*s;return{x:.5*((e=Ce(e))*(.8707-.131979*s+u*(u*(.003971*s-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(n*(1.007226+s*(.015085+u*(.028874*s-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let s=n=(2*(1-n)-1)*Math.PI,u=25,f=0,m=s*s;do{m=s*s;const C=m*m;f=(s*(1.007226+m*(.015085+C*(.028874*m-.044475-.005916*C)))-n)/(1.007226+m*(.045255+C*(.259866*m-.311325-.005916*11*C))),s=Ke(s-f,-$h,$h)}while(Math.abs(f)>1e-6&&--u>0);m=s*s;const v=Ke(we(e/(.8707+m*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979))),-180,180),E=we(s);return new Sr(v,E)}}const gp=Ce($l);class gg extends eu{project(e,n){n=Ce(n),e=Ce(e);const s=Math.cos(n),u=2/Math.PI,f=Math.acos(s*Math.cos(e/2)),m=Math.sin(f)/f,v=.5*(e*u+2*s*Math.sin(e/2)/m)||0,E=.5*(n+Math.sin(n)/m)||0;return{x:.5*(v/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(e,n){let s=e=(2*e-.5)*Math.PI,u=n=(2*(1-n)-1)*Math.PI,f=25;const m=1e-6;let v=0,E=0;do{const C=Math.cos(u),R=Math.sin(u),N=2*R*C,H=R*R,K=C*C,J=Math.cos(s/2),se=Math.sin(s/2),De=2*J*se,We=se*se,_t=1-K*J*J,Ze=_t?1/_t:0,lt=_t?Math.acos(C*J)*Math.sqrt(1/_t):0,Ct=.5*(2*lt*C*se+2*s/Math.PI)-e,mt=.5*(lt*R+u)-n,sn=.5*Ze*(K*We+lt*C*J*H)+1/Math.PI,en=Ze*(De*N/4-lt*R*se),In=.125*Ze*(N*se-lt*R*K*De),Yn=.5*Ze*(H*J+lt*We*C)+.5,_n=en*In-Yn*sn;v=(mt*en-Ct*Yn)/_n,E=(Ct*In-mt*sn)/_n,s=Ke(s-v,-Math.PI,Math.PI),u=Ke(u-E,-gp,gp)}while((Math.abs(v)>m||Math.abs(E)>m)&&--f>0);return new Sr(we(s),we(u))}}class _p extends eu{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ce(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){const{scale:s,cosPhi:u}=this;return{x:Ce(e)*u*s+.5,y:-Math.sin(Ce(n))/u*s+.5,z:0}}unproject(e,n){const{scale:s,cosPhi:u}=this,f=-(n-.5)/s,m=Ke(we((e-.5)/s)/u,-180,180),v=Math.asin(Ke(f*u,-1,1)),E=Ke(we(v),-85.051129,$l);return new Sr(m,E)}}class _g extends W_{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(e,n,s){const u=td(e,n,s);return Vo(u,u,Wd(ql(s))),{x:u[0],y:u[1],z:u[2]}}locationPoint(e,n){const s=Du(n.lat,n.lng),u=pa([],s),f=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(n),e._centerAltitude):e._centerAltitude;_u(s,s,u,Ya(1,0)*ki*f);const m=Sl(new Float64Array(16));return Ac(m,e.pixelMatrix,e.globeMatrix),Vo(s,s,m),new Qe(s[0],s[1])}pixelsPerMeter(e,n){return Ya(1,0)*n}pixelSpaceConversion(e,n,s){const u=Ya(1,e)*n,f=En(Ya(1,45)*n,u,s);return this.pixelsPerMeter(e,n)/f}createTileMatrix(e,n,s){const u=Hh(ql(s.canonical));return Ac(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,n){const{center:s}=e,u=Wd(ql(n));return Of(u,u,Ce(s.lng)),xd(u,u,Ce(s.lat)),gu(u,u,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(e,n,s,u){return ag(e,n,s,!0)||new Tl(0,0)}pointCoordinate3D(e,n,s){const u=this.pointCoordinate(e,n,s,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,n){return!ag(e,n.x,n.y,!1)}farthestPixelDistance(e){const n=function(u,f){const m=u.cameraToCenterDistance,v=u._centerAltitude*f,E=u._camera,C=u._camera.forward(),R=Ic([],Xa([],C,-m),[0,0,v]),N=u.worldSize/(2*Math.PI),H=[0,0,-N],K=u.width/u.height,J=Math.tan(u.fovAboveCenter),se=Xa([],E.up(),J),De=Xa([],E.right(),J*K),We=pa([],Ic([],Ic([],C,se),De)),_t=[];let Ze;if(new kf(R,We).closestPointOnSphere(H,N,_t)){const lt=Ic([],_t,H),Ct=Al([],lt,R);Ze=Math.cos(u.fovAboveCenter)*yh(Ct)}else{const lt=Al([],R,H),Ct=Al([],H,R);pa(Ct,Ct);const mt=yh(lt)-N;Ze=Math.sqrt(mt*(mt+2*N));const sn=Math.acos(Ze/(N+mt))-Math.acos(Qa(C,Ct));Ze*=Math.cos(sn)}return 1.01*Ze}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),s=Tu(e.zoom);if(s>0){const u=Yl(e,Ya(1,e.center.lat)*e.worldSize),f=e.worldSize/(2*Math.PI),m=Math.max(e.width,e.height)/e.worldSize*Math.PI;return En(n,u+f*(1-Math.cos(m)),Math.pow(s,10))}return n}upVector(e,n,s){return td(n,s,e,1)}upVectorScale(e){return{metersToTile:Zd*jh(ql(e))}}}function Zh(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new W_(t);case"equirectangular":return new Z_(t);case"naturalEarth":return new r0(t);case"equalEarth":return new $_(t);case"winkelTripel":return new gg(t);case"albers":return n?new _p(t):new n0(t);case"lambertConformalConic":return n?new _p(t):new Gh(t);case"globe":return new _g(t)}throw new Error(`Invalid projection name: ${t.name}`)}const Vc=$u.types,Wh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Su(t,e,n,s,u,f,m,v,E,C,R,N,H){const K=v?Math.min(Nc,Math.round(v[0])):0,J=v?Math.min(Nc,Math.round(v[1])):0;t.emplaceBack(e,n,Math.round(32*s),Math.round(32*u),f,m,(K<<1)+(E?1:0),J,16*C,16*R,256*N,256*H)}function tu(t,e,n,s,u,f,m){t.emplaceBack(e,n,s,u,f,m)}function qh(t,e,n,s,u){t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u),t.emplaceBack(e,n,s,u)}function yp(t){for(const e of t.sections)if(Pe(e.text))return!0;return!1}class Yh{constructor(e){this.layoutVertexArray=new Wr,this.indexArray=new Ss,this.programConfigurations=e,this.segments=new ds,this.dynamicLayoutVertexArray=new Qs,this.opacityVertexArray=new Uo,this.placedSymbolArray=new jp,this.globeExtVertexArray=new wr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,n,s,u){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,S_.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Fm.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Wh,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Xy.members,!0)),this.opacityVertexBuffer.itemSize=1),(s||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}fi(Yh,"SymbolBuffers");class vp{constructor(e,n,s){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new s,this.segments=new ds,this.collisionVertexArray=new Dc,this.collisionVertexArrayExt=new wl}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Bm.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,bu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}fi(vp,"CollisionBuffers");class nu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sl([]),this.placementViewportMatrix=Sl([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zm(this.zoom,n["text-size"]),this.iconSizeData=zm(this.zoom,n["icon-size"]);const s=this.layers[0].layout,u=s.get("symbol-sort-key"),f=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==f&&void 0!==u.constantOr(1),this.sortFeaturesByY=("viewport-y"===f||"auto"===f&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=s.get("text-writing-mode").map(m=>ka[m]),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Yh(new hu(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Yh(new hu(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new $p,this.lineVertexArray=new mf,this.symbolInstances=new Gp}calculateGlyphDependencies(e,n,s,u,f){for(let m=0;m<e.length;m++)if(n[e.charCodeAt(m)]=!0,u&&f){const v=Rh[e.charAt(m)];v&&(n[v.charCodeAt(0)]=!0)}}populate(e,n,s,u){const f=this.layers[0],m=f.layout,v="globe"===this.projection.name,E=m.get("text-font"),C=m.get("text-field"),R=m.get("icon-image"),N=("constant"!==C.value.kind||C.value.value instanceof to&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&("constant"!==E.value.kind||E.value.value.length>0),H="constant"!==R.value.kind||!!R.value.value||Object.keys(R.parameters).length>0,K=m.get("symbol-sort-key");if(this.features=[],!N&&!H)return;const J=n.iconDependencies,se=n.glyphDependencies,De=n.availableImages,We=new $t(this.zoom);for(const{feature:_t,id:Ze,index:lt,sourceLayerIndex:Ct}of e){const mt=f._featureFilter.needGeometry,sn=Sc(_t,mt);if(!f._featureFilter.filter(We,sn,s))continue;if(mt||(sn.geometry=ac(_t,s,u)),v&&1!==_t.type&&s.z<=5){const _n=sn.geometry,Bn=.98078528056,Un=($n,Kn)=>Qa(td($n.x,$n.y,s,1),td(Kn.x,Kn.y,s,1))<Bn;for(let $n=0;$n<_n.length;$n++)_n[$n]=Qg(_n[$n],Un)}let en,In;if(N){const _n=f.getValueAndResolveTokens("text-field",sn,s,De),Bn=to.factory(_n);yp(Bn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Vt()||this.hasRTLText&&rn.isParsed())&&(en=Um(Bn,f,sn))}if(H){const _n=f.getValueAndResolveTokens("icon-image",sn,s,De);In=_n instanceof yo?_n:yo.fromString(_n)}if(!en&&!In)continue;const Yn=this.sortFeaturesByKey?K.evaluate(sn,{},s):void 0;if(this.features.push({id:Ze,text:en,icon:In,index:lt,sourceLayerIndex:Ct,geometry:sn.geometry,properties:_t.properties,type:Vc[_t.type],sortKey:Yn}),In&&(J[In.name]=!0),en){const _n=E.evaluate(sn,{},s).join(","),Bn="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ka.vertical)>=0;for(const Un of en.sections)if(Un.image)J[Un.image.name]=!0;else{const $n=D(en.toString()),Kn=Un.fontStack||_n,xn=se[Kn]=se[Kn]||{};this.calculateGlyphDependencies(Un.text,xn,Bn,this.allowVerticalPlacement,$n)}}}"line"===m.get("symbol-placement")&&(this.features=function(_t){const Ze={},lt={},Ct=[];let mt=0;function sn(_n){Ct.push(_t[_n]),mt++}function en(_n,Bn,Un){const $n=lt[_n];return delete lt[_n],lt[Bn]=$n,Ct[$n].geometry[0].pop(),Ct[$n].geometry[0]=Ct[$n].geometry[0].concat(Un[0]),$n}function In(_n,Bn,Un){const $n=Ze[Bn];return delete Ze[Bn],Ze[_n]=$n,Ct[$n].geometry[0].shift(),Ct[$n].geometry[0]=Un[0].concat(Ct[$n].geometry[0]),$n}function Yn(_n,Bn,Un){const $n=Un?Bn[0][Bn[0].length-1]:Bn[0][0];return`${_n}:${$n.x}:${$n.y}`}for(let _n=0;_n<_t.length;_n++){const Bn=_t[_n],Un=Bn.geometry,$n=Bn.text?Bn.text.toString():null;if(!$n){sn(_n);continue}const Kn=Yn($n,Un),xn=Yn($n,Un,!0);if(Kn in lt&&xn in Ze&&lt[Kn]!==Ze[xn]){const oi=In(Kn,xn,Un),Ri=en(Kn,xn,Ct[oi].geometry);delete Ze[Kn],delete lt[xn],lt[Yn($n,Ct[Ri].geometry,!0)]=Ri,Ct[oi].geometry=null}else Kn in lt?en(Kn,xn,Un):xn in Ze?In(Kn,xn,Un):(sn(_n),Ze[Kn]=mt-1,lt[xn]=mt-1)}return Ct.filter(_n=>_n.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((_t,Ze)=>_t.sortKey-Ze.sortKey)}update(e,n,s,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,n,this.layers,s,u),this.icon.programConfigurations.updatePaintArrays(e,n,this.layers,s,u))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Zh(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,n){const s=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:u,y:f}of n)this.lineVertexArray.emplaceBack(u,f);return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(e,n,s,u,f,m,v,E,C,R,N,H,K,J){const se=e.indexArray,De=e.layoutVertexArray,We=e.globeExtVertexArray,_t=e.segments.prepareSegment(4*n.length,De,se,this.canOverlap?m.sortKey:void 0),Ze=this.glyphOffsetArray.length,lt=_t.vertexLength,Ct=this.allowVerticalPlacement&&v===ka.vertical?Math.PI/2:0,mt=m.text&&m.text.sections;for(let en=0;en<n.length;en++){const{tl:In,tr:Yn,bl:_n,br:Bn,tex:Un,pixelOffsetTL:$n,pixelOffsetBR:Kn,minFontScaleX:xn,minFontScaleY:oi,glyphOffset:Ri,isSDF:ui,sectionIndex:ai}=n[en],si=_t.vertexLength,zi=Ri[1];if(Su(De,C.x,C.y,In.x,zi+In.y,Un.x,Un.y,s,ui,$n.x,$n.y,xn,oi),Su(De,C.x,C.y,Yn.x,zi+Yn.y,Un.x+Un.w,Un.y,s,ui,Kn.x,$n.y,xn,oi),Su(De,C.x,C.y,_n.x,zi+_n.y,Un.x,Un.y+Un.h,s,ui,$n.x,Kn.y,xn,oi),Su(De,C.x,C.y,Bn.x,zi+Bn.y,Un.x+Un.w,Un.y+Un.h,s,ui,Kn.x,Kn.y,xn,oi),E){const{x:_r,y:hr,z:fr}=E.anchor,[Ui,Vr,Zi]=E.up;tu(We,_r,hr,fr,Ui,Vr,Zi),tu(We,_r,hr,fr,Ui,Vr,Zi),tu(We,_r,hr,fr,Ui,Vr,Zi),tu(We,_r,hr,fr,Ui,Vr,Zi),qh(e.dynamicLayoutVertexArray,_r,hr,fr,Ct)}else qh(e.dynamicLayoutVertexArray,C.x,C.y,C.z,Ct);se.emplaceBack(si,si+1,si+2),se.emplaceBack(si+1,si+2,si+3),_t.vertexLength+=4,_t.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ri[0]),en!==n.length-1&&ai===n[en+1].sectionIndex||e.programConfigurations.populatePaintArrays(De.length,m,m.index,{},K,J,mt&&mt[ai])}const sn=E?E.anchor:C;e.placedSymbolArray.emplaceBack(sn.x,sn.y,sn.z,C.x,C.y,Ze,this.glyphOffsetArray.length-Ze,lt,R,N,C.segment,s?s[0]:0,s?s[1]:0,u[0],u[1],v,0,!1,0,H,0)}_commitLayoutVertex(e,n,s,u,f,m,v){e.emplaceBack(n,s,u,f,m,Math.round(v.x),Math.round(v.y))}_addCollisionDebugVertices(e,n,s,u,f,m,v){const E=s.segments.prepareSegment(4,s.layoutVertexArray,s.indexArray),C=E.vertexLength,R=v.tileAnchorX,N=v.tileAnchorY;for(let K=0;K<4;K++)s.collisionVertexArray.emplaceBack(0,0,0,0);s.collisionVertexArrayExt.emplaceBack(n,-e.padding,-e.padding),s.collisionVertexArrayExt.emplaceBack(n,e.padding,-e.padding),s.collisionVertexArrayExt.emplaceBack(n,e.padding,e.padding),s.collisionVertexArrayExt.emplaceBack(n,-e.padding,e.padding),this._commitLayoutVertex(s.layoutVertexArray,u,f,m,R,N,new Qe(e.x1,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,u,f,m,R,N,new Qe(e.x2,e.y1)),this._commitLayoutVertex(s.layoutVertexArray,u,f,m,R,N,new Qe(e.x2,e.y2)),this._commitLayoutVertex(s.layoutVertexArray,u,f,m,R,N,new Qe(e.x1,e.y2)),E.vertexLength+=4;const H=s.indexArray;H.emplaceBack(C,C+1),H.emplaceBack(C+1,C+2),H.emplaceBack(C+2,C+3),H.emplaceBack(C+3,C),E.primitiveLength+=4}_addTextDebugCollisionBoxes(e,n,s,u,f,m){for(let v=u;v<f;v++){const E=s.get(v),C=this.getSymbolInstanceTextSize(e,m,n,v);this._addCollisionDebugVertices(E,C,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,m)}}_addIconDebugCollisionBoxes(e,n,s,u,f,m){for(let v=u;v<f;v++){const E=s.get(v),C=this.getSymbolInstanceIconSize(e,n,m.placedIconSymbolIndex);this._addCollisionDebugVertices(E,C,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,m)}}generateCollisionDebugBuffers(e,n){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vp(go,Nm.members,Cl),this.iconCollisionBox=new vp(go,Nm.members,Cl);const s=Fd(this.iconSizeData,e),u=Fd(this.textSizeData,e);for(let f=0;f<this.symbolInstances.length;f++){const m=this.symbolInstances.get(f);this._addTextDebugCollisionBoxes(u,e,n,m.textBoxStartIndex,m.textBoxEndIndex,m),this._addTextDebugCollisionBoxes(u,e,n,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._addIconDebugCollisionBoxes(s,e,n,m.iconBoxStartIndex,m.iconBoxEndIndex,m),this._addIconDebugCollisionBoxes(s,e,n,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m)}}getSymbolInstanceTextSize(e,n,s,u){const f=this.text.placedSymbolArray.get(n.rightJustifiedTextSymbolIndex>=0?n.rightJustifiedTextSymbolIndex:n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.leftJustifiedTextSymbolIndex>=0?n.leftJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex>=0?n.verticalPlacedTextSymbolIndex:u),m=Qf(this.textSizeData,e,f)/24;return this.tilePixelRatio*m}getSymbolInstanceIconSize(e,n,s){const u=this.icon.placedSymbolArray.get(s),f=Qf(this.iconSizeData,e,u);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(e,n,s){e.emplaceBack(n,-s,-s),e.emplaceBack(n,s,-s),e.emplaceBack(n,s,s),e.emplaceBack(n,-s,s)}_updateTextDebugCollisionBoxes(e,n,s,u,f,m){for(let v=u;v<f;v++){const E=s.get(v),C=this.getSymbolInstanceTextSize(e,m,n,v);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,E.padding)}}_updateIconDebugCollisionBoxes(e,n,s,u,f,m){for(let v=u;v<f;v++){const E=s.get(v),C=this.getSymbolInstanceIconSize(e,n,m);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,E.padding)}}updateCollisionDebugBuffers(e,n){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const s=Fd(this.iconSizeData,e),u=Fd(this.textSizeData,e);for(let f=0;f<this.symbolInstances.length;f++){const m=this.symbolInstances.get(f);this._updateTextDebugCollisionBoxes(u,e,n,m.textBoxStartIndex,m.textBoxEndIndex,m),this._updateTextDebugCollisionBoxes(u,e,n,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._updateIconDebugCollisionBoxes(s,e,n,m.iconBoxStartIndex,m.iconBoxEndIndex,m.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(s,e,n,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,n,s,u,f,m,v,E,C){const R={};if(n<s){const{x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt,featureIndex:Ct}=e.get(n);R.textBox={x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt},R.textFeatureIndex=Ct}if(u<f){const{x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt,featureIndex:Ct}=e.get(u);R.verticalTextBox={x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt},R.verticalTextFeatureIndex=Ct}if(m<v){const{x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt,featureIndex:Ct}=e.get(m);R.iconBox={x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt},R.iconFeatureIndex=Ct}if(E<C){const{x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt,featureIndex:Ct}=e.get(E);R.verticalIconBox={x1:N,y1:H,x2:K,y2:J,padding:se,projectedAnchorX:De,projectedAnchorY:We,projectedAnchorZ:_t,tileAnchorX:Ze,tileAnchorY:lt},R.verticalIconFeatureIndex=Ct}return R}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,n){const s=e.placedSymbolArray.get(n),u=s.vertexStartIndex+4*s.numGlyphs;for(let f=s.vertexStartIndex;f<u;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const n=Math.sin(e),s=Math.cos(e),u=[],f=[],m=[];for(let v=0;v<this.symbolInstances.length;++v){m.push(v);const E=this.symbolInstances.get(v);u.push(0|Math.round(n*E.tileAnchorX+s*E.tileAnchorY)),f.push(E.featureIndex)}return m.sort((v,E)=>u[v]-u[E]||f[E]-f[v]),m}addToSortKeyRanges(e,n){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===n?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const s=this.symbolInstances.get(n);this.featureSortOrder.push(s.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:m,verticalPlacedTextSymbolIndex:v,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:C}=s;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),f>=0&&f!==u&&this.addIndicesForPlacedSymbol(this.text,f),m>=0&&m!==f&&m!==u&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&this.addIndicesForPlacedSymbol(this.text,v),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fi(nu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),nu.MAX_GLYPHS=65535,nu.addDynamicAttributes=qh;const Xd=new Oi({"symbol-placement":new qt(yn.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(yn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(yn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hn(yn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(yn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(yn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new qt(yn.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(yn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(yn.layout_symbol["icon-rotation-alignment"]),"icon-size":new hn(yn.layout_symbol["icon-size"]),"icon-text-fit":new qt(yn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(yn.layout_symbol["icon-text-fit-padding"]),"icon-image":new hn(yn.layout_symbol["icon-image"]),"icon-rotate":new hn(yn.layout_symbol["icon-rotate"]),"icon-padding":new qt(yn.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(yn.layout_symbol["icon-keep-upright"]),"icon-offset":new hn(yn.layout_symbol["icon-offset"]),"icon-anchor":new hn(yn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(yn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(yn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(yn.layout_symbol["text-rotation-alignment"]),"text-field":new hn(yn.layout_symbol["text-field"]),"text-font":new hn(yn.layout_symbol["text-font"]),"text-size":new hn(yn.layout_symbol["text-size"]),"text-max-width":new hn(yn.layout_symbol["text-max-width"]),"text-line-height":new hn(yn.layout_symbol["text-line-height"]),"text-letter-spacing":new hn(yn.layout_symbol["text-letter-spacing"]),"text-justify":new hn(yn.layout_symbol["text-justify"]),"text-radial-offset":new hn(yn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(yn.layout_symbol["text-variable-anchor"]),"text-anchor":new hn(yn.layout_symbol["text-anchor"]),"text-max-angle":new qt(yn.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(yn.layout_symbol["text-writing-mode"]),"text-rotate":new hn(yn.layout_symbol["text-rotate"]),"text-padding":new qt(yn.layout_symbol["text-padding"]),"text-keep-upright":new qt(yn.layout_symbol["text-keep-upright"]),"text-transform":new hn(yn.layout_symbol["text-transform"]),"text-offset":new hn(yn.layout_symbol["text-offset"]),"text-allow-overlap":new qt(yn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new qt(yn.layout_symbol["text-ignore-placement"]),"text-optional":new qt(yn.layout_symbol["text-optional"])});var xp={paint:new Oi({"icon-opacity":new hn(yn.paint_symbol["icon-opacity"]),"icon-color":new hn(yn.paint_symbol["icon-color"]),"icon-halo-color":new hn(yn.paint_symbol["icon-halo-color"]),"icon-halo-width":new hn(yn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hn(yn.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(yn.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(yn.paint_symbol["icon-translate-anchor"]),"text-opacity":new hn(yn.paint_symbol["text-opacity"]),"text-color":new hn(yn.paint_symbol["text-color"],{runtimeType:di,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new hn(yn.paint_symbol["text-halo-color"]),"text-halo-width":new hn(yn.paint_symbol["text-halo-width"]),"text-halo-blur":new hn(yn.paint_symbol["text-halo-blur"]),"text-translate":new qt(yn.paint_symbol["text-translate"]),"text-translate-anchor":new qt(yn.paint_symbol["text-translate-anchor"])}),layout:Xd};class q_{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:fn,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fi(q_,"FormatSectionOverride",{omit:["defaultValue"]});class Kh extends jl{constructor(e){super(e,xp)}recalculate(e,n){super.recalculate(e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const s=this.layout.get("text-writing-mode");if(s){const u=[];for(const f of s)u.indexOf(f)<0&&u.push(f);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,n,s,u){const f=this.layout.get(e).evaluate(n,{},s,u),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||G(m.value)||!f?f:(v=n.properties,f.replace(/{([^{}]+)}/g,(C,R)=>R in v?String(v[R]):""));var v}createBucket(e){return new nu(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of xp.paint.overridableProperties){if(!Kh.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),s=new q_(n),u=new S(s,n.property.specification);let f=null;f="constant"===n.value.kind||"source"===n.value.kind?new Re("source",u):new Pt("composite",u,n.value.zoomStops,n.value._interpolationType),this.paint._values[e]=new zn(n.property,f,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,s){return!(!this.layout||n.isDataDriven()||s.isDataDriven())&&Kh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const s=e.get("text-field"),u=xp.paint.properties[n];let f=!1;const m=v=>{for(const E of v)if(u.overrides&&u.overrides.hasOverride(E))return void(f=!0)};if("constant"===s.value.kind&&s.value.value instanceof to)m(s.value.value.sections);else if("source"===s.value.kind){const v=C=>{f||(C instanceof aa&&no(C.value)===vr?m(C.value.sections):C instanceof Rs?m(C.sections):C.eachChild(v))},E=s.value;E._styleExpression&&v(E._styleExpression.expression)}return f}getProgramConfiguration(e){return new Do(this,e)}}var o0={paint:new Oi({"background-color":new qt(yn.paint_background["background-color"]),"background-pattern":new qt(yn.paint_background["background-pattern"]),"background-opacity":new qt(yn.paint_background["background-opacity"])})},Y_={paint:new Oi({"raster-opacity":new qt(yn.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(yn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(yn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(yn.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(yn.paint_raster["raster-saturation"]),"raster-contrast":new qt(yn.paint_raster["raster-contrast"]),"raster-resampling":new qt(yn.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(yn.paint_raster["raster-fade-duration"])})};class K_ extends jl{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var X_={paint:new Oi({"sky-type":new qt(yn.paint_sky["sky-type"]),"sky-atmosphere-sun":new qt(yn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new qt(yn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new qt(yn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new qt(yn.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ei(yn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new qt(yn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new qt(yn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new qt(yn.paint_sky["sky-opacity"])})};function Xh(t,e,n){const s=[0,0,1],u=lm([]);return Rf(u,u,n?-Ce(t)+Math.PI:Ce(t)),cm(u,u,-Ce(e)),rm(s,s,u),pa(s,s)}const bp={circle:class extends jl{constructor(t){super(t,Wy)}createBucket(t){return new mh(t)}queryRadius(t){const e=t;return lc("circle-radius",this,e)+lc("circle-stroke-width",this,e)+gh(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,s,u,f,m,v){const E=zu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,t.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return bh(t,s,f,m,v,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),E,C)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Do(this,t)}},heatmap:class extends jl{createBucket(t){return new dm(t)}constructor(t){super(t,u_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ff({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return lc("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,s,u,f,m,v){const E=this.paint.get("heatmap-radius").evaluate(e,n);return bh(t,s,f,m,v,!0,!0,new Qe(0,0),E)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Do(this,t)}},hillshade:class extends jl{constructor(t){super(t,d_)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends jl{constructor(t){super(t,x_)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new Do(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Gu(t)}queryRadius(){return gh(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,s,u,f){return!t.queryGeometry.isAboveHorizon&&Jp(mu(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,t.pixelToTileUnitsFactor),s)}isTileClipped(){return!0}},"fill-extrusion":class extends jl{constructor(t){super(t,Zl)}createBucket(t){return new Rd(t)}queryRadius(){return gh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Do(this,t)}queryIntersectsFeature(t,e,n,s,u,f,m,v,E){const C=zu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,t.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(e,n),N=this.paint.get("fill-extrusion-base").evaluate(e,n),H=[0,0],K=v&&f.elevation,J=f.elevation?f.elevation.exaggeration():1,se=t.tile.getBucket(this);if(K&&se instanceof Rd){const lt=se.centroidVertexArray,Ct=E+1;Ct<lt.length&&(H[0]=lt.geta_centroid_pos0(Ct),H[1]=lt.geta_centroid_pos1(Ct))}if(0===H[0]&&1===H[1])return!1;"globe"===f.projection.name&&(s=Mm([s],[new Qe(0,0),new Qe(ki,ki)],t.tileID.canonical).map(lt=>lt.polygon).flat());const De=K?v:null,[We,_t]=(Ct=s,mt=N,sn=R,en=C,In=m,Yn=De,_n=H,Bn=J,Un=f.center.lat,"globe"===(lt=f).projection.name?function(Kn,xn,oi,Ri,ui,ai,si,zi,_r,hr,fr){const Ui=[],Vr=[],Zi=Kn.projection.upVectorScale(fr,Kn.center.lat,Kn.worldSize).metersToTile,yr=[0,0,0,1],Jr=[0,0,0,1],co=(ho,To,Ro,hs)=>{ho[0]=To,ho[1]=Ro,ho[2]=hs,ho[3]=1},uo=Yf();oi>0&&(oi+=uo),Ri+=uo;for(const ho of xn){const To=[],Ro=[];for(const hs of ho){const Er=hs.x+ui.x,Qo=hs.y+ui.y,qo=Kn.projection.projectTilePoint(Er,Qo,fr),ur=Kn.projection.upVector(fr,hs.x,hs.y);let Lr=oi,fo=Ri;if(si){const qr=Am(Er,Qo,oi,Ri,si,zi,_r,hr);Lr+=qr.base,fo+=qr.top}0!==oi?co(yr,qo.x+ur[0]*Zi*Lr,qo.y+ur[1]*Zi*Lr,qo.z+ur[2]*Zi*Lr):co(yr,qo.x,qo.y,qo.z),co(Jr,qo.x+ur[0]*Zi*fo,qo.y+ur[1]*Zi*fo,qo.z+ur[2]*Zi*fo),Vo(yr,yr,ai),Vo(Jr,Jr,ai),To.push(new Wu(yr[0],yr[1],yr[2])),Ro.push(new Wu(Jr[0],Jr[1],Jr[2]))}Ui.push(To),Vr.push(Ro)}return[Ui,Vr]}(lt,Ct,mt,sn,en,In,Yn,_n,Bn,Un,t.tileID.canonical):Yn?function(Kn,xn,oi,Ri,ui,ai,si,zi,_r){const hr=[],fr=[],Ui=[0,0,0,1];for(const Vr of Kn){const Zi=[],yr=[];for(const Jr of Vr){const co=Jr.x+Ri.x,uo=Jr.y+Ri.y,ho=Am(co,uo,xn,oi,ai,si,zi,_r);Ui[0]=co,Ui[1]=uo,Ui[2]=ho.base,Ui[3]=1,Pc(Ui,Ui,ui),Ui[3]=Math.max(Ui[3],1e-5);const To=new Wu(Ui[0]/Ui[3],Ui[1]/Ui[3],Ui[2]/Ui[3]);Ui[0]=co,Ui[1]=uo,Ui[2]=ho.top,Ui[3]=1,Pc(Ui,Ui,ui),Ui[3]=Math.max(Ui[3],1e-5);const Ro=new Wu(Ui[0]/Ui[3],Ui[1]/Ui[3],Ui[2]/Ui[3]);Zi.push(To),yr.push(Ro)}hr.push(Zi),fr.push(yr)}return[hr,fr]}(Ct,mt,sn,en,In,Yn,_n,Bn,Un):function(Kn,xn,oi,Ri,ui){const ai=[],si=[],zi=ui[8]*xn,_r=ui[9]*xn,hr=ui[10]*xn,fr=ui[11]*xn,Ui=ui[8]*oi,Vr=ui[9]*oi,Zi=ui[10]*oi,yr=ui[11]*oi;for(const Jr of Kn){const co=[],uo=[];for(const ho of Jr){const To=ho.x+Ri.x,Ro=ho.y+Ri.y,hs=ui[0]*To+ui[4]*Ro+ui[12],Er=ui[1]*To+ui[5]*Ro+ui[13],Qo=ui[2]*To+ui[6]*Ro+ui[14],qo=ui[3]*To+ui[7]*Ro+ui[15],ur=hs+zi,Lr=Er+_r,fo=Qo+hr,qr=Math.max(qo+fr,1e-5),Bo=hs+Ui,ia=Er+Vr,As=Qo+Zi,Is=Math.max(qo+yr,1e-5);co.push(new Wu(ur/qr,Lr/qr,fo/qr)),uo.push(new Wu(Bo/Is,ia/Is,As/Is))}ai.push(co),si.push(uo)}return[ai,si]}(Ct,mt,sn,en,In)),Ze=t.queryGeometry;var lt,Ct,mt,sn,en,In,Yn,_n,Bn,Un;return function(lt,Ct,mt){let sn=1/0;Jp(mt,Ct)&&(sn=Sm(mt,Ct[0]));for(let en=0;en<Ct.length;en++){const In=Ct[en],Yn=lt[en];for(let _n=0;_n<In.length-1;_n++){const Bn=In[_n],Un=[Bn,In[_n+1],Yn[_n+1],Yn[_n],Bn];pu(mt,Un)&&(sn=Math.min(sn,Sm(mt,Un)))}}return sn!==1/0&&sn}(We,_t,Ze.isPointQuery()?Ze.screenBounds:Ze.screenGeometry)}},line:class extends jl{constructor(t){super(t,km),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof os,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Kf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Oh(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Do(this,t)}queryRadius(t){const e=t,n=Lm(lc("line-width",this,e),lc("line-gap-width",this,e)),s=lc("line-offset",this,e);return n/2+Math.abs(s)+gh(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,s,u,f){if(t.queryGeometry.isAboveHorizon)return!1;const m=mu(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,t.pixelToTileUnitsFactor),v=t.pixelToTileUnitsFactor/2*Lm(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),E=this.paint.get("line-offset").evaluate(e,n);return E&&(s=function(C,R){const N=[],H=new Qe(0,0);for(let K=0;K<C.length;K++){const J=C[K],se=[];for(let De=0;De<J.length;De++){const We=J[De-1],_t=J[De],Ze=J[De+1],lt=0===De?H:_t.sub(We)._unit()._perp(),Ct=De===J.length-1?H:Ze.sub(_t)._unit()._perp(),mt=lt._add(Ct)._unit();mt._mult(1/(mt.x*Ct.x+mt.y*Ct.y)),se.push(mt._mult(R)._add(_t))}N.push(se)}return N}(s,E*t.pixelToTileUnitsFactor)),function(C,R,N){for(let H=0;H<R.length;H++){const K=R[H];if(C.length>=3)for(let J=0;J<K.length;J++)if(qc(C,K[J]))return!0;if(e_(C,K,N))return!0}return!1}(m,s,v)}isTileClipped(){return!0}},symbol:Kh,background:class extends jl{constructor(t){super(t,o0)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends jl{constructor(t){super(t,Y_)}getProgramIds(){return["raster"]}},sky:class extends jl{constructor(t){super(t,X_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ff({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const s=this.paint.get("sky-atmosphere-sun"),u=!s,f=t.style.light,m=f.properties.get("position");return u&&"viewport"===f.properties.get("anchor")&&Xe("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?Xh(m.azimuthal,90-m.polar,e):Xh(s[0],90-s[1],e)}const n=this.paint.get("sky-gradient-center");return Xh(n[0],90-n[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class Qd{constructor(e,n,s,u){this.context=e,this.format=s,this.texture=e.gl.createTexture(),this.update(n,u)}update(e,n,s){const{width:u,height:f}=e,{context:m}=this,{gl:v}=m,{HTMLImageElement:E,HTMLCanvasElement:C,HTMLVideoElement:R,ImageData:N,ImageBitmap:H}=he;if(v.bindTexture(v.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===v.RGBA&&(!n||!1!==n.premultiply)),s||this.size&&this.size[0]===u&&this.size[1]===f){const{x:K,y:J}=s||{x:0,y:0};e instanceof E||e instanceof C||e instanceof R||e instanceof N||H&&e instanceof H?v.texSubImage2D(v.TEXTURE_2D,0,K,J,v.RGBA,v.UNSIGNED_BYTE,e):v.texSubImage2D(v.TEXTURE_2D,0,K,J,u,f,v.RGBA,v.UNSIGNED_BYTE,e.data)}else this.size=[u,f],e instanceof E||e instanceof C||e instanceof R||e instanceof N||H&&e instanceof H?v.texImage2D(v.TEXTURE_2D,0,this.format,this.format,v.UNSIGNED_BYTE,e):v.texImage2D(v.TEXTURE_2D,0,this.format,u,f,0,this.format,v.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&v.generateMipmap(v.TEXTURE_2D)}bind(e,n){const{context:s}=this,{gl:u}=s;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?e===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:e),this.filter=e),n!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,n),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class wp{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Q_{constructor(){this.tasks={},this.taskQueue=[],Jn(["process"],this),this.invoker=new wp(this.process),this.nextId=0}add(e,n){const s=this.nextId++,u=function({type:f,isSymbolTile:m,zoom:v}){return v=v||0,"message"===f?0:"maybePrepare"!==f||m?"parseTile"!==f||m?"parseTile"===f&&m?300-v:"maybePrepare"===f&&m?400-v:500:200-v:100-v}(n);if(0===u){Se();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[s]={fn:e,metadata:n,priority:u,id:s},this.taskQueue.push(s),this.invoker.trigger(),{cancel:()=>{delete this.tasks[s]}}}process(){Se();try{if(this.taskQueue=this.taskQueue.filter(s=>!!this.tasks[s]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}pick(){let e=null,n=1/0;for(let u=0;u<this.taskQueue.length;u++){const f=this.tasks[this.taskQueue[u]];f.priority<n&&(n=f.priority,e=u)}if(null===e)return null;const s=this.taskQueue[e];return this.taskQueue.splice(e,1),s}remove(){this.invoker.remove()}}class yg{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const s=e[n];this._stringToNumber[s]=n,this._numberToString[n]=s}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const J_=["tile","layer","source","sourceLayer","state"];class vg{constructor(e,n,s,u,f){this.type="Feature",this._vectorTileFeature=e,this._z=n,this._x=s,this._y=u,this.properties=e.properties,this.id=f}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const n of J_)void 0!==this[n]&&(e[n]=this[n]);return e}}const Kl=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,n=0,s=0,u=0,f=0,m=0,v=0;for(1&e?u=f=m=32:n=s=v=32;(e>>=1)>1;){const C=n+u>>1,R=s+f>>1;1&e?(u=n,f=s,n=m,s=v):(n=u,s=f,u=m,f=v),m=C,v=R}const E=4*t;Kl[E+0]=n,Kl[E+1]=s,Kl[E+2]=u,Kl[E+3]=f}const _a=new Uint16Array(2178),Au=new Uint8Array(1089),iu=new Uint16Array(1089);function xg(t){return 0===t?-.03125:32===t?.03125:0}var bg=gi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Qh={type:2,extent:ki,loadGeometry:()=>[[new Qe(0,0),new Qe(8193,0),new Qe(8193,8193),new Qe(0,8193),new Qe(0,0)]]};class Ep{constructor(e,n,s,u,f){this.tileID=e,this.uid=vi(),this.uses=0,this.tileSize=n,this.tileZoom=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=f,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const n=e+this.timeAdded;n<Gn.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=zc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,n,s){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,f){const m={};if(!f)return m;for(const v of u){const E=v.layerIds.map(C=>f.getLayer(C)).filter(Boolean);if(0!==E.length){v.layers=E,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(C=>E.filter(R=>R.id===C)[0]));for(const C of E)m[C.id]=v}}return m}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const f=this.buckets[u];if(f instanceof nu){if(this.hasSymbolBuckets=!0,!s)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const f=this.buckets[u];if(f instanceof nu&&f.hasRTLText){this.hasRTLText=!0,rn.isLoading()||rn.isLoaded()||"deferred"!==Vt()||cn();break}}this.queryPadding=0;for(const u in this.buckets){const f=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(u).queryRadius(f))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new pf}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const s in this.buckets){const u=this.buckets[s];u.uploadPending()&&u.upload(e)}const n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qd(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qd(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Qd(e,this.lineAtlas.image,n.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,n,s,u,f,m,v,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:v,transform:m,params:f,tileTransform:this.tileTransform},e,n,s):{}}querySourceFeatures(e,n){const s=this.latestFeatureIndex;if(!s||!s.rawTileData)return;const u=s.loadVTLayers(),f=n?n.sourceLayer:"",m=u._geojsonTileLayer||u[f];if(!m)return;const v=Mo(n&&n.filter),{z:E,x:C,y:R}=this.tileID.canonical,N={z:E,x:C,y:R};for(let H=0;H<m.length;H++){const K=m.feature(H);if(v.needGeometry){const De=Sc(K,!0);if(!v.filter(new $t(this.tileID.overscaledZ),De,this.tileID.canonical))continue}else if(!v.filter(new $t(this.tileID.overscaledZ),K))continue;const J=s.getId(K,f),se=new vg(K,E,C,R,J);se.tile=N,e.push(se)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const s=St(e.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const s=Date.now();let u=!1;if(this.expirationTime>s)u=!1;else if(n)if(this.expirationTime<n)u=!0;else{const f=this.expirationTime-n;f?this.expirationTime=s+Math.max(f,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!n)return;const s=this.latestFeatureIndex.loadVTLayers(),u=n.style.listImages();for(const f in this.buckets){if(!n.style.hasLayer(f))continue;const m=this.buckets[f],v=m.layers[0].sourceLayer||"_geojsonTileLayer",E=s[v],C=e[v];if(!E||!C||0===Object.keys(C).length)continue;if(m.update(C,E,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),m instanceof Oh||m instanceof Gu){const N=n.style._getSourceCache(m.layers[0].source);n._terrain&&n._terrain.enabled&&N&&m.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(N.id,this.tileID)}const R=n&&n.style&&n.style.getLayer(f);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(m)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Gn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Gn.now()+e}setTexture(e,n){const s=n.context,u=s.gl;this.texture=this.texture||n.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Qd(s,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),s.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax))}setDependencies(e,n){const s={};for(const u of n)s[u]=!0;this.dependencies[e]=s}hasDependency(e,n){for(const s of e){const u=this.dependencies[s];if(u)for(const f of n)if(u[f])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,n){if(!n||"mercator"===n.name||this._tileDebugBuffer)return;const s=ac(Qh,this.tileID.canonical,this.tileTransform)[0],u=new Or,f=new pd;for(let m=0;m<s.length;m++){const{x:v,y:E}=s[m];u.emplaceBack(v,E),f.emplaceBack(m)}f.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(f),this._tileDebugBuffer=e.createVertexBuffer(u,Ju.members),this._tileDebugSegments=ds.simpleSegment(0,0,u.length,f.length)}_makeTileBoundsBuffers(e,n){if(this._tileBoundsBuffer||!n||"mercator"===n.name)return;const s=ac(Qh,this.tileID.canonical,this.tileTransform)[0];let u,f;if(this.isRaster){const m=function(v,E){const C=zc(v,E),R=Math.pow(2,v.z);for(let De=0;De<33;De++)for(let We=0;We<33;We++){const _t=Dl((v.x+(We+xg(We))/32)/R),Ze=Gs((v.y+(De+xg(De))/32)/R),lt=E.project(_t,Ze),Ct=33*De+We;_a[2*Ct+0]=Math.round((lt.x*C.scale-C.x)*ki),_a[2*Ct+1]=Math.round((lt.y*C.scale-C.y)*ki)}Au.fill(0),iu.fill(0);for(let De=2045;De>=0;De--){const We=4*De,_t=Kl[We+0],Ze=Kl[We+1],lt=Kl[We+2],Ct=Kl[We+3],mt=_t+lt>>1,sn=Ze+Ct>>1,en=mt+sn-Ze,In=sn+_t-mt,Yn=33*Ze+_t,_n=33*Ct+lt,Bn=33*sn+mt,Un=Math.hypot((_a[2*Yn+0]+_a[2*_n+0])/2-_a[2*Bn+0],(_a[2*Yn+1]+_a[2*_n+1])/2-_a[2*Bn+1])>=16;if(Au[Bn]=Au[Bn]||(Un?1:0),De<1022){const $n=33*(Ze+In>>1)+(_t+en>>1),Kn=33*(Ct+In>>1)+(lt+en>>1);Au[Bn]=Au[Bn]||Au[$n]||Au[Kn]}}const N=new Zr,H=new Ss;let K=0;function J(De,We){const _t=33*We+De;return 0===iu[_t]&&(N.emplaceBack(_a[2*_t+0],_a[2*_t+1],De*ki/32,We*ki/32),iu[_t]=++K),iu[_t]-1}function se(De,We,_t,Ze,lt,Ct){const mt=De+_t>>1,sn=We+Ze>>1;if(Math.abs(De-lt)+Math.abs(We-Ct)>1&&Au[33*sn+mt])se(lt,Ct,De,We,mt,sn),se(_t,Ze,lt,Ct,mt,sn);else{const en=J(De,We),In=J(_t,Ze),Yn=J(lt,Ct);H.emplaceBack(en,In,Yn)}}return se(0,0,32,32,32,0),se(32,32,0,0,0,32),{vertices:N,indices:H}}(this.tileID.canonical,n);u=m.vertices,f=m.indices}else{u=new Zr,f=new Ss;for(const{x:v,y:E}of s)u.emplaceBack(v,E,0,0);const m=cc.exports(u.int16,void 0,4);for(let v=0;v<m.length;v+=3)f.emplaceBack(m[v],m[v+1],m[v+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,bg.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(f),this._tileBoundsSegments=ds.simpleSegment(0,0,u.length,f.length)}_makeGlobeTileDebugBuffers(e,n){const s=n.projection;if(!s||"globe"!==s.name||n.freezeTileCoverage)return;const u=this.tileID.canonical,f=Wd(cg(u,n)),m=Tu(n.zoom);let v;m>0&&(v=Pf(new Float64Array(16),n.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,u,n,f,v,m),this._makeGlobeTileDebugTextBuffer(e,u,n,f,v,m)}_globePoint(e,n,s,u,f,m,v){let E=td(e,n,s);if(m){const C=1<<s.z,R=Hl(u.center.lng),N=Gl(u.center.lat),H=(s.x+.5)/C-R;let K=0;H>.5?K=-1:H<-.5&&(K=1);let J=(e/ki+s.x)/C+K,se=(n/ki+s.y)/C;J=(J-R)*u._pixelsPerMercatorPixel+R,se=(se-N)*u._pixelsPerMercatorPixel+N;const De=[J*u.worldSize,se*u.worldSize,0];Vo(De,De,m),E=Jc(E,De,v)}return Vo(E,E,f)}_makeGlobeTileDebugBorderBuffer(e,n,s,u,f,m){const v=new Or,E=new pd,C=new ao,R=(H,K,J,se,De)=>{const We=(J-H)/(De-1),_t=(se-K)/(De-1),Ze=v.length;for(let lt=0;lt<De;lt++){const Ct=H+lt*We,mt=K+lt*_t;v.emplaceBack(Ct,mt);const sn=this._globePoint(Ct,mt,n,s,u,f,m);C.emplaceBack(sn[0],sn[1],sn[2]),E.emplaceBack(Ze+lt)}},N=ki;R(0,0,N,0,16),R(N,0,N,N,16),R(N,N,0,N,16),R(0,N,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(E),this._tileDebugBuffer=e.createVertexBuffer(v,Ju.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(C,$d.members),this._tileDebugSegments=ds.simpleSegment(0,0,v.length,E.length)}_makeGlobeTileDebugTextBuffer(e,n,s,u,f,m){const v=new Or,E=new Ss,C=new ao,R=25;E.reserve(32),v.reserve(R),C.reserve(R);const N=(H,K)=>R*H+K;for(let H=0;H<R;H++){const K=2048*H;for(let J=0;J<R;J++){const se=2048*J;v.emplaceBack(se,K);const De=this._globePoint(se,K,n,s,u,f,m);C.emplaceBack(De[0],De[1],De[2])}}for(let H=0;H<4;H++)for(let K=0;K<4;K++){const J=N(H,K),se=N(H,K+1),De=N(H+1,K),We=N(H+1,K+1);E.emplaceBack(J,se,De),E.emplaceBack(De,se,We)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(E),this._tileDebugTextBuffer=e.createVertexBuffer(v,Ju.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(C,$d.members),this._tileDebugTextSegments=ds.simpleSegment(0,0,R,32)}}class _c{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,s){const u=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Xt(this.stateChanges[e][u],s),null===this.deletedStates[e]){this.deletedStates[e]={};for(const f in this.state[e])f!==u&&(this.deletedStates[e][f]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][u]){this.deletedStates[e][u]={};for(const f in this.state[e][u])s[f]||(this.deletedStates[e][u][f]=null)}else for(const f in s)this.deletedStates[e]&&this.deletedStates[e][u]&&null===this.deletedStates[e][u][f]&&delete this.deletedStates[e][u][f]}removeFeatureState(e,n,s){if(null===this.deletedStates[e])return;const u=String(n);if(this.deletedStates[e]=this.deletedStates[e]||{},s&&void 0!==n)null!==this.deletedStates[e][u]&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][s]=null);else if(void 0!==n)if(this.stateChanges[e]&&this.stateChanges[e][u])for(s in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][s]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,n){const s=String(n),u=Xt({},(this.state[e]||{})[s],(this.stateChanges[e]||{})[s]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const f=this.deletedStates[e][n];if(null===f)return{};for(const m in f)delete u[m]}return u}initializeTileState(e,n){e.setFeatureState(this.state,n)}coalesceChanges(e,n){const s={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const f={};for(const m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),Xt(this.state[u][m],this.stateChanges[u][m]),f[m]=this.state[u][m];s[u]=f}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const f={};if(null===this.deletedStates[u])for(const m in this.state[u])f[m]={},this.state[u][m]={};else for(const m in this.deletedStates[u]){if(null===this.deletedStates[u][m])this.state[u][m]={};else for(const v of Object.keys(this.deletedStates[u][m]))delete this.state[u][m][v];f[m]=this.state[u][m]}s[u]=s[u]||{},Xt(s[u],f)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(s).length)for(const u in e)e[u].setFeatureState(s,n)}}class od{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,n){const s=this.toIdx(e,n);return{min:this.minimums[s],max:this.maximums[s]}}isLeaf(e,n){return this.leaves[this.toIdx(e,n)]}toIdx(e,n){return n*this.size+e}}function na(t,e,n,s){let u=0,f=Number.MAX_VALUE;for(let m=0;m<3;m++)if(Math.abs(s[m])<1e-15){if(n[m]<t[m]||n[m]>e[m])return null}else{const v=1/s[m];let E=(t[m]-n[m])*v,C=(e[m]-n[m])*v;if(E>C){const R=E;E=C,C=R}if(E>u&&(u=E),C<f&&(f=C),u>f)return null}return u}function ru(t,e,n,s,u,f,m,v,E,C,R){const N=s-t,H=u-e,K=f-n,J=m-t,se=v-e,De=E-n,We=R[1]*De-R[2]*se,_t=R[2]*J-R[0]*De,Ze=R[0]*se-R[1]*J,lt=N*We+H*_t+K*Ze;if(Math.abs(lt)<1e-15)return null;const Ct=1/lt,mt=C[0]-t,sn=C[1]-e,en=C[2]-n,In=(mt*We+sn*_t+en*Ze)*Ct;if(In<0||In>1)return null;const Yn=sn*K-en*H,_n=en*N-mt*K,Bn=mt*H-sn*N,Un=(R[0]*Yn+R[1]*_n+R[2]*Bn)*Ct;return Un<0||In+Un>1?null:(J*Yn+se*_n+De*Bn)*Ct}function Jd(t,e,n){return(t-e)/(n-e)}function ll(t,e,n,s,u,f,m,v,E){const C=1<<n,R=f-s,N=m-u,H=(t+1)/C*R+s,K=(e+0)/C*N+u,J=(e+1)/C*N+u;v[0]=(t+0)/C*R+s,v[1]=K,E[0]=H,E[1]=J}class Jh{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const n=function(f){const m=Math.ceil(Math.log2(f.dim/8)),v=[];let E=Math.ceil(Math.pow(2,m));const C=1/E,R=(K,J,se,De,We)=>{const _t=De?1:0,Ze=(K+1)*se-_t,lt=J*se,Ct=(J+1)*se-_t;We[0]=K*se,We[1]=lt,We[2]=Ze,We[3]=Ct};let N=new od(E);const H=[];for(let K=0;K<E*E;K++){R(K%E,Math.floor(K/E),C,!1,H);const J=cl(H[0],H[1],f),se=cl(H[2],H[1],f),De=cl(H[2],H[3],f),We=cl(H[0],H[3],f);N.minimums.push(Math.min(J,se,De,We)),N.maximums.push(Math.max(J,se,De,We)),N.leaves.push(1)}for(v.push(N),E/=2;E>=1;E/=2){const K=v[v.length-1];N=new od(E);for(let J=0;J<E*E;J++){R(J%E,Math.floor(J/E),2,!0,H);const se=K.getElevation(H[0],H[1]),De=K.getElevation(H[2],H[1]),We=K.getElevation(H[2],H[3]),_t=K.getElevation(H[0],H[3]),Ze=K.isLeaf(H[0],H[1]),lt=K.isLeaf(H[2],H[1]),Ct=K.isLeaf(H[2],H[3]),mt=K.isLeaf(H[0],H[3]),sn=Math.min(se.min,De.min,We.min,_t.min),en=Math.max(se.max,De.max,We.max,_t.max),In=Ze&&lt&&Ct&&mt;N.maximums.push(en),N.minimums.push(sn),N.leaves.push(en-sn<=5&&In?1:0)}v.push(N)}return v}(this.dem),s=n.length-1,u=n[s];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(n,0,0,s,0)}raycastRoot(e,n,s,u,f,m,v=1){return na([e,n,-100],[s,u,this.maximums[0]*v],f,m)}raycast(e,n,s,u,f,m,v=1){if(!this.nodeCount)return null;const E=this.raycastRoot(e,n,s,u,f,m,v);if(null==E)return null;const C=[],R=[],N=[],H=[],K=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;K.length>0;){const{idx:J,t:se,nodex:De,nodey:We,depth:_t}=K.pop();if(this.leaves[J]){ll(De,We,_t,e,n,s,u,N,H);const lt=1<<_t,Ct=(De+0)/lt,mt=(De+1)/lt,sn=(We+0)/lt,en=(We+1)/lt,In=cl(Ct,sn,this.dem)*v,Yn=cl(mt,sn,this.dem)*v,_n=cl(mt,en,this.dem)*v,Bn=cl(Ct,en,this.dem)*v,Un=ru(N[0],N[1],In,H[0],N[1],Yn,H[0],H[1],_n,f,m),$n=ru(H[0],H[1],_n,N[0],H[1],Bn,N[0],N[1],In,f,m),Kn=Math.min(null!==Un?Un:Number.MAX_VALUE,null!==$n?$n:Number.MAX_VALUE);if(Kn!==Number.MAX_VALUE)return Kn;{const xn=_u([],f,m,se);if(Iu(In,Yn,Bn,_n,Jd(xn[0],N[0],H[0]),Jd(xn[1],N[1],H[1]))>=xn[2])return se}continue}let Ze=0;for(let lt=0;lt<this._siblingOffset.length;lt++){ll((De<<1)+this._siblingOffset[lt][0],(We<<1)+this._siblingOffset[lt][1],_t+1,e,n,s,u,N,H),N[2]=-100,H[2]=this.maximums[this.childOffsets[J]+lt]*v;const Ct=na(N,H,f,m);if(null!=Ct){const mt=Ct;C[lt]=mt;let sn=!1;for(let en=0;en<Ze&&!sn;en++)mt>=C[R[en]]&&(R.splice(en,0,lt),sn=!0);sn||(R[Ze]=lt),Ze++}}for(let lt=0;lt<Ze;lt++){const Ct=R[lt];K.push({idx:this.childOffsets[J]+Ct,t:C[Ct],nodex:(De<<1)+this._siblingOffset[Ct][0],nodey:(We<<1)+this._siblingOffset[Ct][1],depth:_t+1})}}return null}_addNode(e,n,s){return this.minimums.push(e),this.maximums.push(n),this.leaves.push(s),this.childOffsets.push(0),this.nodeCount++}_construct(e,n,s,u,f){if(1===e[u].isLeaf(n,s))return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const m=u-1,v=e[m];let E=0,C=0;for(let R=0;R<this._siblingOffset.length;R++){const N=2*n+this._siblingOffset[R][0],H=2*s+this._siblingOffset[R][1],K=v.getElevation(N,H),J=v.isLeaf(N,H),se=this._addNode(K.min,K.max,J);J&&(E|=1<<R),C||(C=se)}for(let R=0;R<this._siblingOffset.length;R++)E&1<<R||this._construct(e,2*n+this._siblingOffset[R][0],2*s+this._siblingOffset[R][1],m,C+R)}}function Iu(t,e,n,s,u,f){return En(En(t,n,f),En(e,s,f),u)}function cl(t,e,n){const s=n.dim,u=Ke(t*s-.5,0,s-1),f=Ke(e*s-.5,0,s-1),m=Math.floor(u),v=Math.floor(f),E=Math.min(m+1,s-1),C=Math.min(v+1,s-1);return Iu(n.get(m,v),n.get(E,v),n.get(m,C),n.get(E,C),u-m,f-v)}const Pu={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class jc{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,n,s,u=!1,f=!1){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(s&&"mapbox"!==s&&"terrarium"!==s)return Xe(`"${s}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;const m=this.dim=n.height-2,v=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=s||"mapbox",this.borderReady=u,!u){for(let E=0;E<m;E++)v[this._idx(-1,E)]=v[this._idx(0,E)],v[this._idx(m,E)]=v[this._idx(m-1,E)],v[this._idx(E,-1)]=v[this._idx(E,0)],v[this._idx(E,m)]=v[this._idx(E,m-1)];v[this._idx(-1,-1)]=v[this._idx(0,0)],v[this._idx(m,-1)]=v[this._idx(m-1,0)],v[this._idx(-1,m)]=v[this._idx(0,m-1)],v[this._idx(m,m)]=v[this._idx(m-1,m-1)],f&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Jh(this)}get(e,n,s=!1){s&&(e=Ke(e,-1,this.dim),n=Ke(n,-1,this.dim));const u=4*this._idx(e,n);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(e){return Pu[e]}get unpackVector(){return Pu[this.encoding]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(e+1)}_unpackMapbox(e,n,s){return(256*e*256+256*n+s)/10-1e4}_unpackTerrarium(e,n,s){return 256*e+n+s/256-32768}static pack(e,n){const s=[0,0,0,0],u=jc.getUnpackVector(n);let f=Math.floor((e+u[3])/u[2]);return s[2]=f%256,f=Math.floor(f/256),s[1]=f%256,f=Math.floor(f/256),s[0]=f,s}getPixels(){return new Ra({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,n,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=n*this.dim,f=n*this.dim+this.dim,m=s*this.dim,v=s*this.dim+this.dim;switch(n){case-1:u=f-1;break;case 1:f=u+1}switch(s){case-1:m=v-1;break;case 1:v=m+1}const E=-n*this.dim,C=-s*this.dim;for(let R=m;R<v;R++)for(let N=u;N<f;N++){const H=4*this._idx(N,R),K=4*this._idx(N+E,R+C);this.pixels[H+0]=e.pixels[K+0],this.pixels[H+1]=e.pixels[K+1],this.pixels[H+2]=e.pixels[K+2],this.pixels[H+3]=e.pixels[K+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}fi(jc,"DEMData"),fi(Jh,"DemMinMaxQuadTree",{omit:["dem"]});class sd{constructor(e,n){this.max=e,this.onRemove=n,this.reset()}reset(){for(const e in this.data)for(const n of this.data[e])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(e,n,s){const u=e.wrapped().key;void 0===this.data[u]&&(this.data[u]=[]);const f={value:n,timeout:void 0};if(void 0!==s&&(f.timeout=setTimeout(()=>{this.remove(e,f)},s)),this.data[u].push(f),this.order.push(u),this.order.length>this.max){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const n=this.data[e].shift();return n.timeout&&clearTimeout(n.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),n.value}getByKey(e){const n=this.data[e];return n?n[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,n){if(!this.has(e))return this;const s=e.wrapped().key,u=void 0===n?0:this.data[s].indexOf(n),f=this.data[s][u];return this.data[s].splice(u,1),f.timeout&&clearTimeout(f.timeout),0===this.data[s].length&&delete this.data[s],this.onRemove(f.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(e){const n=[];for(const s in this.data)for(const u of this.data[s])e(u.value)||n.push(u);for(const s of n)this.remove(s.value.tileID,s)}}class Xl{constructor(e,n,s){this.func=e,this.mask=n,this.range=s}}Xl.ReadOnly=!1,Xl.ReadWrite=!0,Xl.disabled=new Xl(519,Xl.ReadOnly,[0,1]);class su{constructor(e,n,s,u,f,m){this.test=e,this.ref=n,this.mask=s,this.fail=u,this.depthFail=f,this.pass=m}}su.disabled=new su({func:519,mask:0},0,0,7680,7680,7680);class La{constructor(e,n,s){this.blendFunction=e,this.blendColor=n,this.mask=s}}La.Replace=[1,0],La.disabled=new La(La.Replace,Fr.transparent,[!1,!1,!1,!1]),La.unblended=new La(La.Replace,Fr.transparent,[!0,!0,!0,!0]),La.alphaBlended=new La([1,771],Fr.transparent,[!0,!0,!0,!0]);class Rl{constructor(e,n,s){this.enable=e,this.mode=n,this.frontFace=s}}Rl.disabled=new Rl(!1,1029,2305),Rl.backCCW=new Rl(!0,1029,2305),Rl.backCW=new Rl(!0,1029,2304),Rl.frontCW=new Rl(!0,1028,2304),Rl.frontCCW=new Rl(!0,1028,2305);class au extends Cr{constructor(e,n,s){super(),this.id=e,this._onlySymbols=s,n.on("data",u=>{"source"===u.dataType&&"metadata"===u.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===u.dataType&&"content"===u.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),n.on("error",()=>{this._sourceErrored=!0}),this._source=n,this._tiles={},this._cache=new sd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new _c,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const n=this._tiles[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,n){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,n)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const s=this._tiles[n];s.upload(e),s.prepare(this.map.style.imageManager)}}getIds(){return Tn(this._tiles).map(e=>e.tileID).sort(Cp).map(e=>e.key)}getRenderableIds(e){const n=[];for(const s in this._tiles)this._isIdRenderable(+s,e)&&n.push(this._tiles[s]);return e?n.sort((s,u)=>{const f=s.tileID,m=u.tileID,v=new Qe(f.canonical.x,f.canonical.y)._rotate(this.transform.angle),E=new Qe(m.canonical.x,m.canonical.y)._rotate(this.transform.angle);return f.overscaledZ-m.overscaledZ||E.y-v.y||E.x-v.x}).map(s=>s.tileID.key):n.map(s=>s.tileID).sort(Cp).map(s=>s.key)}hasRenderableParent(e){const n=this.findLoadedParent(e,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(e,n){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(n||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,n){const s=this._tiles[e];s&&("loading"!==s.state&&(s.state=n),this._loadTile(s,this._tileLoaded.bind(this,s,e,n)))}_tileLoaded(e,n,s,u){if(u)if(e.state="errored",404!==u.status)this._source.fire(new eo(u,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const f=this.map.painter.terrain;this.update(this.transform,f.getScaledDemTileSize(),!0),f.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Gn.now(),"expired"===s&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new _o("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const n=this.getRenderableIds();for(let u=0;u<n.length;u++){const f=n[u];if(e.neighboringTiles&&e.neighboringTiles[f]){const m=this.getTileByID(f);s(e,m),s(m,e)}}function s(u,f){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let m=f.tileID.canonical.x-u.tileID.canonical.x;const v=f.tileID.canonical.y-u.tileID.canonical.y,E=Math.pow(2,u.tileID.canonical.z),C=f.tileID.key;0===m&&0===v||Math.abs(v)>1||(Math.abs(m)>1&&(1===Math.abs(m+E)?m+=E:1===Math.abs(m-E)&&(m-=E)),f.dem&&u.dem&&(u.dem.backfillBorder(f.dem,m,v),u.neighboringTiles&&u.neighboringTiles[C]&&(u.neighboringTiles[C].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,n,s,u){for(const f in this._tiles){let m=this._tiles[f];if(u[f]||!m.hasData()||m.tileID.overscaledZ<=n||m.tileID.overscaledZ>s)continue;let v=m.tileID;for(;m&&m.tileID.overscaledZ>n+1;){const C=m.tileID.scaledTo(m.tileID.overscaledZ-1);m=this._tiles[C.key],m&&m.hasData()&&(v=C)}let E=v;for(;E.overscaledZ>n;)if(E=E.scaledTo(E.overscaledZ-1),e[E.key]){u[v.key]=v;break}}}findLoadedParent(e,n){if(e.key in this._loadedParentTiles){const s=this._loadedParentTiles[e.key];return s&&s.tileID.overscaledZ>=n?s:null}for(let s=e.overscaledZ-1;s>=n;s--){const u=e.scaledTo(s),f=this._getLoadedTile(u);if(f)return f}}_getLoadedTile(e){const n=this._tiles[e.key];return n&&n.hasData()?n:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,n){n=n||this._source.tileSize;const s=Math.ceil(e.width/n)+1,u=Math.ceil(e.height/n)+1,f=Math.floor(s*u*5),m="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,f):f,v="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(e){const n=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,n){const s={};for(const u in this._tiles){const f=this._tiles[u];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+n),s[f.tileID.key]=f}this._tiles=s;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,n,s){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!s)return;let u;this.updateCacheSize(e,n),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(v=>new ga(v.canonical.z,v.wrap,v.canonical.z,v.canonical.x,v.canonical.y)):(u=e.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!s,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(v=>this._source.hasTile(v)))):u=[];const f=this._updateRetainedTiles(u);if(Mp(this._source.type)&&0!==u.length){const v={},E={},C=Object.keys(f);for(const N of C){const H=f[N],K=this._tiles[N];if(!K||K.fadeEndTime&&K.fadeEndTime<=Gn.now())continue;const J=this.findLoadedParent(H,Math.max(H.overscaledZ-au.maxOverzooming,this._source.minzoom));J&&(this._addTile(J.tileID),v[J.tileID.key]=J.tileID),E[N]=H}const R=u[u.length-1].overscaledZ;for(const N in this._tiles){const H=this._tiles[N];if(f[N]||!H.hasData())continue;let K=H.tileID;for(;K.overscaledZ>R;){K=K.scaledTo(K.overscaledZ-1);const J=this._tiles[K.key];if(J&&J.hasData()&&E[K.key]){f[N]=H.tileID;break}}}for(const N in v)f[N]||(this._coveredTiles[N]=!0,f[N]=v[N])}for(const v in f)this._tiles[v].clearFadeHold();const m=function(v,E){const C=[];for(const R in v)R in E||C.push(R);return C}(this._tiles,f);for(const v of m){const E=this._tiles[v];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+v)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const n={};if(0===e.length)return n;const s={},u=e.reduce((C,R)=>Math.min(C,R.overscaledZ),1/0),f=e[0].overscaledZ,m=Math.max(f-au.maxOverzooming,this._source.minzoom),v=Math.max(f+au.maxUnderzooming,this._source.minzoom),E={};for(const C of e){const R=this._addTile(C);n[C.key]=C,R.hasData()||u<this._source.maxzoom&&(E[C.key]=C)}this._retainLoadedChildren(E,u,v,n);for(const C of e){let R=this._tiles[C.key];if(R.hasData())continue;if(C.canonical.z>=this._source.maxzoom){const H=C.children(this._source.maxzoom)[0],K=this.getTile(H);if(K&&K.hasData()){n[H.key]=H;continue}}else{const H=C.children(this._source.maxzoom);if(n[H[0].key]&&n[H[1].key]&&n[H[2].key]&&n[H[3].key])continue}let N=R.wasRequested();for(let H=C.overscaledZ-1;H>=m;--H){const K=C.scaledTo(H);if(s[K.key]||(s[K.key]=!0,R=this.getTile(K),!R&&N&&(R=this._addTile(K)),R&&(n[K.key]=K,N=R.wasRequested(),R.hasData())))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const n=[];let s,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){s=this._loadedParentTiles[u.key];break}n.push(u.key);const f=u.scaledTo(u.overscaledZ-1);if(s=this._getLoadedTile(f),s)break;u=f}for(const f of n)this._loadedParentTiles[f]=s}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const s=Boolean(n);if(!s){const u=this.map?this.map.painter:null;n=new Ep(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))}return n?(n.uses++,this._tiles[e.key]=n,s||this._source.fire(new _o("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null}_setTileReloadTimer(e,n){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const s=n.getExpiryTimeout();s&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},s))}_removeTile(e){const n=this._tiles[e];n&&(n.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),n.uses>0||(n.hasData()&&"reloading"!==n.state?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,n,s){const u=[],f=this.transform;if(!f)return u;const m="globe"===f.projection.name,v=Hl(f.center.lng);for(const E in this._tiles){const C=this._tiles[E];if(s&&C.clearQueryDebugViz(),C.holdingForFade())continue;let R;if(m){const N=C.tileID.canonical;if(0===N.z){const H=[Math.abs(Ke(v,...ad(N,-1))-v),Math.abs(Ke(v,...ad(N,1))-v)];R=[0,2*H.indexOf(Math.min(...H))-1]}else{const H=[Math.abs(Ke(v,...ad(N,-1))-v),Math.abs(Ke(v,...ad(N,0))-v),Math.abs(Ke(v,...ad(N,1))-v)];R=[H.indexOf(Math.min(...H))-1]}}else R=[0];for(const N of R){const H=e.containsTile(C,f,n,N);H&&u.push(H)}}return u}getVisibleCoordinates(e){const n=this.getRenderableIds(e).map(s=>this._tiles[s].tileID);for(const s of n)s.projMatrix=this.transform.calculateProjMatrix(s.toUnwrapped());return n}hasTransition(){if(this._source.hasTransition())return!0;if(Mp(this._source.type))for(const e in this._tiles){const n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=Gn.now())return!0}return!1}setFeatureState(e,n,s){this._state.updateState(e=e||"_geojsonTileLayer",n,s)}removeFeatureState(e,n,s){this._state.removeFeatureState(e=e||"_geojsonTileLayer",n,s)}getFeatureState(e,n){return this._state.getState(e=e||"_geojsonTileLayer",n)}setDependencies(e,n,s){const u=this._tiles[e];u&&u.setDependencies(n,s)}reloadTilesForDependencies(e,n){for(const s in this._tiles)this._tiles[s].hasDependency(e,n)&&this._reloadTile(+s,"reloading");this._cache.filter(s=>!s.hasDependency(e,n))}_preloadTiles(e,n){const s=new Map,u=Array.isArray(e)?e:[e],f=this.map.painter.terrain,m=this.usedForTerrain&&f?f.getScaledDemTileSize():this._source.tileSize;for(const v of u){const E=v.coveringTiles({tileSize:m,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const C of E)s.set(C.key,C);this.usedForTerrain&&v.updateElevation(!1)}yt(Array.from(s.values()),(v,E)=>{const C=new Ep(v,this._source.tileSize*v.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(C,R=>{"raster-dem"===this._source.type&&C.dem&&this._backfillDEM(C),E(R,C)})},n)}}function Cp(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),s=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||s-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Mp(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function ad(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}au.maxOverzooming=10,au.maxUnderzooming=3;class eh{constructor(e,n,s){this._demTile=e,this._dem=this._demTile.dem,this._scale=n,this._offset=s}static create(e,n,s){const u=s||e.findDEMTileFor(n);if(!u||!u.dem)return;const f=u.dem,m=u.tileID,v=1<<n.canonical.z-m.canonical.z;return new eh(u,u.tileSize/ki/v,[(n.canonical.x/v-m.canonical.x)*f.dim,(n.canonical.y/v-m.canonical.y)*f.dim])}tileCoordToPixel(e,n){const s=n*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),f=Math.floor(s);return new Qe(u,f)}getElevationAt(e,n,s,u){const f=e*this._scale+this._offset[0],m=n*this._scale+this._offset[1],v=Math.floor(f),E=Math.floor(m),C=this._dem;return u=!!u,s?En(En(C.get(v,E,u),C.get(v,E+1,u),m-E),En(C.get(v+1,E,u),C.get(v+1,E+1,u),m-E),f-v):C.get(v,E,u)}getElevationAtPixel(e,n,s){return this._dem.get(e,n,!!s)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Ya(1,e)*this._dem.stride}}class Dp{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new yl(ki,16,0),this.featureIndexArray=new Wp,this.promoteId=n}insert(e,n,s,u,f,m=0){const v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,u,f,m);const E=this.grid;for(let C=0;C<n.length;C++){const R=n[C],N=[1/0,1/0,-1/0,-1/0];for(let H=0;H<R.length;H++){const K=R[H];N[0]=Math.min(N[0],K.x),N[1]=Math.min(N[1],K.y),N[2]=Math.max(N[2],K.x),N[3]=Math.max(N[3],K.y)}N[0]<ki&&N[1]<ki&&N[2]>=0&&N[3]>=0&&E.insert(v,N[0],N[1],N[2],N[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ph(new Bd(this.rawTileData)).layers,this.sourceLayerCoder=new yg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,n,s,u){this.loadVTLayers();const f=e.params||{},m=Mo(f.filter),v=e.tileResult,E=e.transform,C=v.bufferedTilespaceBounds,R=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,(J,se,De,We)=>t_(v.bufferedTilespaceGeometry,J,se,De,We));R.sort(ey);let N=null;E.elevation&&R.length>0&&(N=eh.create(E.elevation,this.tileID));const H={};let K;for(let J=0;J<R.length;J++){const se=R[J];if(se===K)continue;K=se;const De=this.featureIndexArray.get(se);let We=null;this.loadMatchingFeature(H,De,m,f.layers,f.availableImages,n,s,u,(_t,Ze,lt,Ct=0)=>(We||(We=ac(_t,this.tileID.canonical,e.tileTransform)),Ze.queryIntersectsFeature(v,_t,lt,We,this.z,e.transform,e.pixelPosMatrix,N,Ct)))}return H}loadMatchingFeature(e,n,s,u,f,m,v,E,C){const{featureIndex:R,bucketIndex:N,sourceLayerIndex:H,layoutVertexArrayOffset:K}=n,J=this.bucketLayerIDs[N];if(u&&!function(_t,Ze){for(let lt=0;lt<_t.length;lt++)if(Ze.indexOf(_t[lt])>=0)return!0;return!1}(u,J))return;const se=this.sourceLayerCoder.decode(H),De=this.vtLayers[se].feature(R);if(s.needGeometry){const _t=Sc(De,!0);if(!s.filter(new $t(this.tileID.overscaledZ),_t,this.tileID.canonical))return}else if(!s.filter(new $t(this.tileID.overscaledZ),De))return;const We=this.getId(De,se);for(let _t=0;_t<J.length;_t++){const Ze=J[_t];if(u&&u.indexOf(Ze)<0)continue;const lt=m[Ze];if(!lt)continue;let Ct={};void 0!==We&&E&&(Ct=E.getState(lt.sourceLayer||"_geojsonTileLayer",We));const mt=Xt({},v[Ze]);mt.paint=wg(mt.paint,lt.paint,De,Ct,f),mt.layout=wg(mt.layout,lt.layout,De,Ct,f);const sn=!C||C(De,lt,Ct,K);if(!sn)continue;const en=new vg(De,this.z,this.x,this.y,We);en.layer=mt;let In=e[Ze];void 0===In&&(In=e[Ze]=[]),In.push({featureIndex:R,feature:en,intersectionZ:sn})}}lookupSymbolFeatures(e,n,s,u,f,m,v,E){const C={};this.loadVTLayers();const R=Mo(f);for(const N of e)this.loadMatchingFeature(C,{bucketIndex:s,sourceLayerIndex:u,featureIndex:N,layoutVertexArrayOffset:0},R,m,v,E,n);return C}loadFeature(e){const{featureIndex:n,sourceLayerIndex:s}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(s),f=this.vtFeatures[u];if(f[n])return f[n];const m=this.vtLayers[u].feature(n);return f[n]=m,m}hasLayer(e){for(const n of this.bucketLayerIDs)for(const s of n)if(e===s)return!0;return!1}getId(e,n){let s=e.id;if(this.promoteId){const u="string"==typeof this.promoteId?this.promoteId:this.promoteId[n];null!=u&&(s=e.properties[u]),"boolean"==typeof s&&(s=Number(s))}return s}}function wg(t,e,n,s,u){return Tt(t,(f,m)=>{const v=e instanceof Qn?e.get(m):null;return v&&v.evaluate?v.evaluate(n,s,u):v})}function ey(t,e){return e-t}fi(Dp,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Tp{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.image=new Oc({width:e,height:n}),this.positions={},this.uploaded=!1}getDash(e,n){const s=this.getKey(e,n);return this.positions[s]}trim(){const e=this.width,n=this.height=Nn(this.nextRow);this.image.resize({width:e,height:n})}getKey(e,n){return e.join(",")+n}getDashRanges(e,n,s){const u=[];let f=e.length%2==1?-e[e.length-1]*s:0,m=e[0]*s,v=!0;u.push({left:f,right:m,isDash:v,zeroLength:0===e[0]});let E=e[0];for(let C=1;C<e.length;C++){v=!v;const R=e[C];f=E*s,E+=R,m=E*s,u.push({left:f,right:m,isDash:v,zeroLength:0===R})}return u}addRoundDash(e,n,s){const u=n/2;for(let f=-s;f<=s;f++){const m=this.width*(this.nextRow+s+f);let v=0,E=e[v];for(let C=0;C<this.width;C++){C/E.right>1&&(E=e[++v]);const R=Math.abs(C-E.left),N=Math.abs(C-E.right),H=Math.min(R,N);let K;const J=f/s*(u+1);if(E.isDash){const se=u-Math.abs(J);K=Math.sqrt(H*H+se*se)}else K=u-Math.sqrt(H*H+J*J);this.image.data[m+C]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(e,n){for(let E=e.length-1;E>=0;--E){const C=e[E],R=e[E+1];C.zeroLength?e.splice(E,1):R&&R.isDash===C.isDash&&(R.left=C.left,e.splice(E,1))}const s=e[0],u=e[e.length-1];s.isDash===u.isDash&&(s.left=u.left-this.width,u.right=s.right+this.width);const f=this.width*this.nextRow;let m=0,v=e[m];for(let E=0;E<this.width;E++){E/v.right>1&&(v=e[++m]);const C=Math.abs(E-v.left),R=Math.abs(E-v.right),N=Math.min(C,R);this.image.data[f+E]=Math.max(0,Math.min(255,(v.isDash?N:-N)+n+128))}}addDash(e,n){const s=this.getKey(e,n);if(this.positions[s])return this.positions[s];const u="round"===n,f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return Xe("LineAtlas out of space"),null;0===e.length&&e.push(1);let v=0;for(let R=0;R<e.length;R++)e[R]<0&&(Xe("Negative value is found in line dasharray, replacing values with 0"),e[R]=0),v+=e[R];if(0!==v){const R=this.width/v,N=this.getDashRanges(e,this.width,R);u?this.addRoundDash(N,R,f):this.addRegularDash(N,"square"===n?.5*R:0)}const E=this.nextRow+f;this.nextRow+=m;const C={tl:[E,f],br:[v,0]};return this.positions[s]=C,C}}fi(Tp,"LineAtlas");class Eg{constructor(e){const n={},s=[];for(const v in e){const E=e[v],C=n[v]={};for(const R in E.glyphs){const N=E.glyphs[+R];if(!N||0===N.bitmap.width||0===N.bitmap.height)continue;const H=N.metrics.localGlyph?2:1,K={x:0,y:0,w:N.bitmap.width+2*H,h:N.bitmap.height+2*H};s.push(K),C[R]=K}}const{w:u,h:f}=ip(s),m=new Oc({width:u||1,height:f||1});for(const v in e){const E=e[v];for(const C in E.glyphs){const R=E.glyphs[+C];if(!R||0===R.bitmap.width||0===R.bitmap.height)continue;const N=n[v][C],H=R.metrics.localGlyph?2:1;Oc.copy(R.bitmap,m,{x:0,y:0},{x:N.x+H,y:N.y+H},R.bitmap)}}this.image=m,this.positions=n}}fi(Eg,"GlyphAtlas");class Cg{constructor(e){this.tileID=new ga(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=zc(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,n,s,u,f){this.status="parsing",this.data=e,this.collisionBoxArray=new pf;const m=new yg(Object.keys(e.layers).sort()),v=new Dp(this.tileID,this.promoteId);v.bucketLayerIDs=[];const E={},C=new Tp(256,256),R={featureIndex:v,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:C,availableImages:s},N=n.familiesBySource[this.source];for(const Ct in N){const mt=e.layers[Ct];if(!mt)continue;let sn=!1,en=!1;for(const _n of N[Ct])"symbol"===_n[0].type?sn=!0:en=!0;if(!0===this.isSymbolTile&&!sn||!1===this.isSymbolTile&&!en)continue;1===mt.version&&Xe(`Vector tile source "${this.source}" layer "${Ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const In=m.encode(Ct),Yn=[];for(let _n=0;_n<mt.length;_n++){const Bn=mt.feature(_n),Un=v.getId(Bn,Ct);Yn.push({feature:Bn,id:Un,index:_n,sourceLayerIndex:In})}for(const _n of N[Ct]){const Bn=_n[0];void 0!==this.isSymbolTile&&"symbol"===Bn.type!==this.isSymbolTile||Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||"none"!==Bn.visibility&&(th(_n,this.zoom,s),(E[Bn.id]=Bn.createBucket({index:v.bucketLayerIDs.length,layers:_n,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:In,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:s})).populate(Yn,R,this.tileID.canonical,this.tileTransform),v.bucketLayerIDs.push(_n.map(Un=>Un.id)))}}let H,K,J,se;C.trim();const De={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},We=Tt(R.glyphDependencies,Ct=>Object.keys(Ct).map(Number));Object.keys(We).length?u.send("getGlyphs",{uid:this.uid,stacks:We},(Ct,mt)=>{H||(H=Ct,K=mt,lt.call(this))},void 0,!1,De):K={};const _t=Object.keys(R.iconDependencies);_t.length?u.send("getImages",{icons:_t,source:this.source,tileID:this.tileID,type:"icons"},(Ct,mt)=>{H||(H=Ct,J=mt,lt.call(this))},void 0,!1,De):J={};const Ze=Object.keys(R.patternDependencies);function lt(){if(H)return f(H);if(K&&J&&se){const Ct=new Eg(K),mt=new pc(J,se);for(const sn in E){const en=E[sn];en instanceof nu?(th(en.layers,this.zoom,s),rg(en,K,Ct.positions,J,mt.iconPositions,this.showCollisionBoxes,s,this.tileID.canonical,this.tileZoom,this.projection)):en.hasPattern&&(en instanceof Oh||en instanceof Gu||en instanceof Rd)&&(th(en.layers,this.zoom,s),en.addFeatures(R,this.tileID.canonical,mt.patternPositions,s,this.tileTransform))}this.status="done",f(null,{buckets:Tn(E).filter(sn=>!sn.isEmpty()),featureIndex:v,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,lineAtlas:C,imageAtlas:mt,glyphMap:this.returnDependencies?K:null,iconMap:this.returnDependencies?J:null,glyphPositions:this.returnDependencies?Ct.positions:null})}}Ze.length?u.send("getImages",{icons:Ze,source:this.source,tileID:this.tileID,type:"patterns"},(Ct,mt)=>{H||(H=Ct,se=mt,lt.call(this))},void 0,!1,De):se={},lt.call(this)}}function th(t,e,n){const s=new $t(e);for(const u of t)u.recalculate(s,n)}class nf{constructor(e){this.entries={},this.scheduler=e}request(e,n,s,u){const f=this.entries[e]=this.entries[e]||{callbacks:[]};if(f.result){const[m,v]=f.result;return this.scheduler?this.scheduler.add(()=>{u(m,v)},n):u(m,v),()=>{}}return f.callbacks.push(u),f.cancel||(f.cancel=s((m,v)=>{f.result=[m,v];for(const E of f.callbacks)this.scheduler?this.scheduler.add(()=>{E(m,v)},n):E(m,v);setTimeout(()=>delete this.entries[e],3e3)})),()=>{f.result||(f.callbacks=f.callbacks.filter(m=>m!==u),f.callbacks.length||(f.cancel(),delete this.entries[e]))}}}function Mg(t,e,n){const s=JSON.stringify(t.request);return t.data&&(this.deduped.entries[s]={result:[null,t.data]}),this.deduped.request(s,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},u=>{const f=ni(t.request,(m,v,E,C)=>{m?u(m):v&&u(null,{vectorTile:n?void 0:new Ph(new Bd(v)),rawData:v,cacheControl:E,expires:C})});return()=>{f.cancel(),u()}},e)}a.ARRAY_TYPE=Ka,a.AUTH_ERR_MSG=It,a.Aabb=ta,a.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.cancelCallbacks={},Jn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Se()?t:he,this.scheduler=new Q_}send(t,e,n,s,u=!1,f){const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=f,this.callbacks[m]=n);const v=li(this.globalScope)?void 0:[];return this.target.postMessage({id:m,type:t,hasCallback:!!n,targetMapId:s,mustQueue:u,sourceMapId:this.mapId,data:xl(e,v)},v),{cancel:()=>{n&&delete this.callbacks[m],this.target.postMessage({id:m,type:"<cancel>",targetMapId:s,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const s=this.cancelCallbacks[n];delete this.cancelCallbacks[n],s&&s.cancel()}else if(e.mustQueue||Se()){const s=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add(()=>this.processTask(n,e),s&&s.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(us(e.error)):n(null,us(e.data)))}else{const n=li(this.globalScope)?void 0:[],s=e.hasCallback?(f,m)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:f?xl(f):null,data:xl(m,n)},n)}:f=>{},u=us(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,u,s);else if(this.parent.getWorkerSource){const f=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,f[0],u.source)[f[1]](u,s)}else s(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.CanonicalTileID=kd,a.Color=Fr,a.ColorMode=La,a.CullFaceMode=Rl,a.DEMData=jc,a.DataConstantProperty=qt,a.DedupedRequest=nf,a.DepthMode=Xl,a.EXTENT=ki,a.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,s=1<<n,u=Math.floor(t.x),f=Math.floor((t.x-u)*s),m=Math.floor(t.y*s),v=this.findDEMTileFor(new ga(n,u,n,f,m));return!(!v||!v.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const s=this._source();if(!s||t.y<0||t.y>1)return e;const u=s.getSource().maxzoom,f=1<<u,m=Math.floor(t.x),v=t.x-m,E=new ga(u,m,u,Math.floor(v*f),Math.floor(t.y*f)),C=this.findDEMTileFor(E);if(!C||!C.dem)return e;const R=C.dem,N=1<<C.tileID.canonical.z,H=(v*N-C.tileID.canonical.x)*R.dim,K=(t.y*N-C.tileID.canonical.y)*R.dim,J=Math.floor(H),se=Math.floor(K);return(n?this.exaggeration():1)*En(En(R.get(J,se),R.get(J,se+1),K-se),En(R.get(J+1,se),R.get(J+1,se+1),K-se),H-J)}getAtTileOffset(t,e,n){const s=1<<t.canonical.z;return this.getAtPointOrZero(new Tl(t.wrap+(t.canonical.x+e/ki)/s,(t.canonical.y+n/ki)/s))}getAtTileOffsetFunc(t,e,n,s){return u=>{const f=this.getAtTileOffset(t,u.x,u.y),m=s.upVector(t.canonical,u.x,u.y);return Xa(m,m,f*s.upVectorScale(t.canonical,e,n).metersToTile),m}}getForTilePoints(t,e,n,s){if(this.isUsingMockSource())return!1;const u=eh.create(this,t,s);return!!u&&(e.forEach(f=>{f[2]=this.exaggeration()*u.getElevationAt(f[0],f[1],n)}),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,s=e.tileID,u=1<<t.canonical.z-s.canonical.z;let f=t.canonical.x/u-s.canonical.x,m=t.canonical.y/u-s.canonical.y,v=0;for(let E=0;E<t.canonical.z-s.canonical.z&&!n.leaves[v];E++){f*=2,m*=2;const C=2*Math.floor(m)+Math.floor(f);v=n.childOffsets[v]+C,f%=1,m%=1}return{min:this.exaggeration()*n.minimums[v],max:this.exaggeration()*n.maximums[v]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},a.ErrorEvent=eo,a.EvaluationParameters=$t,a.Event=_o,a.Evented=Cr,a.FillExtrusionBucket=Rd,a.Frustum=Ed,a.FrustumCorners=ea,a.GLOBE_METERS_TO_ECEF=Zd,a.GLOBE_RADIUS=mc,a.GLOBE_SCALE_MATCH_LATITUDE=45,a.GLOBE_ZOOM_THRESHOLD_MAX=6,a.GLOBE_ZOOM_THRESHOLD_MIN=5,a.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_createGrid(t){const e=new Or,n=new Ss,s=65;for(let u=0;u<s;u++)for(let f=0;f<s;f++)e.emplaceBack(f,u);this._gridSegments=[];for(let u=0,f=0;u<Mu.length;u++){const m=Mu[u];for(let E=0;E<m;E++)for(let C=0;C<64;C++){const R=E*s+C;n.emplaceBack(R+1,R,R+s),n.emplaceBack(R+s,R+s+1,R+1)}const v=64*m*2;this._gridSegments.push(ds.simpleSegment(0,f,(m+1)*s,v)),f+=v}this._gridBuffer=t.createVertexBuffer(e,Ju.members),this._gridIndexBuffer=t.createIndexBuffer(n,!0)}_createPoles(t){const e=new Ss;for(let u=0;u<=64;u++)e.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new uu,s=new uu;this._poleSegments=[];for(let u=0,f=0;u<5;u++){const m=360/(1<<u);n.emplaceBack(0,-mc,0,.5,0),s.emplaceBack(0,-mc,0,.5,1);for(let v=0;v<=64;v++){const E=v/64,C=En(0,m,E),[R,N,H]=ed(mg,H_,C,mc);n.emplaceBack(R,N,H,E,0),s.emplaceBack(R,N,H,E,1)}this._poleSegments.push(ds.simpleSegment(f,0,66,64)),f+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Uh,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(s,Uh,!1)}getGridBuffers(t){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[t]]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const n=new Cl,s=64,u=s+1;this._wireframeSegments=[];for(let f=0,m=0;f<Mu.length;f++){const v=Mu[f];for(let C=0;C<v;C++)for(let R=0;R<s;R++){const N=C*u+R;n.emplaceBack(N,N+1),n.emplaceBack(N,N+u),n.emplaceBack(N,N+u+1)}const E=v*s*3;this._wireframeSegments.push(ds.simpleSegment(0,m,(v+1)*u,E)),m+=E}this._wireframeIndexBuffer=t.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},a.GlyphManager=Hd,a.ImagePosition=zd,a.LivePerformanceUtils=fe,a.LngLat=Sr,a.LngLatBounds=sc,a.LocalGlyphMode=ng,a.MAX_MERCATOR_LATITUDE=$l,a.MercatorCoordinate=Tl,a.ONE_EM=24,a.OverscaledTileID=ga,a.PerformanceMarkers=_e,a.Properties=Oi,a.RGBAImage=Ra,a.Ray=kf,a.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let e="";for(let n=0;n<10;n++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",et,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!ct(t))return t;const n=Yt(t);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!ct(t))return t;const n=Yt(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,s){if(!ct(t))return t;const u=Yt(t);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),n&&u.params.push(`language=${n}`),s&&u.params.push(`worldview=${s}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,s){const u=Yt(t);return ct(t)?(u.path=`/styles/v1${u.path}/sprite${e}${n}`,this._makeAPIURL(u,this._customAccessToken||s)):(u.path+=`${e}${n}`,wn(u))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ct(t))return t;const s=Yt(t);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==s.authority&&512===n?"@2x":""}${ke.supported?".webp":"$1"}`),"raster"===s.authority?s.path=`/${Oe.RASTER_URL_PREFIX}${s.path}`:(s.path=s.path.replace(/^.+\/v4\//,"/"),s.path=`/${Oe.TILE_URL_VERSION}${s.path}`);const u=this._customAccessToken||function(f){for(const m of f){const v=m.match(/^access_token=(.*)$/);if(v)return v[1]}return null}(s.params)||Oe.ACCESS_TOKEN;return Oe.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&s.params.push(`sku=${this._skuToken}`),this._makeAPIURL(s,u)}canonicalizeTileURL(t,e){const n=Yt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let s="mapbox://";n.path.match(/^\/raster\/v1\//)?s+=`raster/${n.path.replace(`/${Oe.RASTER_URL_PREFIX}/`,"")}`:s+=`tiles/${n.path.replace(`/${Oe.TILE_URL_VERSION}/`,"")}`;let u=n.params;return e&&(u=u.filter(f=>!f.match(/^access_token=/))),u.length&&(s+=`?${u.join("&")}`),s}canonicalizeTileset(t,e){const n=!!e&&ct(e),s=[];for(const u of t.tiles||[])nn(u)?s.push(this.canonicalizeTileURL(u,n)):s.push(u);return s}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",s=Yt(Oe.API_URL);if(t.protocol=s.protocol,t.authority=s.authority,"http"===t.protocol){const u=t.params.indexOf("secure");u>=0&&t.params.splice(u,1)}if("/"!==s.path&&(t.path=`${s.path}${t.path}`),!Oe.REQUIRE_ACCESS_TOKEN)return wn(t);if(e=e||Oe.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter(u=>-1===u.indexOf("access_token")),t.params.push(`access_token=${e||""}`),wn(t)}},a.ResourceType=te,a.SegmentVector=ds,a.SourceCache=au,a.StencilMode=su,a.StructArrayLayout1ui2=pd,a.StructArrayLayout2f1f2i16=xs,a.StructArrayLayout2i4=Or,a.StructArrayLayout2ui4=Cl,a.StructArrayLayout3f12=wl,a.StructArrayLayout3ui6=Ss,a.StructArrayLayout4i8=Zr,a.StructArrayLayout5f20=uu,a.Texture=Qd,a.Tile=Ep,a.Transitionable=Pn,a.Uniform1f=vf,a.Uniform1i=class extends Vl{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},a.Uniform2f=class extends Vl{constructor(t){super(t),this.current=[0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},a.Uniform3f=class extends Vl{constructor(t){super(t),this.current=[0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},a.Uniform4f=$g,a.UniformColor=xf,a.UniformMatrix2f=class extends Vl{constructor(t){super(t),this.current=qg}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let s=0;s<4;s++)if(n[s]!==this.current[s]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},a.UniformMatrix3f=class extends Vl{constructor(t){super(t),this.current=Wg}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let s=0;s<9;s++)if(n[s]!==this.current[s]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},a.UniformMatrix4f=class extends Vl{constructor(t){super(t),this.current=Zg}set(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let s=1;s<16;s++)if(n[s]!==this.current[s]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},a.UnwrappedTileID=Tm,a.ValidationError=an,a.VectorTileFeature=$u,a.VectorTileWorkerSource=class extends Cr{constructor(t,e,n,s,u){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=u||Mg,this.loading={},this.loaded={},this.deduped=new nf(t.scheduler),this.isSpriteLoaded=s,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,s=t&&t.request,u=s&&s.collectResourceTiming,f=this.loading[n]=new Cg(t);f.abort=this.loadVectorData(t,(m,v)=>{const E=!this.loading[n];if(delete this.loading[n],E||m||!v)return f.status="done",E||(this.loaded[n]=f),e(m);const C=v.rawData,R={};v.expires&&(R.expires=v.expires),v.cacheControl&&(R.cacheControl=v.cacheControl),f.vectorTile=v.vectorTile||new Ph(new Bd(C));const N=()=>{f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,(H,K)=>{if(H||!K)return e(H);const J={};if(u){const se=Sn(s);se.length>0&&(J.resourceTiming=JSON.parse(JSON.stringify(se)))}e(null,Xt({rawTileData:C.slice(0)},K,R,J))})};this.isSpriteLoaded?N():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(N,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):N()}),this.loaded=this.loaded||{},this.loaded[n]=f})}reloadTile(t,e){const n=this.loaded,s=t.uid,u=this;if(n&&n[s]){const f=n[s];f.showCollisionBoxes=t.showCollisionBoxes,f.enableTerrain=!!t.enableTerrain,f.projection=t.projection,f.tileTransform=zc(t.tileID.canonical,t.projection);const m=(v,E)=>{const C=f.reloadCallback;C&&(delete f.reloadCallback,f.parse(f.vectorTile,u.layerIndex,this.availableImages,u.actor,C)),e(v,E)};"parsing"===f.status?f.reloadCallback=m:"done"===f.status&&(f.vectorTile?f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,m):m())}}abortTile(t,e){const n=t.uid,s=this.loading[n];s&&(s.abort&&s.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,s=t.uid;n&&n[s]&&delete n[s],e()}},a.WritingMode=ka,a.add=Ic,a.addDynamicAttributes=qh,a.adjoint=function(t,e){var n=e[0],s=e[1],u=e[2],f=e[3],m=e[4],v=e[5],E=e[6],C=e[7],R=e[8];return t[0]=m*R-v*C,t[1]=u*C-s*R,t[2]=s*v-u*m,t[3]=v*E-f*R,t[4]=n*R-u*E,t[5]=u*f-n*v,t[6]=f*C-m*E,t[7]=s*E-n*C,t[8]=n*m-s*f,t},a.asyncAll=yt,a.bezier=Jt,a.bindAll=Jn,a.boundsAttributes=bg,a.bufferConvexPolygon=function(t,e){const n=[];for(let s=0;s<t.length;s++){const u=He(s-1,-1,t.length-1),f=He(s+1,-1,t.length-1),m=t[s],v=t[f],E=t[u].sub(m).unit(),C=v.sub(m).unit(),R=C.angleWithSep(E.x,E.y),N=E.add(C).unit().mult(-1*e/Math.sin(R/2));n.push(m.add(N))}return n},a.cacheEntryPossiblyAdded=function(t){pe++,pe>jt&&(t.getActor().send("enforceCacheSizeLimit",on),pe=0)},a.calculateGlobeLabelMatrix=function(t,e){const{x:n,y:s}=t.point,u=fg(n,s,t.worldSize/t._pixelsPerMercatorPixel,0,0);return Ac(u,u,Hh(ql(e)))},a.calculateGlobeMatrix=function(t){const{x:e,y:n}=t.point,{lng:s,lat:u}=t._center;return fg(e,n,t.worldSize,s,u)},a.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,n=e/Ya(1,t.center.lat),s=Sl(new Float64Array(16));return vd(s,s,[t.point.x,t.point.y,0]),gu(s,s,[n,n,e]),Float32Array.from(s)},a.circumferenceAtLatitude=Cf,a.clamp=Ke,a.clearTileCache=function(t){if(!Bt())return;const e=he.caches.delete(ae);t&&e.catch(t).then(()=>t())},a.clipLine=Nh,a.clone=function(t){var e=new Ka(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.clone$1=Fe,a.collisionCircleLayout=Xf,a.config=Oe,a.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},a.create=function(){var t=new Ka(16);return Ka!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},a.create$1=tm,a.createExpression=ue,a.createLayout=gi,a.createStyleLayer=function(t){return"custom"===t.type?new K_(t):new bp[t.type](t)},a.cross=yu,a.degToRad=Ce,a.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},a.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},a.dot=Qa,a.earthRadius=md,a.ease=Mn,a.easeCubicInOut=zt,a.ecefToLatLng=function([t,e,n]){const s=Math.hypot(t,e,n),u=Math.atan2(t,n),f=.5*Math.PI-Math.acos(-e/s);return new Sr(we(u),we(f))},a.emitValidationErrors=Mc,a.endsWith=mn,a.enforceCacheSizeLimit=function(t){Je(),$e&&$e.then(e=>{e.keys().then(n=>{for(let s=0;s<n.length-t;s++)e.delete(n[s])})})},a.evaluateSizeForFeature=Qf,a.evaluateSizeForZoom=Fd,a.evaluateVariableOffset=Bc,a.evented=vt,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.exported=Gn,a.exported$1=ke,a.extend=Xt,a.extend$1=So,a.fillExtrusionHeightLift=Yf,a.filterObject=Ge,a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.fromQuat=function(t,e){var n=e[0],s=e[1],u=e[2],f=e[3],m=n+n,v=s+s,E=u+u,C=n*m,R=s*m,N=s*v,H=u*m,K=u*v,J=u*E,se=f*m,De=f*v,We=f*E;return t[0]=1-N-J,t[1]=R+We,t[2]=H-De,t[3]=0,t[4]=R-We,t[5]=1-C-J,t[6]=K+se,t[7]=0,t[8]=H+De,t[9]=K-se,t[10]=1-C-N,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e){var n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=-n,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=r_,a.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return At[e]},a.getAABBPointSquareDist=function(t,e,n){let s=0;for(let u=0;u<2;++u){const f=n?n[u]:0;t[u]>f&&(s+=(t[u]-f)*(t[u]-f)),e[u]<f&&(s+=(f-e[u])*(f-e[u]))}return s},a.getAnchorAlignment=Ym,a.getAnchorJustification=dp,a.getBounds=function(t){let e=1/0,n=1/0,s=-1/0,u=-1/0;for(const f of t)e=Math.min(e,f.x),n=Math.min(n,f.y),s=Math.max(s,f.x),u=Math.max(u,f.y);return{min:new Qe(e,n),max:new Qe(s,u)}},a.getColumn=Dn,a.getGridMatrix=function(t,e,n,s){const u=e.getNorth(),f=e.getSouth(),m=e.getWest(),v=e.getEast(),E=1<<t.z,C=v-m,R=u-f,N=C/64,H=-R/Mu[n],K=[0,N,0,H,0,0,u,m,0];if(t.z>0){const J=180/s;nm(K,K,[J/C+1,0,0,0,J/R+1,0,-.5*J/N,.5*J/H,1])}return K[2]=E,K[5]=t.x,K[8]=t.y,K},a.getImage=dn,a.getJSON=function(t,e){return Rn(Xt(t,{type:"json"}),e)},a.getLatitudinalLod=function(t){const e=80.051129;t=Ke(t,-80.051129,e)/e*90;const n=Math.pow(Math.abs(Math.sin(Ce(t))),3);return Math.round(n*(Mu.length-1))},a.getMapSessionAPI=Mt,a.getPerformanceMeasurement=Sn,a.getProjection=Zh,a.getRTLTextPluginStatus=Vt,a.getReferrer=Ht,a.getTilePoint=function(t,{x:e,y:n},s=0){return new Qe(((e-s)*t.scale-t.x)*ki,(n*t.scale-t.y)*ki)},a.getTileVec3=function(t,e,n=0){return bd(((e.x-n)*t.scale-t.x)*ki,(e.y*t.scale-t.y)*ki,dh(e.z,e.y))},a.getVideo=function(t,e){const n=he.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let s=0;s<t.length;s++){const u=he.document.createElement("source");Ii(t[s])||(n.crossOrigin="Anonymous"),u.src=t[s],n.appendChild(u)}return{cancel:()=>{}}},a.globeCenterToScreenPoint=function(t){const e=[0,0,0],n=Sl(new Float64Array(16));return Ac(n,t.pixelMatrix,t.globeMatrix),Vo(e,e,n),new Qe(e[0],e[1])},a.globeDenormalizeECEF=Hh,a.globeECEFOrigin=function(t,e){const n=[0,0,0];return Vo(n,n,Wd(ql(e.canonical))),Vo(n,n,t),n},a.globeNormalizeECEF=Wd,a.globePixelsToTileUnits=function(t,e){return ki/(512*Math.pow(2,t))*jh(ql(e))},a.globePoleMatrixForTile=function(t,e,n){const s=Sl(new Float64Array(16)),u=(e/(1<<t)-.5)*Math.PI*2;return Of(s,n.globeMatrix,u),Float32Array.from(s)},a.globeTileBounds=ql,a.globeTiltAtLngLat=pg,a.globeToMercatorTransition=Tu,a.globeUseCustomAntiAliasing=function(t,e,n){const s=Tu(n.zoom),u=t.style.map._antialias,f=!!e.extStandardDerivatives,m=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===s&&!u&&!m&&f},a.identity=Sl,a.identity$1=lm,a.invert=Pf,a.isFullscreen=function(){return!!he.document.fullscreenElement||!!he.document.webkitFullscreenElement},a.isLngLatBehindGlobe=pp,a.isMapAuthenticated=function(t){return le.has(t)},a.isMapboxURL=ct,a.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!li(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.latFromMercatorY=Gs,a.latLngToECEF=Du,a.len=a_,a.length=yh,a.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},a.lngFromMercatorX=Dl,a.loadVectorTile=Mg,a.makeRequest=Rn,a.mapValue=function(t,e,n,s,u){return Ke((t-e)/(n-e)*(u-s)+s,s,u)},a.mercatorScale=Mf,a.mercatorXfromLng=Hl,a.mercatorYfromLat=Gl,a.mercatorZfromAltitude=Ya,a.mul=qy,a.mul$1=s_,a.multiply=Ac,a.multiply$1=nm,a.multiply$2=xh,a.nextPowerOfTwo=Nn,a.normalize=pa,a.normalize$1=l_,a.normalize$2=sm,a.number=En,a.ortho=function(t,e,n,s,u,f,m){var v=1/(e-n),E=1/(s-u),C=1/(f-m);return t[0]=-2*v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*E,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*C,t[11]=0,t[12]=(e+n)*v,t[13]=(u+s)*E,t[14]=(m+f)*C,t[15]=1,t},a.pbf=Bd,a.perspective=function(t,e,n,s,u){var f,m=1/Math.tan(e/2);return t[0]=m/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(t[10]=(u+s)*(f=1/(s-u)),t[14]=2*u*s*f):(t[10]=-1,t[14]=-2*s),t},a.pick=function(t,e){const n={};for(let s=0;s<e.length;s++){const u=e[s];u in t&&(n[u]=t[u])}return n},a.plugin=rn,a.pointGeometry=Qe,a.polesInViewport=function(t){const e=Sl(new Float64Array(16));Ac(e,t.pixelMatrix,t.globeMatrix);const n=[0,Ja,0],s=[0,Pl,0];return Vo(n,n,e),Vo(s,s,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!pp(t,new Sr(t.center.lat,90)),s[0]>0&&s[0]<=t.width&&s[1]>0&&s[1]<=t.height&&!pp(t,new Sr(t.center.lat,-90))]},a.polygonContainsPoint=qc,a.polygonIntersectsBox=t_,a.polygonIntersectsPolygon=pu,a.polygonizeBounds=function(t,e,n=0,s=!0){const u=new Qe(n,n),f=t.sub(u),m=e.add(u),v=[f,new Qe(m.x,f.y),m,new Qe(f.x,m.y)];return s&&v.push(f.clone()),v},a.posAttributes=Ju,a.postMapLoadEvent=Ve,a.postPerformanceEvent=Ft,a.postTurnstileEvent=oe,a.potpack=ip,a.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},a.radToDeg=we,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.registerForPluginStateChange=function(t){return t({pluginStatus:je,pluginURL:ze}),vt.on("pluginStateChange",t),t},a.removeAuthState=function(t){le.delete(t)},a.renderColorRamp=Ff,a.resample=hh,a.rotateX=xd,a.rotateX$1=cm,a.rotateY=Of,a.rotateY$1=Rf,a.rotateZ=function(t,e,n){var s=Math.sin(n),u=Math.cos(n),f=e[0],m=e[1],v=e[2],E=e[3],C=e[4],R=e[5],N=e[6],H=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=f*u+C*s,t[1]=m*u+R*s,t[2]=v*u+N*s,t[3]=E*u+H*s,t[4]=C*u-f*s,t[5]=R*u-m*s,t[6]=N*u-v*s,t[7]=H*u-E*s,t},a.rotateZ$1=function(t,e,n){n*=.5;var s=e[0],u=e[1],f=e[2],m=e[3],v=Math.sin(n),E=Math.cos(n);return t[0]=s*E+u*v,t[1]=u*E-s*v,t[2]=f*E+m*v,t[3]=m*E-f*v,t},a.scale=gu,a.scale$1=om,a.scale$2=Xa,a.scaleAndAdd=_u,a.set=function(t,e,n,s){return t[0]=e,t[1]=n,t[2]=s,t},a.setCacheLimits=function(t,e){on=t,jt=e},a.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},a.setRTLTextPlugin=function(t,e,n=!1){if(je===Le||je===Be||je===Te)throw new Error("setRTLTextPlugin cannot be called multiple times.");ze=Gn.resolveURL(t),je=Le,Ae=e,Dt(),n||cn()},a.smoothstep=Ne,a.spec=yn,a.squaredLength=function(t){var e=t[0],n=t[1],s=t[2];return e*e+n*n+s*s},a.storeAuthState=function(t,e){e?le.add(t):le.delete(t)},a.sub=Al,a.subtract=vh,a.symbolSize=A_,a.tileAABB=function(t,e,n,s,u,f,m,v,E){if("globe"===E.name)return function ug(t,e,n){const s=e/t.worldSize,u=t.globeMatrix;if(n.z<=1){const en=ql(n).getCorners();return el(en,u,s),ta.fromPoints(en)}const f=Vh(n),m=dg(f);el(m,u,s);const v=Number.MAX_VALUE,E=[-v,-v,-v],C=[v,v,v];if(f.contains(t.center)){for(const Yn of m)Uu(C,C,Yn),Vu(E,E,Yn);E[2]=0;const en=t.point,In=[en.x*s,en.y*s,0];return Uu(C,C,In),Vu(E,E,In),new ta(C,E)}const R=[u[12]*s,u[13]*s,u[14]*s],N=f.getCenter(),H=Ke(t.center.lat,-85.051129,$l),K=Ke(N.lat,-85.051129,$l),J=Hl(t.center.lng),se=Gl(H);let De=J-Hl(N.lng);const We=se-Gl(K);De>.5?De-=1:De<-.5&&(De+=1);let _t=0;Math.abs(De)>Math.abs(We)?_t=De>=0?1:3:(_t=We>=0?0:2,_u(R,R,[u[4]*s,u[5]*s,u[6]*s],-Math.sin(Ce(We>=0?f.getSouth():f.getNorth()))*mc));const Ze=m[_t],lt=m[(_t+1)%4],Ct=new lg(Ze,lt,R),mt=[fp(Ct,0)||Ze[0],fp(Ct,1)||Ze[1],fp(Ct,2)||Ze[2]],sn=Tu(t.zoom);if(sn>0){const en=function({x:Yn,y:_n,z:Bn},Un,$n,Kn,xn){const oi=1/(1<<Bn);let Ri=Yn*oi,ui=Ri+oi,ai=_n*oi,si=ai+oi,zi=0;const _r=(Ri+ui)/2-Kn;return _r>.5?zi=-1:_r<-.5&&(zi=1),Ri=((Ri+zi)*Un-(Kn*=Un))*$n+Kn,ui=((ui+zi)*Un-Kn)*$n+Kn,ai=(ai*Un-(xn*=Un))*$n+xn,si=(si*Un-xn)*$n+xn,[[Ri,si,0],[ui,si,0],[ui,ai,0],[Ri,ai,0]]}(n,e,t._pixelsPerMercatorPixel,J,se);for(let Yn=0;Yn<m.length;Yn++)Jc(m[Yn],en[Yn],sn);const In=Ic([],en[_t],en[(_t+1)%4]);Xa(In,In,.5),Jc(mt,In,sn)}for(const en of m)Uu(C,C,en),Vu(E,E,en);return C[2]=Math.min(Ze[2],lt[2]),Uu(C,C,mt),Vu(E,E,mt),new ta(C,E)}(t,e,new kd(n,s,u));const C=zc({z:n,x:s,y:u},E);return new ta([(f+C.x/C.scale)*e,e*(C.y/C.scale),m],[(f+C.x2/C.scale)*e,e*(C.y2/C.scale),v])},a.tileCornersToBounds=Vh,a.tileTransform=zc,a.transformMat3=function(t,e,n){var s=e[0],u=e[1],f=e[2];return t[0]=s*n[0]+u*n[3]+f*n[6],t[1]=s*n[1]+u*n[4]+f*n[7],t[2]=s*n[2]+u*n[5]+f*n[8],t},a.transformMat4=Vo,a.transformMat4$1=Pc,a.transformQuat=rm,a.transitionTileAABBinECEF=cg,a.translate=vd,a.transpose=function(t,e){if(t===e){var n=e[1],s=e[2],u=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=s,t[7]=u}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.triggerPluginCompletionEvent=at,a.uniqueId=vi,a.updateGlobeVertexNormal=function(t,e,n,s,u){const f=5*e+2;t.float32[f+0]=n,t.float32[f+1]=s,t.float32[f+2]=u},a.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},a.validateFilter=t=>_l(Aa(t)),a.validateFog=t=>_l(ir(t)),a.validateLayer=t=>_l(Xr(t)),a.validateLight=t=>_l(tc(t)),a.validateSource=t=>_l(Vs(t)),a.validateStyle=nc,a.validateTerrain=t=>_l(Ec(t)),a.values=Tn,a.vectorTile=Ad,a.version=st,a.warnOnce=Xe,a.window=he,a.wrap=He}),_(0,function(a){function he(Ee){if("number"==typeof Ee||"boolean"==typeof Ee||"string"==typeof Ee||null==Ee)return JSON.stringify(Ee);if(Array.isArray(Ee)){let oe="[";for(const Me of Ee)oe+=`${he(Me)},`;return`${oe}]`}let ee="{";for(const oe of Object.keys(Ee).sort())ee+=`${oe}:${he(Ee[oe])},`;return`${ee}}`}function st(Ee){let ee="";for(const oe of a.refProperties)ee+=`/${he(Ee[oe])}`;return ee}class nt{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,oe){for(const Ve of ee)this._layerConfigs[Ve.id]=Ve,(this._layers[Ve.id]=a.createStyleLayer(Ve)).compileFilter(),this.keyCache[Ve.id]&&delete this.keyCache[Ve.id];for(const Ve of oe)delete this.keyCache[Ve],delete this._layerConfigs[Ve],delete this._layers[Ve];this.familiesBySource={};const Me=function(Ve,ut){const Ft={};for(let Mt=0;Mt<Ve.length;Mt++){const le=ut&&ut[Ve[Mt].id]||st(Ve[Mt]);ut&&(ut[Ve[Mt].id]=le);let _e=Ft[le];_e||(_e=Ft[le]=[]),_e.push(Ve[Mt])}const Lt=[];for(const Mt in Ft)Lt.push(Ft[Mt]);return Lt}(a.values(this._layerConfigs),this.keyCache);for(const Ve of Me){const ut=Ve.map(fe=>this._layers[fe.id]),Ft=ut[0];if("none"===Ft.visibility)continue;const Lt=Ft.source||"";let Mt=this.familiesBySource[Lt];Mt||(Mt=this.familiesBySource[Lt]={});const le=Ft.sourceLayer||"_geojsonTileLayer";let _e=Mt[le];_e||(_e=Mt[le]=[]),_e.push(ut)}}}class Oe{loadTile(ee,oe){const{uid:Me,encoding:Ve,rawImageData:ut,padding:Ft,buildQuadTree:Lt}=ee,Mt=a.window.ImageBitmap&&ut instanceof a.window.ImageBitmap?this.getImageData(ut,Ft):ut;oe(null,new a.DEMData(Me,Mt,Ve,Ft<1,Lt))}getImageData(ee,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);const Me=this.offscreenCanvasContext.getImageData(-oe,-oe,ee.width+2*oe,ee.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Me}}var ke=function Ee(ee,oe){var Me,Ve=ee&&ee.type;if("FeatureCollection"===Ve)for(Me=0;Me<ee.features.length;Me++)Ee(ee.features[Me],oe);else if("GeometryCollection"===Ve)for(Me=0;Me<ee.geometries.length;Me++)Ee(ee.geometries[Me],oe);else if("Feature"===Ve)Ee(ee.geometry,oe);else if("Polygon"===Ve)rt(ee.coordinates,oe);else if("MultiPolygon"===Ve)for(Me=0;Me<ee.coordinates.length;Me++)rt(ee.coordinates[Me],oe);return ee};function rt(Ee,ee){if(0!==Ee.length){pt(Ee[0],ee);for(var oe=1;oe<Ee.length;oe++)pt(Ee[oe],!ee)}}function pt(Ee,ee){for(var oe=0,Me=0,Ve=0,ut=Ee.length,Ft=ut-1;Ve<ut;Ft=Ve++){var Lt=(Ee[Ve][0]-Ee[Ft][0])*(Ee[Ft][1]+Ee[Ve][1]),Mt=oe+Lt;Me+=Math.abs(oe)>=Math.abs(Lt)?oe-Mt+Lt:Lt-Mt+oe,oe=Mt}oe+Me>=0!=!!ee&&Ee.reverse()}const Et=a.VectorTileFeature.prototype.toGeoJSON;class dt{constructor(ee){this._feature=ee,this.extent=a.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))}loadGeometry(){if(1===this._feature.type){const ee=[];for(const oe of this._feature.geometry)ee.push([new a.pointGeometry(oe[0],oe[1])]);return ee}{const ee=[];for(const oe of this._feature.geometry){const Me=[];for(const Ve of oe)Me.push(new a.pointGeometry(Ve[0],Ve[1]));ee.push(Me)}return ee}}toGeoJSON(ee,oe,Me){return Et.call(this,ee,oe,Me)}}class wt{constructor(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=ee.length,this._features=ee}feature(ee){return new dt(this._features[ee])}}var et={exports:{}},Zt=a.pointGeometry,kt=a.vectorTile.VectorTileFeature,Qe=Hn;function Hn(Ee,ee){this.options=ee||{},this.features=Ee,this.length=Ee.length}function Fn(Ee,ee){this.id="number"==typeof Ee.id?Ee.id:void 0,this.type=Ee.type,this.rawGeometry=1===Ee.type?[Ee.geometry]:Ee.geometry,this.properties=Ee.tags,this.extent=ee||4096}Hn.prototype.feature=function(Ee){return new Fn(this.features[Ee],this.options.extent)},Fn.prototype.loadGeometry=function(){var Ee=this.rawGeometry;this.geometry=[];for(var ee=0;ee<Ee.length;ee++){for(var oe=Ee[ee],Me=[],Ve=0;Ve<oe.length;Ve++)Me.push(new Zt(oe[Ve][0],oe[Ve][1]));this.geometry.push(Me)}return this.geometry},Fn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ee=this.geometry,ee=1/0,oe=-1/0,Me=1/0,Ve=-1/0,ut=0;ut<Ee.length;ut++)for(var Ft=Ee[ut],Lt=0;Lt<Ft.length;Lt++){var Mt=Ft[Lt];ee=Math.min(ee,Mt.x),oe=Math.max(oe,Mt.x),Me=Math.min(Me,Mt.y),Ve=Math.max(Ve,Mt.y)}return[ee,Me,oe,Ve]},Fn.prototype.toGeoJSON=kt.prototype.toGeoJSON;var Ye=a.pbf,Ce=Qe;function we(Ee){var ee=new Ye;return function(oe,Me){for(var Ve in oe.layers)Me.writeMessage(3,At,oe.layers[Ve])}(Ee,ee),ee.finish()}function At(Ee,ee){var oe;ee.writeVarintField(15,Ee.version||1),ee.writeStringField(1,Ee.name||""),ee.writeVarintField(5,Ee.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<Ee.length;oe++)Me.feature=Ee.feature(oe),ee.writeMessage(2,zt,Me);var Ve=Me.keys;for(oe=0;oe<Ve.length;oe++)ee.writeStringField(3,Ve[oe]);var ut=Me.values;for(oe=0;oe<ut.length;oe++)ee.writeMessage(4,He,ut[oe])}function zt(Ee,ee){var oe=Ee.feature;void 0!==oe.id&&ee.writeVarintField(1,oe.id),ee.writeMessage(2,Jt,Ee),ee.writeVarintField(3,oe.type),ee.writeMessage(4,Ne,oe)}function Jt(Ee,ee){var oe=Ee.feature,Me=Ee.keys,Ve=Ee.values,ut=Ee.keycache,Ft=Ee.valuecache;for(var Lt in oe.properties){var Mt=oe.properties[Lt],le=ut[Lt];if(null!==Mt){void 0===le&&(Me.push(Lt),ut[Lt]=le=Me.length-1),ee.writeVarint(le);var _e=typeof Mt;"string"!==_e&&"boolean"!==_e&&"number"!==_e&&(Mt=JSON.stringify(Mt));var fe=_e+":"+Mt,Ue=Ft[fe];void 0===Ue&&(Ve.push(Mt),Ft[fe]=Ue=Ve.length-1),ee.writeVarint(Ue)}}}function Mn(Ee,ee){return(ee<<3)+(7&Ee)}function Ke(Ee){return Ee<<1^Ee>>31}function Ne(Ee,ee){for(var oe=Ee.loadGeometry(),Me=Ee.type,Ve=0,ut=0,Ft=oe.length,Lt=0;Lt<Ft;Lt++){var Mt=oe[Lt],le=1;1===Me&&(le=Mt.length),ee.writeVarint(Mn(1,le));for(var _e=3===Me?Mt.length-1:Mt.length,fe=0;fe<_e;fe++){1===fe&&1!==Me&&ee.writeVarint(Mn(2,_e-1));var Ue=Mt[fe].x-Ve,Wt=Mt[fe].y-ut;ee.writeVarint(Ke(Ue)),ee.writeVarint(Ke(Wt)),Ve+=Ue,ut+=Wt}3===Me&&ee.writeVarint(Mn(7,1))}}function He(Ee,ee){var oe=typeof Ee;"string"===oe?ee.writeStringField(1,Ee):"boolean"===oe?ee.writeBooleanField(7,Ee):"number"===oe&&(Ee%1!=0?ee.writeDoubleField(3,Ee):Ee<0?ee.writeSVarintField(6,Ee):ee.writeVarintField(5,Ee))}function yt(Ee,ee,oe,Me,Ve,ut){if(Ve-Me<=oe)return;const Ft=Me+Ve>>1;Tn(Ee,ee,Ft,Me,Ve,ut%2),yt(Ee,ee,oe,Me,Ft-1,ut+1),yt(Ee,ee,oe,Ft+1,Ve,ut+1)}function Tn(Ee,ee,oe,Me,Ve,ut){for(;Ve>Me;){if(Ve-Me>600){const le=Ve-Me+1,_e=oe-Me+1,fe=Math.log(le),Ue=.5*Math.exp(2*fe/3),Wt=.5*Math.sqrt(fe*Ue*(le-Ue)/le)*(_e-le/2<0?-1:1);Tn(Ee,ee,oe,Math.max(Me,Math.floor(oe-_e*Ue/le+Wt)),Math.min(Ve,Math.floor(oe+(le-_e)*Ue/le+Wt)),ut)}const Ft=ee[2*oe+ut];let Lt=Me,Mt=Ve;for(Xt(Ee,ee,Me,oe),ee[2*Ve+ut]>Ft&&Xt(Ee,ee,Me,Ve);Lt<Mt;){for(Xt(Ee,ee,Lt,Mt),Lt++,Mt--;ee[2*Lt+ut]<Ft;)Lt++;for(;ee[2*Mt+ut]>Ft;)Mt--}ee[2*Me+ut]===Ft?Xt(Ee,ee,Me,Mt):(Mt++,Xt(Ee,ee,Mt,Ve)),Mt<=oe&&(Me=Mt+1),oe<=Mt&&(Ve=Mt-1)}}function Xt(Ee,ee,oe,Me){ii(Ee,oe,Me),ii(ee,2*oe,2*Me),ii(ee,2*oe+1,2*Me+1)}function ii(Ee,ee,oe){const Me=Ee[ee];Ee[ee]=Ee[oe],Ee[oe]=Me}function vi(Ee,ee,oe,Me){const Ve=Ee-oe,ut=ee-Me;return Ve*Ve+ut*ut}et.exports=we,et.exports.fromVectorTileJs=we,et.exports.fromGeojsonVt=function(Ee,ee){ee=ee||{};var oe={};for(var Me in Ee)oe[Me]=new Ce(Ee[Me].features,ee),oe[Me].name=Me,oe[Me].version=ee.version,oe[Me].extent=ee.extent;return we({layers:oe})},et.exports.GeoJSONWrapper=Ce;const wi=Ee=>Ee[0],Nn=Ee=>Ee[1];class Li{constructor(ee,oe=wi,Me=Nn,Ve=64,ut=Float64Array){this.nodeSize=Ve,this.points=ee;const Ft=ee.length<65536?Uint16Array:Uint32Array,Lt=this.ids=new Ft(ee.length),Mt=this.coords=new ut(2*ee.length);for(let le=0;le<ee.length;le++)Lt[le]=le,Mt[2*le]=oe(ee[le]),Mt[2*le+1]=Me(ee[le]);yt(Lt,Mt,Ve,0,Lt.length-1,0)}range(ee,oe,Me,Ve){return function(ut,Ft,Lt,Mt,le,_e,fe){const Ue=[0,ut.length-1,0],Wt=[];let Sn,jn;for(;Ue.length;){const Xn=Ue.pop(),Ti=Ue.pop(),Pi=Ue.pop();if(Ti-Pi<=fe){for(let qi=Pi;qi<=Ti;qi++)Sn=Ft[2*qi],jn=Ft[2*qi+1],Sn>=Lt&&Sn<=le&&jn>=Mt&&jn<=_e&&Wt.push(ut[qi]);continue}const Gn=Math.floor((Pi+Ti)/2);Sn=Ft[2*Gn],jn=Ft[2*Gn+1],Sn>=Lt&&Sn<=le&&jn>=Mt&&jn<=_e&&Wt.push(ut[Gn]);const er=(Xn+1)%2;(0===Xn?Lt<=Sn:Mt<=jn)&&(Ue.push(Pi),Ue.push(Gn-1),Ue.push(er)),(0===Xn?le>=Sn:_e>=jn)&&(Ue.push(Gn+1),Ue.push(Ti),Ue.push(er))}return Wt}(this.ids,this.coords,ee,oe,Me,Ve,this.nodeSize)}within(ee,oe,Me){return function(Ve,ut,Ft,Lt,Mt,le){const _e=[0,Ve.length-1,0],fe=[],Ue=Mt*Mt;for(;_e.length;){const Wt=_e.pop(),Sn=_e.pop(),jn=_e.pop();if(Sn-jn<=le){for(let er=jn;er<=Sn;er++)vi(ut[2*er],ut[2*er+1],Ft,Lt)<=Ue&&fe.push(Ve[er]);continue}const Xn=Math.floor((jn+Sn)/2),Ti=ut[2*Xn],Pi=ut[2*Xn+1];vi(Ti,Pi,Ft,Lt)<=Ue&&fe.push(Ve[Xn]);const Gn=(Wt+1)%2;(0===Wt?Ft-Mt<=Ti:Lt-Mt<=Pi)&&(_e.push(jn),_e.push(Xn-1),_e.push(Gn)),(0===Wt?Ft+Mt>=Ti:Lt+Mt>=Pi)&&(_e.push(Xn+1),_e.push(Sn),_e.push(Gn))}return fe}(this.ids,this.coords,ee,oe,Me,this.nodeSize)}}const Jn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},mn=Math.fround||(Tt=new Float32Array(1),Ee=>(Tt[0]=+Ee,Tt[0]));var Tt;class Ge{constructor(ee){this.options=tn(Object.create(Jn),ee),this.trees=new Array(this.options.maxZoom+1)}load(ee){const{log:oe,minZoom:Me,maxZoom:Ve,nodeSize:ut}=this.options;oe&&console.time("total time");const Ft=`prepare ${ee.length} points`;oe&&console.time(Ft),this.points=ee;let Lt=[];for(let Mt=0;Mt<ee.length;Mt++)ee[Mt].geometry&&Lt.push(ht(ee[Mt],Mt));this.trees[Ve+1]=new Li(Lt,li,Wi,ut,Float32Array),oe&&console.timeEnd(Ft);for(let Mt=Ve;Mt>=Me;Mt--){const le=+Date.now();Lt=this._cluster(Lt,Mt),this.trees[Mt]=new Li(Lt,li,Wi,ut,Float32Array),oe&&console.log("z%d: %d clusters in %dms",Mt,Lt.length,+Date.now()-le)}return oe&&console.timeEnd("total time"),this}getClusters(ee,oe){let Me=((ee[0]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,ee[1]));let ut=180===ee[2]?180:((ee[2]+180)%360+360)%360-180;const Ft=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)Me=-180,ut=180;else if(Me>ut){const _e=this.getClusters([Me,Ve,180,Ft],oe),fe=this.getClusters([-180,Ve,ut,Ft],oe);return _e.concat(fe)}const Lt=this.trees[this._limitZoom(oe)],Mt=Lt.range(ot(Me),Se(Ft),ot(ut),Se(Ve)),le=[];for(const _e of Mt){const fe=Lt.points[_e];le.push(fe.numPoints?Xe(fe):this.points[fe.index])}return le}getChildren(ee){const oe=this._getOriginId(ee),Me=this._getOriginZoom(ee),Ve="No cluster with the specified id.",ut=this.trees[Me];if(!ut)throw new Error(Ve);const Ft=ut.points[oe];if(!Ft)throw new Error(Ve);const Lt=this.options.radius/(this.options.extent*Math.pow(2,Me-1)),Mt=ut.within(Ft.x,Ft.y,Lt),le=[];for(const _e of Mt){const fe=ut.points[_e];fe.parentId===ee&&le.push(fe.numPoints?Xe(fe):this.points[fe.index])}if(0===le.length)throw new Error(Ve);return le}getLeaves(ee,oe,Me){const Ve=[];return this._appendLeaves(Ve,ee,oe=oe||10,Me=Me||0,0),Ve}getTile(ee,oe,Me){const Ve=this.trees[this._limitZoom(ee)],ut=Math.pow(2,ee),{extent:Ft,radius:Lt}=this.options,Mt=Lt/Ft,le=(Me-Mt)/ut,_e=(Me+1+Mt)/ut,fe={features:[]};return this._addTileFeatures(Ve.range((oe-Mt)/ut,le,(oe+1+Mt)/ut,_e),Ve.points,oe,Me,ut,fe),0===oe&&this._addTileFeatures(Ve.range(1-Mt/ut,le,1,_e),Ve.points,ut,Me,ut,fe),oe===ut-1&&this._addTileFeatures(Ve.range(0,le,Mt/ut,_e),Ve.points,-1,Me,ut,fe),fe.features.length?fe:null}getClusterExpansionZoom(ee){let oe=this._getOriginZoom(ee)-1;for(;oe<=this.options.maxZoom;){const Me=this.getChildren(ee);if(oe++,1!==Me.length)break;ee=Me[0].properties.cluster_id}return oe}_appendLeaves(ee,oe,Me,Ve,ut){const Ft=this.getChildren(oe);for(const Lt of Ft){const Mt=Lt.properties;if(Mt&&Mt.cluster?ut+Mt.point_count<=Ve?ut+=Mt.point_count:ut=this._appendLeaves(ee,Mt.cluster_id,Me,Ve,ut):ut<Ve?ut++:ee.push(Lt),ee.length===Me)break}return ut}_addTileFeatures(ee,oe,Me,Ve,ut,Ft){for(const Lt of ee){const Mt=oe[Lt],le=Mt.numPoints;let _e,fe,Ue;if(le)_e=ce(Mt),fe=Mt.x,Ue=Mt.y;else{const jn=this.points[Mt.index];_e=jn.properties,fe=ot(jn.geometry.coordinates[0]),Ue=Se(jn.geometry.coordinates[1])}const Wt={type:1,geometry:[[Math.round(this.options.extent*(fe*ut-Me)),Math.round(this.options.extent*(Ue*ut-Ve))]],tags:_e};let Sn;le?Sn=Mt.id:this.options.generateId?Sn=Mt.index:this.points[Mt.index].id&&(Sn=this.points[Mt.index].id),void 0!==Sn&&(Wt.id=Sn),Ft.features.push(Wt)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,oe){const Me=[],{radius:Ve,extent:ut,reduce:Ft,minPoints:Lt}=this.options,Mt=Ve/(ut*Math.pow(2,oe));for(let le=0;le<ee.length;le++){const _e=ee[le];if(_e.zoom<=oe)continue;_e.zoom=oe;const fe=this.trees[oe+1],Ue=fe.within(_e.x,_e.y,Mt),Wt=_e.numPoints||1;let Sn=Wt;for(const jn of Ue){const Xn=fe.points[jn];Xn.zoom>oe&&(Sn+=Xn.numPoints||1)}if(Sn>Wt&&Sn>=Lt){let jn=_e.x*Wt,Xn=_e.y*Wt,Ti=Ft&&Wt>1?this._map(_e,!0):null;const Pi=(le<<5)+(oe+1)+this.points.length;for(const Gn of Ue){const er=fe.points[Gn];if(er.zoom<=oe)continue;er.zoom=oe;const qi=er.numPoints||1;jn+=er.x*qi,Xn+=er.y*qi,er.parentId=Pi,Ft&&(Ti||(Ti=this._map(_e,!0)),Ft(Ti,this._map(er)))}_e.parentId=Pi,Me.push(Fe(jn/Sn,Xn/Sn,Pi,Sn,Ti))}else if(Me.push(_e),Sn>1)for(const jn of Ue){const Xn=fe.points[jn];Xn.zoom<=oe||(Xn.zoom=oe,Me.push(Xn))}}return Me}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,oe){if(ee.numPoints)return oe?tn({},ee.properties):ee.properties;const Me=this.points[ee.index].properties,Ve=this.options.map(Me);return oe&&Ve===Me?tn({},Ve):Ve}}function Fe(Ee,ee,oe,Me,Ve){return{x:mn(Ee),y:mn(ee),zoom:1/0,id:oe,parentId:-1,numPoints:Me,properties:Ve}}function ht(Ee,ee){const[oe,Me]=Ee.geometry.coordinates;return{x:mn(ot(oe)),y:mn(Se(Me)),zoom:1/0,index:ee,parentId:-1}}function Xe(Ee){return{type:"Feature",id:Ee.id,properties:ce(Ee),geometry:{type:"Point",coordinates:[(ee=Ee.x,360*(ee-.5)),St(Ee.y)]}};var ee}function ce(Ee){const ee=Ee.numPoints,oe=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee;return tn(tn({},Ee.properties),{cluster:!0,cluster_id:Ee.id,point_count:ee,point_count_abbreviated:oe})}function ot(Ee){return Ee/360+.5}function Se(Ee){const ee=Math.sin(Ee*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function St(Ee){const ee=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function tn(Ee,ee){for(const oe in ee)Ee[oe]=ee[oe];return Ee}function li(Ee){return Ee.x}function Wi(Ee){return Ee.y}function Dn(Ee,ee,oe,Me){for(var Ve,ut=Me,Ft=oe-ee>>1,Lt=oe-ee,Mt=Ee[ee],le=Ee[ee+1],_e=Ee[oe],fe=Ee[oe+1],Ue=ee+3;Ue<oe;Ue+=3){var Wt=ae(Ee[Ue],Ee[Ue+1],Mt,le,_e,fe);if(Wt>ut)Ve=Ue,ut=Wt;else if(Wt===ut){var Sn=Math.abs(Ue-Ft);Sn<Lt&&(Ve=Ue,Lt=Sn)}}ut>Me&&(Ve-ee>3&&Dn(Ee,ee,Ve,Me),Ee[Ve+2]=ut,oe-Ve>3&&Dn(Ee,Ve,oe,Me))}function ae(Ee,ee,oe,Me,Ve,ut){var Ft=Ve-oe,Lt=ut-Me;if(0!==Ft||0!==Lt){var Mt=((Ee-oe)*Ft+(ee-Me)*Lt)/(Ft*Ft+Lt*Lt);Mt>1?(oe=Ve,Me=ut):Mt>0&&(oe+=Ft*Mt,Me+=Lt*Mt)}return(Ft=Ee-oe)*Ft+(Lt=ee-Me)*Lt}function $e(Ee,ee,oe,Me){var Ve={id:void 0===Ee?null:Ee,type:ee,geometry:oe,tags:Me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ut){var Ft=ut.geometry,Lt=ut.type;if("Point"===Lt||"MultiPoint"===Lt||"LineString"===Lt)Ot(ut,Ft);else if("Polygon"===Lt||"MultiLineString"===Lt)for(var Mt=0;Mt<Ft.length;Mt++)Ot(ut,Ft[Mt]);else if("MultiPolygon"===Lt)for(Mt=0;Mt<Ft.length;Mt++)for(var le=0;le<Ft[Mt].length;le++)Ot(ut,Ft[Mt][le])}(Ve),Ve}function Ot(Ee,ee){for(var oe=0;oe<ee.length;oe+=3)Ee.minX=Math.min(Ee.minX,ee[oe]),Ee.minY=Math.min(Ee.minY,ee[oe+1]),Ee.maxX=Math.max(Ee.maxX,ee[oe]),Ee.maxY=Math.max(Ee.maxY,ee[oe+1])}function on(Ee,ee,oe,Me){if(ee.geometry){var Ve=ee.geometry.coordinates,ut=ee.geometry.type,Ft=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),Lt=[],Mt=ee.id;if(oe.promoteId?Mt=ee.properties[oe.promoteId]:oe.generateId&&(Mt=Me||0),"Point"===ut)jt(Ve,Lt);else if("MultiPoint"===ut)for(var le=0;le<Ve.length;le++)jt(Ve[le],Lt);else if("LineString"===ut)Bt(Ve,Lt,Ft,!1);else if("MultiLineString"===ut){if(oe.lineMetrics){for(le=0;le<Ve.length;le++)Bt(Ve[le],Lt=[],Ft,!1),Ee.push($e(Mt,"LineString",Lt,ee.properties));return}Je(Ve,Lt,Ft,!1)}else if("Polygon"===ut)Je(Ve,Lt,Ft,!0);else{if("MultiPolygon"!==ut){if("GeometryCollection"===ut){for(le=0;le<ee.geometry.geometries.length;le++)on(Ee,{id:Mt,geometry:ee.geometry.geometries[le],properties:ee.properties},oe,Me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(le=0;le<Ve.length;le++){var _e=[];Je(Ve[le],_e,Ft,!0),Lt.push(_e)}}Ee.push($e(Mt,ut,Lt,ee.properties))}}function jt(Ee,ee){ee.push(ge(Ee[0])),ee.push(pe(Ee[1])),ee.push(0)}function Bt(Ee,ee,oe,Me){for(var Ve,ut,Ft=0,Lt=0;Lt<Ee.length;Lt++){var Mt=ge(Ee[Lt][0]),le=pe(Ee[Lt][1]);ee.push(Mt),ee.push(le),ee.push(0),Lt>0&&(Ft+=Me?(Ve*le-Mt*ut)/2:Math.sqrt(Math.pow(Mt-Ve,2)+Math.pow(le-ut,2))),Ve=Mt,ut=le}var _e=ee.length-3;ee[2]=1,Dn(ee,0,_e,oe),ee[_e+2]=1,ee.size=Math.abs(Ft),ee.start=0,ee.end=ee.size}function Je(Ee,ee,oe,Me){for(var Ve=0;Ve<Ee.length;Ve++){var ut=[];Bt(Ee[Ve],ut,oe,Me),ee.push(ut)}}function ge(Ee){return Ee/360+.5}function pe(Ee){var ee=Math.sin(Ee*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function te(Ee,ee,oe,Me,Ve,ut,Ft,Lt){if(Me/=ee,ut>=(oe/=ee)&&Ft<Me)return Ee;if(Ft<oe||ut>=Me)return null;for(var Mt=[],le=0;le<Ee.length;le++){var _e=Ee[le],fe=_e.geometry,Ue=_e.type,Wt=0===Ve?_e.minX:_e.minY,Sn=0===Ve?_e.maxX:_e.maxY;if(Wt>=oe&&Sn<Me)Mt.push(_e);else if(!(Sn<oe||Wt>=Me)){var jn=[];if("Point"===Ue||"MultiPoint"===Ue)it(fe,jn,oe,Me,Ve);else if("LineString"===Ue)Ht(fe,jn,oe,Me,Ve,!1,Lt.lineMetrics);else if("MultiLineString"===Ue)ni(fe,jn,oe,Me,Ve,!1);else if("Polygon"===Ue)ni(fe,jn,oe,Me,Ve,!0);else if("MultiPolygon"===Ue)for(var Xn=0;Xn<fe.length;Xn++){var Ti=[];ni(fe[Xn],Ti,oe,Me,Ve,!0),Ti.length&&jn.push(Ti)}if(jn.length){if(Lt.lineMetrics&&"LineString"===Ue){for(Xn=0;Xn<jn.length;Xn++)Mt.push($e(_e.id,Ue,jn[Xn],_e.tags));continue}"LineString"!==Ue&&"MultiLineString"!==Ue||(1===jn.length?(Ue="LineString",jn=jn[0]):Ue="MultiLineString"),"Point"!==Ue&&"MultiPoint"!==Ue||(Ue=3===jn.length?"Point":"MultiPoint"),Mt.push($e(_e.id,Ue,jn,_e.tags))}}}return Mt.length?Mt:null}function it(Ee,ee,oe,Me,Ve){for(var ut=0;ut<Ee.length;ut+=3){var Ft=Ee[ut+Ve];Ft>=oe&&Ft<=Me&&(ee.push(Ee[ut]),ee.push(Ee[ut+1]),ee.push(Ee[ut+2]))}}function Ht(Ee,ee,oe,Me,Ve,ut,Ft){for(var Lt,Mt,le=Rn(Ee),_e=0===Ve?bn:Ji,fe=Ee.start,Ue=0;Ue<Ee.length-3;Ue+=3){var Wt=Ee[Ue],Sn=Ee[Ue+1],jn=Ee[Ue+2],Xn=Ee[Ue+3],Ti=Ee[Ue+4],Pi=0===Ve?Wt:Sn,Gn=0===Ve?Xn:Ti,er=!1;Ft&&(Lt=Math.sqrt(Math.pow(Wt-Xn,2)+Math.pow(Sn-Ti,2))),Pi<oe?Gn>oe&&(Mt=_e(le,Wt,Sn,Xn,Ti,oe),Ft&&(le.start=fe+Lt*Mt)):Pi>Me?Gn<Me&&(Mt=_e(le,Wt,Sn,Xn,Ti,Me),Ft&&(le.start=fe+Lt*Mt)):Ii(le,Wt,Sn,jn),Gn<oe&&Pi>=oe&&(Mt=_e(le,Wt,Sn,Xn,Ti,oe),er=!0),Gn>Me&&Pi<=Me&&(Mt=_e(le,Wt,Sn,Xn,Ti,Me),er=!0),!ut&&er&&(Ft&&(le.end=fe+Lt*Mt),ee.push(le),le=Rn(Ee)),Ft&&(fe+=Lt)}var qi=Ee.length-3;Wt=Ee[qi],Sn=Ee[qi+1],jn=Ee[qi+2],(Pi=0===Ve?Wt:Sn)>=oe&&Pi<=Me&&Ii(le,Wt,Sn,jn),qi=le.length-3,ut&&qi>=3&&(le[qi]!==le[0]||le[qi+1]!==le[1])&&Ii(le,le[0],le[1],le[2]),le.length&&ee.push(le)}function Rn(Ee){var ee=[];return ee.size=Ee.size,ee.start=Ee.start,ee.end=Ee.end,ee}function ni(Ee,ee,oe,Me,Ve,ut){for(var Ft=0;Ft<Ee.length;Ft++)Ht(Ee[Ft],ee,oe,Me,Ve,ut,!1)}function Ii(Ee,ee,oe,Me){Ee.push(ee),Ee.push(oe),Ee.push(Me)}function bn(Ee,ee,oe,Me,Ve,ut){var Ft=(ut-ee)/(Me-ee);return Ee.push(ut),Ee.push(oe+(Ve-oe)*Ft),Ee.push(1),Ft}function Ji(Ee,ee,oe,Me,Ve,ut){var Ft=(ut-oe)/(Ve-oe);return Ee.push(ee+(Me-ee)*Ft),Ee.push(ut),Ee.push(1),Ft}function ji(Ee,ee){for(var oe=[],Me=0;Me<Ee.length;Me++){var Ve,ut=Ee[Me],Ft=ut.type;if("Point"===Ft||"MultiPoint"===Ft||"LineString"===Ft)Ve=dn(ut.geometry,ee);else if("MultiLineString"===Ft||"Polygon"===Ft){Ve=[];for(var Lt=0;Lt<ut.geometry.length;Lt++)Ve.push(dn(ut.geometry[Lt],ee))}else if("MultiPolygon"===Ft)for(Ve=[],Lt=0;Lt<ut.geometry.length;Lt++){for(var Mt=[],le=0;le<ut.geometry[Lt].length;le++)Mt.push(dn(ut.geometry[Lt][le],ee));Ve.push(Mt)}oe.push($e(ut.id,Ft,Ve,ut.tags))}return oe}function dn(Ee,ee){var oe=[];oe.size=Ee.size,void 0!==Ee.start&&(oe.start=Ee.start,oe.end=Ee.end);for(var Me=0;Me<Ee.length;Me+=3)oe.push(Ee[Me]+ee,Ee[Me+1],Ee[Me+2]);return oe}function It(Ee,ee){if(Ee.transformed)return Ee;var oe,Me,Ve,ut=1<<Ee.z,Ft=Ee.x,Lt=Ee.y;for(oe=0;oe<Ee.features.length;oe++){var Mt=Ee.features[oe],le=Mt.geometry,_e=Mt.type;if(Mt.geometry=[],1===_e)for(Me=0;Me<le.length;Me+=2)Mt.geometry.push(ct(le[Me],le[Me+1],ee,ut,Ft,Lt));else for(Me=0;Me<le.length;Me++){var fe=[];for(Ve=0;Ve<le[Me].length;Ve+=2)fe.push(ct(le[Me][Ve],le[Me][Ve+1],ee,ut,Ft,Lt));Mt.geometry.push(fe)}}return Ee.transformed=!0,Ee}function ct(Ee,ee,oe,Me,Ve,ut){return[Math.round(oe*(Ee*Me-Ve)),Math.round(oe*(ee*Me-ut))]}function nn(Ee,ee,oe,Me,Ve){for(var ut=ee===Ve.maxZoom?0:Ve.tolerance/((1<<ee)*Ve.extent),Ft={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:Me,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Lt=0;Lt<Ee.length;Lt++){Ft.numFeatures++,_i(Ft,Ee[Lt],ut,Ve);var Mt=Ee[Lt].minX,le=Ee[Lt].minY,_e=Ee[Lt].maxX,fe=Ee[Lt].maxY;Mt<Ft.minX&&(Ft.minX=Mt),le<Ft.minY&&(Ft.minY=le),_e>Ft.maxX&&(Ft.maxX=_e),fe>Ft.maxY&&(Ft.maxY=fe)}return Ft}function _i(Ee,ee,oe,Me){var Ve=ee.geometry,ut=ee.type,Ft=[];if("Point"===ut||"MultiPoint"===ut)for(var Lt=0;Lt<Ve.length;Lt+=3)Ft.push(Ve[Lt]),Ft.push(Ve[Lt+1]),Ee.numPoints++,Ee.numSimplified++;else if("LineString"===ut)Qt(Ft,Ve,Ee,oe,!1,!1);else if("MultiLineString"===ut||"Polygon"===ut)for(Lt=0;Lt<Ve.length;Lt++)Qt(Ft,Ve[Lt],Ee,oe,"Polygon"===ut,0===Lt);else if("MultiPolygon"===ut)for(var Mt=0;Mt<Ve.length;Mt++){var le=Ve[Mt];for(Lt=0;Lt<le.length;Lt++)Qt(Ft,le[Lt],Ee,oe,!0,0===Lt)}if(Ft.length){var _e=ee.tags||null;if("LineString"===ut&&Me.lineMetrics){for(var fe in _e={},ee.tags)_e[fe]=ee.tags[fe];_e.mapbox_clip_start=Ve.start/Ve.size,_e.mapbox_clip_end=Ve.end/Ve.size}var Ue={geometry:Ft,type:"Polygon"===ut||"MultiPolygon"===ut?3:"LineString"===ut||"MultiLineString"===ut?2:1,tags:_e};null!==ee.id&&(Ue.id=ee.id),Ee.features.push(Ue)}}function Qt(Ee,ee,oe,Me,Ve,ut){var Ft=Me*Me;if(Me>0&&ee.size<(Ve?Ft:Me))oe.numPoints+=ee.length/3;else{for(var Lt=[],Mt=0;Mt<ee.length;Mt+=3)(0===Me||ee[Mt+2]>Ft)&&(oe.numSimplified++,Lt.push(ee[Mt]),Lt.push(ee[Mt+1])),oe.numPoints++;Ve&&function(le,_e){for(var fe=0,Ue=0,Wt=le.length,Sn=Wt-2;Ue<Wt;Sn=Ue,Ue+=2)fe+=(le[Ue]-le[Sn])*(le[Ue+1]+le[Sn+1]);if(fe>0===_e)for(Ue=0,Wt=le.length;Ue<Wt/2;Ue+=2){var jn=le[Ue],Xn=le[Ue+1];le[Ue]=le[Wt-2-Ue],le[Ue+1]=le[Wt-1-Ue],le[Wt-2-Ue]=jn,le[Wt-1-Ue]=Xn}}(Lt,ut),Ee.push(Lt)}}function xt(Ee,ee){var oe=(ee=this.options=function(Ve,ut){for(var Ft in ut)Ve[Ft]=ut[Ft];return Ve}(Object.create(this.options),ee)).debug;if(oe&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ve,ut,Ft,Lt,Mt,le,Me=function(Ve,ut){var Ft=[];if("FeatureCollection"===Ve.type)for(var Lt=0;Lt<Ve.features.length;Lt++)on(Ft,Ve.features[Lt],ut,Lt);else on(Ft,"Feature"===Ve.type?Ve:{geometry:Ve},ut);return Ft}(Ee,ee);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Lt=Ve=Me,Mt=te(Ve,1,-1-(Ft=(ut=ee).buffer/ut.extent),Ft,0,-1,2,ut),le=te(Ve,1,1-Ft,2+Ft,0,-1,2,ut),(Mt||le)&&(Lt=te(Ve,1,-Ft,1+Ft,0,-1,2,ut)||[],Mt&&(Lt=ji(Mt,1).concat(Lt)),le&&(Lt=Lt.concat(ji(le,-1)))),(Me=Lt).length&&this.splitTile(Me,0,0,0),oe&&(Me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ft(Ee,ee,oe){return 32*((1<<Ee)*oe+ee)+Ee}function Yt(Ee,ee){const oe=Ee.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const Me=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!Me)return ee(null,null);const Ve=new wt(Me.features);let ut=et.exports(Ve);0===ut.byteOffset&&ut.byteLength===ut.buffer.byteLength||(ut=new Uint8Array(ut)),ee(null,{vectorTile:Ve,rawData:ut.buffer})}xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(Ee,ee,oe,Me,Ve,ut,Ft){for(var Lt=[Ee,ee,oe,Me],Mt=this.options,le=Mt.debug;Lt.length;){Me=Lt.pop(),oe=Lt.pop(),ee=Lt.pop(),Ee=Lt.pop();var _e=1<<ee,fe=ft(ee,oe,Me),Ue=this.tiles[fe];if(!Ue&&(le>1&&console.time("creation"),Ue=this.tiles[fe]=nn(Ee,ee,oe,Me,Mt),this.tileCoords.push({z:ee,x:oe,y:Me}),le)){le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,oe,Me,Ue.numFeatures,Ue.numPoints,Ue.numSimplified),console.timeEnd("creation"));var Wt="z"+ee;this.stats[Wt]=(this.stats[Wt]||0)+1,this.total++}if(Ue.source=Ee,Ve){if(ee===Mt.maxZoom||ee===Ve)continue;var Sn=1<<Ve-ee;if(oe!==Math.floor(ut/Sn)||Me!==Math.floor(Ft/Sn))continue}else if(ee===Mt.indexMaxZoom||Ue.numPoints<=Mt.indexMaxPoints)continue;if(Ue.source=null,0!==Ee.length){le>1&&console.time("clipping");var jn,Xn,Ti,Pi,Gn,er,qi=.5*Mt.buffer/Mt.extent,_o=.5-qi,eo=.5+qi,Cr=1+qi;jn=Xn=Ti=Pi=null,Gn=te(Ee,_e,oe-qi,oe+eo,0,Ue.minX,Ue.maxX,Mt),er=te(Ee,_e,oe+_o,oe+Cr,0,Ue.minX,Ue.maxX,Mt),Ee=null,Gn&&(jn=te(Gn,_e,Me-qi,Me+eo,1,Ue.minY,Ue.maxY,Mt),Xn=te(Gn,_e,Me+_o,Me+Cr,1,Ue.minY,Ue.maxY,Mt),Gn=null),er&&(Ti=te(er,_e,Me-qi,Me+eo,1,Ue.minY,Ue.maxY,Mt),Pi=te(er,_e,Me+_o,Me+Cr,1,Ue.minY,Ue.maxY,Mt),er=null),le>1&&console.timeEnd("clipping"),Lt.push(jn||[],ee+1,2*oe,2*Me),Lt.push(Xn||[],ee+1,2*oe,2*Me+1),Lt.push(Ti||[],ee+1,2*oe+1,2*Me),Lt.push(Pi||[],ee+1,2*oe+1,2*Me+1)}}},xt.prototype.getTile=function(Ee,ee,oe){var Me=this.options,Ve=Me.extent,ut=Me.debug;if(Ee<0||Ee>24)return null;var Ft=1<<Ee,Lt=ft(Ee,ee=(ee%Ft+Ft)%Ft,oe);if(this.tiles[Lt])return It(this.tiles[Lt],Ve);ut>1&&console.log("drilling down to z%d-%d-%d",Ee,ee,oe);for(var Mt,le=Ee,_e=ee,fe=oe;!Mt&&le>0;)le--,_e=Math.floor(_e/2),fe=Math.floor(fe/2),Mt=this.tiles[ft(le,_e,fe)];return Mt&&Mt.source?(ut>1&&console.log("found parent tile z%d-%d-%d",le,_e,fe),ut>1&&console.time("drilling down"),this.splitTile(Mt.source,le,_e,fe,Ee,ee,oe),ut>1&&console.timeEnd("drilling down"),this.tiles[Lt]?It(this.tiles[Lt],Ve):null):null};class wn extends a.VectorTileWorkerSource{constructor(ee,oe,Me,Ve,ut){super(ee,oe,Me,Ve,Yt),ut&&(this.loadGeoJSON=ut)}loadData(ee,oe){const Me=ee&&ee.request,Ve=Me&&Me.collectResourceTiming;this.loadGeoJSON(ee,(ut,Ft)=>{if(ut||!Ft)return oe(ut);if("object"!=typeof Ft)return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));{ke(Ft,!0);try{if(ee.filter){const Mt=a.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Mt.result)throw new Error(Mt.value.map(_e=>`${_e.key}: ${_e.message}`).join(", "));const le=Ft.features.filter(_e=>Mt.value.evaluate({zoom:0},_e));Ft={type:"FeatureCollection",features:le}}this._geoJSONIndex=ee.cluster?new Ge(function({superclusterOptions:Mt,clusterProperties:le}){if(!le||!Mt)return Mt;const _e={},fe={},Ue={accumulated:null,zoom:0},Wt={properties:null},Sn=Object.keys(le);for(const jn of Sn){const[Xn,Ti]=le[jn],Pi=a.createExpression(Ti),Gn=a.createExpression("string"==typeof Xn?[Xn,["accumulated"],["get",jn]]:Xn);_e[jn]=Pi.value,fe[jn]=Gn.value}return Mt.map=jn=>{Wt.properties=jn;const Xn={};for(const Ti of Sn)Xn[Ti]=_e[Ti].evaluate(Ue,Wt);return Xn},Mt.reduce=(jn,Xn)=>{Wt.properties=Xn;for(const Ti of Sn)Ue.accumulated=jn[Ti],jn[Ti]=fe[Ti].evaluate(Ue,Wt)},Mt}(ee)).load(Ft.features):new xt(Mt=Ft,ee.geojsonVtOptions)}catch(Mt){return oe(Mt)}this.loaded={};const Lt={};if(Ve){const Mt=a.getPerformanceMeasurement(Me);Mt&&(Lt.resourceTiming={},Lt.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Mt)))}oe(null,Lt)}var Mt})}reloadTile(ee,oe){const Me=this.loaded;return Me&&Me[ee.uid]?super.reloadTile(ee,oe):this.loadTile(ee,oe)}loadGeoJSON(ee,oe){if(ee.request)a.getJSON(ee.request,oe);else{if("string"!=typeof ee.data)return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(ee.data))}catch{return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ee,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(Me){oe(Me)}}getClusterChildren(ee,oe){try{oe(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(Me){oe(Me)}}getClusterLeaves(ee,oe){try{oe(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(Me){oe(Me)}}}class ri{constructor(ee){this.self=ee,this.actor=new a.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.getProjection({name:"mercator"}),this.workerSourceTypes={vector:a.VectorTileWorkerSource,geojson:wn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,Me)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=Me},this.self.registerRTLTextPlugin=oe=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=oe.applyArabicShaping,a.plugin.processBidirectionalText=oe.processBidirectionalText,a.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(ee,oe,Me){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee],Me()}checkIfReady(ee,oe,Me){Me()}setReferrer(ee,oe){this.referrer=oe}spriteLoaded(ee,oe){this.isSpriteLoaded[ee]=oe;for(const Me in this.workerSources[ee]){const Ve=this.workerSources[ee][Me];for(const ut in Ve)Ve[ut]instanceof a.VectorTileWorkerSource&&(Ve[ut].isSpriteLoaded=oe,Ve[ut].fire(new a.Event("isSpriteLoaded")))}}setImages(ee,oe,Me){this.availableImages[ee]=oe;for(const Ve in this.workerSources[ee]){const ut=this.workerSources[ee][Ve];for(const Ft in ut)ut[Ft].availableImages=oe}Me()}enableTerrain(ee,oe,Me){this.terrain=oe,Me()}setProjection(ee,oe){this.projections[ee]=a.getProjection(oe)}setLayers(ee,oe,Me){this.getLayerIndex(ee).replace(oe),Me()}updateLayers(ee,oe,Me){this.getLayerIndex(ee).update(oe.layers,oe.removedIds),Me()}loadTile(ee,oe,Me){const Ve=this.enableTerrain?a.extend({enableTerrain:this.terrain},oe):oe;Ve.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,oe.type,oe.source).loadTile(Ve,Me)}loadDEMTile(ee,oe,Me){const Ve=this.enableTerrain?a.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(ee,oe.source).loadTile(Ve,Me)}reloadTile(ee,oe,Me){const Ve=this.enableTerrain?a.extend({enableTerrain:this.terrain},oe):oe;Ve.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,oe.type,oe.source).reloadTile(Ve,Me)}abortTile(ee,oe,Me){this.getWorkerSource(ee,oe.type,oe.source).abortTile(oe,Me)}removeTile(ee,oe,Me){this.getWorkerSource(ee,oe.type,oe.source).removeTile(oe,Me)}removeSource(ee,oe,Me){if(!this.workerSources[ee]||!this.workerSources[ee][oe.type]||!this.workerSources[ee][oe.type][oe.source])return;const Ve=this.workerSources[ee][oe.type][oe.source];delete this.workerSources[ee][oe.type][oe.source],void 0!==Ve.removeSource?Ve.removeSource(oe,Me):Me()}loadWorkerSource(ee,oe,Me){try{this.self.importScripts(oe.url),Me()}catch(Ve){Me(Ve.toString())}}syncRTLPluginState(ee,oe,Me){try{a.plugin.setState(oe);const Ve=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Ve){this.self.importScripts(Ve);const ut=a.plugin.isParsed();Me(ut?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ve}`),ut)}}catch(Ve){Me(Ve.toString())}}getAvailableImages(ee){let oe=this.availableImages[ee];return oe||(oe=[]),oe}getLayerIndex(ee){let oe=this.layerIndexes[ee];return oe||(oe=this.layerIndexes[ee]=new nt),oe}getWorkerSource(ee,oe,Me){return this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][oe]||(this.workerSources[ee][oe]={}),this.workerSources[ee][oe][Me]||(this.workerSources[ee][oe][Me]=new this.workerSourceTypes[oe]({send:(ut,Ft,Lt,Mt,le,_e)=>{this.actor.send(ut,Ft,Lt,ee,le,_e)},scheduler:this.actor.scheduler},this.getLayerIndex(ee),this.getAvailableImages(ee),this.isSpriteLoaded[ee])),this.workerSources[ee][oe][Me]}getDEMWorkerSource(ee,oe){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][oe]||(this.demWorkerSources[ee][oe]=new Oe),this.demWorkerSources[ee][oe]}enforceCacheSizeLimit(ee,oe){a.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(ee,oe,Me){Me(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ri(self)),ri}),_(0,function(a){function he(d,i){if(Array.isArray(d)){if(!Array.isArray(i)||d.length!==i.length)return!1;for(let c=0;c<d.length;c++)if(!he(d[c],i[c]))return!1;return!0}if("object"==typeof d&&null!==d&&null!==i){if("object"!=typeof i||Object.keys(d).length!==Object.keys(i).length)return!1;for(const c in d)if(!he(d[c],i[c]))return!1;return!0}return d===i}var st=nt;function nt(d){return i=d,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,y,x=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(x);try{y=new Worker(D),p=!0}catch{p=!1}return y&&y.terminate(),URL.revokeObjectURL(D),p}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var p=document.createElement("canvas");p.width=p.height=1;var y=p.getContext("2d");if(!y)return!1;var x=y.getImageData(0,0,1,1);return x&&x.width===p.width}()||(void 0===Oe[c=i&&i.failIfMajorPerformanceCaveat]&&(Oe[c]=function(p){var y,D,P,L,x=(D=p,P=document.createElement("canvas"),(L=Object.create(nt.webGLContextAttributes)).failIfMajorPerformanceCaveat=D,P.getContext("webgl",L)||P.getContext("experimental-webgl",L));if(!x)return!1;try{y=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!y||x.isContextLost())&&(x.shaderSource(y,"void main() {}"),x.compileShader(y),!0===x.getShaderParameter(y,x.COMPILE_STATUS))}(c)),!Oe[c]||document.documentMode));var i,c}var Oe={};function ke(d,i,c){const p=a.window.document.createElement(d);return void 0!==i&&(p.className=i),c&&c.appendChild(p),p}function rt(d,i,c){const p=a.window.document.createElementNS("http://www.w3.org/2000/svg",d);for(const y of Object.keys(i))p.setAttributeNS(null,y,i[y]);return c&&c.appendChild(p),p}nt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const pt=a.window.document&&a.window.document.documentElement.style,Et=pt&&void 0!==pt.userSelect?"userSelect":"WebkitUserSelect";let dt;function wt(){pt&&Et&&(dt=pt[Et],pt[Et]="none")}function et(){pt&&Et&&(pt[Et]=dt)}function Zt(d){d.preventDefault(),d.stopPropagation(),a.window.removeEventListener("click",Zt,!0)}function kt(){a.window.addEventListener("click",Zt,!0),a.window.setTimeout(()=>{a.window.removeEventListener("click",Zt,!0)},0)}function Qe(d,i){const c=d.getBoundingClientRect();return Ye(d,c,i)}function Hn(d,i){const c=d.getBoundingClientRect(),p=[];for(let y=0;y<i.length;y++)p.push(Ye(d,c,i[y]));return p}function Fn(d){return void 0!==a.window.InstallTrigger&&2===d.button&&d.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:d.button}function Ye(d,i,c){const p=d.offsetWidth===i.width?1:d.offsetWidth/i.width;return new a.pointGeometry((c.clientX-i.left)*p,(c.clientY-i.top)*p)}function Ce(d,i){var c=i[0],p=i[1],y=i[2],x=i[3],D=c*x-y*p;return D?(d[0]=x*(D=1/D),d[1]=-p*D,d[2]=-y*D,d[3]=c*D,d):null}function we(d){const{userImage:i}=d;return!!(i&&i.render&&i.render())&&(d.data.replace(new Uint8Array(i.data.buffer)),!0)}class At extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:p}of this.requestors)this._notify(c,p);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const y of i){if(y[0]<p||y[1]<y[0]||c<y[1])return!1;p=y[1]}return!0}_validateContent(i,c){return!(i&&(4!==i.length||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let p=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(p=!1);this.isLoaded()||p?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const p={};for(const y of i){this.images[y]||this.fire(new a.Event("styleimagemissing",{id:y}));const x=this.images[y];x?p[y]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:a.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,p)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const y={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new a.ImagePosition(y,p);this.patterns[i]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:p}=a.potpack(i),y=this.atlasImage;y.resize({width:c||1,height:p||1});for(const x in this.patterns){const{bin:D}=this.patterns[x],P=D.x+1,L=D.y+1,W=this.images[x].data,Z=W.width,ie=W.height;a.RGBAImage.copy(W,y,{x:0,y:0},{x:P,y:L},{width:Z,height:ie}),a.RGBAImage.copy(W,y,{x:0,y:ie-1},{x:P,y:L-1},{width:Z,height:1}),a.RGBAImage.copy(W,y,{x:0,y:0},{x:P,y:L+ie},{width:Z,height:1}),a.RGBAImage.copy(W,y,{x:Z-1,y:0},{x:P-1,y:L},{width:1,height:ie}),a.RGBAImage.copy(W,y,{x:0,y:0},{x:P+Z,y:L},{width:1,height:ie})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.images[c];we(p)&&this.updateImage(c,p)}}}const zt=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(d,i){return function([c,p,y]){const x=a.degToRad(p+90),D=a.degToRad(y);return{x:c*Math.cos(x)*Math.sin(D),y:c*Math.sin(x)*Math.sin(D),z:c*Math.cos(D),azimuthal:p,polar:y}}(d.expression.evaluate(i))}interpolate(d,i,c){return{x:a.number(d.x,i.x,c),y:a.number(d.y,i.y,c),z:a.number(d.z,i.z,c),azimuthal:a.number(d.azimuthal,i.azimuthal,c),polar:a.number(d.polar,i.polar,c)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),Jt="-transition";class Mn extends a.Evented{constructor(i){super(),this._transitionable=new a.Transitionable(zt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(a.validateLight,i,c))for(const p in i){const y=i[p];a.endsWith(p,Jt)?this._transitionable.setTransition(p.slice(0,-Jt.length),y):this._transitionable.setValue(p,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||!1!==p.validate)&&a.emitValidationErrors(this,i.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}const Ke=new a.Properties({source:new a.DataConstantProperty(a.spec.terrain.source),exaggeration:new a.DataConstantProperty(a.spec.terrain.exaggeration)}),Ne="-transition";class He extends a.Evented{constructor(i,c){super(),this._transitionable=new a.Transitionable(Ke),this.set(i),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(i){for(const c in i){const p=i[c];a.endsWith(c,Ne)?this._transitionable.setTransition(c.slice(0,-Ne.length),p):this._transitionable.setValue(c,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function yt(d,i,c,p){const y=a.smoothstep(45,65,c),[x,D]=Tn(d,p),P=a.length(i);let L=1-Math.min(1,Math.exp((P-x)/(D-x)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*y*d.alpha}function Tn(d,i){const c=.5/Math.tan(.5*i);return[d.range[0]+c,d.range[1]+c]}const Xt=new a.Properties({range:new a.DataConstantProperty(a.spec.fog.range),color:new a.DataConstantProperty(a.spec.fog.color),"high-color":new a.DataConstantProperty(a.spec.fog["high-color"]),"space-color":new a.DataConstantProperty(a.spec.fog["space-color"]),"horizon-blend":new a.DataConstantProperty(a.spec.fog["horizon-blend"]),"star-intensity":new a.DataConstantProperty(a.spec.fog["star-intensity"])}),ii="-transition";class vi extends a.Evented{constructor(i,c){super(),this._transitionable=new a.Transitionable(Xt),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=c}get state(){const i=this._transform,c="globe"===i.projection.name,p=a.globeToMercatorTransition(i.zoom),y=this.properties.get("range"),x=[.5,3];return{range:c?[a.number(x[0],y[0],p),a.number(x[1],y[1],p)]:y,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,c={}){if(!this._validate(a.validateFog,i,c)){for(const p of Object.keys(a.spec.fog))i&&void 0===i[p]&&(i[p]=a.spec.fog[p].default);for(const p in i){const y=i[p];a.endsWith(p,ii)?this._transitionable.setTransition(p.slice(0,-ii.length),y):this._transitionable.setValue(p,y)}}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:a.smoothstep(45,65,i))*c.a}getOpacityAtLatLng(i,c){return this._transform.projection.supportsFog?function(p,y,x){const D=a.MercatorCoordinate.fromLngLat(y),P=x.elevation?x.elevation.getAtPointOrZero(D):0,L=[D.x,D.y,P];return a.transformMat4(L,L,x.mercatorFogMatrix),yt(p,L,x.pitch,x._fov)}(this.state,i,c):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?Tn(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||!1!==p.validate)&&a.emitValidationErrors(this,i.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class wi{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const p=this.workerPool.acquire(this.id);for(let y=0;y<p.length;y++){const x=new wi.Actor(p[y],c,this.id);x.name=`Worker ${y}`,this.actors.push(x)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,c,p){a.asyncAll(this.actors,(y,x)=>{y.send(i,c,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Nn(d,i,c){return i*(a.EXTENT/(d.tileSize*Math.pow(2,c-d.tileID.overscaledZ)))}wi.Actor=a.Actor;class Li{constructor(i,c,p,y){this.screenBounds=i,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,y)}static createFromScreenPoints(i,c){let p,y;if(i instanceof a.pointGeometry||"number"==typeof i[0]){const x=a.pointGeometry.convert(i);p=[x],y=c.isPointAboveHorizon(x)}else{const x=a.pointGeometry.convert(i[0]),D=a.pointGeometry.convert(i[1]);p=[x,D],y=a.polygonizeBounds(x,D).every(P=>c.isPointAboveHorizon(P))}return new Li(p,c.getCameraPoint(),y,c)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(i){return a.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const c=this.screenBounds[0],p=1===this.screenBounds.length?this.screenBounds[0].add(new a.pointGeometry(1,1)):this.screenBounds[1],y=a.polygonizeBounds(c,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<p.x?y.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?y[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(y[3]=this.cameraPoint)),a.bufferConvexPolygon(y,i)}bufferedCameraGeometryGlobe(i){const c=this.screenBounds[0],p=1===this.screenBounds.length?this.screenBounds[0].add(new a.pointGeometry(1,1)):this.screenBounds[1],y=a.polygonizeBounds(c,p,i),x=this.cameraPoint.clone();switch(3*((x.y>c.y)+(x.y>p.y))+((x.x>c.x)+(x.x>p.x))){case 0:y[0]=x,y[4]=x.clone();break;case 1:y.splice(1,0,x);break;case 2:y[1]=x;break;case 3:y.splice(4,0,x);break;case 5:y.splice(2,0,x);break;case 6:y[3]=x;break;case 7:y.splice(3,0,x);break;case 8:y[2]=x}return y}containsTile(i,c,p,y=0){const x=i.queryPadding/c._pixelsPerMercatorPixel+1,D=p?this._bufferedCameraMercator(x,c):this._bufferedScreenMercator(x,c);let P=i.tileID.wrap+(D.unwrapped?y:0);const L=D.polygon.map(Te=>a.getTilePoint(i.tileTransform,Te,P));if(!a.polygonIntersectsBox(L,0,0,a.EXTENT,a.EXTENT))return;P=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?y:0);const W=this.screenGeometryMercator.polygon.map(Te=>a.getTileVec3(i.tileTransform,Te,P)),Z=W.map(Te=>new a.pointGeometry(Te[0],Te[1])),ie=c.getFreeCameraOptions().position||new a.MercatorCoordinate(0,0,0),ve=a.getTileVec3(i.tileTransform,ie,P),Pe=W.map(Te=>{const Ae=a.sub(Te,Te,ve);return a.normalize(Ae,Ae),new a.Ray(ve,Ae)}),Le=Nn(i,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Z,tilespaceRays:Pe,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(Be=a.getBounds(L),Be.min.x=a.clamp(Be.min.x,0,a.EXTENT),Be.min.y=a.clamp(Be.min.y,0,a.EXTENT),Be.max.x=a.clamp(Be.max.x,0,a.EXTENT),Be.max.y=a.clamp(Be.max.y,0,a.EXTENT),Be),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:Le};var Be}_bufferedScreenMercator(i,c){const p=Tt(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{let y;return y="globe"===c.projection.name?this._projectAndResample(this.bufferedScreenGeometry(i),c):{polygon:this.bufferedScreenGeometry(i).map(x=>c.pointCoordinate3D(x)),unwrapped:!0},this._screenRaycastCache[p]=y,y}}_bufferedCameraMercator(i,c){const p=Tt(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{let y;return y="globe"===c.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),c):{polygon:this.bufferedCameraGeometry(i).map(x=>c.pointCoordinate3D(x)),unwrapped:!0},this._cameraRaycastCache[p]=y,y}}_projectAndResample(i,c){const p=function(x,D){const P=a.multiply([],D.pixelMatrix,D.globeMatrix),L=[0,-a.GLOBE_RADIUS,0,1],W=[0,a.GLOBE_RADIUS,0,1],Z=[0,0,0,1];a.transformMat4$1(L,L,P),a.transformMat4$1(W,W,P),a.transformMat4$1(Z,Z,P);const ie=new a.pointGeometry(L[0]/L[3],L[1]/L[3]),ve=new a.pointGeometry(W[0]/W[3],W[1]/W[3]),Pe=a.polygonContainsPoint(x,ie)&&L[3]<Z[3],Le=a.polygonContainsPoint(x,ve)&&W[3]<Z[3];if(!Pe&&!Le)return null;const Be=function(Vt,cn,rn){for(let $t=1;$t<Vt.length;$t++){const qn=mn(cn.pointCoordinate3D(Vt[$t-1]).x),Kt=mn(cn.pointCoordinate3D(Vt[$t]).x);if(rn<0){if(qn<Kt)return{idx:$t,t:-qn/(Kt-1-qn)}}else if(Kt<qn)return{idx:$t,t:(1-qn)/(Kt+1-qn)}}return null}(x,D,Pe?-1:1);if(!Be)return null;const{idx:Te,t:Ae}=Be;let je=Te>1?Jn(x.slice(0,Te),D):[],ze=Te<x.length?Jn(x.slice(Te),D):[];je=je.map(Vt=>new a.pointGeometry(mn(Vt.x),Vt.y)),ze=ze.map(Vt=>new a.pointGeometry(mn(Vt.x),Vt.y));const at=[...je];0===at.length&&at.push(ze[ze.length-1]);const Dt=a.number(at[at.length-1].y,(0===ze.length?je[0]:ze[0]).y,Ae);let vt;return vt=Pe?[new a.pointGeometry(0,Dt),new a.pointGeometry(0,0),new a.pointGeometry(1,0),new a.pointGeometry(1,Dt)]:[new a.pointGeometry(1,Dt),new a.pointGeometry(1,1),new a.pointGeometry(0,1),new a.pointGeometry(0,Dt)],at.push(...vt),0===ze.length?at.push(je[0]):at.push(...ze),{polygon:at.map(Vt=>new a.MercatorCoordinate(Vt.x,Vt.y)),unwrapped:!1}}(i,c);if(p)return p;const y=function(x,D){let P=!1,L=-1/0,W=0;for(let ie=0;ie<x.length-1;ie++)x[ie].x>L&&(L=x[ie].x,W=ie);for(let ie=0;ie<x.length-1;ie++){const ve=(W+ie)%(x.length-1),Pe=x[ve],Le=x[ve+1];Math.abs(Pe.x-Le.x)>.5&&(Pe.x<Le.x?(Pe.x+=1,0===ve&&(x[x.length-1].x+=1)):(Le.x+=1,ve+1===x.length-1&&(x[0].x+=1)),P=!0)}const Z=a.mercatorXfromLng(D.center.lng);return P&&Z<Math.abs(Z-1)&&x.forEach(ie=>{ie.x-=1}),{polygon:x,unwrapped:P}}(Jn(i,c).map(x=>new a.pointGeometry(mn(x.x),x.y)),c);return{polygon:y.polygon.map(x=>new a.MercatorCoordinate(x.x,x.y)),unwrapped:y.unwrapped}}}function Jn(d,i){return a.resample(d,c=>{const p=i.pointCoordinate3D(c);c.x=p.x,c.y=p.y},1/256)}function mn(d){return d<0?1+d%1:d%1}function Tt(d){return 100*d|0}function Ge(d,i,c,p,y){const x=function(D,P){if(D)return y(D);if(P){d.url&&P.tiles&&d.tiles&&delete d.tiles;const L=a.pick(a.extend(P,d),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(L.vectorLayers=P.vector_layers,L.vectorLayerIds=L.vectorLayers.map(W=>W.id)),L.tiles=i.canonicalizeTileset(L,d.url),y(null,L)}};return d.url?a.getJSON(i.transformRequest(i.normalizeSourceURL(d.url,null,c,p),a.ResourceType.Source),x):a.exported.frame(()=>x(null,d))}class Fe{constructor(i,c,p){this.bounds=a.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*c),y=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*c),D=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=p&&i.x<x&&i.y>=y&&i.y<D}}class ht{constructor(i,c,p){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ce{constructor(i,c,p,y){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const y=c.attributes[this.attributes[p].name];void 0!==y&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,c,p){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],D=c.attributes[x.name];void 0!==D&&i.vertexAttribPointer(D,x.components,i[Xe[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ot{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Se extends ot{getDefault(){return a.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class St extends ot{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class tn extends ot{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class li extends ot{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Wi extends ot{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Dn extends ot{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ae extends ot{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class $e extends ot{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Ot extends ot{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class on extends ot{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class jt extends ot{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Bt extends ot{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Je extends ot{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class ge extends ot{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class pe extends ot{getDefault(){return a.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class te extends ot{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class it extends ot{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Ht extends ot{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Rn extends ot{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class ni extends ot{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Ii extends ot{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class bn extends ot{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ji extends ot{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ji extends ot{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class dn extends ot{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class It extends ot{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ct extends ot{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class nn extends ot{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class _i extends ot{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Qt extends ot{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class xt extends ot{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ft extends ot{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Yt extends ft{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class wn extends ft{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ri extends wn{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ee{constructor(i,c,p,y){this.context=i,this.width=c,this.height=p;const x=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Yt(i,x),y&&(this.depthAttachment=new wn(i,x))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class ee{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Se(this),this.clearDepth=new St(this),this.clearStencil=new tn(this),this.colorMask=new li(this),this.depthMask=new Wi(this),this.stencilMask=new Dn(this),this.stencilFunc=new ae(this),this.stencilOp=new $e(this),this.stencilTest=new Ot(this),this.depthRange=new on(this),this.depthTest=new jt(this),this.depthFunc=new Bt(this),this.blend=new Je(this),this.blendFunc=new ge(this),this.blendColor=new pe(this),this.blendEquation=new te(this),this.cullFace=new it(this),this.cullFaceSide=new Ht(this),this.frontFace=new Rn(this),this.program=new ni(this),this.activeTexture=new Ii(this),this.viewport=new bn(this),this.bindFramebuffer=new Ji(this),this.bindRenderbuffer=new ji(this),this.bindTexture=new dn(this),this.bindVertexBuffer=new It(this),this.bindElementBuffer=new ct(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new nn(this),this.pixelStoreUnpack=new _i(this),this.pixelStoreUnpackPremultiplyAlpha=new Qt(this),this.pixelStoreUnpackFlipY=new xt(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=i.getExtension("OES_standard_derivatives"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new ht(this,i,c)}createVertexBuffer(i,c,p){return new ce(this,i,c,p)}createRenderbuffer(i,c,p){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,p){return new Ee(this,i,c,p)}clear({color:i,depth:c,stencil:p}){const y=this.gl;let x=0;i&&(x|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==c&&(x|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),void 0!==p&&(x|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),y.clear(x)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){he(i.blendFunction,a.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class oe extends a.Evented{constructor(i,c,p,y){super(),this.id=i,this.dispatcher=p,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},c),a.extend(this,a.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ge(this._options,this.map._requestManager,null,null,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new a.ErrorEvent(i)):c&&(a.extend(this,c),c.bounds&&(this.tileBounds=new Fe(c.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(c.tiles),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const p=a.exported.devicePixelRatio>=2,y=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=a.getImage(this.map._requestManager.transformRequest(y,a.ResourceType.Tile),(x,D,P,L)=>(delete i.request,i.aborted?(i.state="unloaded",c(null)):x?(i.state="errored",c(x)):D?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:P,expires:L}),i.setTexture(D,this.map.painter),i.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),void c(null)):c(null)))}static loadTileData(i,c,p){i.setTexture(c,p)}static unloadTileData(i,c){i.texture&&c.saveTileTexture(i.texture)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let Me;function Ve(d,i,c,p,y,x,D,P){const L=[d,c,y,i,p,x,1,1,1],W=[D,P,1],Z=a.adjoint([],L),[ie,ve,Pe]=a.transformMat3(W,W,a.transpose(Z,Z));return a.multiply$1(L,[ie,0,0,0,ve,0,0,0,Pe],L)}class ut extends a.Evented{constructor(i,c,p,y){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c,this._dirty=!1}load(i,c){this._loaded=c||!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(p,y)=>{if(this._imageRequest=null,this._loaded=!0,p)this.fire(new a.ErrorEvent(p));else if(y){const{HTMLImageElement:x}=a.window;this.image=y instanceof x?a.exported.getImageData(y):y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const c=i.map(a.MercatorCoordinate.fromLngLat);return this.tileID=function(p){let y=1/0,x=1/0,D=-1/0,P=-1/0;for(const ie of p)y=Math.min(y,ie.x),x=Math.min(x,ie.y),D=Math.max(D,ie.x),P=Math.max(P,ie.y);const L=Math.max(D-y,P-x),W=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),Z=Math.pow(2,W);return new a.CanonicalTileID(W,Math.floor((y+D)/2*Z),Math.floor((x+P)/2*Z))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const L in this.tiles){const W=this.tiles[L];"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}if(this._boundsArray)return;const c=a.tileTransform(this.tileID,this.map.transform.projection),[p,y,x,D]=this.coordinates.map(L=>{const W=c.projection.project(L[0],L[1]);return a.getTilePoint(c,W)._round()});this.perspectiveTransform=function(L,W,Z,ie,ve,Pe,Le,Be,Te,Ae){const je=Ve(0,0,L,0,0,W,L,W),ze=Ve(Z,ie,ve,Pe,Le,Be,Te,Ae);return a.multiply$1(ze,a.adjoint(je,je),ze),[ze[6]/ze[8]*L/a.EXTENT,ze[7]/ze[8]*W/a.EXTENT]}(this.width,this.height,p.x,p.y,y.x,y.y,D.x,D.y,x.x,x.y);const P=this._boundsArray=new a.StructArrayLayout4i8;P.emplaceBack(p.x,p.y,0,0),P.emplaceBack(y.x,y.y,a.EXTENT,0),P.emplaceBack(D.x,D.y,0,a.EXTENT),P.emplaceBack(x.x,x.y,a.EXTENT,a.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(P,a.boundsAttributes.members),this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const i=this.map.painter.context,c=i.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new a.Texture(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(i)}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ft={vector:class extends a.Evented{constructor(d,i,c,p){if(super(),this.id=d,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(i,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p),this._tileWorkers={},this._deduped=new a.DedupedRequest}load(d){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map._worldview;this._tileJSONRequest=Ge(this._options,this.map._requestManager,i,c,(p,y)=>{this._tileJSONRequest=null,this._loaded=!0,p?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),c&&2!==c.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new a.ErrorEvent(p))):y&&(a.extend(this,y),y.bounds&&(this.tileBounds=new Fe(y.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(y.tiles,this.map._requestManager._customAccessToken),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(p)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>{const d=this.map.style._getSourceCaches(this.id);for(const i of d)i.clearTiles()})}setSourceProperty(d){d(),this.reload()}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}loadTile(d,i){const c=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),p={request:this.map._requestManager.transformRequest(c,a.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(p.request.collectResourceTiming=this._collectResourceTiming,d.actor&&"expired"!==d.state)"loading"===d.state?d.reloadCallback=i:d.request=d.actor.send("reloadTile",p,y.bind(this));else if(d.actor=this._tileWorkers[c]=this._tileWorkers[c]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",p,y.bind(this),void 0,!0);else{const x=a.loadVectorTile.call({deduped:this._deduped},p,(D,P)=>{D||!P?y.call(this,D):(p.data={cacheControl:P.cacheControl,expires:P.expires,rawData:P.rawData.slice(0)},d.actor&&d.actor.send("loadTile",p,y.bind(this),void 0,!0))},!0);d.request={cancel:x}}function y(x,D){return delete d.request,d.aborted?i(null):x&&404!==x.status?i(x):(D&&D.resourceTiming&&(d.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&d.setExpiryData(D),d.loadVectorData(D,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:oe,"raster-dem":class extends oe{constructor(d,i,c,p){super(d,i,c,p),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(d,i){const c=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(y,x){y&&(d.state="errored",i(y)),x&&(d.dem=x,d.dem.onDeserialize(),d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0,d.state="loaded",i(null))}d.request=a.getImage(this.map._requestManager.transformRequest(c,a.ResourceType.Tile),function(y,x,D,P){if(delete d.request,d.aborted)d.state="unloaded",i(null);else if(y)d.state="errored",i(y);else if(x){this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:D,expires:P});const L=a.window.ImageBitmap&&x instanceof a.window.ImageBitmap&&(null==Me&&(Me=a.window.OffscreenCanvas&&new a.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.window.createImageBitmap),Me),W=1-(x.width-a.prevPowerOfTwo(x.width))/2;W<1||d.neighboringTiles||(d.neighboringTiles=this._getNeighboringTiles(d.tileID));const Z=L?x:a.exported.getImageData(x,W),ie={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:Z,encoding:this.encoding,padding:W};d.actor&&"expired"!==d.state||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",ie,p.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(d){const i=d.canonical,c=Math.pow(2,i.z),p=(i.x-1+c)%c,y=0===i.x?d.wrap-1:d.wrap,x=(i.x+1+c)%c,D=i.x+1===c?d.wrap+1:d.wrap,P={};return P[new a.OverscaledTileID(d.overscaledZ,y,i.z,p,i.y).key]={backfilled:!1},P[new a.OverscaledTileID(d.overscaledZ,D,i.z,x,i.y).key]={backfilled:!1},i.y>0&&(P[new a.OverscaledTileID(d.overscaledZ,y,i.z,p,i.y-1).key]={backfilled:!1},P[new a.OverscaledTileID(d.overscaledZ,d.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},P[new a.OverscaledTileID(d.overscaledZ,D,i.z,x,i.y-1).key]={backfilled:!1}),i.y+1<c&&(P[new a.OverscaledTileID(d.overscaledZ,y,i.z,p,i.y+1).key]={backfilled:!1},P[new a.OverscaledTileID(d.overscaledZ,d.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},P[new a.OverscaledTileID(d.overscaledZ,D,i.z,x,i.y+1).key]={backfilled:!1}),P}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded"}},geojson:class extends a.Evented{constructor(d,i,c,p){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(p),this._data=i.data,this._options=a.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const y=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*y,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*y,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:a.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*y,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(d){this.map=d,this.setData(this._data)}setData(d){return this._data=d,this._updateWorkerData(),this}getClusterExpansionZoom(d,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},i),this}getClusterChildren(d,i){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},i),this}getClusterLeaves(d,i,c,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:i,offset:c},p),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.Event("dataloading",{dataType:"source"})),this._loaded=!1;const d=a.extend({},this.workerOptions),i=this._data;"string"==typeof i?(d.request=this.map._requestManager.transformRequest(a.exported.resolveURL(i),a.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,d,(c,p)=>{if(this._loaded=!0,this._pendingLoad=null,c)this.fire(new a.ErrorEvent(c));else{const y={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&p&&p.resourceTiming&&p.resourceTiming[this.id]&&(y.resourceTiming=p.resourceTiming[this.id]),this.fire(new a.Event("data",y)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(d,i){const c=d.actor?"reloadTile":"loadTile";d.actor=this.actor,d.request=this.actor.send(c,{type:this.type,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(p,y)=>(delete d.request,d.unloadVectorData(),d.aborted?i(null):p?i(p):(d.loadVectorData(y,this.map.painter,"reloadTile"===c),i(null))),void 0,"loadTile"===c)}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ut{constructor(d,i,c,p){super(d,i,c,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const i of d.urls)this.urls.push(this.map._requestManager.transformRequest(i,a.ResourceType.Source).url);a.getVideo(this.urls,(i,c)=>{this._loaded=!0,i?this.fire(new a.ErrorEvent(i)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const i=this.video.seekable;d<i.start(0)||d>i.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const d=this.map.painter.context,i=d.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(d,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(d)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ut,canvas:class extends ut{constructor(d,i,c,p){super(d,i,c,p),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(y=>!Array.isArray(y)||2!==y.length||y.some(x=>"number"!=typeof x))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const i=this.map.painter.context;this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}},custom:class extends a.Evented{constructor(d,i,c,p){super(),this.id=d,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=i,this.setEventedParent(p),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Fe(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),a.extend(this,a.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(d){this._map=d,this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(d),this.load()}onRemove(d){this._implementation.onRemove&&this._implementation.onRemove(d)}hasTile(d){if(this._implementation.hasTile){const{x:i,y:c,z:p}=d.canonical;return this._implementation.hasTile({x:i,y:c,z:p})}return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,i){const{x:c,y:p,z:y}=d.tileID.canonical,x=new a.window.AbortController;d.request=Promise.resolve(this._implementation.loadTile({x:c,y:p,z:y},{signal:x.signal})).then(function(D){return delete d.request,d.aborted?(d.state="unloaded",i(null)):void 0===D?(d.state="errored",i(null)):null===D?(this.loadTileData(d,{width:this.tileSize,height:this.tileSize,data:null}),d.state="loaded",i(null)):(P=D)instanceof a.window.ImageData||P instanceof a.window.HTMLCanvasElement||P instanceof a.window.ImageBitmap||P instanceof a.window.HTMLImageElement?(this.loadTileData(d,D),d.state="loaded",void i(null)):(d.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var P}.bind(this)).catch(D=>{20!==D.code&&(d.state="errored",i(D))}),d.request.cancel=()=>x.abort()}loadTileData(d,i){oe.loadTileData(d,i,this._map.painter)}unloadTileData(d){oe.unloadTileData(d,this._map.painter)}unloadTile(d,i){if(this.unloadTileData(d),this._implementation.unloadTile){const{x:c,y:p,z:y}=d.tileID.canonical;this._implementation.unloadTile({x:c,y:p,z:y})}i()}abortTile(d,i){d.request&&d.request.cancel&&(d.request.cancel(),delete d.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(d=>({x:d.canonical.x,y:d.canonical.y,z:d.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Lt=function(d,i,c,p){const y=new Ft[i.type](d,i,c,p);if(y.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${y.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],y),y};function Mt(d,i){const c=a.identity([]);return a.scale(c,c,[.5*d.width,.5*-d.height,1]),a.translate(c,c,[1,-1,0]),a.multiply(c,c,d.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(c)}function le(d,i,c,p,y,x,D,P=!1){const L=d.tilesIn(p,D,P);L.sort(fe);const W=[];for(const ie of L)W.push({wrappedTileID:ie.tile.tileID.wrapped().key,queryResults:ie.tile.queryRenderedFeatures(i,c,d._state,ie,y,x,Mt(d.transform,ie.tile.tileID),P)});const Z=function(ie){const ve={},Pe={};for(const Le of ie){const Be=Le.queryResults,Te=Le.wrappedTileID,Ae=Pe[Te]=Pe[Te]||{};for(const je in Be){const ze=Be[je],at=Ae[je]=Ae[je]||{},Dt=ve[je]=ve[je]||[];for(const vt of ze)at[vt.featureIndex]||(at[vt.featureIndex]=!0,Dt.push(vt))}}return ve}(W);for(const ie in Z)Z[ie].forEach(ve=>{const Pe=ve.feature,Le=Pe.layer;Le&&"background"!==Le.type&&"sky"!==Le.type&&(Pe.source=Le.source,Le["source-layer"]&&(Pe.sourceLayer=Le["source-layer"]),Pe.state=void 0!==Pe.id?d.getFeatureState(Le["source-layer"],Pe.id):{})});return Z}function _e(d,i){const c=d.getRenderableIds().map(x=>d.getTileByID(x)),p=[],y={};for(let x=0;x<c.length;x++){const D=c[x],P=D.tileID.canonical.key;y[P]||(y[P]=!0,D.querySourceFeatures(p,i))}return p}function fe(d,i){const c=d.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Ue(){return null!=Xs.workerClass?new Xs.workerClass:new a.window.Worker(Xs.workerUrl)}const Wt="mapboxgl_preloaded_worker_pool";class Sn{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Sn.workerCount;)this.workers.push(new Ue);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Wt]}numActive(){return Object.keys(this.active).length}}let jn;function Xn(){return jn||(jn=new Sn),jn}function Ti(d,i){const c={};for(const p in d)"ref"!==p&&(c[p]=d[p]);return a.refProperties.forEach(p=>{p in i&&(c[p]=i[p])}),c}function Pi(d){d=d.slice();const i=Object.create(null);for(let c=0;c<d.length;c++)i[d[c].id]=d[c];for(let c=0;c<d.length;c++)"ref"in d[c]&&(d[c]=Ti(d[c],i[d[c].ref]));return d}Sn.workerCount=2;const Gn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function er(d,i,c){c.push({command:Gn.addSource,args:[d,i[d]]})}function qi(d,i,c){i.push({command:Gn.removeSource,args:[d]}),c[d]=!0}function _o(d,i,c,p){qi(d,c,p),er(d,i,c)}function eo(d,i,c){let p;for(p in d[c])if(d[c].hasOwnProperty(p)&&"data"!==p&&!he(d[c][p],i[c][p]))return!1;for(p in i[c])if(i[c].hasOwnProperty(p)&&"data"!==p&&!he(d[c][p],i[c][p]))return!1;return!0}function Cr(d,i,c,p,y,x){let D;for(D in i=i||{},d=d||{})d.hasOwnProperty(D)&&(he(d[D],i[D])||c.push({command:x,args:[p,D,i[D],y]}));for(D in i)i.hasOwnProperty(D)&&!d.hasOwnProperty(D)&&(he(d[D],i[D])||c.push({command:x,args:[p,D,i[D],y]}))}function yn(d){return d.id}function So(d,i){return d[i.id]=i,d}class tr{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=a.clamp(i,0,1);let c=1,p=this._distances[c];const y=i*this.paddedLength+this.padding;for(;p<y&&c<this._distances.length;)p=this._distances[++c];const x=c-1,D=this._distances[x],P=p-D,L=P>0?(y-D)/P:0;return this.points[x].mult(1-L).add(this.points[c].mult(L))}}class Ao{constructor(i,c,p){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let D=0;D<this.xCellCount*this.yCellCount;D++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,y,x){this._forEachCell(c,p,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(i,c,p,y){this._forEachCell(c-y,p-y,c+y,p+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(y)}_insertBoxCell(i,c,p,y,x,D){this.boxCells[x].push(D)}_insertCircleCell(i,c,p,y,x,D){this.circleCells[x].push(D)}_query(i,c,p,y,x,D){if(p<0||i>this.width||y<0||c>this.height)return!x&&[];const P=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=y){if(x)return!0;for(let L=0;L<this.boxKeys.length;L++)P.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const W=this.circles[3*L],Z=this.circles[3*L+1],ie=this.circles[3*L+2];P.push({key:this.circleKeys[L],x1:W-ie,y1:Z-ie,x2:W+ie,y2:Z+ie})}return D?P.filter(D):P}return this._forEachCell(i,c,p,y,this._queryCell,P,{hitTest:x,seenUids:{box:{},circle:{}}},D),x?P.length>0:P}_queryCircle(i,c,p,y,x){const D=i-p,P=i+p,L=c-p,W=c+p;if(P<0||D>this.width||W<0||L>this.height)return!y&&[];const Z=[];return this._forEachCell(D,L,P,W,this._queryCellCircle,Z,{hitTest:y,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},x),y?Z.length>0:Z}query(i,c,p,y,x){return this._query(i,c,p,y,!1,x)}hitTest(i,c,p,y,x){return this._query(i,c,p,y,!0,x)}hitTestCircle(i,c,p,y){return this._queryCircle(i,c,p,!0,y)}_queryCell(i,c,p,y,x,D,P,L){const W=P.seenUids,Z=this.boxCells[x];if(null!==Z){const ve=this.bboxes;for(const Pe of Z)if(!W.box[Pe]){W.box[Pe]=!0;const Le=4*Pe;if(i<=ve[Le+2]&&c<=ve[Le+3]&&p>=ve[Le+0]&&y>=ve[Le+1]&&(!L||L(this.boxKeys[Pe]))){if(P.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[Pe],x1:ve[Le],y1:ve[Le+1],x2:ve[Le+2],y2:ve[Le+3]})}}}const ie=this.circleCells[x];if(null!==ie){const ve=this.circles;for(const Pe of ie)if(!W.circle[Pe]){W.circle[Pe]=!0;const Le=3*Pe;if(this._circleAndRectCollide(ve[Le],ve[Le+1],ve[Le+2],i,c,p,y)&&(!L||L(this.circleKeys[Pe]))){if(P.hitTest)return D.push(!0),!0;{const Be=ve[Le],Te=ve[Le+1],Ae=ve[Le+2];D.push({key:this.circleKeys[Pe],x1:Be-Ae,y1:Te-Ae,x2:Be+Ae,y2:Te+Ae})}}}}}_queryCellCircle(i,c,p,y,x,D,P,L){const W=P.circle,Z=P.seenUids,ie=this.boxCells[x];if(null!==ie){const Pe=this.bboxes;for(const Le of ie)if(!Z.box[Le]){Z.box[Le]=!0;const Be=4*Le;if(this._circleAndRectCollide(W.x,W.y,W.radius,Pe[Be+0],Pe[Be+1],Pe[Be+2],Pe[Be+3])&&(!L||L(this.boxKeys[Le])))return D.push(!0),!0}}const ve=this.circleCells[x];if(null!==ve){const Pe=this.circles;for(const Le of ve)if(!Z.circle[Le]){Z.circle[Le]=!0;const Be=3*Le;if(this._circlesCollide(Pe[Be],Pe[Be+1],Pe[Be+2],W.x,W.y,W.radius)&&(!L||L(this.circleKeys[Le])))return D.push(!0),!0}}}_forEachCell(i,c,p,y,x,D,P,L){const W=this._convertToXCellCoord(i),Z=this._convertToYCellCoord(c),ie=this._convertToXCellCoord(p),ve=this._convertToYCellCoord(y);for(let Pe=W;Pe<=ie;Pe++)for(let Le=Z;Le<=ve;Le++)if(x.call(this,i,c,p,y,this.xCellCount*Le+Pe,D,P,L))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,y,x,D){const P=y-i,L=x-c,W=p+D;return W*W>P*P+L*L}_circleAndRectCollide(i,c,p,y,x,D,P){const L=(D-y)/2,W=Math.abs(i-(y+L));if(W>L+p)return!1;const Z=(P-x)/2,ie=Math.abs(c-(x+Z));if(ie>Z+p)return!1;if(W<=L||ie<=Z)return!0;const ve=W-L,Pe=ie-Z;return ve*ve+Pe*Pe<=p*p}}const va=Math.tan(85*Math.PI/180);function Yi(d,i,c,p,y,x,D){const P=a.create();if(c)if("globe"===x.name){const L=a.calculateGlobeLabelMatrix(y,i);a.multiply(P,P,L)}else{const L=Ce([],D);P[0]=L[0],P[1]=L[1],P[4]=L[2],P[5]=L[3],p||a.rotateZ(P,P,y.angle)}else a.multiply(P,y.labelPlaneMatrix,d);return P}function ps(d,i,c,p,y,x,D){const P=Yi(d,i,c,p,y,x,D);return"globe"===x.name&&c||(P[2]=P[6]=P[10]=P[14]=0),P}function kn(d,i,c,p,y,x,D){if(c){if("globe"===x.name){const P=Yi(d,i,c,p,y,x,D);return a.invert(P,P),a.multiply(P,d,P),P}{const P=a.clone(d),L=a.identity([]);return L[0]=D[0],L[1]=D[1],L[4]=D[2],L[5]=D[3],a.multiply(P,P,L),p||a.rotateZ(P,P,-y.angle),P}}return y.glCoordMatrix}function fn(d,i,c,p){const y=[d,i,c,1];c?a.transformMat4$1(y,y,p):pr(y,y,p);const x=y[3];return y[0]/=x,y[1]/=x,y[2]/=x,y}function Ie(d,i){return Math.min(.5+d/i*.5,1.5)}function Gt(d,i){const c=d[0]/d[3],p=d[1]/d[3];return c>=-i[0]&&c<=i[0]&&p>=-i[1]&&p<=i[1]}function Ln(d,i,c,p,y,x,D,P,L,W){const Z=c.transform,ie=p?d.textSizeData:d.iconSizeData,ve=a.evaluateSizeForZoom(ie,c.transform.zoom),Pe="globe"===Z.projection.name,Le=[256/c.width*2+1,256/c.height*2+1],Be=p?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;Be.clear();let Te=null;Pe&&(Te=p?d.text.globeExtVertexArray:d.icon.globeExtVertexArray);const Ae=d.lineVertexArray,je=p?d.text.placedSymbolArray:d.icon.placedSymbolArray,ze=c.transform.width/c.transform.height;let at,Dt=!1;for(let vt=0;vt<je.length;vt++){const Vt=je.get(vt),{numGlyphs:cn,writingMode:rn}=Vt;if(rn!==a.WritingMode.vertical||Dt||at===a.WritingMode.horizontal||(Dt=!0),at=rn,(Vt.hidden||rn===a.WritingMode.vertical)&&!Dt){Ur(cn,Be);continue}Dt=!1;const $t=new a.pointGeometry(Vt.tileAnchorX,Vt.tileAnchorY);let{x:qn,y:Kt,z:Pn}=Z.projection.projectTilePoint($t.x,$t.y,W.canonical);if(L){const[Oi,Ci,Vi]=L($t);qn+=Oi,Kt+=Ci,Pn+=Vi}const gn=[qn,Kt,Pn,1];if(a.transformMat4$1(gn,gn,i),!Gt(gn,Le)){Ur(cn,Be);continue}const Wn=Ie(c.transform.cameraToCenterDistance,gn[3]),pn=a.evaluateSizeForFeature(ie,ve,Vt),zn=D?pn/Wn:pn*Wn,Qn=fn(qn,Kt,Pn,y);if(Qn[3]<=0){Ur(cn,Be);continue}let qt={};const hn=D?null:L,Ei=mi(Vt,zn,!1,P,i,y,x,d.glyphOffsetArray,Ae,Be,Te,Qn,$t,qt,ze,hn,Z.projection,W,D);Dt=Ei.useVertical,hn&&Ei.needsFlipping&&(qt={}),(Ei.notEnoughRoom||Dt||Ei.needsFlipping&&mi(Vt,zn,!0,P,i,y,x,d.glyphOffsetArray,Ae,Be,Te,Qn,$t,qt,ze,hn,Z.projection,W,D).notEnoughRoom)&&Ur(cn,Be)}p?(d.text.dynamicLayoutVertexBuffer.updateData(Be),Te&&d.text.globeExtVertexBuffer.updateData(Te)):(d.icon.dynamicLayoutVertexBuffer.updateData(Be),Te&&d.icon.globeExtVertexBuffer.updateData(Te))}function di(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be){const{lineStartIndex:Te,glyphStartIndex:Ae,segment:je}=P,ze=Ae+P.numGlyphs,at=Te+P.lineLength,Dt=i.getoffsetX(Ae),vt=i.getoffsetX(ze-1),Vt=ro(d*Dt,c,p,y,x,D,je,Te,at,L,W,Z,ie,ve,!0,Pe,Le,Be);if(!Vt)return null;const cn=ro(d*vt,c,p,y,x,D,je,Te,at,L,W,Z,ie,ve,!0,Pe,Le,Be);return cn?{first:Vt,last:cn}:null}function Mi(d,i,c,p){return d===a.WritingMode.horizontal&&Math.abs(p)>Math.abs(c)?{useVertical:!0}:d===a.WritingMode.vertical?p>0?{needsFlipping:!0}:null:0!==i&&(0===(y=c)||Math.abs(p/y)>va)?1===i?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null;var y}function mi(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be,Te,Ae,je){const ze=i/24,at=d.lineOffsetX*ze,Dt=d.lineOffsetY*ze,{lineStartIndex:vt,glyphStartIndex:Vt,numGlyphs:cn,segment:rn,writingMode:$t,flipState:qn}=d,Kt=vt+d.lineLength,Pn=gn=>{if(Z){const[Qn,qt,hn]=gn.up,Ei=W.length;a.updateGlobeVertexNormal(Z,Ei+0,Qn,qt,hn),a.updateGlobeVertexNormal(Z,Ei+1,Qn,qt,hn),a.updateGlobeVertexNormal(Z,Ei+2,Qn,qt,hn),a.updateGlobeVertexNormal(Z,Ei+3,Qn,qt,hn)}const[Wn,pn,zn]=gn.point;a.addDynamicAttributes(W,Wn,pn,zn,gn.angle)};if(cn>1){const gn=di(ze,P,at,Dt,c,ie,ve,d,L,x,Pe,Be,!1,Te,Ae,je);if(!gn)return{notEnoughRoom:!0};if(p&&!c){let[Wn,pn,zn]=gn.first.point,[Qn,qt,hn]=gn.last.point;[Wn,pn]=fn(Wn,pn,zn,D),[Qn,qt]=fn(Qn,qt,hn,D);const Ei=Mi($t,qn,(Qn-Wn)*Le,qt-pn);if(d.flipState=Ei&&Ei.needsFlipping?1:2,Ei)return Ei}Pn(gn.first);for(let Wn=Vt+1;Wn<Vt+cn-1;Wn++){const pn=ro(ze*P.getoffsetX(Wn),at,Dt,c,ie,ve,rn,vt,Kt,L,x,Pe,Be,!1,!1,Te,Ae,je);if(!pn)return W.length-=4*(Wn-Vt),{notEnoughRoom:!0};Pn(pn)}Pn(gn.last)}else{if(p&&!c){const Wn=fn(ve.x,ve.y,0,y),pn=vt+rn+1,zn=new a.pointGeometry(L.getx(pn),L.gety(pn)),Qn=fn(zn.x,zn.y,0,y),qt=Qn[3]>0?Qn:vr(ve,zn,Wn,1,y,void 0,Te,Ae.canonical),hn=Mi($t,qn,(qt[0]-Wn[0])*Le,qt[1]-Wn[1]);if(d.flipState=hn&&hn.needsFlipping?1:2,hn)return hn}const gn=ro(ze*P.getoffsetX(Vt),at,Dt,c,ie,ve,rn,vt,Kt,L,x,Pe,Be,!1,!1,Te,Ae,je);if(!gn)return{notEnoughRoom:!0};Pn(gn)}return{}}function Ki(d,i,c,p,y){const{x,y:D,z:P}=p.projectTilePoint(d.x,d.y,i);if(!y)return fn(x,D,P,c);const[L,W,Z]=y(d);return fn(x+L,D+W,P+Z,c)}function vr(d,i,c,p,y,x,D,P){const L=Ki(d.sub(i)._unit()._add(d),P,y,D,x);return a.sub(L,c,L),a.normalize(L,L),a.scaleAndAdd(L,c,L,p)}function ro(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be,Te,Ae){const je=p?d-i:d+i;let ze=je>0?1:-1,at=0;p&&(ze*=-1,at=Math.PI),ze<0&&(at+=Math.PI);let Dt=P+D+(ze>0?0:1)|0,vt=y,Vt=y,cn=0,rn=0;const $t=Math.abs(je),qn=[],Kt=[];let Pn=x,gn=Pn;const Wn=()=>vr(gn,Pn,Vt,$t-cn+1,Z,ve,Be,Te.canonical);for(;cn+rn<=$t;){if(Dt+=ze,Dt<P||Dt>=L)return null;if(Vt=vt,gn=Pn,qn.push(Vt),Pe&&Kt.push(gn),Pn=new a.pointGeometry(W.getx(Dt),W.gety(Dt)),vt=ie[Dt],!vt){const Vi=Ki(Pn,Te.canonical,Z,Be,ve);vt=Vi[3]>0?ie[Dt]=Vi:Wn()}cn+=rn,rn=a.distance(Vt,vt)}Le&&ve&&(ie[Dt]&&(vt=Wn(),rn=a.distance(Vt,vt)),ie[Dt]=vt);const pn=($t-cn)/rn,zn=Pn.sub(gn)._mult(pn)._add(gn),Qn=a.sub([],vt,Vt),qt=a.scaleAndAdd([],Vt,Qn,pn);let hn=[0,0,1],Ei=Qn[0],Oi=Qn[1];if(Ae&&(hn=Be.upVector(Te.canonical,zn.x,zn.y),0!==hn[0]||0!==hn[1]||1!==hn[2])){const Vi=[hn[2],0,-hn[0]],sr=a.cross([],hn,Vi);a.normalize(Vi,Vi),a.normalize(sr,sr),Ei=a.dot(Qn,Vi),Oi=a.dot(Qn,sr)}if(c){const Vi=a.cross([],hn,Qn);a.normalize(Vi,Vi),a.scaleAndAdd(qt,qt,Vi,c*ze)}const Ci=at+Math.atan2(Oi,Ei);return qn.push(qt),Pe&&Kt.push(zn),{point:qt,angle:Ci,path:qn,tilePath:Kt,up:hn}}function Ur(d,i){const c=i.length,p=c+4*d;i.resize(p),i.float32.fill(-1/0,4*c,4*p)}function pr(d,i,c){const p=i[0],y=i[1];return d[0]=c[0]*p+c[4]*y+c[12],d[1]=c[1]*p+c[5]*y+c[13],d[3]=c[3]*p+c[7]*y+c[15],d}const Yr=100;class Es{constructor(i,c,p=new Ao(i.width+200,i.height+200,25),y=new Ao(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=y,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Yr,this.screenBottomBoundary=i.height+Yr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=c}placeCollisionBox(i,c,p,y,x,D,P,L){let W=p.projectedAnchorX,Z=p.projectedAnchorY,ie=p.projectedAnchorZ;const ve=p.elevation,Pe=p.tileID,Le=i.getProjection();if(ve&&Pe){const[vt,Vt,cn]=Le.upVector(Pe.canonical,p.tileAnchorX,p.tileAnchorY),rn=Le.upVectorScale(Pe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;W+=vt*ve*rn,Z+=Vt*ve*rn,ie+=cn*ve*rn}const Be=this.projectAndGetPerspectiveRatio(P,W,Z,ie,p.tileID,"globe"===Le.name||!!ve||this.transform.pitch>0,Le),Te=D*Be.perspectiveRatio,Ae=(p.x1*c+y.x-p.padding)*Te+Be.point.x,je=(p.y1*c+y.y-p.padding)*Te+Be.point.y,ze=(p.x2*c+y.x+p.padding)*Te+Be.point.x,at=(p.y2*c+y.y+p.padding)*Te+Be.point.y,Dt=Be.perspectiveRatio<=.55||Be.occluded;return!this.isInsideGrid(Ae,je,ze,at)||!x&&this.grid.hitTest(Ae,je,ze,at,L)||Dt?{box:[],offscreen:!1,occluded:Be.occluded}:{box:[Ae,je,ze,at],offscreen:this.isOffscreen(Ae,je,ze,at),occluded:!1}}placeCollisionCircles(i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be){const Te=[],Ae=this.transform.elevation,je=i.getProjection(),ze=Ae?Ae.getAtTileOffsetFunc(Be,this.transform.center.lat,this.transform.worldSize,je):null,at=new a.pointGeometry(p.tileAnchorX,p.tileAnchorY);let{x:Dt,y:vt,z:Vt}=je.projectTilePoint(at.x,at.y,Be.canonical);if(ze){const[zn,Qn,qt]=ze(at);Dt+=zn,vt+=Qn,Vt+=qt}const cn="globe"===je.name,rn=this.projectAndGetPerspectiveRatio(P,Dt,vt,Vt,Be,cn||!!Ae||this.transform.pitch>0,je),{perspectiveRatio:$t}=rn,qn=(ie?D/$t:D*$t)/a.ONE_EM,Kt=fn(Dt,vt,Vt,L),Pn=rn.signedDistanceFromCamera>0?di(qn,x,p.lineOffsetX*qn,p.lineOffsetY*qn,!1,Kt,at,p,y,L,{},Ae&&!ie?ze:null,ie&&!!Ae,je,Be,ie):null;let gn=!1,Wn=!1,pn=!0;if(Pn&&!rn.occluded){const zn=.5*Pe*$t+Le,Qn=new a.pointGeometry(-100,-100),qt=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),hn=new tr,{first:Ei,last:Oi}=Pn,Ci=Ei.path.length;let Vi=[];for(let gi=Ci-1;gi>=1;gi--)Vi.push(Ei.path[gi]);for(let gi=1;gi<Oi.path.length;gi++)Vi.push(Oi.path[gi]);const sr=2.5*zn;W&&(Vi=Vi.map(([gi,$r,Or],ao)=>(ze&&!cn&&(Or=ze(ao<Ci-1?Ei.tilePath[Ci-1-ao]:Oi.tilePath[ao-Ci+2])[2]),fn(gi,$r,Or,W))),Vi.some(gi=>gi[3]<=0)&&(Vi=[]));let Si=[];if(Vi.length>0){let gi=1/0,$r=-1/0,Or=1/0,ao=-1/0;for(const Zr of Vi)gi=Math.min(gi,Zr[0]),Or=Math.min(Or,Zr[1]),$r=Math.max($r,Zr[0]),ao=Math.max(ao,Zr[1]);$r>=Qn.x&&gi<=qt.x&&ao>=Qn.y&&Or<=qt.y&&(Si=[Vi.map(Zr=>new a.pointGeometry(Zr[0],Zr[1]))],(gi<Qn.x||$r>qt.x||Or<Qn.y||ao>qt.y)&&(Si=a.clipLine(Si,Qn.x,Qn.y,qt.x,qt.y)))}for(const gi of Si){hn.reset(gi,.25*zn);let $r=0;$r=hn.length<=.5*zn?1:Math.ceil(hn.paddedLength/sr)+1;for(let Or=0;Or<$r;Or++){const ao=Or/Math.max($r-1,1),Zr=hn.lerp(ao),Pa=Zr.x+Yr,Qs=Zr.y+Yr;Te.push(Pa,Qs,zn,0);const Js=Pa-zn,sl=Qs-zn,Qr=Pa+zn,Wr=Qs+zn;if(pn=pn&&this.isOffscreen(Js,sl,Qr,Wr),Wn=Wn||this.isInsideGrid(Js,sl,Qr,Wr),!c&&this.grid.hitTestCircle(Pa,Qs,zn,ve)&&(gn=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:gn,occluded:!1}}}}return{circles:!Z&&gn||!Wn?[]:Te,offscreen:pn,collisionDetected:gn,occluded:rn.occluded}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const c=[];let p=1/0,y=1/0,x=-1/0,D=-1/0;for(const Z of i){const ie=new a.pointGeometry(Z.x+Yr,Z.y+Yr);p=Math.min(p,ie.x),y=Math.min(y,ie.y),x=Math.max(x,ie.x),D=Math.max(D,ie.y),c.push(ie)}const P=this.grid.query(p,y,x,D).concat(this.ignoredGrid.query(p,y,x,D)),L={},W={};for(const Z of P){const ie=Z.key;if(void 0===L[ie.bucketInstanceId]&&(L[ie.bucketInstanceId]={}),L[ie.bucketInstanceId][ie.featureIndex])continue;const ve=[new a.pointGeometry(Z.x1,Z.y1),new a.pointGeometry(Z.x2,Z.y1),new a.pointGeometry(Z.x2,Z.y2),new a.pointGeometry(Z.x1,Z.y2)];a.polygonIntersectsPolygon(c,ve)&&(L[ie.bucketInstanceId][ie.featureIndex]=!0,void 0===W[ie.bucketInstanceId]&&(W[ie.bucketInstanceId]=[]),W[ie.bucketInstanceId].push(ie.featureIndex))}return W}insertCollisionBox(i,c,p,y,x){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:y,collisionGroupID:x},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,y,x){const D=c?this.ignoredGrid:this.grid,P={bucketInstanceId:p,featureIndex:y,collisionGroupID:x};for(let L=0;L<i.length;L+=4)D.insertCircle(P,i[L],i[L+1],i[L+2])}projectAndGetPerspectiveRatio(i,c,p,y,x,D,P){const L=[c,p,y,1];let W=!1;if(y||this.transform.pitch>0){a.transformMat4$1(L,L,i);const ie="globe"===P.name;this.fogState&&x&&!ie&&(W=function(Pe,Le,Be,Te,Ae,je){const ze=je.calculateFogTileMatrix(Ae),at=[Le,Be,Te];return a.transformMat4(at,at,ze),yt(Pe,at,je.pitch,je._fov)}(this.fogState,c,p,y,x.toUnwrapped(),this.transform)>.9)}else pr(L,L,i);const Z=L[3];return{point:new a.pointGeometry((L[0]/Z+1)/2*this.transform.width+Yr,(-L[1]/Z+1)/2*this.transform.height+Yr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(P)/Z*.5,1.5),signedDistanceFromCamera:Z,occluded:D&&L[2]>Z||W}}isOffscreen(i,c,p,y){return p<Yr||i>=this.screenRightBoundary||y<Yr||c>this.screenBottomBoundary}isInsideGrid(i,c,p,y){return p>=0&&i<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=a.identity([]);return a.translate(i,i,[-100,-100,0]),i}}function Cs(d,i,c){const p=i.createTileMatrix(d,d.worldSize,c.toUnwrapped());return a.multiply(new Float32Array(16),d.projMatrix,p)}function es(d,i,c){if(i.projection.name===c.projection.name)return d.projMatrix;const p=c.clone();return p.setProjection(i.projection),Cs(p,i.getProjection(),d)}function Ps(d,i,c){return i.name===c.projection.name?d.projMatrix:Cs(c,i,d)}class kl{constructor(i,c,p,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):y&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class wo{constructor(i,c,p,y,x,D=!1){this.text=new kl(i?i.text:null,c,p,x),this.icon=new kl(i?i.icon:null,c,y,x),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Na{constructor(i,c,p,y=!1){this.text=i,this.icon=c,this.skipFade=p,this.clipped=y}}class za{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class tl{constructor(i,c,p,y,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=y,this.tileID=x}}class Io{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function Fr(d,i,c,p,y){const{horizontalAlign:x,verticalAlign:D}=a.getAnchorAlignment(d),P=-(x-.5)*i,L=-(D-.5)*c,W=a.evaluateVariableOffset(d,p);return new a.pointGeometry(P+W[0]*y,L+W[1]*y)}function Os(d,i,c,p,y){const x=new a.pointGeometry(d,i);return c&&x._rotate(p?y:-y),x}class xa{constructor(i,c,p,y,x){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new Es(this.transform,x),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Io(p),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,p,y){const x=p.getBucket(c),D=p.latestFeatureIndex;if(!x||!D||c.id!==x.layerIds[0])return;const P=x.layers[0].layout,L=p.collisionBoxArray,W=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Z=p.tileSize/a.EXTENT,ie=p.tileID.toUnwrapped();this.transform.setProjection(x.projection);const ve=(Pe=p.tileID,Le=x.getProjection(),Be=this.transform,Le.name===this.projection?Be.calculateProjMatrix(Pe.toUnwrapped()):Cs(Be,Le,Pe));var Pe,Le,Be;const Te="map"===P.get("text-pitch-alignment"),Ae="map"===P.get("text-rotation-alignment");c.compileFilter();const je=c.dynamicFilter(),ze=c.dynamicFilterNeedsFeature(),at=this.transform.calculatePixelsToTileUnitsMatrix(p),Dt=ps(ve,p.tileID.canonical,Te,Ae,this.transform,x.getProjection(),at);let vt=null;if(Te){const rn=kn(ve,p.tileID.canonical,Te,Ae,this.transform,x.getProjection(),at);vt=a.multiply([],this.transform.labelPlaneMatrix,rn)}let Vt=null;je&&p.latestFeatureIndex&&(Vt={unwrappedTileID:ie,dynamicFilter:je,dynamicFilterNeedsFeature:ze,featureIndex:p.latestFeatureIndex}),this.retainedQueryData[x.bucketInstanceId]=new tl(x.bucketInstanceId,D,x.sourceLayerIndex,x.index,p.tileID);const cn={bucket:x,layout:P,posMatrix:ve,textLabelPlaneMatrix:Dt,labelToScreenMatrix:vt,clippingData:Vt,scale:W,textPixelRatio:Z,holdingForFade:p.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.evaluateSizeForZoom(x.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const rn of x.sortKeyRanges){const{sortKey:$t,symbolInstanceStart:qn,symbolInstanceEnd:Kt}=rn;i.push({sortKey:$t,symbolInstanceStart:qn,symbolInstanceEnd:Kt,parameters:cn})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:cn})}attemptAnchorPlacement(i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be,Te,Ae,je){const{textOffset0:ze,textOffset1:at,crossTileID:Dt}=ve,vt=[ze,at],Vt=Fr(i,p,y,vt,x),cn=this.collisionIndex.placeCollisionBox(Le,x,c,Os(Vt.x,Vt.y,D,P,this.transform.angle),ie,L,W,Z.predicate);if(Te){const rn=Le.getSymbolInstanceIconSize(je,this.transform.zoom,ve.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(Le,rn,Te,Os(Vt.x,Vt.y,D,P,this.transform.angle),ie,L,W,Z.predicate).box.length)return}if(cn.box.length>0){let rn;return this.prevPlacement&&this.prevPlacement.variableOffsets[Dt]&&this.prevPlacement.placements[Dt]&&this.prevPlacement.placements[Dt].text&&(rn=this.prevPlacement.variableOffsets[Dt].anchor),this.variableOffsets[Dt]={textOffset:vt,width:p,height:y,anchor:i,textScale:x,prevAnchor:rn},this.markUsedJustification(Le,i,ve,Be),Le.allowVerticalPlacement&&(this.markUsedOrientation(Le,Be,ve),this.placedOrientations[Dt]=Be),{shift:Vt,placedGlyphBoxes:cn}}}placeLayerBucketPart(i,c,p,y){const{bucket:x,layout:D,posMatrix:P,textLabelPlaneMatrix:L,labelToScreenMatrix:W,clippingData:Z,textPixelRatio:ie,holdingForFade:ve,collisionBoxArray:Pe,partiallyEvaluatedTextSize:Le,partiallyEvaluatedIconSize:Be,collisionGroup:Te}=i.parameters,Ae=D.get("text-optional"),je=D.get("icon-optional"),ze=D.get("text-allow-overlap"),at=D.get("icon-allow-overlap"),Dt="map"===D.get("text-rotation-alignment"),vt="map"===D.get("text-pitch-alignment"),Vt="none"!==D.get("icon-text-fit"),cn="viewport-y"===D.get("symbol-z-order");this.transform.setProjection(x.projection);let rn=ze&&(at||!x.hasIconData()||je),$t=at&&(ze||!x.hasTextData()||Ae);!x.collisionArrays&&Pe&&x.deserializeCollisionBoxes(Pe),p&&y&&x.updateCollisionDebugBuffers(this.transform.zoom,Pe);const qn=(Kt,Pn,gn)=>{const{crossTileID:Wn,numVerticalGlyphVertices:pn}=Kt;if(Z){const Qr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Wr=null;if(Z.dynamicFilterNeedsFeature){const wr=this.retainedQueryData[x.bucketInstanceId];Wr=Z.featureIndex.loadFeature({featureIndex:Kt.featureIndex,bucketIndex:wr.bucketIndex,sourceLayerIndex:wr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Z.dynamicFilter)(Qr,Wr,this.retainedQueryData[x.bucketInstanceId].tileID.canonical,new a.pointGeometry(Kt.tileAnchorX,Kt.tileAnchorY),this.transform.calculateDistanceTileData(Z.unwrappedTileID)))return this.placements[Wn]=new Na(!1,!1,!1,!0),void(c[Wn]=!0)}if(c[Wn])return;if(ve)return void(this.placements[Wn]=new Na(!1,!1,!1));let zn=!1,Qn=!1,qt=!0,hn=!1,Ei=!1,Oi=null,Ci={box:null,offscreen:null,occluded:null},Vi={box:null,offscreen:null,occluded:null},sr=null,Si=null,gi=null,$r=0,Or=0,ao=0;gn.textFeatureIndex?$r=gn.textFeatureIndex:Kt.useRuntimeCollisionCircles&&($r=Kt.featureIndex),gn.verticalTextFeatureIndex&&(Or=gn.verticalTextFeatureIndex);const Zr=Qr=>{Qr.tileID=this.retainedQueryData[x.bucketInstanceId].tileID;const Wr=this.transform.elevation;(Wr||Qr.elevation)&&(Qr.elevation=Wr?Wr.getAtTileOffset(Qr.tileID,Qr.tileAnchorX,Qr.tileAnchorY):0)},Pa=gn.textBox;if(Pa){Zr(Pa);const Qr=wr=>{let Uo=a.WritingMode.horizontal;if(x.allowVerticalPlacement&&!wr&&this.prevPlacement){const js=this.prevPlacement.placedOrientations[Wn];js&&(this.placedOrientations[Wn]=js,Uo=js,this.markUsedOrientation(x,Uo,Kt))}return Uo},Wr=(wr,Uo)=>{if(x.allowVerticalPlacement&&pn>0&&gn.verticalTextBox){for(const js of x.writingModes)if(js===a.WritingMode.vertical?(Ci=Uo(),Vi=Ci):Ci=wr(),Ci&&Ci.box&&Ci.box.length)break}else Ci=wr()};if(D.get("text-variable-anchor")){let wr=D.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Wn]){const go=this.prevPlacement.variableOffsets[Wn];wr.indexOf(go.anchor)>0&&(wr=wr.filter(xs=>xs!==go.anchor),wr.unshift(go.anchor))}const Uo=(go,xs,Dc)=>{const wl=x.getSymbolInstanceTextSize(Le,Kt,this.transform.zoom,Pn),Ss=(go.x2-go.x1)*wl+2*go.padding,Oa=(go.y2-go.y1)*wl+2*go.padding,Hs=Vt&&!at?xs:null;Hs&&Zr(Hs);let El={box:[],offscreen:!1,occluded:!1};const uu=ze?2*wr.length:wr.length;for(let Zc=0;Zc<uu;++Zc){const Cl=this.attemptAnchorPlacement(wr[Zc%wr.length],go,Ss,Oa,wl,Dt,vt,ie,P,Te,Zc>=wr.length,Kt,Pn,x,Dc,Hs,Le,Be);if(Cl&&(El=Cl.placedGlyphBoxes,El&&El.box&&El.box.length)){zn=!0,Oi=Cl.shift;break}}return El};Wr(()=>Uo(Pa,gn.iconBox,a.WritingMode.horizontal),()=>{const go=gn.verticalTextBox;return go&&Zr(go),x.allowVerticalPlacement&&!(Ci&&Ci.box&&Ci.box.length)&&pn>0&&go?Uo(go,gn.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ci&&(zn=Ci.box,qt=Ci.offscreen,hn=Ci.occluded);const js=Qr(Ci&&Ci.box);if(!zn&&this.prevPlacement){const go=this.prevPlacement.variableOffsets[Wn];go&&(this.variableOffsets[Wn]=go,this.markUsedJustification(x,go.anchor,Kt,js))}}else{const wr=(Uo,js)=>{const go=x.getSymbolInstanceTextSize(Le,Kt,this.transform.zoom,Pn),xs=this.collisionIndex.placeCollisionBox(x,go,Uo,new a.pointGeometry(0,0),ze,ie,P,Te.predicate);return xs&&xs.box&&xs.box.length&&(this.markUsedOrientation(x,js,Kt),this.placedOrientations[Wn]=js),xs};Wr(()=>wr(Pa,a.WritingMode.horizontal),()=>{const Uo=gn.verticalTextBox;return x.allowVerticalPlacement&&pn>0&&Uo?(Zr(Uo),wr(Uo,a.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Qr(Ci&&Ci.box&&Ci.box.length)}}if(sr=Ci,zn=sr&&sr.box&&sr.box.length>0,qt=sr&&sr.offscreen,hn=sr&&sr.occluded,Kt.useRuntimeCollisionCircles){const Qr=x.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex>=0?Kt.centerJustifiedTextSymbolIndex:Kt.verticalPlacedTextSymbolIndex),Wr=a.evaluateSizeForFeature(x.textSizeData,Le,Qr),wr=D.get("text-padding");Si=this.collisionIndex.placeCollisionCircles(x,ze,Qr,x.lineVertexArray,x.glyphOffsetArray,Wr,P,L,W,p,vt,Te.predicate,Kt.collisionCircleDiameter*Wr/a.ONE_EM,wr,this.retainedQueryData[x.bucketInstanceId].tileID),zn=ze||Si.circles.length>0&&!Si.collisionDetected,qt=qt&&Si.offscreen,hn=Si.occluded}if(gn.iconFeatureIndex&&(ao=gn.iconFeatureIndex),gn.iconBox){const Qr=Wr=>{Zr(Wr);const wr=Vt&&Oi?Os(Oi.x,Oi.y,Dt,vt,this.transform.angle):new a.pointGeometry(0,0),Uo=x.getSymbolInstanceIconSize(Be,this.transform.zoom,Kt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(x,Uo,Wr,wr,at,ie,P,Te.predicate)};Vi&&Vi.box&&Vi.box.length&&gn.verticalIconBox?(gi=Qr(gn.verticalIconBox),Qn=gi.box.length>0):(gi=Qr(gn.iconBox),Qn=gi.box.length>0),qt=qt&&gi.offscreen,Ei=gi.occluded}const Qs=Ae||0===Kt.numHorizontalGlyphVertices&&0===pn,Js=je||0===Kt.numIconVertices;if(Qs||Js?Js?Qs||(Qn=Qn&&zn):zn=Qn&&zn:Qn=zn=Qn&&zn,zn&&sr&&sr.box&&this.collisionIndex.insertCollisionBox(sr.box,D.get("text-ignore-placement"),x.bucketInstanceId,Vi&&Vi.box&&Or?Or:$r,Te.ID),Qn&&gi&&this.collisionIndex.insertCollisionBox(gi.box,D.get("icon-ignore-placement"),x.bucketInstanceId,ao,Te.ID),Si&&(zn&&this.collisionIndex.insertCollisionCircles(Si.circles,D.get("text-ignore-placement"),x.bucketInstanceId,$r,Te.ID),p)){const Qr=x.bucketInstanceId;let Wr=this.collisionCircleArrays[Qr];void 0===Wr&&(Wr=this.collisionCircleArrays[Qr]=new za);for(let wr=0;wr<Si.circles.length;wr+=4)Wr.circles.push(Si.circles[wr+0]),Wr.circles.push(Si.circles[wr+1]),Wr.circles.push(Si.circles[wr+2]),Wr.circles.push(Si.collisionDetected?1:0)}const sl="globe"!==x.projection.name;rn=rn&&(sl||!hn),$t=$t&&(sl||!Ei),this.placements[Wn]=new Na(zn||rn,Qn||$t,qt||x.justReloaded),c[Wn]=!0};if(cn){const Kt=x.getSortedSymbolIndexes(this.transform.angle);for(let Pn=Kt.length-1;Pn>=0;--Pn){const gn=Kt[Pn];qn(x.symbolInstances.get(gn),gn,x.collisionArrays[gn])}}else for(let Kt=i.symbolInstanceStart;Kt<i.symbolInstanceEnd;Kt++)qn(x.symbolInstances.get(Kt),Kt,x.collisionArrays[Kt]);if(p&&x.bucketInstanceId in this.collisionCircleArrays){const Kt=this.collisionCircleArrays[x.bucketInstanceId];a.invert(Kt.invProjMatrix,P),Kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(i,c,p,y){const{leftJustifiedTextSymbolIndex:x,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:L,crossTileID:W}=p,Z=a.getAnchorJustification(c),ie=y===a.WritingMode.vertical?L:"left"===Z?x:"center"===Z?D:"right"===Z?P:-1;x>=0&&(i.text.placedSymbolArray.get(x).crossTileID=ie>=0&&x!==ie?0:W),D>=0&&(i.text.placedSymbolArray.get(D).crossTileID=ie>=0&&D!==ie?0:W),P>=0&&(i.text.placedSymbolArray.get(P).crossTileID=ie>=0&&P!==ie?0:W),L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=ie>=0&&L!==ie?0:W)}markUsedOrientation(i,c,p){const y=c===a.WritingMode.horizontal||c===a.WritingMode.horizontalOnly?c:0,x=c===a.WritingMode.vertical?c:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:W}=p,Z=i.text.placedSymbolArray;D>=0&&(Z.get(D).placedOrientation=y),P>=0&&(Z.get(P).placedOrientation=y),L>=0&&(Z.get(L).placedOrientation=y),W>=0&&(Z.get(W).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},D=c?c.variableOffsets:{},P=c?c.placedOrientations:{};for(const L in this.placements){const W=this.placements[L],Z=x[L];Z?(this.opacities[L]=new wo(Z,y,W.text,W.icon,null,W.clipped),p=p||W.text!==Z.text.placed||W.icon!==Z.icon.placed):(this.opacities[L]=new wo(null,y,W.text,W.icon,W.skipFade,W.clipped),p=p||W.text||W.icon)}for(const L in x){const W=x[L];if(!this.opacities[L]){const Z=new wo(W,y,!1,!1);Z.isHidden()||(this.opacities[L]=Z,p=p||W.text.placed||W.icon.placed)}}for(const L in D)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=D[L]);for(const L in P)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=P[L]);p?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const y of c){const x=y.getBucket(i);x&&y.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,y.collisionBoxArray)}}updateBucketOpacities(i,c,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,x=!!i.layers[0].dynamicFilter(),D=new wo(null,0,!1,!1,!0),P=y.get("text-allow-overlap"),L=y.get("icon-allow-overlap"),W=y.get("text-variable-anchor"),Z="map"===y.get("text-rotation-alignment"),ie="map"===y.get("text-pitch-alignment"),ve="none"!==y.get("icon-text-fit"),Pe=new wo(null,0,P&&(L||!i.hasIconData()||y.get("icon-optional")),L&&(P||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const Le=(Te,Ae,je)=>{for(let ze=0;ze<Ae/4;ze++)Te.opacityVertexArray.emplaceBack(je)};let Be=0;for(let Te=0;Te<i.symbolInstances.length;Te++){const Ae=i.symbolInstances.get(Te),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:ze,crossTileID:at,numIconVertices:Dt}=Ae;let vt=this.opacities[at];c[at]?vt=D:vt||(vt=Pe,this.opacities[at]=vt),c[at]=!0;const Vt=je>0||ze>0,cn=Dt>0,rn=this.placedOrientations[at],$t=rn===a.WritingMode.vertical,qn=rn===a.WritingMode.horizontal||rn===a.WritingMode.horizontalOnly;if(!Vt&&!cn||vt.isHidden()||Be++,Vt){const Kt=oo(vt.text);Le(i.text,je,$t?ms:Kt),Le(i.text,ze,qn?ms:Kt);const Pn=vt.text.isHidden(),{leftJustifiedTextSymbolIndex:gn,centerJustifiedTextSymbolIndex:Wn,rightJustifiedTextSymbolIndex:pn,verticalPlacedTextSymbolIndex:zn}=Ae,Qn=i.text.placedSymbolArray,qt=Pn||$t?1:0;gn>=0&&(Qn.get(gn).hidden=qt),Wn>=0&&(Qn.get(Wn).hidden=qt),pn>=0&&(Qn.get(pn).hidden=qt),zn>=0&&(Qn.get(zn).hidden=Pn||qn?1:0);const hn=this.variableOffsets[at];hn&&this.markUsedJustification(i,hn.anchor,Ae,rn);const Ei=this.placedOrientations[at];Ei&&(this.markUsedJustification(i,"left",Ae,Ei),this.markUsedOrientation(i,Ei,Ae))}if(cn){const Kt=oo(vt.icon),{placedIconSymbolIndex:Pn,verticalPlacedIconSymbolIndex:gn}=Ae,Wn=i.icon.placedSymbolArray,pn=vt.icon.isHidden()?1:0;Pn>=0&&(Le(i.icon,Dt,$t?ms:Kt),Wn.get(Pn).hidden=pn),gn>=0&&(Le(i.icon,Ae.numVerticalIconVertices,qn?ms:Kt),Wn.get(gn).hidden=pn)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Kt=i.collisionArrays[Te];if(Kt){let Pn=new a.pointGeometry(0,0),gn=!0;if(Kt.textBox||Kt.verticalTextBox){if(W){const pn=this.variableOffsets[at];pn?(Pn=Fr(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textScale),Z&&Pn._rotate(ie?this.transform.angle:-this.transform.angle)):gn=!1}x&&(gn=!vt.clipped),Kt.textBox&&to(i.textCollisionBox.collisionVertexArray,vt.text.placed,!gn||$t,Pn.x,Pn.y),Kt.verticalTextBox&&to(i.textCollisionBox.collisionVertexArray,vt.text.placed,!gn||qn,Pn.x,Pn.y)}const Wn=gn&&Boolean(!qn&&Kt.verticalIconBox);Kt.iconBox&&to(i.iconCollisionBox.collisionVertexArray,vt.icon.placed,Wn,ve?Pn.x:0,ve?Pn.y:0),Kt.verticalIconBox&&to(i.iconCollisionBox.collisionVertexArray,vt.icon.placed,!Wn,ve?Pn.x:0,ve?Pn.y:0)}}}if(i.fullyClipped=0===Be,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Te=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Te.invProjMatrix,i.placementViewportMatrix=Te.viewportMatrix,i.collisionCircleArray=Te.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function to(d,i,c,p,y){d.emplaceBack(i?1:0,c?1:0,p||0,y||0),d.emplaceBack(i?1:0,c?1:0,p||0,y||0),d.emplaceBack(i?1:0,c?1:0,p||0,y||0),d.emplaceBack(i?1:0,c?1:0,p||0,y||0)}const yo=Math.pow(2,25),ra=Math.pow(2,24),oa=Math.pow(2,17),no=Math.pow(2,16),sa=Math.pow(2,9),No=Math.pow(2,8),aa=Math.pow(2,1);function oo(d){if(0===d.opacity&&!d.placed)return 0;if(1===d.opacity&&d.placed)return 4294967295;const i=d.placed?1:0,c=Math.floor(127*d.opacity);return c*yo+i*ra+c*oa+i*no+c*sa+i*No+c*aa+i}const ms=0;class gs{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&void 0!==i.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,y,x){const D=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(D,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((P,L)=>P.sortKey-L.sortKey));this._currentPartIndex<D.length;){const P=D[this._currentPartIndex];if(c.placeLayerBucketPart(P,this._seenCrossTileIDs,p,0===P.symbolInstanceStart),this._currentPartIndex++,x())return!0}return!1}}class jo{constructor(i,c,p,y,x,D,P,L){this.placement=new xa(i,x,D,P,L),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const y=a.exported.now(),x=()=>{const D=a.exported.now()-y;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=c[i[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if("symbol"===D.type&&(!D.minzoom||D.minzoom<=P)&&(!D.maxzoom||D.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new gs(D)),this._inProgressLayer.continuePlacement(p[D.source],this.placement,this._showCollisionBoxes,D,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Rs=512/a.EXTENT/2;class ks{constructor(i,c,p){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let y=0;y<c.length;y++){const x=c.get(y),D=x.key;this.indexedSymbolInstances[D]||(this.indexedSymbolInstances[D]=[]),this.indexedSymbolInstances[D].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,i)})}}getScaledCoordinates(i,c){const p=Rs/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*a.EXTENT+i.tileAnchorX)*p),y:Math.floor((c.canonical.y*a.EXTENT+i.tileAnchorY)*p)}}findMatches(i,c,p){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const D=i.get(x);if(D.crossTileID)continue;const P=this.indexedSymbolInstances[D.key];if(!P)continue;const L=this.getScaledCoordinates(D,c);for(const W of P)if(Math.abs(W.coord.x-L.x)<=y&&Math.abs(W.coord.y-L.y)<=y&&!p[W.crossTileID]){p[W.crossTileID]=!0,D.crossTileID=W.crossTileID;break}}}}class ba{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ls{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(0!==c)for(const p in this.indexes){const y=this.indexes[p],x={};for(const D in y){const P=y[D];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+c),x[P.tileID.key]=P}this.indexes[p]=x}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const D=this.indexes[x];if(Number(x)>i.overscaledZ)for(const P in D){const L=D[P];L.tileID.isChildOf(i)&&L.findMatches(c.symbolInstances,i,y)}else{const P=D[i.scaledTo(Number(x)).key];P&&P.findMatches(c.symbolInstances,i,y)}}for(let x=0;x<c.symbolInstances.length;x++){const D=c.symbolInstances.get(x);D.crossTileID||(D.crossTileID=p.generate(),y[D.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ks(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p in c.indexedSymbolInstances)for(const y of c.indexedSymbolInstances[p])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const y=this.indexes[p];for(const x in y)i[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,y[x]),delete y[x],c=!0)}return c}}class Ho{constructor(){this.layerIndexes={},this.crossTileIDs=new ba,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p,y){let x=this.layerIndexes[i.id];void 0===x&&(x=this.layerIndexes[i.id]=new Ls);let D=!1;const P={};"globe"!==y.name&&x.handleWrapJump(p);for(const L of c){const W=L.getBucket(i);W&&i.id===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(L.tileID,W,this.crossTileIDs)&&(D=!0),P[W.bucketInstanceId]=!0)}return x.removeStaleBuckets(P)&&(D=!0),D}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const wa=(d,i)=>a.emitValidationErrors(d,i&&i.filter(c=>"source.canvas"!==c.identifier)),nl=a.pick(Gn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),ts=a.pick(Gn,["setCenter","setZoom","setBearing","setPitch"]),Ms={version:8,layers:[],sources:{}},Eo={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Kr extends a.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new wi(Xn(),this),this.imageManager=new At,this.imageManager.setEventedParent(this),this.glyphManager=new a.GlyphManager(i._requestManager,c.localFontFamily?a.LocalGlyphMode.all:c.localIdeographFontFamily?a.LocalGlyphMode.ideographs:a.LocalGlyphMode.none,c.localFontFamily||c.localIdeographFontFamily),this.crossTileSymbolIndex=new Ho,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const p=this;this._rtlTextPluginCallback=Kr.registerForPluginStateChange(y=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(x,D)=>{if(a.triggerPluginCompletionEvent(x),D&&D.every(P=>P))for(const P in p._sourceCaches){const L=p._sourceCaches[P],W=L.getSource().type;"vector"!==W&&"geojson"!==W||L.reload()}})}),this.on("data",y=>{if("source"!==y.dataType||"metadata"!==y.sourceDataType)return;const x=this.getSource(y.sourceId);if(x&&x.vectorLayerIds)for(const D in this._layers){const P=this._layers[D];P.source===x.id&&this._validateLayer(P)}})}loadURL(i,c={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const p="boolean"==typeof c.validate?c.validate:!a.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,c.accessToken);const y=this.map._requestManager.transformRequest(i,a.ResourceType.Style);this._request=a.getJSON(y,(x,D)=>{this._request=null,x?this.fire(new a.ErrorEvent(x)):D&&this._load(D,p)})}loadJSON(i,c={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(i,!1!==c.validate)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Ms,!1)}_updateLayerCount(i,c){const p=c?1:-1;i.is3D()&&(this._num3DLayers+=p),"circle"===i.type&&(this._numCircleLayers+=p),"symbol"===i.type&&(this._numSymbolLayers+=p)}_load(i,c){if(c&&wa(this,a.validateStyle(i)))return;this._loaded=!0,this.stylesheet=a.clone$1(i),this._updateMapProjection();for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const p=Pi(this.stylesheet.layers);this._order=p.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of p)y=a.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize(),this._updateLayerCount(y,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Mn(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(i){this._spriteRequest=function(c,p,y){let x,D,P;const L=a.exported.devicePixelRatio>1?"@2x":"";let W=a.getJSON(p.transformRequest(p.normalizeSpriteURL(c,L,".json"),a.ResourceType.SpriteJSON),(ve,Pe)=>{W=null,P||(P=ve,x=Pe,ie())}),Z=a.getImage(p.transformRequest(p.normalizeSpriteURL(c,L,".png"),a.ResourceType.SpriteImage),(ve,Pe)=>{Z=null,P||(P=ve,D=Pe,ie())});function ie(){if(P)y(P);else if(x&&D){const ve=a.exported.getImageData(D),Pe={};for(const Le in x){const{width:Be,height:Te,x:Ae,y:je,sdf:ze,pixelRatio:at,stretchX:Dt,stretchY:vt,content:Vt}=x[Le],cn=new a.RGBAImage({width:Be,height:Te});a.RGBAImage.copy(ve,cn,{x:Ae,y:je},{x:0,y:0},{width:Be,height:Te}),Pe[Le]={data:cn,pixelRatio:at,sdf:ze,stretchX:Dt,stretchY:vt,content:Vt}}y(null,Pe)}}return{cancel(){W&&(W.cancel(),W=null),Z&&(Z.cancel(),Z=null)}}}(i,this.map._requestManager,(c,p)=>{if(this._spriteRequest=null,c)this.fire(new a.ErrorEvent(c));else if(p)for(const y in p)this.imageManager.addImage(y,p[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.getSource(i.source);if(!c)return;const p=i.sourceLayer;p&&("geojson"===c.type||c.vectorLayerIds&&-1===c.vectorLayerIds.indexOf(p))&&this.fire(new a.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${c.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const p of i){const y=this._layers[p];"custom"!==y.type&&c.push(y.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&Eo[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const D in this._updatedSources){const P=this._updatedSources[D];"reload"===P?this._reloadSource(D):"clear"===P&&this._clearSource(D)}this._updateTilesForChangedImages();for(const D in this._updatedPaintProps)this._layers[D].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const p={};for(const y in this._sourceCaches){const x=this._sourceCaches[y];p[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];if(x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)){const P=this._getLayerSourceCache(x);P&&(P.used=!0)}const D=this.map.painter;if(D){const P=x.getProgramIds();if(!P)continue;const L=x.getProgramConfiguration(i.zoom);for(const W of P)D.useProgram(W,L)}}for(const y in p){const x=this._sourceCaches[y];p[y]!==x.used&&x.getSource().fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:x.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),c&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),wa(this,a.validateStyle(i)))return!1;(i=a.clone$1(i)).layers=Pi(i.layers);const c=function(y,x){if(!y)return[{command:Gn.setStyle,args:[x]}];let D=[];try{if(!he(y.version,x.version))return[{command:Gn.setStyle,args:[x]}];he(y.center,x.center)||D.push({command:Gn.setCenter,args:[x.center]}),he(y.zoom,x.zoom)||D.push({command:Gn.setZoom,args:[x.zoom]}),he(y.bearing,x.bearing)||D.push({command:Gn.setBearing,args:[x.bearing]}),he(y.pitch,x.pitch)||D.push({command:Gn.setPitch,args:[x.pitch]}),he(y.sprite,x.sprite)||D.push({command:Gn.setSprite,args:[x.sprite]}),he(y.glyphs,x.glyphs)||D.push({command:Gn.setGlyphs,args:[x.glyphs]}),he(y.transition,x.transition)||D.push({command:Gn.setTransition,args:[x.transition]}),he(y.light,x.light)||D.push({command:Gn.setLight,args:[x.light]}),he(y.fog,x.fog)||D.push({command:Gn.setFog,args:[x.fog]}),he(y.projection,x.projection)||D.push({command:Gn.setProjection,args:[x.projection]});const P={},L=[];!function(ie,ve,Pe,Le){let Be;for(Be in ve=ve||{},ie=ie||{})ie.hasOwnProperty(Be)&&(ve.hasOwnProperty(Be)||qi(Be,Pe,Le));for(Be in ve)ve.hasOwnProperty(Be)&&(ie.hasOwnProperty(Be)?he(ie[Be],ve[Be])||("geojson"===ie[Be].type&&"geojson"===ve[Be].type&&eo(ie,ve,Be)?Pe.push({command:Gn.setGeoJSONSourceData,args:[Be,ve[Be].data]}):_o(Be,ve,Pe,Le)):er(Be,ve,Pe))}(y.sources,x.sources,L,P);const W=[];y.layers&&y.layers.forEach(ie=>{ie.source&&P[ie.source]?D.push({command:Gn.removeLayer,args:[ie.id]}):W.push(ie)});let Z=y.terrain;Z&&P[Z.source]&&(D.push({command:Gn.setTerrain,args:[void 0]}),Z=void 0),D=D.concat(L),he(Z,x.terrain)||D.push({command:Gn.setTerrain,args:[x.terrain]}),function(ie,ve,Pe){ve=ve||[];const Le=(ie=ie||[]).map(yn),Be=ve.map(yn),Te=ie.reduce(So,{}),Ae=ve.reduce(So,{}),je=Le.slice(),ze=Object.create(null);let at,Dt,vt,Vt,cn,rn,$t;for(at=0,Dt=0;at<Le.length;at++)vt=Le[at],Ae.hasOwnProperty(vt)?Dt++:(Pe.push({command:Gn.removeLayer,args:[vt]}),je.splice(je.indexOf(vt,Dt),1));for(at=0,Dt=0;at<Be.length;at++)vt=Be[Be.length-1-at],je[je.length-1-at]!==vt&&(Te.hasOwnProperty(vt)?(Pe.push({command:Gn.removeLayer,args:[vt]}),je.splice(je.lastIndexOf(vt,je.length-Dt),1)):Dt++,rn=je[je.length-at],Pe.push({command:Gn.addLayer,args:[Ae[vt],rn]}),je.splice(je.length-at,0,vt),ze[vt]=!0);for(at=0;at<Be.length;at++)if(vt=Be[at],Vt=Te[vt],cn=Ae[vt],!ze[vt]&&!he(Vt,cn))if(he(Vt.source,cn.source)&&he(Vt["source-layer"],cn["source-layer"])&&he(Vt.type,cn.type)){for($t in Cr(Vt.layout,cn.layout,Pe,vt,null,Gn.setLayoutProperty),Cr(Vt.paint,cn.paint,Pe,vt,null,Gn.setPaintProperty),he(Vt.filter,cn.filter)||Pe.push({command:Gn.setFilter,args:[vt,cn.filter]}),he(Vt.minzoom,cn.minzoom)&&he(Vt.maxzoom,cn.maxzoom)||Pe.push({command:Gn.setLayerZoomRange,args:[vt,cn.minzoom,cn.maxzoom]}),Vt)Vt.hasOwnProperty($t)&&"layout"!==$t&&"paint"!==$t&&"filter"!==$t&&"metadata"!==$t&&"minzoom"!==$t&&"maxzoom"!==$t&&(0===$t.indexOf("paint.")?Cr(Vt[$t],cn[$t],Pe,vt,$t.slice(6),Gn.setPaintProperty):he(Vt[$t],cn[$t])||Pe.push({command:Gn.setLayerProperty,args:[vt,$t,cn[$t]]}));for($t in cn)cn.hasOwnProperty($t)&&!Vt.hasOwnProperty($t)&&"layout"!==$t&&"paint"!==$t&&"filter"!==$t&&"metadata"!==$t&&"minzoom"!==$t&&"maxzoom"!==$t&&(0===$t.indexOf("paint.")?Cr(Vt[$t],cn[$t],Pe,vt,$t.slice(6),Gn.setPaintProperty):he(Vt[$t],cn[$t])||Pe.push({command:Gn.setLayerProperty,args:[vt,$t,cn[$t]]}))}else Pe.push({command:Gn.removeLayer,args:[vt]}),rn=je[je.lastIndexOf(vt)+1],Pe.push({command:Gn.addLayer,args:[cn,rn]})}(W,x.layers,D)}catch(P){console.warn("Unable to compute style diff:",P),D=[{command:Gn.setStyle,args:[x]}]}return D}(this.serialize(),i).filter(y=>!(y.command in ts));if(0===c.length)return!1;const p=c.filter(y=>!(y.command in nl));if(p.length>0)throw new Error(`Unimplemented: ${p.map(y=>y.command).join(", ")}.`);return c.forEach(y=>{"setTransition"!==y.command&&"setProjection"!==y.command&&this[y.command].apply(this,y.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,c){return this.getImage(i)?this.fire(new a.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,c),this._afterImageUpdated(i),this)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new a.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,c,p={}){if(this._checkLoaded(),void 0!==this.getSource(i))throw new Error("There is already a source with this ID");if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.validateSource,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=Lt(i,c,this.dispatcher,this);y.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:y.serialize(),sourceId:i}));const x=D=>{const P=(D?"symbol:":"other:")+i,L=this._sourceCaches[P]=new a.SourceCache(P,y,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[i]=L,L.style=this,L.onAdd(this.map)};x(!1),"vector"!==c.type&&"geojson"!==c.type||x(!0),y.onAdd&&y.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const c=this.getSource(i);if(!c)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===i)return this.fire(new a.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${y}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new a.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const p=this._getSourceCaches(i);for(const y of p)delete this._sourceCaches[y.id],delete this._updatedSources[y.id],y.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:y.getSource().id})),y.setEventedParent(null),y.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,c){this._checkLoaded(),this.getSource(i).setData(c),this._changed=!0}getSource(i){const c=this._getSourceCache(i);return c&&c.getSource()}_getSources(){const i=[];for(const c in this._otherSourceCaches){const p=this._getSourceCache(c);p&&i.push(p.getSource())}return i}addLayer(i,c,p={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${y}" already exists on this map`)));let x;if("custom"===i.type){if(wa(this,a.validateCustomStyleLayer(i)))return;x=a.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(y,i.source),i=a.clone$1(i),i=a.extend(i,{source:y})),this._validate(a.validateLayer,`layers.${y}`,i,{arrayIndex:-1},p))return;x=a.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[x.id]=x.serialize(),this._updateLayerCount(x,!0)}const D=c?this._order.indexOf(c):this._order.length;if(c&&-1===D)return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`)));this._order.splice(D,0,y),this._layerOrderChanged=!0,this._layers[y]=x;const P=this._getLayerSourceCache(x);if(this._removedLayers[y]&&x.source&&P&&"custom"!==x.type){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",P.pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const y=c?this._order.indexOf(c):this._order.length;c&&-1===y?this.fire(new a.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));c.setEventedParent(null),this._updateLayerCount(c,!1);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const c in this._layers)if(this._layers[c].type===i)return!0;return!1}setLayerZoomRange(i,c,p){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===c&&y.maxzoom===p||(null!=c&&(y.minzoom=c),null!=p&&(y.maxzoom=p),this._updateLayer(y)):this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,c,p={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!he(y.filter,c))return null==c?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(a.validateFilter,`layers.${y.id}.filter`,c,{layerType:y.type},p)||(y.filter=a.clone$1(c),this._updateLayer(y)))}else this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const c=this.getLayer(i);return c&&a.clone$1(c.filter)}setLayoutProperty(i,c,p,y={}){this._checkLoaded();const x=this.getLayer(i);x?he(x.getLayoutProperty(c),p)||(x.setLayoutProperty(c,p,y),this._updateLayer(x)):this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,c,p,y={}){this._checkLoaded();const x=this.getLayer(i);x?he(x.getPaintProperty(c),p)||(x.setPaintProperty(c,p,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,c){const p=this.getLayer(i);return p&&p.getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,y=i.sourceLayer,x=this.getSource(p);if(!x)return void this.fire(new a.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const D=x.type;if("geojson"===D&&y)return void this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===D&&!y)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===i.id&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided.")));const P=this._getSourceCaches(p);for(const L of P)L.setFeatureState(y,i.id,c)}removeFeatureState(i,c){this._checkLoaded();const p=i.source,y=this.getSource(p);if(!y)return void this.fire(new a.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const x=y.type,D="vector"===x?i.sourceLayer:void 0;if("vector"===x&&!D)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&"string"!=typeof i.id&&"number"!=typeof i.id)return void this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const P=this._getSourceCaches(p);for(const L of P)L.removeFeatureState(D,i.id,c)}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,y=this.getSource(c);if(y){if("vector"!==y.type||p)return void 0===i.id&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(c)[0].getFeatureState(p,i.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const c in this._sourceCaches){const p=this._sourceCaches[c].getSource();i[p.id]||(i[p.id]=p.serialize())}return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},c=>void 0!==c)}_updateLayer(i){this._updatedLayers[i.id]=!0;const c=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&c&&"raster"!==c.getSource().type&&(this._updatedSources[i.source]="reload",c.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const c=D=>"fill-extrusion"===this._layers[D].type,p={},y=[];for(let D=this._order.length-1;D>=0;D--){const P=this._order[D];if(c(P)){p[P]=D;for(const L of i){const W=L[P];if(W)for(const Z of W)y.push(Z)}}}y.sort((D,P)=>P.intersectionZ-D.intersectionZ);const x=[];for(let D=this._order.length-1;D>=0;D--){const P=this._order[D];if(c(P))for(let L=y.length-1;L>=0;L--){const W=y[L].feature;if(p[W.layer.id]<D)break;x.push(W),y.pop()}else for(const L of i){const W=L[P];if(W)for(const Z of W)x.push(Z.feature)}}return x}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(a.validateFilter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of c.layers){const W=this._layers[L];if(!W)return this.fire(new a.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];y[W.source]=!0}}const x=[];c.availableImages=this._availableImages;const D=c&&c.layers?c.layers.some(L=>{const W=this.getLayer(L);return W&&W.is3D()}):this.has3DLayers(),P=Li.createFromScreenPoints(i,p);for(const L in this._sourceCaches){const W=this._sourceCaches[L].getSource().id;c.layers&&!y[W]||x.push(le(this._sourceCaches[L],this._layers,this._serializedLayers,P,c,p,D,!!this.map._showQueryGeometry))}return this.placement&&x.push(function(L,W,Z,ie,ve,Pe,Le){const Be={},Te=Pe.queryRenderedSymbols(ie),Ae=[];for(const je of Object.keys(Te).map(Number))Ae.push(Le[je]);Ae.sort(fe);for(const je of Ae){const ze=je.featureIndex.lookupSymbolFeatures(Te[je.bucketInstanceId],W,je.bucketIndex,je.sourceLayerIndex,ve.filter,ve.layers,ve.availableImages,L);for(const at in ze){const Dt=Be[at]=Be[at]||[],vt=ze[at];vt.sort((Vt,cn)=>{const rn=je.featureSortOrder;if(rn){const $t=rn.indexOf(Vt.featureIndex);return rn.indexOf(cn.featureIndex)-$t}return cn.featureIndex-Vt.featureIndex});for(const Vt of vt)Dt.push(Vt)}}for(const je in Be)Be[je].forEach(ze=>{const at=ze.feature,Dt=Z(L[je]).getFeatureState(at.layer["source-layer"],at.id);at.source=at.layer.source,at.layer["source-layer"]&&(at.sourceLayer=at.layer["source-layer"]),at.state=Dt});return Be}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),P.screenGeometry,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(a.validateFilter,"querySourceFeatures.filter",c.filter,null,c);const p=this._getSourceCaches(i);let y=[];for(const x of p)y=y.concat(_e(x,c));return y}addSourceType(i,c,p){return Kr.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(Kr.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let y=!1;for(const D in i)if(!he(i[D],p[D])){y=!0;break}if(!y)return;const x=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(i,c),this.light.updateTransitions(x)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,c=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===c){if("object"==typeof i.source){const p="terrain-dem-src";this.addSource(p,i.source),i=a.clone$1(i),i=a.extend(i,{source:p})}if(this._validate(a.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&c!==this.terrain.drapeRenderMode)this._createTerrain(i,c);else{const p=this.terrain,y=p.get();for(const x of Object.keys(a.spec.terrain))!i.hasOwnProperty(x)&&a.spec.terrain[x].default&&(i[x]=a.spec.terrain[x].default);for(const x in i)if(!he(i[x],y[x])){p.set(i),this.stylesheet.terrain=i;const D=this._setTransitionParameters({duration:0});p.updateTransitions(D);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const c=this.fog=new vi(i,this.map.transform);this.stylesheet.fog=i;const p=this._setTransitionParameters({duration:0});c.updateTransitions(p)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog,p=c.get();0===Object.keys(i).length&&c.set(i);for(const y in i)if(!he(i[y],p[y])){c.set(i),this.stylesheet.fog=i;const x=this._setTransitionParameters({duration:0});c.updateTransitions(x);break}}else this._createFog(i);this._markersNeedUpdate=!0}_setTransitionParameters(i){return{now:a.exported.now(),transition:a.extend(i,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(p=>this.isLayerDraped(this._layers[p])),c=this._order.filter(p=>!this.isLayerDraped(this._layers[p]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...c)}_createTerrain(i,c){const p=this.terrain=new He(i,c);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const y=this._setTransitionParameters({duration:0});p.updateTransitions(y)}_force3DLayerUpdate(){for(const i in this._layers){const c=this._layers[i];"fill-extrusion"===c.type&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const c=this._layers[i];"symbol"===c.type&&this._updateLayer(c)}}_validate(i,c,p,y,x={}){return(!x||!1!==x.validate)&&wa(this,i.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:p,styleSpec:a.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const c=this._getSourceCaches(i);for(const p of c)p.clearTiles()}_reloadSource(i){const c=this._getSourceCaches(i);for(const p of c)p.resume(),p.reload()}_reloadSources(){for(const i of this._getSources())i.reload&&i.reload()}_updateSources(i){for(const c in this._sourceCaches)this._sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const c=this._sourceCaches[i];c.resume(),c.reload()}}_updatePlacement(i,c,p,y,x=!1){let D=!1,P=!1;const L={};for(const W of this._order){const Z=this._layers[W];if("symbol"!==Z.type)continue;if(!L[Z.source]){const ve=this._getLayerSourceCache(Z);if(!ve)continue;L[Z.source]=ve.getRenderableIds(!0).map(Pe=>ve.getTileByID(Pe)).sort((Pe,Le)=>Le.tileID.overscaledZ-Pe.tileID.overscaledZ||(Pe.tileID.isLessThan(Le.tileID)?-1:1))}const ie=this.crossTileSymbolIndex.addLayer(Z,L[Z.source],i.center.lng,i.projection);D=D||ie}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),x=x||this._layerOrderChanged||0===p,this._layerOrderChanged&&this.fire(new a.Event("neworder")),(x||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),i.zoom))&&(this.pauseablePlacement=new jo(i,this._order,x,c,p,y,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),P=!0),D&&this.pauseablePlacement.placement.setStale()),P||D)for(const W of this._order){const Z=this._layers[W];"symbol"===Z.type&&this.placement.updateLayerOpacities(Z,L[Z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,p){this.imageManager.getImages(c.icons,p),this._updateTilesForChangedImages();const y=x=>{x&&x.setDependencies(c.tileID.key,c.type,c.icons)};y(this._otherSourceCaches[c.source]),y(this._symbolSourceCaches[c.source])}getGlyphs(i,c,p){this.glyphManager.getGlyphs(c.stacks,p)}getResource(i,c,p){return a.makeRequest(c,p)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return"symbol"===i.type?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const c=[];return this._otherSourceCaches[i]&&c.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&c.push(this._symbolSourceCaches[i]),c}_isSourceCacheLoaded(i){const c=this._getSourceCaches(i);return 0===c.length?(this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):c.every(p=>p.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Kr.getSourceType=function(d){return Ft[d]},Kr.setSourceType=function(d,i){Ft[d]=i},Kr.registerForPluginStateChange=a.registerForPluginStateChange;var la="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",$s="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ns="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",il="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Br="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let hl={},Lo={};const Go=[];dr(la,Go),dr(ns,Go),dr(il,Go),dr(Br,Go),hl=mr("",ns),Lo=mr(Br,il);const vo=mr("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ua=la,Zs="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var ca={background:mr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:mr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:mr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:mr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:mr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:mr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:mr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:mr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:mr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:mr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:mr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:mr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:mr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:mr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:mr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:mr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:mr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:mr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$s),skyboxGradient:mr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$s),skyboxCapture:mr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:mr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function dr(d,i){const c=d.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let p of c)if(p=p.trim(),"#"===p[0]&&p.includes("if")&&!p.includes("endif")){p=p.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const y=p.split(" ");for(const x of y)i.includes(x)||i.push(x)}}function mr(d,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),y={},x=[...Go];return dr(d,x),dr(i,x),{fragmentSource:d=d.replace(c,(D,P,L,W,Z)=>(y[Z]=!0,"define"===P?`\n#ifndef HAS_UNIFORM_u_${Z}\nvarying ${L} ${W} ${Z};\n#else\nuniform ${L} ${W} u_${Z};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${Z}\n    ${L} ${W} ${Z} = u_${Z};\n#endif\n`)),vertexSource:i=i.replace(c,(D,P,L,W,Z)=>{const ie="float"===W?"vec2":"vec4",ve=Z.match(/color/)?"color":ie;return y[Z]?"define"===P?`\n#ifndef HAS_UNIFORM_u_${Z}\nuniform lowp float u_${Z}_t;\nattribute ${L} ${ie} a_${Z};\nvarying ${L} ${W} ${Z};\n#else\nuniform ${L} ${W} u_${Z};\n#endif\n`:"vec4"===ve?`\n#ifndef HAS_UNIFORM_u_${Z}\n    ${Z} = a_${Z};\n#else\n    ${L} ${W} ${Z} = u_${Z};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Z}\n    ${Z} = unpack_mix_${ve}(a_${Z}, u_${Z}_t);\n#else\n    ${L} ${W} ${Z} = u_${Z};\n#endif\n`:"define"===P?`\n#ifndef HAS_UNIFORM_u_${Z}\nuniform lowp float u_${Z}_t;\nattribute ${L} ${ie} a_${Z};\n#else\nuniform ${L} ${W} u_${Z};\n#endif\n`:"vec4"===ve?`\n#ifndef HAS_UNIFORM_u_${Z}\n    ${L} ${W} ${Z} = a_${Z};\n#else\n    ${L} ${W} ${Z} = u_${Z};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Z}\n    ${L} ${W} ${Z} = unpack_mix_${ve}(a_${Z}, u_${Z}_t);\n#else\n    ${L} ${W} ${Z} = u_${Z};\n#endif\n`}),staticAttributes:p,usedDefines:x}}class Fs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,c,p,y,x,D,P){this.context=i;let L=this.boundPaintVertexBuffers.length!==y.length;for(let Z=0;!L&&Z<y.length;Z++)this.boundPaintVertexBuffers[Z]!==y[Z]&&(L=!0);let W=this.boundDynamicVertexBuffers.length!==P.length;for(let Z=0;!W&&Z<P.length;Z++)this.boundDynamicVertexBuffers[Z]!==P[Z]&&(W=!0);if(!i.extVertexArrayObject||!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||L||W||this.boundIndexBuffer!==x||this.boundVertexOffset!==D)this.freshBind(c,p,y,x,D,P);else{i.bindVertexArrayOES.set(this.vao);for(const Z of P)Z&&Z.bind();x&&x.dynamicDraw&&x.bind()}}freshBind(i,c,p,y,x,D){let P;const L=i.numAttributes,W=this.context,Z=W.gl;if(W.extVertexArrayObject)this.vao&&this.destroy(),this.vao=W.extVertexArrayObject.createVertexArrayOES(),W.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffers=D;else{P=W.currentNumAttributes||0;for(let ie=L;ie<P;ie++)Z.disableVertexAttribArray(ie)}c.enableAttributes(Z,i),c.bind(),c.setVertexAttribPointers(Z,i,x);for(const ie of p)ie.enableAttributes(Z,i),ie.bind(),ie.setVertexAttribPointers(Z,i,x);for(const ie of D)ie&&(ie.enableAttributes(Z,i),ie.bind(),ie.setVertexAttribPointers(Z,i,x));y&&y.bind(),W.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ws(d,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new a.MercatorCoordinate(0,p/c).toLngLat().lat,new a.MercatorCoordinate(0,(p+1)/c).toLngLat().lat]}function is(d,i,c,p,y,x,D){const P=d.context,L=P.gl,W=c.fbo;if(!W)return;d.prepareDrawTile();const Z=d.useProgram("hillshade");P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,W.colorAttachment.get());const ie=((Be,Te,Ae,je)=>{const ze=Ae.paint.get("hillshade-shadow-color"),at=Ae.paint.get("hillshade-highlight-color"),Dt=Ae.paint.get("hillshade-accent-color");let vt=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ae.paint.get("hillshade-illumination-anchor")&&(vt-=Be.transform.angle);const Vt=!Be.options.moving;return{u_matrix:je||Be.transform.calculateProjMatrix(Te.tileID.toUnwrapped(),Vt),u_image:0,u_latrange:Ws(0,Te.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),vt],u_shadow:ze,u_highlight:at,u_accent:Dt}})(d,c,p,d.terrain?i.projMatrix:null);d.prepareDrawProgram(P,Z,i.toUnwrapped());const{tileBoundsBuffer:ve,tileBoundsIndexBuffer:Pe,tileBoundsSegments:Le}=d.getTileBoundsBuffers(c);Z.draw(P,L.TRIANGLES,y,x,D,a.CullFaceMode.disabled,ie,p.id,ve,Pe,Le)}function _s(d,i,c){if(!i.needsDEMTextureUpload)return;const p=d.context,y=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||d.getTileTexture(c.stride);const x=c.getPixels();i.demTexture?i.demTexture.update(x,{premultiply:!1}):i.demTexture=new a.Texture(p,x,y.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function xo(d,i,c,p,y,x){const D=d.context,P=D.gl;if(!i.dem)return;const L=i.dem;if(D.activeTexture.set(P.TEXTURE1),_s(d,i,L),!i.demTexture)return;i.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);const W=L.dim;D.activeTexture.set(P.TEXTURE0);let Z=i.fbo;if(!Z){const Le=new a.Texture(D,{width:W,height:W,data:null},P.RGBA);Le.bind(P.LINEAR,P.CLAMP_TO_EDGE),Z=i.fbo=D.createFramebuffer(W,W,!0),Z.colorAttachment.set(Le.texture)}D.bindFramebuffer.set(Z.framebuffer),D.viewport.set([0,0,W,W]);const{tileBoundsBuffer:ie,tileBoundsIndexBuffer:ve,tileBoundsSegments:Pe}=d.getMercatorTileBoundsBuffers();d.useProgram("hillshadePrepare").draw(D,P.TRIANGLES,p,y,x,a.CullFaceMode.disabled,((Le,Be)=>{const Te=Be.stride,Ae=a.create();return a.ortho(Ae,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Ae,Ae,[0,-a.EXTENT,0]),{u_matrix:Ae,u_image:1,u_dimension:[Te,Te],u_zoom:Le.overscaledZ,u_unpack:Be.unpackVector}})(i.tileID,L),c.id,ie,ve,Pe),i.needsHillshadePrepare=!1}const Hi=d=>({u_matrix:new a.UniformMatrix4f(d),u_image0:new a.Uniform1i(d),u_skirt_height:new a.Uniform1f(d)}),Co=(d,i)=>({u_matrix:d,u_image0:0,u_skirt_height:i}),Ea=(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe)=>({u_proj_matrix:Float32Array.from(d),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(p),u_merc_matrix:c,u_zoom_transition:y,u_merc_center:x,u_image0:0,u_frustum_tl:D,u_frustum_tr:P,u_frustum_br:L,u_frustum_bl:W,u_globe_pos:Z,u_globe_radius:ie,u_viewport:ve,u_grid_matrix:Pe?Float32Array.from(Pe):new Float32Array(9)});function Ca(d,i){return null!=d&&null!=i&&!(!d.hasData()||!i.hasData())&&null!=d.demTexture&&null!=i.demTexture&&d.tileID.key!==i.tileID.key}const Bs=new class{constructor(){this.operations={}}newMorphing(d,i,c,p,y){if(d in this.operations){const x=this.operations[d];x.to.tileID.key!==c.tileID.key&&(x.queued=c)}else this.operations[d]={startTime:p,phase:0,duration:y,from:i,to:c,queued:null}}getMorphValuesForProxy(d){if(!(d in this.operations))return null;const i=this.operations[d];return{from:i.from,to:i.to,phase:i.phase}}update(d){for(const i in this.operations){const c=this.operations[i];for(c.phase=(d-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,d)){delete this.operations[i];break}}}_nextOp(d,i){return!!d.queued&&(d.from=d.to,d.to=d.queued,d.queued=null,d.phase=0,d.startTime=i,!0)}_validOp(d){return d.from.hasData()&&d.to.hasData()}},rs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ds(d,i){const c=1<<d.z;return!i&&(0===d.x||d.x===c-1)||0===d.y||d.y===c-1}const Ma=d=>({u_matrix:d});function os(d,i,c,p,y){if(y>0){const x=a.exported.now(),D=(x-d.timeAdded)/y,P=i?(x-i.timeAdded)/y:-1,L=c.getSource(),W=p.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-W)>Math.abs(d.tileID.overscaledZ-W),ie=Z&&d.refreshedUponExpiration?1:a.clamp(Z?D:1-P,0,1);return d.refreshedUponExpiration&&D>=1&&(d.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ie}:{opacity:ie,mix:0}}return{opacity:1,mix:0}}class En extends a.SourceCache{constructor(i){const c={type:"raster-dem",maxzoom:i.transform.maxZoom},p=new wi(Xn(),null),y=Lt("mock-dem",c,p,i.style);super("mock-dem",y,!1),y.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,c){i.state="loaded",c(null)}}class lr extends a.SourceCache{constructor(i){const c=Lt("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new wi(Xn(),null),i.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,c,p){if(i.freezeTileCoverage)return;this.transform=i;const y=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((x,D)=>{if(x[D.key]="",!this._tiles[D.key]){const P=new a.Tile(D,this._source.tileSize*D.overscaleFactor(),i.tileZoom);P.state="loaded",this._tiles[D.key]=P}return x},{});for(const x in this._tiles)x in y||(this.freeFBO(x),this._tiles[x].unloadVectorData(),delete this._tiles[x])}freeFBO(i){const c=this.proxyCachedFBO[i];if(void 0!==c){const p=Object.values(c);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Va extends a.OverscaledTileID{constructor(i,c,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=c,this.projMatrix=p}}class ua extends a.Elevation{constructor(i,c){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,y,x]=function(L){const W=new a.StructArrayLayout4i8,Z=new a.StructArrayLayout3ui6;W.reserve(17161),Z.reserve(33800);const ve=a.EXTENT/128,Pe=a.EXTENT+ve/2,Le=Pe+ve;for(let Te=-ve;Te<Le;Te+=ve)for(let Ae=-ve;Ae<Le;Ae+=ve){const je=Ae<0||Ae>Pe||Te<0||Te>Pe?24575:0,ze=a.clamp(Math.round(Ae),0,a.EXTENT),at=a.clamp(Math.round(Te),0,a.EXTENT);W.emplaceBack(ze+je,at,ze,at)}const Be=(Te,Ae)=>{const je=131*Ae+Te;Z.emplaceBack(je+1,je,je+131),Z.emplaceBack(je+131,je+131+1,je+1)};for(let Te=1;Te<129;Te++)for(let Ae=1;Ae<129;Ae++)Be(Ae,Te);return[0,129].forEach(Te=>{for(let Ae=0;Ae<130;Ae++)Be(Ae,Te),Be(Te,Ae)}),[W,Z,32768]}(),D=i.context;this.gridBuffer=D.createVertexBuffer(p,a.boundsAttributes.members),this.gridIndexBuffer=D.createIndexBuffer(y),this.gridSegments=a.SegmentVector.simpleSegment(0,0,p.length,y.length),this.gridNoSkirtSegments=a.SegmentVector.simpleSegment(0,0,p.length,x),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new lr(c.map),this.orthoMatrix=a.create(),a.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,a.EXTENT,0,a.EXTENT,0,1);const P=D.gl;this._overlapStencilMode=new a.StencilMode({func:P.GEQUAL,mask:255},0,255,P.KEEP,P.KEEP,P.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new En(c.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,c,p){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const y=i.terrain.properties;this.sourceCache=0===i.terrain.drapeRenderMode?this._mockSourceCache:i._getSourceCache(y.get("source")),this._exaggeration=y.get("exaggeration");const x=()=>{this.sourceCache.used&&a.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const D=this.getScaledDemTileSize();this.sourceCache.update(c,D,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,x(),this._initializing=!0),x(),c.updateElevation(!0,p),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==i.efficiency&&a.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&"source"===i.dataType?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):"style"===i.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=0===p._centerAltitude&&-1===this.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(p.center),-1),this._emptyDEMTextureDirty=!this._initializing);const y=this.proxyCoords=c.getIds().map(L=>{const W=c.getTileByID(L).tileID;return W.projMatrix=p.calculateProjMatrix(W.toUnwrapped()),W});(function(L,W){const Z=W.transform.pointCoordinate(W.transform.getCameraPoint()),ie=new a.pointGeometry(Z.x,Z.y);L.sort((ve,Pe)=>{if(Pe.overscaledZ-ve.overscaledZ)return Pe.overscaledZ-ve.overscaledZ;const Le=new a.pointGeometry(ve.canonical.x+(1<<ve.canonical.z)*ve.wrap,ve.canonical.y),Be=new a.pointGeometry(Pe.canonical.x+(1<<Pe.canonical.z)*Pe.wrap,Pe.canonical.y),Te=ie.mult(1<<ve.canonical.z);return Te.x-=.5,Te.y-=.5,Te.distSqr(Le)-Te.distSqr(Be)})})(y,this.painter),this._previousZoom=p.zoom;const x=this.proxyToSource||{};this.proxyToSource={},y.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const D=this._style._sourceCaches;for(const L in D){const W=D[L];if(!W.used||(W!==this.sourceCache&&this.resetTileLookupCache(W.id),this._setupProxiedCoordsForOrtho(W,i[L],x),W.usedForTerrain))continue;const Z=i[L];W.getSource().reparseOverscaled&&this._assignTerrainTiles(Z)}this.proxiedCoords[c.id]=y.map(L=>new Va(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(y),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(x),this.renderingToTexture=!1,this._updateTimestamp=a.exported.now();const P={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const W=this.terrainTileForTile[L.key];if(!W)continue;const Z=W.tileID.key;Z in P||(this._visibleDemTiles.push(W),P[Z]=Z)}}_assignTerrainTiles(i){this._initializing||i.forEach(c=>{if(this.terrainTileForTile[c.key])return;const p=this._findTileCoveringTileID(c,this.sourceCache);p&&(this.terrainTileForTile[c.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,c=i.gl;for(const p in this.terrainTileForTile){const y=this.terrainTileForTile[p],x=y.dem;!x||y.demTexture&&!y.needsDEMTextureUpload||(i.activeTexture.set(c.TEXTURE1),_s(this.painter,y,x))}}_prepareDemTileUniforms(i,c,p,y){if(!c||null==c.demTexture)return!1;const x=i.tileID.canonical,D=Math.pow(2,c.tileID.canonical.z-x.z),P=y||"";return p[`u_dem_tl${P}`]=[x.x*D%1,x.y*D%1],p[`u_dem_scale${P}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,c=i.gl;if(!this._emptyDepthBufferTexture){const p=new a.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.Texture(i,p,c.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const c=this._visibleDemTiles.reduce((p,y)=>{if(!y.dem)return p;const x=y.dem.tree.minimums[0];return x>0&&i++,p+x},0);return i?c/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,c=i.gl;i.activeTexture.set(c.TEXTURE2);const p=this._getLoadedAreaMinimum(),y=new a.RGBAImage({width:1,height:1},new Uint8Array(a.DEMData.pack(p,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let x=this._emptyDEMTexture;return x?x.update(y,{premultiply:!1}):x=this._emptyDEMTexture=new a.Texture(i,y,c.RGBA,{premultiply:!1}),x}setupElevationDraw(i,c,p){const y=this.painter.context,x=y.gl,D=(P=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:a.DEMData.getUnpackVector(P),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var P;D.u_dem_size=this.sourceCache.getSource().tileSize,D.u_exaggeration=this.exaggeration();let L=null,W=null,Z=1;if(p&&p.morphing&&this._useVertexMorphing){const ie=p.morphing.srcDemTile,ve=p.morphing.dstDemTile;Z=p.morphing.phase,ie&&ve&&(this._prepareDemTileUniforms(i,ie,D,"_prev")&&(W=ie),this._prepareDemTileUniforms(i,ve,D)&&(L=ve))}if(W&&L?(y.activeTexture.set(x.TEXTURE2),L.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),y.activeTexture.set(x.TEXTURE4),W.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),D.u_dem_lerp=Z):(L=this.terrainTileForTile[i.tileID.key],y.activeTexture.set(x.TEXTURE2),(this._prepareDemTileUniforms(i,L,D)?L.demTexture:this.emptyDEMTexture).bind(x.NEAREST,x.CLAMP_TO_EDGE)),y.activeTexture.set(x.TEXTURE3),p&&p.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),this._depthFBO&&(D.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),D.u_depth_size_inv=[1,1]),p&&p.useMeterToDem&&L){const ie=(1<<L.tileID.canonical.z)*a.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=ie}if(p&&p.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),c.setTerrainUniformValues(y,D),"globe"===this.painter.transform.projection.name){const ie=this.globeUniformValues(this.painter.transform,i.tileID.canonical,p&&p.useDenormalizedUpVectorScale);c.setGlobeUniformValues(y,ie)}}globeUniformValues(i,c,p){const y=i.projection;return{u_tile_tl_up:y.upVector(c,0,0),u_tile_tr_up:y.upVector(c,a.EXTENT,0),u_tile_br_up:y.upVector(c,a.EXTENT,a.EXTENT),u_tile_bl_up:y.upVector(c,0,a.EXTENT),u_tile_up_scale:p?a.GLOBE_METERS_TO_ECEF:y.upVectorScale(c,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const c=this.painter,p=this.painter.context;0!==i.length&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(y,x,D,P,L){if("globe"===y.transform.projection.name)!function(W,Z,ie,ve,Pe){const Le=W.context,Be=Le.gl;let Te,Ae;const je=W.options.showTerrainWireframe?2:0,ze=W.transform,at=a.globeUseCustomAntiAliasing(W,Le,ze),Dt=(Wn,pn)=>{if(Ae===Wn)return;const zn=[rs[Wn],"PROJECTION_GLOBE_VIEW"];at&&zn.push("CUSTOM_ANTIALIASING"),pn&&zn.push(rs[je]),Te=W.useProgram("globeRaster",null,zn),Ae=Wn},vt=W.colorModeForRenderPass(),Vt=new a.DepthMode(Be.LEQUAL,a.DepthMode.ReadWrite,W.depthRangeFor3D);Bs.update(Pe);const cn=a.calculateGlobeMercatorMatrix(ze),rn=[a.mercatorXfromLng(ze.center.lng),a.mercatorYfromLat(ze.center.lat)],$t=je?[!1,!0]:[!1],qn=W.globeSharedBuffers,Kt=[ze.width*a.exported.devicePixelRatio,ze.height*a.exported.devicePixelRatio],Pn=Float32Array.from(ze.globeMatrix),gn={useDenormalizedUpVectorScale:!0};if($t.forEach(Wn=>{Ae=-1;const pn=Wn?Be.LINES:Be.TRIANGLES;for(const zn of ve){const Qn=ie.getTile(zn),qt=a.StencilMode.disabled,hn=Z.prevTerrainTileForTile[zn.key],Ei=Z.terrainTileForTile[zn.key];Ca(hn,Ei)&&Bs.newMorphing(zn.key,hn,Ei,Pe,250),Le.activeTexture.set(Be.TEXTURE0),Qn.texture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE);const Oi=Bs.getMorphValuesForProxy(zn.key),Ci=Oi?1:0;Oi&&a.extend$1(gn,{morphing:{srcDemTile:Oi.from,dstDemTile:Oi.to,phase:a.easeCubicInOut(Oi.phase)}});const Vi=a.tileCornersToBounds(zn.canonical),sr=a.getLatitudinalLod(Vi.getCenter().lat),Si=a.getGridMatrix(zn.canonical,Vi,sr,ze.worldSize/ze._pixelsPerMercatorPixel),gi=a.globeNormalizeECEF(a.globeTileBounds(zn.canonical)),$r=Ea(ze.projMatrix,Pn,cn,gi,a.globeToMercatorTransition(ze.zoom),rn,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,Kt,Si);if(Dt(Ci,Wn),Z.setupElevationDraw(Qn,Te,gn),W.prepareDrawProgram(Le,Te,zn.toUnwrapped()),qn){const[Or,ao,Zr]=Wn?qn.getWirefameBuffers(W.context,sr):qn.getGridBuffers(sr);Te.draw(Le,pn,Vt,qt,vt,a.CullFaceMode.backCCW,$r,"globe_raster",Or,ao,Zr)}}}),qn){const Wn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];at&&Wn.push("CUSTOM_ANTIALIASING"),Te=W.useProgram("globeRaster",null,Wn);for(const pn of ve){const{x:zn,y:Qn,z:qt}=pn.canonical,hn=0===Qn,Ei=Qn===(1<<qt)-1,[Oi,Ci,Vi,sr]=qn.getPoleBuffers(qt);if(sr&&(hn||Ei)){const Si=ie.getTile(pn);Le.activeTexture.set(Be.TEXTURE0),Si.texture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE);let gi=a.globePoleMatrixForTile(qt,zn,ze);const $r=a.globeNormalizeECEF(a.globeTileBounds(pn.canonical)),Or=(ao,Zr)=>ao.draw(Le,Be.TRIANGLES,Vt,a.StencilMode.disabled,vt,a.CullFaceMode.disabled,Ea(ze.projMatrix,gi,gi,$r,0,rn,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,Kt),"globe_pole_raster",Zr,Vi,sr);Z.setupElevationDraw(Si,Te,gn),W.prepareDrawProgram(Le,Te,pn.toUnwrapped()),hn&&Or(Te,Oi),Ei&&(gi=a.scale(a.create(),gi,[1,-1,1]),Or(Te,Ci))}}}}(y,x,D,P,L);else{const W=y.context,Z=W.gl;let ie,ve;const Pe=y.options.showTerrainWireframe?2:0,Le=(ze,at)=>{if(ve===ze)return;const Dt=[rs[ze]];at&&Dt.push(rs[Pe]),ie=y.useProgram("terrainRaster",null,Dt),ve=ze},Be=y.colorModeForRenderPass(),Te=new a.DepthMode(Z.LEQUAL,a.DepthMode.ReadWrite,y.depthRangeFor3D);Bs.update(L);const Ae=y.transform,je=6*Math.pow(1.5,22-Ae.zoom)*x.exaggeration();(Pe?[!1,!0]:[!1]).forEach(ze=>{ve=-1;const at=ze?Z.LINES:Z.TRIANGLES,[Dt,vt]=ze?x.getWirefameBuffer():[x.gridIndexBuffer,x.gridSegments];for(const Vt of P){const cn=D.getTile(Vt),rn=a.StencilMode.disabled,$t=x.prevTerrainTileForTile[Vt.key],qn=x.terrainTileForTile[Vt.key];Ca($t,qn)&&Bs.newMorphing(Vt.key,$t,qn,L,250),W.activeTexture.set(Z.TEXTURE0),cn.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST);const Kt=Bs.getMorphValuesForProxy(Vt.key),Pn=Kt?1:0;let gn;Kt&&(gn={morphing:{srcDemTile:Kt.from,dstDemTile:Kt.to,phase:a.easeCubicInOut(Kt.phase)}});const Wn=Co(Vt.projMatrix,Ds(Vt.canonical,Ae.renderWorldCopies)?je/10:je);Le(Pn,ze),x.setupElevationDraw(cn,ie,gn),y.prepareDrawProgram(W,ie,Vt.toUnwrapped()),ie.draw(W,at,Te,rn,Be,a.CullFaceMode.backCCW,Wn,"terrain_raster",x.gridBuffer,Dt,vt)}})}}(c,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(0===this._drapedRenderBatches.length)return i+1;this.renderingToTexture=!0;const c=this.painter,p=this.painter.context,y=this.proxySourceCache,x=this.proxiedCoords[y.id],D=this._drapedRenderBatches.shift(),P=[],L=c.style.order;let W=0;for(const Z of x){const ie=y.getTileByID(Z.proxyTileKey),ve=y.proxyCachedFBO[Z.key]?y.proxyCachedFBO[Z.key][i]:void 0,Pe=void 0!==ve?y.renderCache[ve]:this.pool[W++],Le=void 0!==ve;if(ie.texture=Pe.tex,Le&&!Pe.dirty){P.push(ie.tileID);continue}let Be;p.bindFramebuffer.set(Pe.fb.framebuffer),this.renderedToTile=!1,Pe.dirty&&(p.clear({color:a.Color.transparent,stencil:0}),Pe.dirty=!1);for(let Te=D.start;Te<=D.end;++Te){const Ae=c.style._layers[L[Te]];if(Ae.isHidden(c.transform.zoom))continue;const je=c.style._getLayerSourceCache(Ae),ze=je?this.proxyToSource[Z.key][je.id]:[Z];if(!ze)continue;const at=ze;p.viewport.set([0,0,Pe.fb.width,Pe.fb.height]),Be!==(je?je.id:null)&&(this._setupStencil(Pe,ze,Ae,je),Be=je?je.id:null),c.renderLayer(c,je,Ae,at)}this.renderedToTile?(Pe.dirty=!0,P.push(ie.tileID)):Le||--W,5===W&&(W=0,this.renderToBackBuffer(P))}return this.renderToBackBuffer(P),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,c.width,c.height]),D.end+1}postRender(){}renderCacheEfficiency(i){const c=i.order.length;if(0===c)return{efficiency:100};let p,y=0,x=0,D=!1;for(let P=0;P<c;++P){const L=i._layers[i.order[P]];this._style.isLayerDraped(L)?(D&&++y,++x):D||(D=!0,p=L.id)}return 0===x?{efficiency:100}:{efficiency:100*(1-y/x),firstUndrapedLayer:p}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{i=Math.min(i,c.dem.tree.minimums[0])}),0===i?i:(i-30)*this._exaggeration}raycast(i,c,p){if(!this._visibleDemTiles)return null;const y=this._visibleDemTiles.filter(x=>x.dem).map(x=>{const D=x.tileID,P=1<<D.overscaledZ,{x:L,y:W}=D.canonical,Z=L/P,ie=(L+1)/P,ve=W/P,Pe=(W+1)/P;return{minx:Z,miny:ve,maxx:ie,maxy:Pe,t:x.dem.tree.raycastRoot(Z,ve,ie,Pe,i,c,p),tile:x}});y.sort((x,D)=>(null!==x.t?x.t:Number.MAX_VALUE)-(null!==D.t?D.t:Number.MAX_VALUE));for(const x of y){if(null==x.t)return null;const D=x.tile.dem.tree.raycast(x.minx,x.miny,x.maxx,x.maxy,i,c,p);if(null!=D)return D}return null}_createFBO(){const i=this.painter.context,c=i.gl,p=this.drapeBufferSize;i.activeTexture.set(c.TEXTURE0);const y=new a.Texture(i,{width:p[0],height:p[1],data:null},c.RGBA);y.bind(c.LINEAR,c.CLAMP_TO_EDGE);const x=i.createFramebuffer(p[0],p[1],!1);return x.colorAttachment.set(y.texture),x.depthAttachment=new ri(i,x.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,x.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):x.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&c.texParameterf(c.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:x,tex:y,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const c=this._style._layers[i],p=c.isHidden(this.painter.transform.zoom);return"custom"!==c.type&&!p&&c.hasTransition()})}_clearRasterFadeFromRenderCache(){let i=!1;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c]._source instanceof oe){i=!0;break}if(i)for(let c=0;c<this._style.order.length;++c){const p=this._style._layers[this._style.order[c]],y=p.isHidden(this.painter.transform.zoom),x=this._style._getLayerSourceCache(p);if("raster"!==p.type||y||!x)continue;const D=p.paint.get("raster-fade-duration");for(const P of this.proxyCoords){const L=this.proxyToSource[P.key][x.id];if(L)for(const W of L){const Z=os(x.getTile(W),x.findLoadedParent(W,0),x,this.painter.transform,D);(1!==Z.opacity||0!==Z.mix)&&this._clearRenderCacheForTile(x.id,W)}}}}_setupDrapedRenderBatches(){const i=this._style.order,c=i.length;if(0===c)return;const p=[];let y,x=0,D=this._style._layers[i[x]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++x<c;)D=this._style._layers[i[x]];for(;x<c;++x){const P=this._style._layers[i[x]];P.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(P)?void 0===y&&(y=x):void 0!==y&&(p.push({start:y,end:x-1}),y=void 0))}void 0!==y&&p.push({start:y,end:x-1}),this._drapedRenderBatches=p}_setupRenderCache(i){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const D=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let P=0;P<D.length;++P){const L=Object.values(D[P]);c.renderCachePool.push(...L)}}return}this._clearRasterFadeFromRenderCache();const p=this.proxyCoords,y=this._tilesDirty;for(let D=p.length-1;D>=0;D--){const P=p[D];if(c.getTileByID(P.key),void 0!==c.proxyCachedFBO[P.key]){const L=i[P.key],W=this.proxyToSource[P.key];let Z=0;for(const ie in W){const ve=W[ie],Pe=L[ie];if(!Pe||Pe.length!==ve.length||ve.some((Le,Be)=>Le!==Pe[Be]||y[ie]&&y[ie].hasOwnProperty(Le.key))){Z=-1;break}++Z}for(const ie in c.proxyCachedFBO[P.key])c.renderCache[c.proxyCachedFBO[P.key][ie]].dirty=Z<0||Z!==Object.values(L).length}}const x=[...this._drapedRenderBatches];x.sort((D,P)=>P.end-P.start-(D.end-D.start));for(const D of x)for(const P of p){if(c.proxyCachedFBO[P.key])continue;let L=c.renderCachePool.pop();void 0===L&&c.renderCache.length<50&&(L=c.renderCache.length,c.renderCache.push(this._createFBO())),void 0!==L&&(c.proxyCachedFBO[P.key]={},c.proxyCachedFBO[P.key][D.start]=L,c.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(i,c,p,y){if(!y||!this._sourceTilesOverlap[y.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const x=this.painter.context,D=x.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let P;if(p.isTileClipped())P=c.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);P=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+P>255&&(x.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=P,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):a.StencilMode.disabled}_renderTileClippingMasks(i,c){const p=this.painter,y=this.painter.context,x=y.gl;p._tileClippingMaskIDs={},y.setColorMode(a.ColorMode.disabled),y.setDepthMode(a.DepthMode.disabled);const D=p.useProgram("clippingMask");for(const P of i){const L=p._tileClippingMaskIDs[P.key]=--c;D.draw(y,x.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:x.ALWAYS,mask:0},L,255,x.KEEP,x.KEEP,x.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,Ma(P.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const c=this.painter.transform;if(i.x<0||i.x>c.width||i.y<0||i.y>c.height)return null;const p=[i.x,i.y,1,1];a.transformMat4$1(p,p,c.pixelMatrixInverse),a.scale$1(p,p,1/p[3]),p[0]/=c.worldSize,p[1]/=c.worldSize;const y=c._camera.position,x=a.mercatorZfromAltitude(1,c.center.lat),D=[y[0],y[1],y[2]/x,0],P=a.subtract([],p.slice(0,3),D);a.normalize(P,P);const L=this.raycast(D,P,this._exaggeration);return null!==L&&L?(a.scaleAndAdd(D,D,P,L),D[3]=D[2],D[2]*=x,D):null}drawDepth(){const i=this.painter,c=i.context,p=this.proxySourceCache,y=Math.ceil(i.width),x=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===y&&this._depthFBO.height===x||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const D=c.gl,P=c.createFramebuffer(y,x,!0);c.activeTexture.set(D.TEXTURE0);const L=new a.Texture(c,{width:y,height:x,data:null},D.RGBA);L.bind(D.NEAREST,D.CLAMP_TO_EDGE),P.colorAttachment.set(L.texture);const W=c.createRenderbuffer(c.gl.DEPTH_COMPONENT16,y,x);P.depthAttachment.set(W),this._depthFBO=P,this._depthTexture=L}c.bindFramebuffer.set(this._depthFBO.framebuffer),c.viewport.set([0,0,y,x]),function(D,P,L,W){if("globe"===D.transform.projection.name)return;const Z=D.context,ie=Z.gl;Z.clear({depth:1});const ve=D.useProgram("terrainDepth"),Pe=new a.DepthMode(ie.LESS,a.DepthMode.ReadWrite,D.depthRangeFor3D);for(const Le of W){const Be=L.getTile(Le),Te=Co(Le.projMatrix,0);P.setupElevationDraw(Be,ve),ve.draw(Z,ie.TRIANGLES,Pe,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.backCCW,Te,"terrain_depth",P.gridBuffer,P.gridIndexBuffer,P.gridNoSkirtSegments)}}(i,this,p,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,c,p){if(i.getSource()instanceof ut)return this._setupProxiedCoordsForImageSource(i,c,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const y=this.proxiedCoords[i.id]=[],x=this.proxyCoords;for(let P=0;P<x.length;P++){const L=x[P],W=this._findTileCoveringTileID(L,i);if(W){const Z=this._createProxiedId(L,W,p[L.key]&&p[L.key][i.id]);y.push(Z),this.proxyToSource[L.key][i.id]=[Z]}}let D=!1;for(let P=0;P<c.length;P++){const L=i.getTile(c[P]);if(!L||!L.hasData())continue;const W=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(W&&W.tileID.canonical.z!==L.tileID.canonical.z){const Z=this.proxyToSource[W.tileID.key][i.id],ie=this._createProxiedId(W.tileID,L,p[W.tileID.key]&&p[W.tileID.key][i.id]);Z?Z.splice(Z.length-1,0,ie):this.proxyToSource[W.tileID.key][i.id]=[ie],y.push(ie),D=!0}}this._sourceTilesOverlap[i.id]=D}_setupProxiedCoordsForImageSource(i,c,p){if(!i.getSource().loaded())return;const y=this.proxiedCoords[i.id]=[],x=this.proxyCoords,D=i.getSource(),P=new a.pointGeometry(D.tileID.x,D.tileID.y)._div(1<<D.tileID.z),L=D.coordinates.map(a.MercatorCoordinate.fromLngLat).reduce((Z,ie)=>(Z.min.x=Math.min(Z.min.x,ie.x-P.x),Z.min.y=Math.min(Z.min.y,ie.y-P.y),Z.max.x=Math.max(Z.max.x,ie.x-P.x),Z.max.y=Math.max(Z.max.y,ie.y-P.y),Z),{min:new a.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),W=(Z,ie)=>{const ve=Z.wrap+Z.canonical.x/(1<<Z.canonical.z),Pe=Z.canonical.y/(1<<Z.canonical.z),Le=a.EXTENT/(1<<Z.canonical.z),Be=ie.wrap+ie.canonical.x/(1<<ie.canonical.z),Te=ie.canonical.y/(1<<ie.canonical.z);return ve+Le<Be+L.min.x||ve>Be+L.max.x||Pe+Le<Te+L.min.y||Pe>Te+L.max.y};for(let Z=0;Z<x.length;Z++){const ie=x[Z];for(let ve=0;ve<c.length;ve++){const Pe=i.getTile(c[ve]);if(!Pe||!Pe.hasData()||W(ie,Pe.tileID))continue;const Le=this._createProxiedId(ie,Pe,p[ie.key]&&p[ie.key][i.id]),Be=this.proxyToSource[ie.key][i.id];Be?Be.push(Le):this.proxyToSource[ie.key][i.id]=[Le],y.push(Le)}}}_createProxiedId(i,c,p){let y=this.orthoMatrix;if(p){const x=p.find(D=>D.key===c.tileID.key);if(x)return x}if(c.tileID.key!==i.key){const x=i.canonical.z-c.tileID.canonical.z;let D,P,L;y=a.create();const W=c.tileID.wrap-i.wrap<<i.overscaledZ;x>0?(D=a.EXTENT>>x,P=D*((c.tileID.canonical.x<<x)-i.canonical.x+W),L=D*((c.tileID.canonical.y<<x)-i.canonical.y)):(D=a.EXTENT<<-x,P=a.EXTENT*(c.tileID.canonical.x-(i.canonical.x+W<<-x)),L=a.EXTENT*(c.tileID.canonical.y-(i.canonical.y<<-x))),a.ortho(y,0,D,0,D,0,1),a.translate(y,y,[P,L,0])}return new Va(c.tileID,i.key,y)}_findTileCoveringTileID(i,c){let p=c.getTile(i);if(p&&p.hasData())return p;const y=this._findCoveringTileCache[c.id],x=y[i.key];if(p=x?c.getTileByID(x):null,p&&p.hasData()||null===x)return p;let D=p?p.tileID:i,P=D.overscaledZ;const L=c.getSource().minzoom,W=[];if(!x){const ie=c.getSource().maxzoom;if(i.canonical.z>=ie){const ve=i.canonical.z-ie;c.getSource().reparseOverscaled?(P=Math.max(i.canonical.z+2,c.transform.tileZoom),D=new a.OverscaledTileID(P,i.wrap,ie,i.canonical.x>>ve,i.canonical.y>>ve)):0!==ve&&(P=ie,D=new a.OverscaledTileID(P,i.wrap,ie,i.canonical.x>>ve,i.canonical.y>>ve))}D.key!==i.key&&(W.push(D.key),p=c.getTile(D))}const Z=ie=>{W.forEach(ve=>{y[ve]=ie}),W.length=0};for(P-=1;P>=L&&(!p||!p.hasData());P--){p&&Z(p.tileID.key);const ie=D.calculateScaledKey(P);if(p=c.getTileByID(ie),p&&p.hasData())break;const ve=y[ie];if(null===ve)break;void 0===ve?W.push(ie):p=c.getTileByID(ve)}return Z(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,c){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[c.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(c){let p=0;const y=new a.StructArrayLayout2ui4,x=131;for(let D=1;D<129;D++){for(let P=1;P<129;P++)p=D*x+P,y.emplaceBack(p,p+1),y.emplaceBack(p,p+x),y.emplaceBack(p+1,p+x),128===D&&y.emplaceBack(p+x,p+x+1);y.emplaceBack(p+1,p+1+x)}return y}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=a.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class jr{static cacheKey(i,c,p,y){let x=`${c}${y?y.cacheKey:""}`;for(const D of p)i.usedDefines.includes(D)&&(x+=`/${D}`);return x}constructor(i,c,p,y,x,D){const P=i.gl;this.program=P.createProgram();const L=function(Te){const Ae=[];for(let je=0;je<Te.length;je++){if(null===Te[je])continue;const ze=Te[je].split(" ");Ae.push(ze.pop())}return Ae}(p.staticAttributes),W=y?y.getBinderAttributes():[],Z=L.concat(W);let ie=y?y.defines():[];ie=ie.concat(D.map(Te=>`#define ${Te}`));const ve=ie.concat(i.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(Zs):Zs,Zs,Ua,vo.fragmentSource,Lo.fragmentSource,p.fragmentSource).join("\n"),Pe=ie.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ua,vo.vertexSource,Lo.vertexSource,hl.vertexSource,p.vertexSource).join("\n"),Le=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(Le,ve),P.compileShader(Le),P.attachShader(this.program,Le);const Be=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(Be,Pe),P.compileShader(Be),P.attachShader(this.program,Be),this.attributes={},this.numAttributes=Z.length;for(let Te=0;Te<this.numAttributes;Te++)Z[Te]&&(P.bindAttribLocation(this.program,Te,Z[Te]),this.attributes[Z[Te]]=Te);P.linkProgram(this.program),P.deleteShader(Be),P.deleteShader(Le),this.fixedUniforms=x(i),this.binderUniforms=y?y.getUniforms(i):[],D.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new a.Uniform1i(Te=i),u_dem_prev:new a.Uniform1i(Te),u_dem_unpack:new a.Uniform4f(Te),u_dem_tl:new a.Uniform2f(Te),u_dem_scale:new a.Uniform1f(Te),u_dem_tl_prev:new a.Uniform2f(Te),u_dem_scale_prev:new a.Uniform1f(Te),u_dem_size:new a.Uniform1f(Te),u_dem_lerp:new a.Uniform1f(Te),u_exaggeration:new a.Uniform1f(Te),u_depth:new a.Uniform1i(Te),u_depth_size_inv:new a.Uniform2f(Te),u_meter_to_dem:new a.Uniform1f(Te),u_label_plane_matrix_inv:new a.UniformMatrix4f(Te)}),D.includes("GLOBE")&&(this.globeUniforms=(Te=>({u_tile_tl_up:new a.Uniform3f(Te),u_tile_tr_up:new a.Uniform3f(Te),u_tile_br_up:new a.Uniform3f(Te),u_tile_bl_up:new a.Uniform3f(Te),u_tile_up_scale:new a.Uniform1f(Te)}))(i)),D.includes("FOG")&&(this.fogUniforms=(Te=>({u_fog_matrix:new a.UniformMatrix4f(Te),u_fog_range:new a.Uniform2f(Te),u_fog_color:new a.Uniform4f(Te),u_fog_horizon_blend:new a.Uniform1f(Te),u_fog_temporal_offset:new a.Uniform1f(Te),u_frustum_tl:new a.Uniform3f(Te),u_frustum_tr:new a.Uniform3f(Te),u_frustum_br:new a.Uniform3f(Te),u_frustum_bl:new a.Uniform3f(Te),u_globe_pos:new a.Uniform3f(Te),u_globe_radius:new a.Uniform1f(Te),u_globe_transition:new a.Uniform1f(Te),u_is_globe:new a.Uniform1i(Te),u_viewport:new a.Uniform2f(Te)}))(i))}var Te}setTerrainUniformValues(i,c){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in c)p[y]&&p[y].set(this.program,y,c[y])}}setGlobeUniformValues(i,c){if(!this.globeUniforms)return;const p=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in c)p[y]&&p[y].set(this.program,y,c[y])}}setFogUniformValues(i,c){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in c)p[y].set(this.program,y,c[y])}}draw(i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be){const Te=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(y),i.setColorMode(x),i.setCullFace(D);for(const je of Object.keys(this.fixedUniforms))this.fixedUniforms[je].set(this.program,je,P[je]);Le&&Le.setUniforms(this.program,i,this.binderUniforms,ve,{zoom:Pe});const Ae={[Te.LINES]:2,[Te.TRIANGLES]:3,[Te.LINE_STRIP]:1}[c];for(const je of ie.get()){const ze=je.vaos||(je.vaos={});(ze[L]||(ze[L]=new Fs)).bind(i,this,W,Le?Le.getPaintVertexBuffers():[],Z,je.vertexOffset,Be||[]),Te.drawElements(c,je.primitiveLength*Ae,Te.UNSIGNED_SHORT,je.primitiveOffset*Ae*2)}}}function Q(d,i){const c=Math.pow(2,i.tileID.overscaledZ),p=i.tileSize*Math.pow(2,d.transform.tileZoom)/c,y=p*(i.tileID.canonical.x+i.tileID.wrap*c),x=p*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_tile_units_to_pixels:1/Nn(i,1,d.transform.tileZoom),u_pixel_coord_upper:[y>>16,x>>16],u_pixel_coord_lower:[65535&y,65535&x]}}const q=a.create(),j=(d,i,c,p,y,x,D,P,L,W,Z)=>{const ie=i.style.light,ve=ie.properties.get("position"),Pe=[ve.x,ve.y,ve.z],Le=a.create$1();"viewport"===ie.properties.get("anchor")&&(a.fromRotation(Le,-i.transform.angle),a.transformMat3(Pe,Pe,Le));const Be=ie.properties.get("color"),Te=i.transform,Ae={u_matrix:d,u_lightpos:Pe,u_lightintensity:ie.properties.get("intensity"),u_lightcolor:[Be.r,Be.g,Be.b],u_vertical_gradient:+c,u_opacity:p,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:q,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:y,u_edge_radius:x};return"globe"===Te.projection.name&&(Ae.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],Ae.u_zoom_transition=L,Ae.u_inv_rot_matrix=Z,Ae.u_merc_center=W,Ae.u_up_dir=Te.projection.upVector(new a.CanonicalTileID(0,0,0),W[0]*a.EXTENT,W[1]*a.EXTENT),Ae.u_height_lift=P),Ae},be=(d,i,c,p,y,x,D,P,L,W,Z,ie)=>{const ve=j(d,i,c,p,y,x,D,L,W,Z,ie),Pe={u_height_factor:-Math.pow(2,D.overscaledZ)/P.tileSize/8};return a.extend(ve,Q(i,P),Pe)},Cn=d=>({u_matrix:d}),bi=(d,i,c)=>a.extend(Cn(d),Q(i,c)),so=(d,i)=>({u_matrix:d,u_world:i}),Ts=(d,i,c,p)=>a.extend(bi(d,i,c),{u_world:p}),ys=a.create(),Nr=(d,i,c,p,y,x)=>{const D=d.transform,P="globe"===D.projection.name;let L;if("map"===x.paint.get("circle-pitch-alignment"))if(P){const Z=a.globePixelsToTileUnits(D.zoom,i.canonical)*D._pixelsPerMercatorPixel;L=Float32Array.from([Z,0,0,Z])}else L=D.calculatePixelsToTileUnitsMatrix(c);else L=new Float32Array([D.pixelsToGLUnits[0],0,0,D.pixelsToGLUnits[1]]);const W={u_camera_to_center_distance:D.cameraToCenterDistance,u_matrix:d.translatePosMatrix(i.projMatrix,c,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_device_pixel_ratio:a.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:ys,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){W.u_inv_rot_matrix=p,W.u_merc_center=y,W.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],W.u_zoom_transition=a.globeToMercatorTransition(D.zoom);const Z=y[0]*a.EXTENT,ie=y[1]*a.EXTENT;W.u_up_dir=D.projection.upVector(new a.CanonicalTileID(0,0,0),Z,ie)}return W},$o=d=>{const i=[];return"map"===d.paint.get("circle-pitch-alignment")&&i.push("PITCH_WITH_MAP"),"map"===d.paint.get("circle-pitch-scale")&&i.push("SCALE_WITH_MAP"),i},Da=(d,i,c,p)=>{const y=a.EXTENT/c.tileSize;return{u_matrix:d,u_camera_to_center_distance:i.getCameraToCenterDistance(p),u_extrude_scale:[i.pixelsToGLUnits[0]/y,i.pixelsToGLUnits[1]/y]}},Ns=(d,i,c=1)=>({u_matrix:d,u_color:i,u_overlay:0,u_overlay_scale:c}),qs=a.create(),Ll=(d,i,c,p,y,x,D)=>{const P=d.transform,L="globe"===P.projection.name,W=L?a.globePixelsToTileUnits(P.zoom,i.canonical)*P._pixelsPerMercatorPixel:Nn(c,1,x),Z={u_matrix:i.projMatrix,u_extrude_scale:W,u_intensity:D,u_inv_rot_matrix:qs,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){Z.u_inv_rot_matrix=p,Z.u_merc_center=y,Z.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],Z.u_zoom_transition=a.globeToMercatorTransition(P.zoom);const ie=y[0]*a.EXTENT,ve=y[1]*a.EXTENT;Z.u_up_dir=P.projection.upVector(new a.CanonicalTileID(0,0,0),ie,ve)}return Z},Fl=(d,i,c,p,y,x,D)=>{const P=d.transform,L=P.calculatePixelsToTileUnitsMatrix(i);return{u_matrix:ol(d,i,c,p),u_pixels_to_tile_units:L,u_device_pixel_ratio:x,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:y,u_texsize:ja(c)?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:rl(i,d.transform),u_alpha_discard_threshold:0,u_trim_offset:D}},zs=(d,i,c,p,y)=>{const x=d.transform;return{u_matrix:ol(d,i,c,p),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:x.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:y,u_image:0,u_tile_units_to_pixels:rl(i,x),u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function rl(d,i){return 1/Nn(d,1,i.tileZoom)}function ol(d,i,c,p){return d.translatePosMatrix(p||i.tileID.projMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function ja(d){const i=d.paint.get("line-dasharray").value;return i.value||"constant"!==i.kind}const Jl=(d,i,c,p,y,x)=>{return{u_matrix:d,u_tl_parent:i,u_scale_parent:c,u_fade_t:p.mix,u_opacity:p.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(P=y.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(D=y.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:fl(y.paint.get("raster-hue-rotate")),u_perspective_transform:x};var D,P};function fl(d){d*=Math.PI/180;const i=Math.sin(d),c=Math.cos(d);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Bl=a.create(),Yo=(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be)=>{const Te=y.transform,Ae={u_is_size_zoom_constant:+("constant"===d||"source"===d),u_is_size_feature_constant:+("constant"===d||"camera"===d),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Te.cameraToCenterDistance,u_rotate_symbol:+c,u_aspect_ratio:Te.width/Te.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:D,u_coord_matrix:P,u_is_text:+L,u_pitch_with_map:+p,u_texsize:W,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Bl,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Bl,u_up_vector:[0,-1,0]};return"globe"===Be.name&&(Ae.u_tile_id=[Z.canonical.x,Z.canonical.y,1<<Z.canonical.z],Ae.u_zoom_transition=ie,Ae.u_inv_rot_matrix=Pe,Ae.u_merc_center=ve,Ae.u_camera_forward=Te._camera.forward(),Ae.u_ecef_origin=a.globeECEFOrigin(Te.globeMatrix,Z.toUnwrapped()),Ae.u_tile_matrix=Float32Array.from(Te.globeMatrix),Ae.u_up_vector=Le),Ae},Ha=(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be,Te)=>a.extend(Yo(d,i,c,p,y,x,D,P,L,W,ie,ve,Pe,Le,Be,Te),{u_gamma_scale:p?y.transform.cameraToCenterDistance*Math.cos(y.terrain?0:y.transform._pitch):1,u_device_pixel_ratio:a.exported.devicePixelRatio,u_is_halo:+Z}),da=(d,i,c,p,y,x,D,P,L,W,Z,ie,ve,Pe,Le,Be)=>a.extend(Ha(d,i,c,p,y,x,D,P,!0,L,!0,Z,ie,ve,Pe,Le,Be),{u_texsize_icon:W,u_texture_icon:1}),xc=(d,i,c)=>({u_matrix:d,u_opacity:i,u_color:c}),Nl=(d,i,c,p,y)=>a.extend(function(x,D,P){const L=D.imageManager.getPattern(x.toString()),{width:W,height:Z}=D.imageManager.getPixelSize(),ie=Math.pow(2,P.tileID.overscaledZ),ve=P.tileSize*Math.pow(2,D.transform.tileZoom)/ie,Pe=ve*(P.tileID.canonical.x+P.tileID.wrap*ie),Le=ve*P.tileID.canonical.y;return{u_image:0,u_pattern_tl:L.tl,u_pattern_br:L.br,u_texsize:[W,Z],u_pattern_size:L.displaySize,u_tile_units_to_pixels:1/Nn(P,1,D.transform.tileZoom),u_pixel_coord_upper:[Pe>>16,Le>>16],u_pixel_coord_lower:[65535&Pe,65535&Le]}}(p,c,y),{u_matrix:d,u_opacity:i}),z={fillExtrusion:d=>({u_matrix:new a.UniformMatrix4f(d),u_lightpos:new a.Uniform3f(d),u_lightintensity:new a.Uniform1f(d),u_lightcolor:new a.Uniform3f(d),u_vertical_gradient:new a.Uniform1f(d),u_opacity:new a.Uniform1f(d),u_edge_radius:new a.Uniform1f(d),u_ao:new a.Uniform2f(d),u_tile_id:new a.Uniform3f(d),u_zoom_transition:new a.Uniform1f(d),u_inv_rot_matrix:new a.UniformMatrix4f(d),u_merc_center:new a.Uniform2f(d),u_up_dir:new a.Uniform3f(d),u_height_lift:new a.Uniform1f(d)}),fillExtrusionPattern:d=>({u_matrix:new a.UniformMatrix4f(d),u_lightpos:new a.Uniform3f(d),u_lightintensity:new a.Uniform1f(d),u_lightcolor:new a.Uniform3f(d),u_vertical_gradient:new a.Uniform1f(d),u_height_factor:new a.Uniform1f(d),u_edge_radius:new a.Uniform1f(d),u_ao:new a.Uniform2f(d),u_tile_id:new a.Uniform3f(d),u_zoom_transition:new a.Uniform1f(d),u_inv_rot_matrix:new a.UniformMatrix4f(d),u_merc_center:new a.Uniform2f(d),u_up_dir:new a.Uniform3f(d),u_height_lift:new a.Uniform1f(d),u_image:new a.Uniform1i(d),u_texsize:new a.Uniform2f(d),u_pixel_coord_upper:new a.Uniform2f(d),u_pixel_coord_lower:new a.Uniform2f(d),u_tile_units_to_pixels:new a.Uniform1f(d),u_opacity:new a.Uniform1f(d)}),fill:d=>({u_matrix:new a.UniformMatrix4f(d)}),fillPattern:d=>({u_matrix:new a.UniformMatrix4f(d),u_image:new a.Uniform1i(d),u_texsize:new a.Uniform2f(d),u_pixel_coord_upper:new a.Uniform2f(d),u_pixel_coord_lower:new a.Uniform2f(d),u_tile_units_to_pixels:new a.Uniform1f(d)}),fillOutline:d=>({u_matrix:new a.UniformMatrix4f(d),u_world:new a.Uniform2f(d)}),fillOutlinePattern:d=>({u_matrix:new a.UniformMatrix4f(d),u_world:new a.Uniform2f(d),u_image:new a.Uniform1i(d),u_texsize:new a.Uniform2f(d),u_pixel_coord_upper:new a.Uniform2f(d),u_pixel_coord_lower:new a.Uniform2f(d),u_tile_units_to_pixels:new a.Uniform1f(d)}),circle:d=>({u_camera_to_center_distance:new a.Uniform1f(d),u_extrude_scale:new a.UniformMatrix2f(d),u_device_pixel_ratio:new a.Uniform1f(d),u_matrix:new a.UniformMatrix4f(d),u_inv_rot_matrix:new a.UniformMatrix4f(d),u_merc_center:new a.Uniform2f(d),u_tile_id:new a.Uniform3f(d),u_zoom_transition:new a.Uniform1f(d),u_up_dir:new a.Uniform3f(d)}),collisionBox:d=>({u_matrix:new a.UniformMatrix4f(d),u_camera_to_center_distance:new a.Uniform1f(d),u_extrude_scale:new a.Uniform2f(d)}),collisionCircle:d=>({u_matrix:new a.UniformMatrix4f(d),u_inv_matrix:new a.UniformMatrix4f(d),u_camera_to_center_distance:new a.Uniform1f(d),u_viewport_size:new a.Uniform2f(d)}),debug:d=>({u_color:new a.UniformColor(d),u_matrix:new a.UniformMatrix4f(d),u_overlay:new a.Uniform1i(d),u_overlay_scale:new a.Uniform1f(d)}),clippingMask:d=>({u_matrix:new a.UniformMatrix4f(d)}),heatmap:d=>({u_extrude_scale:new a.Uniform1f(d),u_intensity:new a.Uniform1f(d),u_matrix:new a.UniformMatrix4f(d),u_inv_rot_matrix:new a.UniformMatrix4f(d),u_merc_center:new a.Uniform2f(d),u_tile_id:new a.Uniform3f(d),u_zoom_transition:new a.Uniform1f(d),u_up_dir:new a.Uniform3f(d)}),heatmapTexture:d=>({u_image:new a.Uniform1i(d),u_color_ramp:new a.Uniform1i(d),u_opacity:new a.Uniform1f(d)}),hillshade:d=>({u_matrix:new a.UniformMatrix4f(d),u_image:new a.Uniform1i(d),u_latrange:new a.Uniform2f(d),u_light:new a.Uniform2f(d),u_shadow:new a.UniformColor(d),u_highlight:new a.UniformColor(d),u_accent:new a.UniformColor(d)}),hillshadePrepare:d=>({u_matrix:new a.UniformMatrix4f(d),u_image:new a.Uniform1i(d),u_dimension:new a.Uniform2f(d),u_zoom:new a.Uniform1f(d),u_unpack:new a.Uniform4f(d)}),line:d=>({u_matrix:new a.UniformMatrix4f(d),u_pixels_to_tile_units:new a.UniformMatrix2f(d),u_device_pixel_ratio:new a.Uniform1f(d),u_units_to_pixels:new a.Uniform2f(d),u_dash_image:new a.Uniform1i(d),u_gradient_image:new a.Uniform1i(d),u_image_height:new a.Uniform1f(d),u_texsize:new a.Uniform2f(d),u_tile_units_to_pixels:new a.Uniform1f(d),u_alpha_discard_threshold:new a.Uniform1f(d),u_trim_offset:new a.Uniform2f(d)}),linePattern:d=>({u_matrix:new a.UniformMatrix4f(d),u_texsize:new a.Uniform2f(d),u_pixels_to_tile_units:new a.UniformMatrix2f(d),u_device_pixel_ratio:new a.Uniform1f(d),u_image:new a.Uniform1i(d),u_units_to_pixels:new a.Uniform2f(d),u_tile_units_to_pixels:new a.Uniform1f(d),u_alpha_discard_threshold:new a.Uniform1f(d)}),raster:d=>({u_matrix:new a.UniformMatrix4f(d),u_tl_parent:new a.Uniform2f(d),u_scale_parent:new a.Uniform1f(d),u_fade_t:new a.Uniform1f(d),u_opacity:new a.Uniform1f(d),u_image0:new a.Uniform1i(d),u_image1:new a.Uniform1i(d),u_brightness_low:new a.Uniform1f(d),u_brightness_high:new a.Uniform1f(d),u_saturation_factor:new a.Uniform1f(d),u_contrast_factor:new a.Uniform1f(d),u_spin_weights:new a.Uniform3f(d),u_perspective_transform:new a.Uniform2f(d)}),symbolIcon:d=>({u_is_size_zoom_constant:new a.Uniform1i(d),u_is_size_feature_constant:new a.Uniform1i(d),u_size_t:new a.Uniform1f(d),u_size:new a.Uniform1f(d),u_camera_to_center_distance:new a.Uniform1f(d),u_rotate_symbol:new a.Uniform1i(d),u_aspect_ratio:new a.Uniform1f(d),u_fade_change:new a.Uniform1f(d),u_matrix:new a.UniformMatrix4f(d),u_label_plane_matrix:new a.UniformMatrix4f(d),u_coord_matrix:new a.UniformMatrix4f(d),u_is_text:new a.Uniform1i(d),u_pitch_with_map:new a.Uniform1i(d),u_texsize:new a.Uniform2f(d),u_tile_id:new a.Uniform3f(d),u_zoom_transition:new a.Uniform1f(d),u_inv_rot_matrix:new a.UniformMatrix4f(d),u_merc_center:new a.Uniform2f(d),u_camera_forward:new a.Uniform3f(d),u_tile_matrix:new a.UniformMatrix4f(d),u_up_vector:new a.Uniform3f(d),u_ecef_origin:new a.Uniform3f(d),u_texture:new a.Uniform1i(d)}),symbolSDF:d=>({u_is_size_zoom_constant:new a.Uniform1i(d),u_is_size_feature_constant:new a.Uniform1i(d),u_size_t:new a.Uniform1f(d),u_size:new a.Uniform1f(d),u_camera_to_center_distance:new a.Uniform1f(d),u_rotate_symbol:new a.Uniform1i(d),u_aspect_ratio:new a.Uniform1f(d),u_fade_change:new a.Uniform1f(d),u_matrix:new a.UniformMatrix4f(d),u_label_plane_matrix:new a.UniformMatrix4f(d),u_coord_matrix:new a.UniformMatrix4f(d),u_is_text:new a.Uniform1i(d),u_pitch_with_map:new a.Uniform1i(d),u_texsize:new a.Uniform2f(d),u_texture:new a.Uniform1i(d),u_gamma_scale:new a.Uniform1f(d),u_device_pixel_ratio:new a.Uniform1f(d),u_tile_id:new a.Uniform3f(d),u_zoom_transition:new a.Uniform1f(d),u_inv_rot_matrix:new a.UniformMatrix4f(d),u_merc_center:new a.Uniform2f(d),u_camera_forward:new a.Uniform3f(d),u_tile_matrix:new a.UniformMatrix4f(d),u_up_vector:new a.Uniform3f(d),u_ecef_origin:new a.Uniform3f(d),u_is_halo:new a.Uniform1i(d)}),symbolTextAndIcon:d=>({u_is_size_zoom_constant:new a.Uniform1i(d),u_is_size_feature_constant:new a.Uniform1i(d),u_size_t:new a.Uniform1f(d),u_size:new a.Uniform1f(d),u_camera_to_center_distance:new a.Uniform1f(d),u_rotate_symbol:new a.Uniform1i(d),u_aspect_ratio:new a.Uniform1f(d),u_fade_change:new a.Uniform1f(d),u_matrix:new a.UniformMatrix4f(d),u_label_plane_matrix:new a.UniformMatrix4f(d),u_coord_matrix:new a.UniformMatrix4f(d),u_is_text:new a.Uniform1i(d),u_pitch_with_map:new a.Uniform1i(d),u_texsize:new a.Uniform2f(d),u_texsize_icon:new a.Uniform2f(d),u_texture:new a.Uniform1i(d),u_texture_icon:new a.Uniform1i(d),u_gamma_scale:new a.Uniform1f(d),u_device_pixel_ratio:new a.Uniform1f(d),u_is_halo:new a.Uniform1i(d)}),background:d=>({u_matrix:new a.UniformMatrix4f(d),u_opacity:new a.Uniform1f(d),u_color:new a.UniformColor(d)}),backgroundPattern:d=>({u_matrix:new a.UniformMatrix4f(d),u_opacity:new a.Uniform1f(d),u_image:new a.Uniform1i(d),u_pattern_tl:new a.Uniform2f(d),u_pattern_br:new a.Uniform2f(d),u_texsize:new a.Uniform2f(d),u_pattern_size:new a.Uniform2f(d),u_pixel_coord_upper:new a.Uniform2f(d),u_pixel_coord_lower:new a.Uniform2f(d),u_tile_units_to_pixels:new a.Uniform1f(d)}),terrainRaster:Hi,terrainDepth:Hi,skybox:d=>({u_matrix:new a.UniformMatrix4f(d),u_sun_direction:new a.Uniform3f(d),u_cubemap:new a.Uniform1i(d),u_opacity:new a.Uniform1f(d),u_temporal_offset:new a.Uniform1f(d)}),skyboxGradient:d=>({u_matrix:new a.UniformMatrix4f(d),u_color_ramp:new a.Uniform1i(d),u_center_direction:new a.Uniform3f(d),u_radius:new a.Uniform1f(d),u_opacity:new a.Uniform1f(d),u_temporal_offset:new a.Uniform1f(d)}),skyboxCapture:d=>({u_matrix_3f:new a.UniformMatrix3f(d),u_sun_direction:new a.Uniform3f(d),u_sun_intensity:new a.Uniform1f(d),u_color_tint_r:new a.Uniform4f(d),u_color_tint_m:new a.Uniform4f(d),u_luminance:new a.Uniform1f(d)}),globeRaster:d=>({u_proj_matrix:new a.UniformMatrix4f(d),u_globe_matrix:new a.UniformMatrix4f(d),u_normalize_matrix:new a.UniformMatrix4f(d),u_merc_matrix:new a.UniformMatrix4f(d),u_zoom_transition:new a.Uniform1f(d),u_merc_center:new a.Uniform2f(d),u_image0:new a.Uniform1i(d),u_grid_matrix:new a.UniformMatrix3f(d),u_frustum_tl:new a.Uniform3f(d),u_frustum_tr:new a.Uniform3f(d),u_frustum_br:new a.Uniform3f(d),u_frustum_bl:new a.Uniform3f(d),u_globe_pos:new a.Uniform3f(d),u_globe_radius:new a.Uniform1f(d),u_viewport:new a.Uniform2f(d)}),globeAtmosphere:d=>({u_frustum_tl:new a.Uniform3f(d),u_frustum_tr:new a.Uniform3f(d),u_frustum_br:new a.Uniform3f(d),u_frustum_bl:new a.Uniform3f(d),u_horizon:new a.Uniform1f(d),u_transition:new a.Uniform1f(d),u_fadeout_range:new a.Uniform1f(d),u_color:new a.Uniform4f(d),u_high_color:new a.Uniform4f(d),u_space_color:new a.Uniform4f(d),u_star_intensity:new a.Uniform1f(d),u_star_density:new a.Uniform1f(d),u_star_size:new a.Uniform1f(d),u_temporal_offset:new a.Uniform1f(d),u_horizon_angle:new a.Uniform1f(d),u_rotation_matrix:new a.UniformMatrix4f(d)})};let re;function $(d,i,c,p,y,x,D){const P=d.context,L=P.gl,W=d.transform,Z=d.useProgram("collisionBox"),ie=[];let ve=0,Pe=0;for(let at=0;at<p.length;at++){const Dt=p[at],vt=i.getTile(Dt),Vt=vt.getBucket(c);if(!Vt)continue;const cn=es(Dt,Vt,W);let rn=cn;0===y[0]&&0===y[1]||(rn=d.translatePosMatrix(cn,vt,y,x));const $t=D?Vt.textCollisionBox:Vt.iconCollisionBox,qn=Vt.collisionCircleArray;if(qn.length>0){const Kt=a.create(),Pn=rn;a.mul(Kt,Vt.placementInvProjMatrix,W.glCoordMatrix),a.mul(Kt,Kt,Vt.placementViewportMatrix),ie.push({circleArray:qn,circleOffset:Pe,transform:Pn,invTransform:Kt,projection:Vt.getProjection()}),ve+=qn.length/4,Pe=ve}$t&&(d.terrain&&d.terrain.setupElevationDraw(vt,Z),Z.draw(P,L.LINES,a.DepthMode.disabled,a.StencilMode.disabled,d.colorModeForRenderPass(),a.CullFaceMode.disabled,Da(rn,W,vt,Vt.getProjection()),c.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,null,W.zoom,null,[$t.collisionVertexBuffer,$t.collisionVertexBufferExt]))}if(!D||!ie.length)return;const Le=d.useProgram("collisionCircle"),Be=new a.StructArrayLayout2f1f2i16;Be.resize(4*ve),Be._trim();let Te=0;for(const at of ie)for(let Dt=0;Dt<at.circleArray.length/4;Dt++){const vt=4*Dt,Vt=at.circleArray[vt+0],cn=at.circleArray[vt+1],rn=at.circleArray[vt+2],$t=at.circleArray[vt+3];Be.emplace(Te++,Vt,cn,rn,$t,0),Be.emplace(Te++,Vt,cn,rn,$t,1),Be.emplace(Te++,Vt,cn,rn,$t,2),Be.emplace(Te++,Vt,cn,rn,$t,3)}(!re||re.length<2*ve)&&(re=function(at){const Dt=2*at,vt=new a.StructArrayLayout3ui6;vt.resize(Dt),vt._trim();for(let Vt=0;Vt<Dt;Vt++){const cn=6*Vt;vt.uint16[cn+0]=4*Vt+0,vt.uint16[cn+1]=4*Vt+1,vt.uint16[cn+2]=4*Vt+2,vt.uint16[cn+3]=4*Vt+2,vt.uint16[cn+4]=4*Vt+3,vt.uint16[cn+5]=4*Vt+0}return vt}(ve));const Ae=P.createIndexBuffer(re,!0),je=P.createVertexBuffer(Be,a.collisionCircleLayout.members,!0);for(const at of ie){const Dt={u_matrix:at.transform,u_inv_matrix:at.invTransform,u_camera_to_center_distance:(ze=W).getCameraToCenterDistance(at.projection),u_viewport_size:[ze.width,ze.height]};Le.draw(P,L.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,d.colorModeForRenderPass(),a.CullFaceMode.disabled,Dt,c.id,je,Ae,a.SegmentVector.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,W.zoom)}var ze;je.destroy(),Ae.destroy()}const ye=a.create();function gt({width:d,height:i,anchor:c,textOffset:p,textScale:y},x){const{horizontalAlign:D,verticalAlign:P}=a.getAnchorAlignment(c),L=-(D-.5)*d,W=-(P-.5)*i,Z=a.evaluateVariableOffset(c,p);return new a.pointGeometry((L/y+Z[0])*x,(W/y+Z[1])*x)}function vn(d,i,c,p,y,x,D,P,L,W,Z){const ie=d.text.placedSymbolArray,ve=d.text.dynamicLayoutVertexArray,Pe=d.icon.dynamicLayoutVertexArray,Le={},Be=d.getProjection(),Te=Ps(P,Be,x),Ae=x.elevation,je=Be.upVectorScale(P.canonical,x.center.lat,x.worldSize).metersToTile;ve.clear();for(let ze=0;ze<ie.length;ze++){const at=ie.get(ze),{tileAnchorX:Dt,tileAnchorY:vt,numGlyphs:Vt}=at,cn=d.allowVerticalPlacement&&!at.placedOrientation,rn=at.hidden||!at.crossTileID||cn?null:p[at.crossTileID];if(rn){let $t=0,qn=0,Kt=0;if(Ae){const Ei=Ae?Ae.getAtTileOffset(P,Dt,vt):0,[Oi,Ci,Vi]=Be.upVector(P.canonical,Dt,vt);$t=Ei*Oi*je,qn=Ei*Ci*je,Kt=Ei*Vi*je}let[Pn,gn,Wn,pn]=fn(at.projectedAnchorX+$t,at.projectedAnchorY+qn,at.projectedAnchorZ+Kt,c?Te:D);const zn=Ie(x.getCameraToCenterDistance(Be),pn);let Qn=y.evaluateSizeForFeature(d.textSizeData,W,at)*zn/a.ONE_EM;c&&(Qn*=d.tilePixelRatio/L);const qt=gt(rn,Qn);c?(({x:Pn,y:gn,z:Wn}=Be.projectTilePoint(Dt+qt.x,vt+qt.y,P.canonical)),[Pn,gn,Wn]=fn(Pn+$t,gn+qn,Wn+Kt,D)):(i&&qt._rotate(-x.angle),Pn+=qt.x,gn+=qt.y,Wn=0);const hn=d.allowVerticalPlacement&&at.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let Ei=0;Ei<Vt;Ei++)a.addDynamicAttributes(ve,Pn,gn,Wn,hn);Z&&at.associatedIconIndex>=0&&(Le[at.associatedIconIndex]={x:Pn,y:gn,z:Wn,angle:hn})}else Ur(Vt,ve)}if(Z){Pe.clear();const ze=d.icon.placedSymbolArray;for(let at=0;at<ze.length;at++){const Dt=ze.get(at),{numGlyphs:vt}=Dt,Vt=Le[at];if(Dt.hidden||!Vt)Ur(vt,Pe);else{const{x:cn,y:rn,z:$t,angle:qn}=Vt;for(let Kt=0;Kt<vt;Kt++)a.addDynamicAttributes(Pe,cn,rn,$t,qn)}}d.icon.dynamicLayoutVertexBuffer.updateData(Pe)}d.text.dynamicLayoutVertexBuffer.updateData(ve)}function On(d,i,c){return c.iconsInText&&i?"symbolTextAndIcon":d?"symbolSDF":"symbolIcon"}function yi(d,i,c,p,y,x,D,P,L,W,Z,ie){const ve=d.context,Pe=ve.gl,Le=d.transform,Be="map"===P,Te="map"===L,Ae=Be&&"point"!==c.layout.get("symbol-placement"),je=Be&&!Te&&!Ae,ze=void 0!==c.layout.get("symbol-sort-key").constantOr(1);let at=!1;const Dt=d.depthModeForSublayer(0,a.DepthMode.ReadOnly),vt=[a.mercatorXfromLng(Le.center.lng),a.mercatorYfromLat(Le.center.lat)],Vt=c.layout.get("text-variable-anchor"),cn="globe"===Le.projection.name,rn=[],$t=[0,-1,0];let qn=$t;!cn&&!Le.mercatorFromTransition||Be||(qn=function(Kt){const Pn=Kt._camera.getWorldToCamera(Kt.worldSize,1),gn=a.multiply([],Pn,Kt.globeMatrix);a.invert(gn,gn);const Wn=[0,0,0],pn=[0,1,0,0];return a.transformMat4$1(pn,pn,gn),Wn[0]=pn[0],Wn[1]=pn[1],Wn[2]=pn[2],a.normalize(Wn,Wn),Wn}(Le));for(const Kt of p){const Pn=i.getTile(Kt),gn=Pn.getBucket(c);if(!gn||"mercator"===gn.projection.name&&cn)continue;const Wn=y?gn.text:gn.icon;if(!Wn||gn.fullyClipped||!Wn.segments.get().length)continue;const pn=Wn.programConfigurations.get(c.id),zn=y||gn.sdfIcons,Qn=y?gn.textSizeData:gn.iconSizeData,qt=Te||0!==Le.pitch,hn=a.evaluateSizeForZoom(Qn,Le.zoom);let Ei,Oi,Ci,Vi,sr=[0,0],Si=null;if(y){if(Oi=Pn.glyphAtlasTexture,Ci=Pe.LINEAR,Ei=Pn.glyphAtlasTexture.size,gn.iconsInText){sr=Pn.imageAtlasTexture.size,Si=Pn.imageAtlasTexture;const Oa="composite"===Qn.kind||"camera"===Qn.kind;Vi=qt||d.options.rotating||d.options.zooming||Oa?Pe.LINEAR:Pe.NEAREST}}else{const Oa=1!==c.layout.get("icon-size").constantOr(0)||gn.iconsNeedLinear;Oi=Pn.imageAtlasTexture,Ci=zn||d.options.rotating||d.options.zooming||Oa||qt?Pe.LINEAR:Pe.NEAREST,Ei=Pn.imageAtlasTexture.size}const gi="globe"===gn.projection.name,$r=gi?qn:$t,Or=gi?a.globeToMercatorTransition(Le.zoom):0,ao=Ps(Kt,gn.getProjection(),Le),Zr=Le.calculatePixelsToTileUnitsMatrix(Pn),Pa=Yi(ao,Pn.tileID.canonical,Te,Be,Le,gn.getProjection(),Zr),Qs=d.terrain&&Te&&Ae?a.invert(a.create(),Pa):ye,Js=kn(ao,Pn.tileID.canonical,Te,Be,Le,gn.getProjection(),Zr),sl=Vt&&gn.hasTextData(),Qr="none"!==c.layout.get("icon-text-fit")&&sl&&gn.hasIconData();if(Ae){const Oa=Le.elevation,Hs=Oa?Oa.getAtTileOffsetFunc(Kt,Le.center.lat,Le.worldSize,gn.getProjection()):null,El=ps(ao,Pn.tileID.canonical,Te,Be,Le,gn.getProjection(),Zr);Ln(gn,ao,d,y,El,Js,Te,W,Hs,Kt)}const Wr=Ae||y&&Vt||Qr,wr=d.translatePosMatrix(ao,Pn,x,D),Uo=Wr?ye:Pa,js=d.translatePosMatrix(Js,Pn,x,D,!0),go=gn.getProjection().createInversionMatrix(Le,Kt.canonical),xs=[];d.terrainRenderModeElevated()&&Te&&xs.push("PITCH_WITH_MAP_TERRAIN"),gi&&xs.push("PROJECTION_GLOBE_VIEW"),Wr&&xs.push("PROJECTED_POS_ON_VIEWPORT");const Dc=zn&&0!==c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1);let wl;wl=zn?gn.iconsInText?da(Qn.kind,hn,je,Te,d,wr,Uo,js,Ei,sr,Kt,Or,vt,go,$r,gn.getProjection()):Ha(Qn.kind,hn,je,Te,d,wr,Uo,js,y,Ei,!0,Kt,Or,vt,go,$r,gn.getProjection()):Yo(Qn.kind,hn,je,Te,d,wr,Uo,js,y,Ei,Kt,Or,vt,go,$r,gn.getProjection());const Ss={program:d.useProgram(On(zn,y,gn),pn,xs),buffers:Wn,uniformValues:wl,atlasTexture:Oi,atlasTextureIcon:Si,atlasInterpolation:Ci,atlasInterpolationIcon:Vi,isSDF:zn,hasHalo:Dc,tile:Pn,labelPlaneMatrixInv:Qs};if(ze&&gn.canOverlap){at=!0;const Oa=Wn.segments.get();for(const Hs of Oa)rn.push({segments:new a.SegmentVector([Hs]),sortKey:Hs.sortKey,state:Ss})}else rn.push({segments:Wn.segments,sortKey:0,state:Ss})}at&&rn.sort((Kt,Pn)=>Kt.sortKey-Pn.sortKey);for(const Kt of rn){const Pn=Kt.state;if(d.terrain&&d.terrain.setupElevationDraw(Pn.tile,Pn.program,{useDepthForOcclusion:!cn,labelPlaneMatrixInv:Pn.labelPlaneMatrixInv}),ve.activeTexture.set(Pe.TEXTURE0),Pn.atlasTexture.bind(Pn.atlasInterpolation,Pe.CLAMP_TO_EDGE),Pn.atlasTextureIcon&&(ve.activeTexture.set(Pe.TEXTURE1),Pn.atlasTextureIcon&&Pn.atlasTextureIcon.bind(Pn.atlasInterpolationIcon,Pe.CLAMP_TO_EDGE)),Pn.isSDF){const gn=Pn.uniformValues;Pn.hasHalo&&(gn.u_is_halo=1,xr(Pn.buffers,Kt.segments,c,d,Pn.program,Dt,Z,ie,gn)),gn.u_is_halo=0}xr(Pn.buffers,Kt.segments,c,d,Pn.program,Dt,Z,ie,Pn.uniformValues)}}function xr(d,i,c,p,y,x,D,P,L){const W=p.context,Z=[d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer,d.globeExtVertexBuffer];y.draw(W,W.gl.TRIANGLES,x,D,P,a.CullFaceMode.disabled,L,c.id,d.layoutVertexBuffer,d.indexBuffer,i,c.paint,p.transform.zoom,d.programConfigurations.get(c.id),Z)}function Mr(d,i,c,p,y,x,D){const P=d.context.gl,L=c.paint.get("fill-pattern"),W=L&&L.constantOr(1);let Z,ie,ve,Pe,Le;D?(ie=W&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=P.LINES):(ie=W?"fillPattern":"fill",Z=P.TRIANGLES);for(const Be of p){const Te=i.getTile(Be);if(W&&!Te.patternsLoaded())continue;const Ae=Te.getBucket(c);if(!Ae)continue;d.prepareDrawTile();const je=Ae.programConfigurations.get(c.id),ze=d.useProgram(ie,je);W&&(d.context.activeTexture.set(P.TEXTURE0),Te.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),je.updatePaintBuffers());const at=L.constantOr(null);if(at&&Te.imageAtlas){const vt=Te.imageAtlas.patternPositions[at.toString()];vt&&je.setConstantPatternPositions(vt)}const Dt=d.translatePosMatrix(Be.projMatrix,Te,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(D){Pe=Ae.indexBuffer2,Le=Ae.segments2;const vt=d.terrain&&d.terrain.renderingToTexture?d.terrain.drapeBufferSize:[P.drawingBufferWidth,P.drawingBufferHeight];ve="fillOutlinePattern"===ie&&W?Ts(Dt,d,Te,vt):so(Dt,vt)}else Pe=Ae.indexBuffer,Le=Ae.segments,ve=W?bi(Dt,d,Te):Cn(Dt);d.prepareDrawProgram(d.context,ze,Be.toUnwrapped()),ze.draw(d.context,Z,y,d.stencilModeForClipping(Be),x,a.CullFaceMode.disabled,ve,c.id,Ae.layoutVertexBuffer,Pe,Le,c.paint,d.transform.zoom,je)}}function Ar(d,i,c,p,y,x,D){const P=d.context,L=P.gl,W=d.transform,Z=c.paint.get("fill-extrusion-pattern"),ie=Z.constantOr(1),ve=c.paint.get("fill-extrusion-opacity"),Pe=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),c.paint.get("fill-extrusion-ambient-occlusion-radius")],Le=c.layout.get("fill-extrusion-edge-radius"),Be="globe"===W.projection.name?a.fillExtrusionHeightLift():0,Te="globe"===W.projection.name,Ae=Te?a.globeToMercatorTransition(W.zoom):0,je=[a.mercatorXfromLng(W.center.lng),a.mercatorYfromLat(W.center.lat)],ze=[];Te&&(ze.push("PROJECTION_GLOBE_VIEW"),d.style.terrainSetForDrapingOnly()&&ze.push("TERRAIN")),Pe[0]>0&&ze.push("FAUX_AO");for(const at of p){const Dt=i.getTile(at),vt=Dt.getBucket(c);if(!vt||vt.projection.name!==W.projection.name)continue;const Vt=vt.programConfigurations.get(c.id),cn=d.useProgram(ie?"fillExtrusionPattern":"fillExtrusion",Vt,ze);if(d.terrain){const Wn=d.terrain;if(d.style.terrainSetForDrapingOnly())Wn.setupElevationDraw(Dt,cn,{useMeterToDem:!0});else{if(!vt.enableTerrain)continue;if(Wn.setupElevationDraw(Dt,cn,{useMeterToDem:!0}),br(P,i,at,vt,c,Wn),!vt.centroidVertexBuffer){const pn=cn.attributes.a_centroid_pos;void 0!==pn&&L.vertexAttrib2f(pn,0,0)}}}ie&&(d.context.activeTexture.set(L.TEXTURE0),Dt.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Vt.updatePaintBuffers());const rn=Z.constantOr(null);if(rn&&Dt.imageAtlas){const Wn=Dt.imageAtlas.patternPositions[rn.toString()];Wn&&Vt.setConstantPatternPositions(Wn)}const $t=d.translatePosMatrix(at.projMatrix,Dt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),qn=W.projection.createInversionMatrix(W,at.canonical),Kt=c.paint.get("fill-extrusion-vertical-gradient"),Pn=ie?be($t,d,Kt,ve,Pe,Le,at,Dt,Be,Ae,je,qn):j($t,d,Kt,ve,Pe,Le,at,Be,Ae,je,qn);d.prepareDrawProgram(P,cn,at.toUnwrapped());const gn=[];d.terrain&&gn.push(vt.centroidVertexBuffer),Te&&gn.push(vt.layoutVertexExtBuffer),cn.draw(P,P.gl.TRIANGLES,y,x,D,a.CullFaceMode.backCCW,Pn,c.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,c.paint,d.transform.zoom,Vt,gn)}}function br(d,i,c,p,y,x){const D=[Ae=>{let je=Ae.canonical.x-1,ze=Ae.wrap;return je<0&&(je=(1<<Ae.canonical.z)-1,ze--),new a.OverscaledTileID(Ae.overscaledZ,ze,Ae.canonical.z,je,Ae.canonical.y)},Ae=>{let je=Ae.canonical.x+1,ze=Ae.wrap;return je===1<<Ae.canonical.z&&(je=0,ze++),new a.OverscaledTileID(Ae.overscaledZ,ze,Ae.canonical.z,je,Ae.canonical.y)},Ae=>new a.OverscaledTileID(Ae.overscaledZ,Ae.wrap,Ae.canonical.z,Ae.canonical.x,(0===Ae.canonical.y?1<<Ae.canonical.z:Ae.canonical.y)-1),Ae=>new a.OverscaledTileID(Ae.overscaledZ,Ae.wrap,Ae.canonical.z,Ae.canonical.x,Ae.canonical.y===(1<<Ae.canonical.z)-1?0:Ae.canonical.y+1)],P=Ae=>{const je=i.getSource().minzoom,ze=Dt=>{const vt=i.getTileByID(Dt);if(vt&&vt.hasData())return vt.getBucket(y)},at=[0,-1,1];for(const Dt of at){if(Ae.overscaledZ+Dt<je)continue;const vt=ze(Ae.calculateScaledKey(Ae.overscaledZ+Dt));if(vt)return vt}},L=[0,0,0],W=(Ae,je)=>(L[0]=Math.min(Ae.min.y,je.min.y),L[1]=Math.max(Ae.max.y,je.max.y),L[2]=a.EXTENT-je.min.x>Ae.max.x?je.min.x-a.EXTENT:Ae.max.x,L),Z=(Ae,je)=>(L[0]=Math.min(Ae.min.x,je.min.x),L[1]=Math.max(Ae.max.x,je.max.x),L[2]=a.EXTENT-je.min.y>Ae.max.y?je.min.y-a.EXTENT:Ae.max.y,L),ie=[(Ae,je)=>W(Ae,je),(Ae,je)=>W(je,Ae),(Ae,je)=>Z(Ae,je),(Ae,je)=>Z(je,Ae)],ve=new a.pointGeometry(0,0);let Pe,Le,Be;const Te=(Ae,je,ze,at,Dt)=>{const vt=[[at?ze:Ae,at?Ae:ze,0],[at?ze:je,at?je:ze,0]],Vt=Dt<0?a.EXTENT+Dt:Dt,cn=[at?Vt:(Ae+je)/2,at?(Ae+je)/2:Vt,0];return 0===ze&&Dt<0||0!==ze&&Dt>0?x.getForTilePoints(Be,[cn],!0,Le):vt.push(cn),x.getForTilePoints(c,vt,!0,Pe),Math.max(vt[0][2],vt[1][2],cn[2])/x.exaggeration()};for(let Ae=0;Ae<4;Ae++){const je=(Ae<2?1:5)-Ae,ze=p.borders[Ae];if(0===ze.length)continue;const at=Be=D[Ae](c),Dt=P(at);if(!(Dt&&Dt instanceof a.FillExtrusionBucket&&Dt.enableTerrain)||p.borderDoneWithNeighborZ[Ae]===Dt.canonical.z&&Dt.borderDoneWithNeighborZ[je]===p.canonical.z||(Le=x.findDEMTileFor(at),!Le||!Le.dem))continue;if(!Pe){const rn=x.findDEMTileFor(c);if(!rn||!rn.dem)return;Pe=rn}const vt=Dt.borders[je];let Vt=0;const cn=Dt.borderDoneWithNeighborZ[je]!==p.canonical.z;if(p.canonical.z===Dt.canonical.z){for(let rn=0;rn<ze.length;rn++){const $t=p.featuresOnBorder[ze[rn]],qn=$t.borders[Ae];let Kt;for(;Vt<vt.length&&(Kt=Dt.featuresOnBorder[vt[Vt]],!(Kt.borders[je][1]>qn[0]+3));)cn&&Dt.encodeCentroid(void 0,Kt,!1),Vt++;if(Kt&&Vt<vt.length){const Pn=Vt;let gn=0;for(;!(Kt.borders[je][0]>qn[1]-3)&&(gn++,++Vt!==vt.length);)Kt=Dt.featuresOnBorder[vt[Vt]];if(Kt=Dt.featuresOnBorder[vt[Pn]],$t.intersectsCount()>1||Kt.intersectsCount()>1||1!==gn){1!==gn&&(Vt=Pn),p.encodeCentroid(void 0,$t,!1),cn&&Dt.encodeCentroid(void 0,Kt,!1);continue}const Wn=ie[Ae]($t,Kt),pn=Ae%2?a.EXTENT-1:0;ve.x=Te(Wn[0],Math.min(a.EXTENT-1,Wn[1]),pn,Ae<2,Wn[2]),ve.y=0,p.encodeCentroid(ve,$t,!1),cn&&Dt.encodeCentroid(ve,Kt,!1)}else p.encodeCentroid(void 0,$t,!1)}p.borderDoneWithNeighborZ[Ae]=Dt.canonical.z,p.needsCentroidUpdate=!0,cn&&(Dt.borderDoneWithNeighborZ[je]=p.canonical.z,Dt.needsCentroidUpdate=!0)}else{for(const rn of ze)p.encodeCentroid(void 0,p.featuresOnBorder[rn],!1);if(cn){for(const rn of vt)Dt.encodeCentroid(void 0,Dt.featuresOnBorder[rn],!1);Dt.borderDoneWithNeighborZ[je]=p.canonical.z,Dt.needsCentroidUpdate=!0}p.borderDoneWithNeighborZ[Ae]=Dt.canonical.z,p.needsCentroidUpdate=!0}}(p.needsCentroidUpdate||!p.centroidVertexBuffer&&0!==p.centroidVertexArray.length)&&p.uploadCentroid(d)}const Po=new a.Color(1,0,0,1),Rr=new a.Color(0,1,0,1),po=new a.Color(0,0,1,1),Zo=new a.Color(1,0,1,1),ss=new a.Color(0,1,1,1);function Us(d,i,c){const p=d.context,y=d.transform,x=p.gl,D="globe"===y.projection.name,P=D?["PROJECTION_GLOBE_VIEW"]:null;let L=c.projMatrix;if(D&&a.globeToMercatorTransition(y.zoom)>0){const $t=a.transitionTileAABBinECEF(c.canonical,y),qn=a.globeDenormalizeECEF($t);L=a.multiply(new Float32Array(16),y.globeMatrix,qn),a.multiply(L,y.projMatrix,L)}const W=d.useProgram("debug",null,P),Z=i.getTileByID(c.key);d.terrain&&d.terrain.setupElevationDraw(Z,W);const ie=a.DepthMode.disabled,ve=a.StencilMode.disabled,Pe=d.colorModeForRenderPass();p.activeTexture.set(x.TEXTURE0),d.emptyTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),D?Z._makeGlobeTileDebugBuffers(d.context,y):Z._makeDebugTileBoundsBuffers(d.context,y.projection);const Be=Z._tileDebugBuffer||d.debugBuffer,Te=Z._tileDebugIndexBuffer||d.debugIndexBuffer,Ae=Z._tileDebugSegments||d.debugSegments;W.draw(p,x.LINE_STRIP,ie,ve,Pe,a.CullFaceMode.disabled,Ns(L,a.Color.red),"$debug",Be,Te,Ae,null,null,null,[Z._globeTileDebugBorderBuffer]);const je=Z.latestRawTileData,ze=Math.floor((je&&je.byteLength||0)/1024),at=i.getTile(c).tileSize,Dt=512/Math.min(at,512)*(c.overscaledZ/y.zoom)*.5;let vt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(vt+=` => ${c.overscaledZ}`),vt+=` ${ze}kb`,function($t,qn){$t.initDebugOverlayCanvas();const Kt=$t.debugOverlayCanvas,Pn=$t.context.gl,gn=$t.debugOverlayCanvas.getContext("2d");gn.clearRect(0,0,Kt.width,Kt.height),gn.shadowColor="white",gn.shadowBlur=2,gn.lineWidth=1.5,gn.strokeStyle="white",gn.textBaseline="top",gn.font="bold 36px Open Sans, sans-serif",gn.fillText(qn,5,5),gn.strokeText(qn,5,5),$t.debugOverlayTexture.update(Kt),$t.debugOverlayTexture.bind(Pn.LINEAR,Pn.CLAMP_TO_EDGE)}(d,vt);const Vt=Z._tileDebugTextBuffer||d.debugBuffer,cn=Z._tileDebugTextIndexBuffer||d.quadTriangleIndexBuffer,rn=Z._tileDebugTextSegments||d.debugSegments;W.draw(p,x.TRIANGLES,ie,ve,a.ColorMode.alphaBlended,a.CullFaceMode.disabled,Ns(L,a.Color.transparent,Dt),"$debug",Vt,cn,rn,null,null,null,[Z._globeTileDebugTextBuffer])}function Ys(d,i,c,p){zo(d,0,i+c/2,d.transform.width,c,p)}function as(d,i,c,p){zo(d,i-c/2,0,c,d.transform.height,p)}function zo(d,i,c,p,y,x){const D=d.context,P=D.gl;P.enable(P.SCISSOR_TEST),P.scissor(i*a.exported.devicePixelRatio,c*a.exported.devicePixelRatio,p*a.exported.devicePixelRatio,y*a.exported.devicePixelRatio),D.clear({color:x}),P.disable(P.SCISSOR_TEST)}const ha=a.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:bc}=ha;function ko(d,i,c,p){d.emplaceBack(i,c,p)}class Ta{constructor(i){this.vertexArray=new a.StructArrayLayout3f12,this.indices=new a.StructArrayLayout3ui6,ko(this.vertexArray,-1,-1,1),ko(this.vertexArray,1,-1,1),ko(this.vertexArray,-1,1,1),ko(this.vertexArray,1,1,1),ko(this.vertexArray,-1,-1,-1),ko(this.vertexArray,1,-1,-1),ko(this.vertexArray,-1,1,-1),ko(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,bc),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=a.SegmentVector.simpleSegment(0,0,36,12)}}function Ga(d,i,c,p,y,x){const D=d.gl,P=i.paint.get("sky-atmosphere-color"),L=i.paint.get("sky-atmosphere-halo-color"),W=i.paint.get("sky-atmosphere-sun-intensity"),Z={u_matrix_3f:a.fromMat4(a.create$1(),p),u_sun_direction:y,u_sun_intensity:W,u_color_tint_r:[(Le=P).r,Le.g,Le.b,Le.a],u_color_tint_m:[(Be=L).r,Be.g,Be.b,Be.a],u_luminance:5e-5};var Le,Be;D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+x,i.skyboxTexture,0),c.draw(d,D.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.frontCW,Z,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const ec=a.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Dr{constructor(i){const c=new a.StructArrayLayout5f20;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const p=new a.StructArrayLayout3ui6;p.emplaceBack(0,1,2),p.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(c,ec.members),this.indexBuffer=i.createIndexBuffer(p),this.segments=a.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const zl={symbol:function(d,i,c,p,y){if("translucent"!==d.renderPass)return;const x=a.StencilMode.disabled,D=d.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(P,L,W,Z,ie,ve,Pe){const Le=L.transform,Be="map"===ie,Te="map"===ve;for(const Ae of P){const je=Z.getTile(Ae),ze=je.getBucket(W);if(!ze||!ze.text||!ze.text.segments.get().length)continue;const at=a.evaluateSizeForZoom(ze.textSizeData,Le.zoom),Dt=Ps(Ae,ze.getProjection(),Le),vt=Le.calculatePixelsToTileUnitsMatrix(je),Vt=Yi(Dt,je.tileID.canonical,Te,Be,Le,ze.getProjection(),vt),cn="none"!==W.layout.get("icon-text-fit")&&ze.hasIconData();if(at){const rn=Math.pow(2,Le.zoom-je.tileID.overscaledZ);vn(ze,Be,Te,Pe,a.symbolSize,Le,Vt,Ae,rn,at,cn)}}}(p,d,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),y),0!==c.paint.get("icon-opacity").constantOr(1)&&yi(d,i,c,p,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,D),0!==c.paint.get("text-opacity").constantOr(1)&&yi(d,i,c,p,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,D),i.map.showCollisionBoxes&&($(d,i,c,p,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),$(d,i,c,p,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(d,i,c,p){if("translucent"!==d.renderPass)return;const y=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),D=c.paint.get("circle-stroke-opacity"),P=void 0!==c.layout.get("circle-sort-key").constantOr(1);if(0===y.constantOr(1)&&(0===x.constantOr(1)||0===D.constantOr(1)))return;const L=d.context,W=L.gl,Z=d.transform,ie=d.depthModeForSublayer(0,a.DepthMode.ReadOnly),ve=a.StencilMode.disabled,Pe=d.colorModeForRenderPass(),Le="globe"===Z.projection.name,Be=[a.mercatorXfromLng(Z.center.lng),a.mercatorYfromLat(Z.center.lat)],Te=[];for(let je=0;je<p.length;je++){const ze=p[je],at=i.getTile(ze),Dt=at.getBucket(c);if(!Dt||Dt.projection.name!==Z.projection.name)continue;const vt=Dt.programConfigurations.get(c.id),Vt=$o(c);Le&&Vt.push("PROJECTION_GLOBE_VIEW");const cn=d.useProgram("circle",vt,Vt),rn=Dt.layoutVertexBuffer,$t=Dt.globeExtVertexBuffer,qn=Dt.indexBuffer,Kt=Z.projection.createInversionMatrix(Z,ze.canonical),Pn={programConfiguration:vt,program:cn,layoutVertexBuffer:rn,globeExtVertexBuffer:$t,indexBuffer:qn,uniformValues:Nr(d,ze,at,Kt,Be,c),tile:at};if(P){const gn=Dt.segments.get();for(const Wn of gn)Te.push({segments:new a.SegmentVector([Wn]),sortKey:Wn.sortKey,state:Pn})}else Te.push({segments:Dt.segments,sortKey:0,state:Pn})}P&&Te.sort((je,ze)=>je.sortKey-ze.sortKey);const Ae={useDepthForOcclusion:!Le};for(const je of Te){const{programConfiguration:ze,program:at,layoutVertexBuffer:Dt,globeExtVertexBuffer:vt,indexBuffer:Vt,uniformValues:cn,tile:rn}=je.state,$t=je.segments;d.terrain&&d.terrain.setupElevationDraw(rn,at,Ae),d.prepareDrawProgram(L,at,rn.tileID.toUnwrapped()),at.draw(L,W.TRIANGLES,ie,ve,Pe,a.CullFaceMode.disabled,cn,c.id,Dt,Vt,$t,c.paint,Z.zoom,ze,[vt])}},heatmap:function(d,i,c,p){if(0!==c.paint.get("heatmap-opacity"))if("offscreen"===d.renderPass){const y=d.context,x=y.gl,D=a.StencilMode.disabled,P=new a.ColorMode([x.ONE,x.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(Pe,Le,Be,Te){const Ae=Pe.gl,je=Le.width*Te,ze=Le.height*Te;Pe.activeTexture.set(Ae.TEXTURE1),Pe.viewport.set([0,0,je,ze]);let at=Be.heatmapFbo;if(!at||at&&(at.width!==je||at.height!==ze)){at&&at.destroy();const Dt=Ae.createTexture();Ae.bindTexture(Ae.TEXTURE_2D,Dt),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR),at=Be.heatmapFbo=Pe.createFramebuffer(je,ze,!1),function(vt,Vt,cn,rn,$t,qn){const Kt=vt.gl;Kt.texImage2D(Kt.TEXTURE_2D,0,Kt.RGBA,$t,qn,0,Kt.RGBA,vt.extRenderToTextureHalfFloat?vt.extTextureHalfFloat.HALF_FLOAT_OES:Kt.UNSIGNED_BYTE,null),rn.colorAttachment.set(cn)}(Pe,0,Dt,at,je,ze)}else Ae.bindTexture(Ae.TEXTURE_2D,at.colorAttachment.get()),Pe.bindFramebuffer.set(at.framebuffer)})(y,d,c,"globe"===d.transform.projection.name?.5:.25),y.clear({color:a.Color.transparent});const L=d.transform,W="globe"===L.projection.name,Z=W?["PROJECTION_GLOBE_VIEW"]:null,ie=W?a.CullFaceMode.frontCCW:a.CullFaceMode.disabled,ve=[a.mercatorXfromLng(L.center.lng),a.mercatorYfromLat(L.center.lat)];for(let Pe=0;Pe<p.length;Pe++){const Le=p[Pe];if(i.hasRenderableParent(Le))continue;const Be=i.getTile(Le),Te=Be.getBucket(c);if(!Te||Te.projection.name!==L.projection.name)continue;const Ae=Te.programConfigurations.get(c.id),je=d.useProgram("heatmap",Ae,Z),{zoom:ze}=d.transform;d.terrain&&d.terrain.setupElevationDraw(Be,je),d.prepareDrawProgram(y,je,Le.toUnwrapped());const at=L.projection.createInversionMatrix(L,Le.canonical);je.draw(y,x.TRIANGLES,a.DepthMode.disabled,D,P,ie,Ll(d,Le,Be,at,ve,ze,c.paint.get("heatmap-intensity")),c.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,c.paint,d.transform.zoom,Ae,W?[Te.globeExtVertexBuffer]:null)}y.viewport.set([0,0,d.width,d.height])}else"translucent"===d.renderPass&&(d.context.setColorMode(d.colorModeForRenderPass()),function(y,x){const D=y.context,P=D.gl,L=x.heatmapFbo;if(!L)return;D.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,L.colorAttachment.get()),D.activeTexture.set(P.TEXTURE1);let W=x.colorRampTexture;W||(W=x.colorRampTexture=new a.Texture(D,x.colorRamp,P.RGBA)),W.bind(P.LINEAR,P.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(D,P.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,y.colorModeForRenderPass(),a.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:x.paint.get("heatmap-opacity")},x.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,x.paint,y.transform.zoom)}(d,c))},line:function(d,i,c,p){if("translucent"!==d.renderPass)return;const y=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(0===y.constantOr(1)||0===x.constantOr(1))return;const D=d.depthModeForSublayer(0,a.DepthMode.ReadOnly),P=d.colorModeForRenderPass(),L=d.terrain&&d.terrain.renderingToTexture?1:a.exported.devicePixelRatio,W=c.paint.get("line-dasharray"),Z=W.constantOr(1),ie=c.layout.get("line-cap"),ve=c.paint.get("line-pattern"),Pe=ve.constantOr(1),Le=c.paint.get("line-gradient"),Be=Pe?"linePattern":"line",Te=d.context,Ae=Te.gl,je=(at=>{const Dt=[];ja(at)&&Dt.push("RENDER_LINE_DASH"),at.paint.get("line-gradient")&&Dt.push("RENDER_LINE_GRADIENT");const vt=at.paint.get("line-trim-offset");0===vt[0]&&0===vt[1]||Dt.push("RENDER_LINE_TRIM_OFFSET");const Vt=at.paint.get("line-pattern").constantOr(1),cn=1!==at.paint.get("line-opacity").constantOr(1);return!Vt&&cn&&Dt.push("RENDER_LINE_ALPHA_DISCARD"),Dt})(c);let ze=je.includes("RENDER_LINE_ALPHA_DISCARD");d.terrain&&d.terrain.clipOrMaskOverlapStencilType()&&(ze=!1);for(const at of p){const Dt=i.getTile(at);if(Pe&&!Dt.patternsLoaded())continue;const vt=Dt.getBucket(c);if(!vt)continue;d.prepareDrawTile();const Vt=vt.programConfigurations.get(c.id),cn=d.useProgram(Be,Vt,je),rn=ve.constantOr(null);if(rn&&Dt.imageAtlas){const zn=Dt.imageAtlas.patternPositions[rn.toString()];zn&&Vt.setConstantPatternPositions(zn)}const $t=W.constantOr(null),qn=ie.constantOr(null);if(!Pe&&$t&&qn&&Dt.lineAtlas){const zn=Dt.lineAtlas.getDash($t,qn);zn&&Vt.setConstantPatternPositions(zn)}let[Kt,Pn]=c.paint.get("line-trim-offset");("round"===qn||"square"===qn)&&Kt!==Pn&&(0===Kt&&(Kt-=1),1===Pn&&(Pn+=1));const gn=d.terrain?at.projMatrix:null,Wn=Pe?zs(d,Dt,c,gn,L):Fl(d,Dt,c,gn,vt.lineClipsArray.length,L,[Kt,Pn]);if(Le){const zn=vt.gradients[c.id];let Qn=zn.texture;if(c.gradientVersion!==zn.version){let qt=256;if(c.stepInterpolant){const hn=i.getSource().maxzoom,Ei=at.canonical.z===hn?Math.ceil(1<<d.transform.maxZoom-at.canonical.z):1;qt=a.clamp(a.nextPowerOfTwo(vt.maxLineLength/a.EXTENT*1024*Ei),256,Te.maxTextureSize)}zn.gradient=a.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:qt,image:zn.gradient||void 0,clips:vt.lineClipsArray}),zn.texture?zn.texture.update(zn.gradient):zn.texture=new a.Texture(Te,zn.gradient,Ae.RGBA),zn.version=c.gradientVersion,Qn=zn.texture}Te.activeTexture.set(Ae.TEXTURE1),Qn.bind(c.stepInterpolant?Ae.NEAREST:Ae.LINEAR,Ae.CLAMP_TO_EDGE)}Z&&(Te.activeTexture.set(Ae.TEXTURE0),Dt.lineAtlasTexture.bind(Ae.LINEAR,Ae.REPEAT),Vt.updatePaintBuffers()),Pe&&(Te.activeTexture.set(Ae.TEXTURE0),Dt.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Vt.updatePaintBuffers()),d.prepareDrawProgram(Te,cn,at.toUnwrapped());const pn=zn=>{cn.draw(Te,Ae.TRIANGLES,D,zn,P,a.CullFaceMode.disabled,Wn,c.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,c.paint,d.transform.zoom,Vt,[vt.layoutVertexBuffer2])};if(ze){const zn=d.stencilModeForClipping(at).ref;0===zn&&d.terrain&&Te.clear({stencil:0});const Qn={func:Ae.EQUAL,mask:255};Wn.u_alpha_discard_threshold=.8,pn(new a.StencilMode(Qn,zn,255,Ae.KEEP,Ae.KEEP,Ae.INVERT)),Wn.u_alpha_discard_threshold=0,pn(new a.StencilMode(Qn,zn,255,Ae.KEEP,Ae.KEEP,Ae.KEEP))}else pn(d.stencilModeForClipping(at))}ze&&(d.resetStencilClippingMasks(),d.terrain&&Te.clear({stencil:0}))},fill:function(d,i,c,p){const y=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(0===x.constantOr(1))return;const D=d.colorModeForRenderPass(),P=c.paint.get("fill-pattern"),L=d.opaquePassEnabledForLayer()&&!P.constantOr(1)&&1===y.constantOr(a.Color.transparent).a&&1===x.constantOr(0)?"opaque":"translucent";if(d.renderPass===L){const W=d.depthModeForSublayer(1,"opaque"===d.renderPass?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly);Mr(d,i,c,p,W,D,!1)}if("translucent"===d.renderPass&&c.paint.get("fill-antialias")){const W=d.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,a.DepthMode.ReadOnly);Mr(d,i,c,p,W,D,!0)}},"fill-extrusion":function(d,i,c,p){const y=c.paint.get("fill-extrusion-opacity");if(0!==y&&"translucent"===d.renderPass){const x=new a.DepthMode(d.context.gl.LEQUAL,a.DepthMode.ReadWrite,d.depthRangeFor3D);if(1!==y||c.paint.get("fill-extrusion-pattern").constantOr(1))Ar(d,i,c,p,x,a.StencilMode.disabled,a.ColorMode.disabled),Ar(d,i,c,p,x,d.stencilModeFor3D(),d.colorModeForRenderPass()),d.resetStencilClippingMasks();else{const D=d.colorModeForRenderPass();Ar(d,i,c,p,x,a.StencilMode.disabled,D)}}},hillshade:function(d,i,c,p){if("offscreen"!==d.renderPass&&"translucent"!==d.renderPass)return;const y=d.context,x=d.depthModeForSublayer(0,a.DepthMode.ReadOnly),D=d.colorModeForRenderPass(),P=d.terrain&&d.terrain.renderingToTexture,[L,W]="translucent"!==d.renderPass||P?[{},p]:d.stencilConfigForOverlap(p);for(const Z of W){const ie=i.getTile(Z);if(ie.needsHillshadePrepare&&"offscreen"===d.renderPass)xo(d,ie,c,x,a.StencilMode.disabled,D);else if("translucent"===d.renderPass){const ve=P&&d.terrain?d.terrain.stencilModeForRTTOverlap(Z):L[Z.overscaledZ];is(d,Z,ie,c,x,ve,D)}}y.viewport.set([0,0,d.width,d.height]),d.resetStencilClippingMasks()},raster:function(d,i,c,p,y,x){if("translucent"!==d.renderPass||0===c.paint.get("raster-opacity")||!p.length)return;const D=d.context,P=D.gl,L=i.getSource(),W=d.useProgram("raster"),Z=d.colorModeForRenderPass(),ie=d.terrain&&d.terrain.renderingToTexture,[ve,Pe]=L instanceof ut||ie?[{},p]:d.stencilConfigForOverlap(p),Le=Pe[Pe.length-1].overscaledZ,Be=!d.options.moving;for(const Te of Pe){const Ae=ie?a.DepthMode.disabled:d.depthModeForSublayer(Te.overscaledZ-Le,1===c.paint.get("raster-opacity")?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly,P.LESS),je=Te.toUnwrapped(),ze=i.getTile(Te);if(ie&&(!ze||!ze.hasData()))continue;const at=ie?Te.projMatrix:d.transform.calculateProjMatrix(je,Be),Dt=d.terrain&&ie?d.terrain.stencilModeForRTTOverlap(Te):ve[Te.overscaledZ],vt=x?0:c.paint.get("raster-fade-duration");ze.registerFadeDuration(vt);const Vt=i.findLoadedParent(Te,0),cn=os(ze,Vt,i,d.transform,vt);let rn,$t;d.terrain&&d.terrain.prepareDrawTile();const qn="nearest"===c.paint.get("raster-resampling")?P.NEAREST:P.LINEAR;D.activeTexture.set(P.TEXTURE0),ze.texture.bind(qn,P.CLAMP_TO_EDGE),D.activeTexture.set(P.TEXTURE1),Vt?(Vt.texture.bind(qn,P.CLAMP_TO_EDGE),rn=Math.pow(2,Vt.tileID.overscaledZ-ze.tileID.overscaledZ),$t=[ze.tileID.canonical.x*rn%1,ze.tileID.canonical.y*rn%1]):ze.texture.bind(qn,P.CLAMP_TO_EDGE);const Kt=Jl(at,$t||[0,0],rn||1,cn,c,L instanceof ut?L.perspectiveTransform:[0,0]);if(d.prepareDrawProgram(D,W,je),L instanceof ut)L.boundsBuffer&&L.boundsSegments&&W.draw(D,P.TRIANGLES,Ae,a.StencilMode.disabled,Z,a.CullFaceMode.disabled,Kt,c.id,L.boundsBuffer,d.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:Pn,tileBoundsIndexBuffer:gn,tileBoundsSegments:Wn}=d.getTileBoundsBuffers(ze);W.draw(D,P.TRIANGLES,Ae,Dt,Z,a.CullFaceMode.disabled,Kt,c.id,Pn,gn,Wn)}}d.resetStencilClippingMasks()},background:function(d,i,c,p){const y=c.paint.get("background-color"),x=c.paint.get("background-opacity");if(0===x)return;const D=d.context,P=D.gl,L=d.transform,W=L.tileSize,Z=c.paint.get("background-pattern");if(d.isPatternMissing(Z))return;const ie=!Z&&1===y.a&&1===x&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass!==ie)return;const ve=a.StencilMode.disabled,Pe=d.depthModeForSublayer(0,"opaque"===ie?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly),Le=d.colorModeForRenderPass(),Be=d.useProgram(Z?"backgroundPattern":"background");let Te,Ae=p;Ae||(Te=d.getBackgroundTiles(),Ae=Object.values(Te).map(je=>je.tileID)),Z&&(D.activeTexture.set(P.TEXTURE0),d.imageManager.bind(d.context));for(const je of Ae){const ze=je.toUnwrapped(),at=p?je.projMatrix:d.transform.calculateProjMatrix(ze);d.prepareDrawTile();const Dt=i?i.getTile(je):Te?Te[je.key]:new a.Tile(je,W,L.zoom,d),vt=Z?Nl(at,x,d,Z,{tileID:je,tileSize:W}):xc(at,x,y);d.prepareDrawProgram(D,Be,ze);const{tileBoundsBuffer:Vt,tileBoundsIndexBuffer:cn,tileBoundsSegments:rn}=d.getTileBoundsBuffers(Dt);Be.draw(D,P.TRIANGLES,Pe,ve,Le,a.CullFaceMode.disabled,vt,c.id,Vt,cn,rn)}},sky:function(d,i,c){const p=d.transform,y="mercator"===p.projection.name||"globe"===p.projection.name?1:a.smoothstep(7,8,p.zoom),x=c.paint.get("sky-opacity")*y;if(0===x)return;const D=d.context,P=c.paint.get("sky-type"),L=new a.DepthMode(D.gl.LEQUAL,a.DepthMode.ReadOnly,[0,1]),W=d.frameCounter/1e3%1;"atmosphere"===P?"offscreen"===d.renderPass?c.needsSkyboxCapture(d)&&(function(Z,ie,ve,Pe){const Le=Z.context,Be=Le.gl;let Te=ie.skyboxFbo;if(!Te){Te=ie.skyboxFbo=Le.createFramebuffer(32,32,!1),ie.skyboxGeometry=new Ta(Le),ie.skyboxTexture=Le.gl.createTexture(),Be.bindTexture(Be.TEXTURE_CUBE_MAP,ie.skyboxTexture),Be.texParameteri(Be.TEXTURE_CUBE_MAP,Be.TEXTURE_WRAP_S,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_CUBE_MAP,Be.TEXTURE_WRAP_T,Be.CLAMP_TO_EDGE),Be.texParameteri(Be.TEXTURE_CUBE_MAP,Be.TEXTURE_MIN_FILTER,Be.LINEAR),Be.texParameteri(Be.TEXTURE_CUBE_MAP,Be.TEXTURE_MAG_FILTER,Be.LINEAR);for(let at=0;at<6;++at)Be.texImage2D(Be.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Be.RGBA,32,32,0,Be.RGBA,Be.UNSIGNED_BYTE,null)}Le.bindFramebuffer.set(Te.framebuffer),Le.viewport.set([0,0,32,32]);const Ae=ie.getCenter(Z,!0),je=Z.useProgram("skyboxCapture"),ze=new Float64Array(16);a.identity(ze),a.rotateY(ze,ze,.5*-Math.PI),Ga(Le,ie,je,ze,Ae,0),a.identity(ze),a.rotateY(ze,ze,.5*Math.PI),Ga(Le,ie,je,ze,Ae,1),a.identity(ze),a.rotateX(ze,ze,.5*-Math.PI),Ga(Le,ie,je,ze,Ae,2),a.identity(ze),a.rotateX(ze,ze,.5*Math.PI),Ga(Le,ie,je,ze,Ae,3),a.identity(ze),Ga(Le,ie,je,ze,Ae,4),a.identity(ze),a.rotateY(ze,ze,Math.PI),Ga(Le,ie,je,ze,Ae,5),Le.viewport.set([0,0,Z.width,Z.height])}(d,c),c.markSkyboxValid(d)):"sky"===d.renderPass&&function(Z,ie,ve,Pe,Le){const Be=Z.context,Te=Be.gl,Ae=Z.transform,je=Z.useProgram("skybox");Be.activeTexture.set(Te.TEXTURE0),Te.bindTexture(Te.TEXTURE_CUBE_MAP,ie.skyboxTexture);const ze={u_matrix:Ae.skyboxMatrix,u_sun_direction:ie.getCenter(Z,!1),u_cubemap:0,u_opacity:Pe,u_temporal_offset:Le};Z.prepareDrawProgram(Be,je),je.draw(Be,Te.TRIANGLES,ve,a.StencilMode.disabled,Z.colorModeForRenderPass(),a.CullFaceMode.backCW,ze,"skybox",ie.skyboxGeometry.vertexBuffer,ie.skyboxGeometry.indexBuffer,ie.skyboxGeometry.segment)}(d,c,L,x,W):"gradient"===P&&"sky"===d.renderPass&&function(Z,ie,ve,Pe,Le){const Be=Z.context,Te=Be.gl,Ae=Z.transform,je=Z.useProgram("skyboxGradient");ie.skyboxGeometry||(ie.skyboxGeometry=new Ta(Be)),Be.activeTexture.set(Te.TEXTURE0);let ze=ie.colorRampTexture;ze||(ze=ie.colorRampTexture=new a.Texture(Be,ie.colorRamp,Te.RGBA)),ze.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);const at=(Dt=Ae.skyboxMatrix,vt=ie.getCenter(Z,!1),Vt=ie.paint.get("sky-gradient-radius"),cn=Pe,rn=Le,{u_matrix:Dt,u_color_ramp:0,u_center_direction:vt,u_radius:a.degToRad(Vt),u_opacity:cn,u_temporal_offset:rn});var Dt,vt,Vt,cn,rn;Z.prepareDrawProgram(Be,je),je.draw(Be,Te.TRIANGLES,ve,a.StencilMode.disabled,Z.colorModeForRenderPass(),a.CullFaceMode.backCW,at,"skyboxGradient",ie.skyboxGeometry.vertexBuffer,ie.skyboxGeometry.indexBuffer,ie.skyboxGeometry.segment)}(d,c,L,x,W)},debug:function(d,i,c){for(let p=0;p<c.length;p++)Us(d,i,c[p])},custom:function(d,i,c){const p=d.context,y=c.implementation;if(d.transform.projection.unsupportedLayers&&d.transform.projection.unsupportedLayers.includes("custom"))a.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===d.renderPass){const x=y.prerender;x&&(d.setCustomLayerDefaults(),p.setColorMode(d.colorModeForRenderPass()),x.call(y,p.gl,d.transform.customLayerMatrix()),p.setDirty(),d.setBaseState())}else if("translucent"===d.renderPass){d.setCustomLayerDefaults(),p.setColorMode(d.colorModeForRenderPass()),p.setStencilMode(a.StencilMode.disabled);const x="3d"===y.renderingMode?new a.DepthMode(d.context.gl.LEQUAL,a.DepthMode.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,a.DepthMode.ReadOnly);p.setDepthMode(x),y.render(p.gl,d.transform.customLayerMatrix()),p.setDirty(),d.setBaseState(),p.bindFramebuffer.set(null)}}};class pl{constructor(i,c){this.context=new ee(i),this.transform=c,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=a.SourceCache.maxUnderzooming+a.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ho,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,c){const p=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ua(this,i));const y=this._terrain;this.transform.elevation=p?y:null,y.update(i,this.transform,c)}_updateFog(i){const c=i.fog;if(!c||"globe"===this.transform.projection.name||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,y]=c.getFovAdjustedRange(this.transform._fov);if(p>y)return void(this.transform.fogCullDistSq=null);const x=p+.78*(y-p);this.transform.fogCullDistSq=x*x}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,c){if(this.width=i*a.exported.devicePixelRatio,this.height=c*a.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._layers[p].resize()}setup(){const i=this.context,c=new a.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(a.EXTENT,0),c.emplaceBack(0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,a.posAttributes.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const p=new a.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(a.EXTENT,0),p.emplaceBack(0,a.EXTENT),p.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=i.createVertexBuffer(p,a.posAttributes.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const y=new a.StructArrayLayout2i4;y.emplaceBack(-1,-1),y.emplaceBack(1,-1),y.emplaceBack(-1,1),y.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(y,a.posAttributes.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const x=new a.StructArrayLayout4i8;x.emplaceBack(0,0,0,0),x.emplaceBack(a.EXTENT,0,a.EXTENT,0),x.emplaceBack(0,a.EXTENT,0,a.EXTENT),x.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(x,a.boundsAttributes.members),this.mercatorBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const D=new a.StructArrayLayout3ui6;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(D);const P=new a.StructArrayLayout1ui2;for(const W of[0,1,3,2,0])P.emplaceBack(W);this.debugIndexBuffer=i.createIndexBuffer(P),this.emptyTexture=new a.Texture(i,new a.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=a.create();const L=this.context.gl;this.stencilClearMode=new a.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(a.window.performance.now()),this.atmosphereBuffer=new Dr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,c.TRIANGLES,a.DepthMode.disabled,this.stencilClearMode,a.ColorMode.disabled,a.CullFaceMode.disabled,Ma(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,c,p){if(!c||this.currentStencilSource===c.id||!i.isTileClipped()||!p||0===p.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let P=!1;for(const L of p)if(void 0===this._tileClippingMaskIDs[L.key]){P=!0;break}if(!P)return}this.currentStencilSource=c.id;const y=this.context,x=y.gl;this.nextStencilID+p.length>256&&this.clearStencil(),y.setColorMode(a.ColorMode.disabled),y.setDepthMode(a.DepthMode.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of p){const L=c.getTile(P),W=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,{tileBoundsBuffer:Z,tileBoundsIndexBuffer:ie,tileBoundsSegments:ve}=this.getTileBoundsBuffers(L);D.draw(y,x.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:x.ALWAYS,mask:0},W,255,x.KEEP,x.KEEP,x.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,Ma(P.projMatrix),"$clipping",Z,ie,ve)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new a.StencilMode({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const c=this.context.gl;return new a.StencilMode({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((D,P)=>P.overscaledZ-D.overscaledZ),y=p[p.length-1].overscaledZ,x=p[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const D={};for(let P=0;P<x;P++)D[P+y]=new a.StencilMode({func:c.GEQUAL,mask:255},P+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[D,p]}return[{[y]:a.StencilMode.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new a.ColorMode([i.CONSTANT_COLOR,i.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?a.ColorMode.unblended:a.ColorMode.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return a.DepthMode.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new a.DepthMode(p||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const p=this.style.order,y=this.style._sourceCaches;for(const L in y){const W=y[L];W.used&&W.prepare(this.context)}const x={},D={},P={};for(const L in y){const W=y[L];x[L]=W.getVisibleCoordinates(),D[L]=x[L].slice().reverse(),P[L]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<p.length;L++)if(this.style._layers[p[L]].is3D()){this.opaquePassCutoff=L;break}if(this.terrain&&(this.terrain.updateTileBinding(P),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new a.GlobeSharedBuffers(this.context)),a.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const L of p){const W=this.style._layers[L],Z=i._getLayerSourceCache(W);if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const ie=Z?D[Z.id]:void 0;("custom"===W.type||W.isSky()||ie&&ie.length)&&this.renderLayer(this,Z,W,ie)}if(this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:c.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[p[this.currentLayer]],W=i._getLayerSourceCache(L);if(L.isSky())continue;const Z=W?D[W.id]:void 0;this._renderTileClippingMasks(L,W,Z),this.renderLayer(this,W,L,Z)}if(this.style.fog&&this.transform.projection.supportsFog&&function(L,W){const Z=L.context,ie=Z.gl,ve=L.transform,Pe=new a.DepthMode(ie.LEQUAL,a.DepthMode.ReadOnly,[0,1]),Le=L.useProgram("globeAtmosphere",null,"globe"===ve.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Be=a.globeToMercatorTransition(ve.zoom),Te=W.properties.get("color").toArray01(),Ae=W.properties.get("high-color").toArray01(),je=W.properties.get("space-color").toArray01PremultipliedAlpha(),ze=a.identity$1([]);a.rotateY$1(ze,ze,-a.degToRad(ve._center.lng)),a.rotateX$1(ze,ze,a.degToRad(ve._center.lat)),a.rotateZ$1(ze,ze,ve.angle),a.rotateX$1(ze,ze,-ve._pitch);const at=a.fromQuat(new Float32Array(16),ze),Dt=a.mapValue(W.properties.get("star-intensity"),0,1,0,.25),Vt=a.mapValue(W.properties.get("horizon-blend"),0,1,5e-4,.25),cn=a.globeUseCustomAntiAliasing(L,Z,ve)&&5e-4===Vt?ve.worldSize/(2*Math.PI*1.025)-1:ve.globeRadius,rn=L.frameCounter/1e3%1,$t=a.length(ve.globeCenterInViewSpace),qn=Math.sqrt(Math.pow($t,2)-Math.pow(cn,2)),Kt=Math.acos(qn/$t),Pn={u_frustum_tl:ve.frustumCorners.TL,u_frustum_tr:ve.frustumCorners.TR,u_frustum_br:ve.frustumCorners.BR,u_frustum_bl:ve.frustumCorners.BL,u_horizon:ve.frustumCorners.horizon,u_transition:Be,u_fadeout_range:Vt,u_color:Te,u_high_color:Ae,u_space_color:je,u_star_intensity:Dt,u_star_size:5*a.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:rn,u_horizon_angle:Kt,u_rotation_matrix:at};L.prepareDrawProgram(Z,Le);const gn=L.atmosphereBuffer;gn&&Le.draw(Z,ie.TRIANGLES,Pe,a.StencilMode.disabled,a.ColorMode.alphaBlended,a.CullFaceMode.backCW,Pn,"skybox",gn.vertexBuffer,gn.indexBuffer,gn.segments)}(this,this.style.fog),this.renderPass="sky",(a.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const L=this.style._layers[p[this.currentLayer]],W=i._getLayerSourceCache(L);L.isSky()&&this.renderLayer(this,W,L,W?D[W.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;){const L=this.style._layers[p[this.currentLayer]],W=i._getLayerSourceCache(L);if(L.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(L)){if(L.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Z=W?("symbol"===L.type?P:D)[W.id]:void 0;this._renderTileClippingMasks(L,W,W?x[W.id]:void 0),this.renderLayer(this,W,L,Z),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let L=null;a.values(this.style._layers).forEach(W=>{const Z=i._getLayerSourceCache(W);Z&&!W.isHidden(this.transform.zoom)&&(!L||L.getSource().maxzoom<Z.getSource().maxzoom)&&(L=Z)}),L&&this.options.showTileBoundaries&&zl.debug(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const W=L.transform.padding;Ys(L,L.transform.height-(W.top||0),3,Po),Ys(L,W.bottom||0,3,Rr),as(L,W.left||0,3,po),as(L,L.transform.width-(W.right||0),3,Zo);const Z=L.transform.centerPoint;var ie,ve,Pe,Le;zo(ie=L,(ve=Z.x)-1,(Pe=L.transform.height-Z.y)-10,2,20,Le=ss),zo(ie,ve-10,Pe-1,20,2,Le)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(a.window.performance.now()),this.saveCanvasCopy())}}renderLayer(i,c,p,y){p.isHidden(this.transform.zoom)||("background"===p.type||"sky"===p.type||"custom"===p.type||y&&y.length)&&(this.id=p.id,this.gpuTimingStart(p),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(p.type)||zl[p.type](i,c,p,y,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),p.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,p.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,c=i.createQueryEXT();this.deferredRenderGpuTimeQueries.push(c),i.beginQueryEXT(i.TIME_ELAPSED_EXT,c)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const c={};for(const p in i){const y=i[p],x=this.context.extTimerQuery,D=x.getQueryObjectEXT(y.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(y.query),c[p]=D}return c}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.extTimerQuery;let p=0;for(const y of i)p+=c.getQueryObjectEXT(y,c.QUERY_RESULT_EXT)/1e6,c.deleteQueryEXT(y);return p}translatePosMatrix(i,c,p,y,x){if(!p[0]&&!p[1])return i;const D=x?"map"===y?this.transform.angle:0:"viewport"===y?-this.transform.angle:0;if(D){const W=Math.sin(D),Z=Math.cos(D);p=[p[0]*Z-p[1]*W,p[0]*W+p[1]*Z]}const P=[x?p[0]:Nn(c,p[0],this.transform.zoom),x?p[1]:Nn(c,p[1],this.transform.zoom),0],L=new Float32Array(16);return a.translate(L,i,P),L}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){return null===i||void 0!==i&&!this.imageManager.getPattern(i.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,c=this.terrain&&0===this.terrain.exaggeration(),p=this.style&&this.style.fog,y=[];return this.terrainRenderModeElevated()&&y.push("TERRAIN"),"globe"===this.transform.projection.name&&y.push("GLOBE"),c&&y.push("ZERO_EXAGGERATION"),p&&!i&&0!==p.getOpacity(this.transform.pitch)&&y.push("FOG"),i&&y.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&y.push("OVERDRAW_INSPECTOR"),y}useProgram(i,c,p){this.cache=this.cache||{};const y=p||[],x=this.currentGlobalDefines().concat(y),D=jr.cacheKey(ca[i],i,x,c);return this.cache[D]||(this.cache[D]=new jr(this.context,i,ca[i],c,z[i],x)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,c,p){if(this.terrain&&this.terrain.renderingToTexture)return;const y=this.style.fog;if(y){const x=y.getOpacity(this.transform.pitch),D=((P,L,W,Z,ie,ve,Pe,Le,Be,Te,Ae)=>{const je=P.transform,ze=L.properties.get("color").toArray01();ze[3]=Z;const at=P.frameCounter/1e3%1;return{u_fog_matrix:W?je.calculateFogTileMatrix(W):P.identityMat,u_fog_range:L.getFovAdjustedRange(je._fov),u_fog_color:ze,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:at,u_frustum_tl:ie,u_frustum_tr:ve,u_frustum_br:Pe,u_frustum_bl:Le,u_globe_pos:Be,u_globe_radius:Te,u_viewport:Ae,u_globe_transition:a.globeToMercatorTransition(je.zoom),u_is_globe:+("globe"===je.projection.name)}})(this,y,p,x,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.exported.devicePixelRatio,this.transform.height*a.exported.devicePixelRatio]);c.setFogUniformValues(i,D)}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,c=i.createTexture();return i.bindTexture(i.TEXTURE_2D,c),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&0!==i.getOpacity(this.transform.pitch)}getBackgroundTiles(){const i=this._backgroundTiles,c=this._backgroundTiles={},p=this.transform.coveringTiles({tileSize:512});for(const y of p)c[y.key]=i[y.key]||new a.Tile(y,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}}class Ul{constructor(i=0,c=0,p=0,y=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=y}interpolate(i,c,p){return null!=c.top&&null!=i.top&&(this.top=a.number(i.top,c.top,p)),null!=c.bottom&&null!=i.bottom&&(this.bottom=a.number(i.bottom,c.bottom,p)),null!=c.left&&null!=i.left&&(this.left=a.number(i.left,c.left,p)),null!=c.right&&null!=i.right&&(this.right=a.number(i.right,c.right,p)),this}getCenter(i,c){const p=a.clamp((this.left+i-this.right)/2,0,i),y=a.clamp((this.top+c-this.bottom)/2,0,c);return new a.pointGeometry(p,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ul(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function $a(d,i){const c=a.getColumn(d,3);a.fromQuat(d,i),a.setColumn(d,3,c)}function ml(d,i){const c=a.identity$1([]);return a.rotateZ$1(c,c,-i),a.rotateX$1(c,c,-d),c}function wc(d,i){const c=[d[0],d[1],0],p=[i[0],i[1],0];if(a.length(c)>=1e-15){const D=a.normalize([],c);a.scale$2(p,D,a.dot(p,D)),i[0]=p[0],i[1]=p[1]}const y=a.cross([],i,d);if(a.len(y)<1e-15)return null;const x=Math.atan2(-y[1],y[0]);return ml(Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2]),x)}class X{constructor(i,c){this.position=i,this.orientation=c}get position(){return this._position}set position(i){if(i){const c=i instanceof a.MercatorCoordinate?i:new a.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(c.x=a.wrap(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(i,c){if(this.orientation=null,!this.position)return;const p=this._elevation?this._elevation.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(i)):0,y=this.position,x=a.MercatorCoordinate.fromLngLat(i,p),D=[x.x-y.x,x.y-y.y,x.z-y.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=wc(D,c)}setPitchBearing(i,c){this.orientation=ml(a.degToRad(i),a.degToRad(-c))}}class M{constructor(i,c){this._transform=a.identity([]),this.orientation=c,this.position=i}get mercatorPosition(){const i=this.position;return new a.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=a.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var c;i&&a.setColumn(this._transform,3,[(c=i)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||a.identity$1([]),i&&$a(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,c){this._orientation=ml(i,c),$a(this._transform,this._orientation)}forward(){const i=a.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=a.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=a.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,c){const p=new Float64Array(16);return a.invert(p,this.getWorldToCamera(i,c)),p}getWorldToCameraPosition(i,c,p){const y=this.position;a.scale$2(y,y,-i);const x=new Float64Array(16);return a.fromScaling(x,[p,p,p]),a.translate(x,x,y),x[10]*=c,x}getWorldToCamera(i,c){const p=new Float64Array(16),y=new Float64Array(4),x=this.position;return a.conjugate(y,this._orientation),a.scale$2(x,x,-i),a.fromQuat(p,y),a.translate(p,p,x),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=c,p[9]*=c,p[10]*=c,p[11]*=c,p}getCameraToClipPerspective(i,c,p,y){const x=new Float64Array(16);return a.perspective(x,i,c,p,y),x}getDistanceToElevation(i,c=!1){const p=0===i?0:a.mercatorZfromAltitude(i,c?a.latFromMercatorY(this.position[1]):this.position[1]),y=this.forward();return(p-this.position[2])/y[2]}clone(){return new M([...this.position],[...this.orientation])}}function S(d,i){const c=ue(d.projection,d.zoom,d.width,d.height),p=function(x,D,P,L,W){const Z=new a.LngLat(P.lng-180*Re,P.lat),ie=new a.LngLat(P.lng+180*Re,P.lat),ve=x.project(Z.lng,Z.lat),Pe=x.project(ie.lng,ie.lat),Le=-Math.atan2(Pe.y-ve.y,Pe.x-ve.x),Be=a.MercatorCoordinate.fromLngLat(P);Be.y=a.clamp(Be.y,-.999975,.999975);const Te=Be.toLngLat(),Ae=x.project(Te.lng,Te.lat),je=a.MercatorCoordinate.fromLngLat(Te);je.x+=Re;const ze=je.toLngLat(),at=x.project(ze.lng,ze.lat),Dt=Rt(at.x-Ae.x,at.y-Ae.y,Le),vt=a.MercatorCoordinate.fromLngLat(Te);vt.y+=Re;const Vt=vt.toLngLat(),cn=x.project(Vt.lng,Vt.lat),rn=Rt(cn.x-Ae.x,cn.y-Ae.y,Le),$t=Math.abs(Dt.x)/Math.abs(rn.y),qn=a.identity([]);a.rotateZ(qn,qn,-Le*(1-(W?0:L)));const Kt=a.identity([]);return a.scale(Kt,Kt,[1,1-(1-$t)*L,1]),Kt[4]=-rn.x/rn.y*L,a.rotateZ(Kt,Kt,Le),a.multiply(Kt,qn,Kt),Kt}(d.projection,0,d.center,c,i),y=G(d);return a.scale(p,p,[y,y,1]),p}function G(d){const i=d.projection,c=ue(d.projection,d.zoom,d.width,d.height),p=Pt(i,d.center),y=Pt(i,a.LngLat.convert(i.center));return Math.pow(2,p*c+(1-c)*y)}function ue(d,i,c,p,y=1/0){const x=d.range;if(!x)return 0;const D=Math.min(y,Math.max(c,p)),P=Math.log(D/1024)/Math.LN2;return a.smoothstep(x[0]+P,x[1]+P,i)}const Re=1/4e4;function Pt(d,i){const c=a.clamp(i.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),p=new a.LngLat(i.lng-180*Re,c),y=new a.LngLat(i.lng+180*Re,c),x=d.project(p.lng,c),D=d.project(y.lng,c),P=a.MercatorCoordinate.fromLngLat(p),L=a.MercatorCoordinate.fromLngLat(y),W=D.x-x.x,Z=D.y-x.y,ie=L.x-P.x,ve=L.y-P.y,Pe=Math.sqrt((ie*ie+ve*ve)/(W*W+Z*Z));return Math.log(Pe)/Math.LN2}function Rt(d,i,c){const p=Math.cos(c),y=Math.sin(c);return{x:d*p-i*y,y:d*y+i*p}}class ln{constructor(i,c,p,y,x,D,P){this.tileSize=512,this._renderWorldCopies=void 0===x||x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=y??60,this.setProjection(D),this.setMaxBounds(P),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ul,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new M,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const i=new ln(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i,c=!1){const p=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||p)&&this._updateCameraOnTerrain(),(i||p)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return a.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=a.getProjection(this.projectionOptions);const p=!he(c,this.getProjection());return p&&this._calcMatrices(),this.mercatorFromTransition=!1,p}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.getProjection({name:"mercator"});const c=i!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return a.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const c=-i*Math.PI/180;var p,y,x,D,P,L,W,Z,ie,ve;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(p=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),y=this.rotationMatrix,D=this.angle,P=(x=this.rotationMatrix)[0],L=x[1],W=x[2],Z=x[3],ie=Math.sin(D),ve=Math.cos(D),y[0]=P*ve+W*ie,y[1]=L*ve+Z*ie,y[2]=P*-ie+W*ve,y[3]=L*-ie+Z*ve)}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=a.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=a.degToRad(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let y=0,x=0;for(let D=0;D<c.length;D++){const P=new a.pointGeometry(c[D][0]*this.width,p+c[D][1]*(this.height-p)),L=i.pointCoordinate(P);if(!L)continue;const W=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);y+=L[3]*W,x+=W}return 0===x?NaN:y/x}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const i=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),p=this.pixelsPerMeter/this.worldSize*c,y=this._mercatorZfromZoom(i),x=this._mercatorZfromZoom(this._maxZoom),D=Math.max(y-p,x);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[c.x,c.y,c.z]:[i.x,i.y,i.z];const y=a.length(a.sub([],this._camera.position,p));return a.clamp(this._zoomFromMercatorZ(y),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let c=!1;if(i.orientation&&!a.exactEquals(i.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];a.exactEquals$1(p,this._camera.position)||(this._setCameraPosition(p),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,c=new X;return c.position=new a.MercatorCoordinate(i[0],i[1],i[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(i){if(!a.length$1(i))return!1;a.normalize$1(i,i);const c=a.transformQuat([],[0,0,-1],i),p=a.transformQuat([],[0,-1,0],i);if(p[2]<0)return!1;const y=wc(c,p);return!!y&&(this._camera.orientation=y,!0)}_setCameraPosition(i){const c=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,y=this.cameraToCenterDistance;i[2]=a.clamp(i[2],y/p,y/c),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new a.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const p=this.pointCoordinate(new a.pointGeometry(0,0)),y=this.pointCoordinate(new a.pointGeometry(this.width,0)),x=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),D=this.pointCoordinate(new a.pointGeometry(0,this.height)),P=Math.floor(Math.min(p.x,y.x,x.x,D.x)),L=Math.floor(Math.max(p.x,y.x,x.x,D.x)),W=1;for(let Z=P-W;Z<=L+W;Z++)0!==Z&&c.push(new a.UnwrappedTileID(Z,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const p=c,y=this.elevation&&!i.isTerrainDEM,x="mercator"===this.projection.name;if(void 0!==i.minzoom&&c<i.minzoom)return[];void 0!==i.maxzoom&&c>i.maxzoom&&(c=i.maxzoom);const D=this.locationCoordinate(this.center),P=this.center.lat,L=1<<c,W=[L*D.x,L*D.y,0],Z="globe"===this.projection.name,ie=!Z,ve=a.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,ie),Pe=Z?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Le=L*a.mercatorZfromAltitude(1,this.center.lat),Be=this._camera.position[2]/a.mercatorZfromAltitude(1,this.center.lat),Te=[L*Pe.x,L*Pe.y,Be*(ie?1:Le)],Ae=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),je=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?c:0,ze=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,at=i.isTerrainDEM?-ze:this._elevation?this._elevation.getMinElevationBelowMSL():0,Dt=this.projection.isReprojectedInTileSpace?G(this):1,vt=pn=>{const Qn=new a.MercatorCoordinate(pn.x+25e-6,pn.y,pn.z),qt=new a.MercatorCoordinate(pn.x,pn.y+25e-6,pn.z),hn=pn.toLngLat(),Ei=Qn.toLngLat(),Oi=qt.toLngLat(),Ci=this.locationCoordinate(hn),Vi=this.locationCoordinate(Ei),sr=this.locationCoordinate(Oi),Si=Math.hypot(Vi.x-Ci.x,Vi.y-Ci.y),gi=Math.hypot(sr.x-Ci.x,sr.y-Ci.y);return Math.sqrt(Si*gi)*Dt/25e-6},Vt=pn=>{const zn=ze,Qn=at;return{aabb:a.tileAABB(this,L,0,0,0,pn,Qn,zn,this.projection),zoom:0,x:0,y:0,minZ:Qn,maxZ:zn,wrap:pn,fullyVisible:!1}},cn=[];let rn=[];const $t=c,qn=i.reparseOverscaled?p:c,Kt=pn=>pn*pn,Pn=Kt((Be-this._centerAltitude)*Le),gn=pn=>{if(!this._elevation||!pn.tileID||!x)return;const zn=this._elevation.getMinMaxForTile(pn.tileID),Qn=pn.aabb;zn?(Qn.min[2]=zn.min,Qn.max[2]=zn.max,Qn.center[2]=(Qn.min[2]+Qn.max[2])/2):(pn.shouldSplit=Wn(pn),pn.shouldSplit||(Qn.min[2]=Qn.max[2]=Qn.center[2]=this._centerAltitude))},Wn=pn=>{if(pn.zoom<je)return!0;if(pn.zoom===$t)return!1;if(null!=pn.shouldSplit)return pn.shouldSplit;const zn=pn.aabb.distanceX(Te),Qn=pn.aabb.distanceY(Te);let qt=Pn,hn=1;if(Z){qt=Kt(pn.aabb.distanceZ(Te));const Ci=Math.pow(2,pn.zoom),Vi=a.latFromMercatorY((pn.y+1)/Ci),sr=a.latFromMercatorY(pn.y/Ci),Si=Math.min(Math.max(P,Vi),sr),gi=a.circumferenceAtLatitude(Si)/a.circumferenceAtLatitude(P);if(hn=Si===P?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,gi/this._mercatorScaleRatio),this.zoom<=a.GLOBE_ZOOM_THRESHOLD_MIN&&pn.zoom===$t-1&&gi>=.9)return!0}else if(y&&(qt=Kt(pn.aabb.distanceZ(Te)*Le)),this.projection.isReprojectedInTileSpace&&p<=5){const Ci=Math.pow(2,pn.zoom),Vi=vt(new a.MercatorCoordinate((pn.x+.5)/Ci,(pn.y+.5)/Ci));hn=Vi>.85?1:Vi}const Ei=zn*zn+Qn*Qn+qt;return Ei<Kt((1<<$t-pn.zoom)*Ae*hn*((Ci,Vi)=>{if(Vi*Kt(.707)<Ci)return 1;const sr=Math.sqrt(Vi/Ci);return sr/(1.4144271570014144+(Math.pow(1.1,sr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(qt,Pn),Ei))};if(this.renderWorldCopies)for(let pn=1;pn<=3;pn++)cn.push(Vt(-pn)),cn.push(Vt(pn));for(cn.push(Vt(0));cn.length>0;){const pn=cn.pop(),zn=pn.x,Qn=pn.y;let qt=pn.fullyVisible;if(!qt){const hn=pn.aabb.intersects(ve);if(0===hn)continue;qt=2===hn}if(pn.zoom!==$t&&Wn(pn))for(let hn=0;hn<4;hn++){const Ei=(zn<<1)+hn%2,Oi=(Qn<<1)+(hn>>1),Ci={aabb:x?pn.aabb.quadrant(hn):a.tileAABB(this,L,pn.zoom+1,Ei,Oi,pn.wrap,pn.minZ,pn.maxZ,this.projection),zoom:pn.zoom+1,x:Ei,y:Oi,wrap:pn.wrap,fullyVisible:qt,tileID:void 0,shouldSplit:void 0,minZ:pn.minZ,maxZ:pn.maxZ};y&&!Z&&(Ci.tileID=new a.OverscaledTileID(pn.zoom+1===$t?qn:pn.zoom+1,pn.wrap,pn.zoom+1,Ei,Oi),gn(Ci)),cn.push(Ci)}else{const hn=pn.zoom===$t?qn:pn.zoom;if(i.minzoom&&i.minzoom>hn)continue;const Ei=W[0]-(.5+zn+(pn.wrap<<pn.zoom))*(1<<c-pn.zoom),Oi=W[1]-.5-Qn,Ci=pn.tileID?pn.tileID:new a.OverscaledTileID(hn,pn.wrap,pn.zoom,zn,Qn);rn.push({tileID:Ci,distanceSq:Ei*Ei+Oi*Oi})}}if(this.fogCullDistSq){const pn=this.fogCullDistSq,zn=this.horizonLineFromTop();rn=rn.filter(Qn=>{const qt=[0,0,0,1],hn=[a.EXTENT,a.EXTENT,0,1],Ei=this.calculateFogTileMatrix(Qn.tileID.toUnwrapped());a.transformMat4$1(qt,qt,Ei),a.transformMat4$1(hn,hn,Ei);const Oi=a.getAABBPointSquareDist(qt,hn);if(0===Oi)return!0;let Ci=!1;const Vi=this._elevation;if(Vi&&Oi>pn&&0!==zn){const sr=this.calculateProjMatrix(Qn.tileID.toUnwrapped());let Si;i.isTerrainDEM||(Si=Vi.getMinMaxForTile(Qn.tileID)),Si||(Si={min:at,max:ze});const gi=a.furthestTileCorner(this.rotation),$r=[gi[0]*a.EXTENT,gi[1]*a.EXTENT,Si.max];a.transformMat4($r,$r,sr),Ci=(1-$r[1])*this.height*.5<zn}return Oi<pn||Ci})}return rn.sort((pn,zn)=>pn.distanceSq-zn.distanceSq).map(pn=>pn.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=a.clamp(i.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),p=this.projection.project(i.lng,c);return new a.pointGeometry(p.x*this.worldSize,p.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(i,c){let p,y;const x=this.centerPoint;if("globe"===this.projection.name){const P=this.worldSize;p=(c.x-x.x)/P,y=(c.y-x.y)/P}else{const P=this.pointCoordinate(c),L=this.pointCoordinate(x);p=P.x-L.x,y=P.y-L.y}const D=this.locationCoordinate(i);this.setLocation(new a.MercatorCoordinate(D.x-p,D.y-y))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,c){const p=c?a.mercatorZfromAltitude(c,i.lat):void 0,y=this.projection.project(i.lng,i.lat);return new a.MercatorCoordinate(y.x,y.y,p)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,c){const p=c??this._centerAltitude,y=[i.x,i.y,0,1],x=[i.x,i.y,1,1];a.transformMat4$1(y,y,this.pixelMatrixInverse),a.transformMat4$1(x,x,this.pixelMatrixInverse);const D=x[3];a.scale$1(y,y,1/y[3]),a.scale$1(x,x,1/D);const P=y[2],L=x[2];return{p0:y,p1:x,t:P===L?0:(p-P)/(L-P)}}screenPointToMercatorRay(i){const c=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return a.transformMat4$1(c,c,this.pixelMatrixInverse),a.transformMat4$1(p,p,this.pixelMatrixInverse),a.scale$1(c,c,1/c[3]),a.scale$1(p,p,1/p[3]),c[2]=a.mercatorZfromAltitude(c[2],this._center.lat)*this.worldSize,p[2]=a.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,a.scale$1(c,c,1/this.worldSize),a.scale$1(p,p,1/this.worldSize),new a.Ray([c[0],c[1],c[2]],a.normalize([],a.sub([],p,c)))}rayIntersectionCoordinate(i){const{p0:c,p1:p,t:y}=i,x=a.mercatorZfromAltitude(c[2],this._center.lat),D=a.mercatorZfromAltitude(p[2],this._center.lat);return new a.MercatorCoordinate(a.number(c[0],p[0],y)/this.worldSize,a.number(c[1],p[1],y)/this.worldSize,a.number(x,D,y))}pointCoordinate(i,c=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,c)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let c=this.projection.pointCoordinate3D(this,i.x,i.y);if(c)return new a.MercatorCoordinate(c[0],c[1],c[2]);let p=0,y=this.horizonLineFromTop();if(i.y>y)return this.pointCoordinate(i);const x=.02*y,D=i.clone();for(let P=0;P<10&&y-p>x;P++){D.y=a.number(p,y,.66);const L=this.projection.pointCoordinate3D(this,D.x,D.y);L?(y=D.y,c=L):p=D.y}return c?new a.MercatorCoordinate(c[0],c[1],c[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}_coordinatePoint(i,c){const p=c&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,y=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return a.transformMat4$1(y,y,this.pixelMatrix),y[3]>0?new a.pointGeometry(y[0]/y[3],y[1]/y[3]):new a.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:i,left:c}=this._edgeInsets,p=this.height-this._edgeInsets.bottom,y=this.width-this._edgeInsets.right,x=this.pointCoordinate3D(new a.pointGeometry(c,i)),D=this.pointCoordinate3D(new a.pointGeometry(y,i)),P=this.pointCoordinate3D(new a.pointGeometry(y,p)),L=this.pointCoordinate3D(new a.pointGeometry(c,p));let W=Math.min(x.x,L.x),Z=Math.max(D.x,P.x),ie=Math.min(x.y,D.y),ve=Math.max(L.y,P.y);const Pe=Math.pow(2,-this.zoom)/16,Le=(vt,Vt,cn,rn)=>{const $t=(vt+cn)/2,qn=(Vt+rn)/2,Kt=new a.pointGeometry($t,qn),Pn=this.pointCoordinate3D(Kt),gn=Math.max(0,W-Pn.x,ie-Pn.y,Pn.x-Z,Pn.y-ve);W=Math.min(W,Pn.x),Z=Math.max(Z,Pn.x),ie=Math.min(ie,Pn.y),ve=Math.max(ve,Pn.y),gn>Pe&&(Le(vt,Vt,$t,qn),Le($t,qn,cn,rn))};Le(c,i,y,i),Le(y,i,y,p),Le(y,p,c,p),Le(c,p,c,i);const[Be,Te]=a.polesInViewport(this),Ae=Be||Te,je=Be?90:a.latFromMercatorY(ie),ze=Ae?180:a.lngFromMercatorX(Z),at=Te?-90:a.latFromMercatorY(ve),Dt=Ae?-180:a.lngFromMercatorX(W);return new a.LngLatBounds(new a.LngLat(Dt,at),new a.LngLat(ze,je))}_getBounds(i,c){if("globe"===this.projection.name)return this._getGlobeBounds();const p=new a.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),y=new a.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),x=new a.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),D=new a.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let P=this.pointCoordinate(p,i),L=this.pointCoordinate(y,i);const W=this.pointCoordinate(x,c),Z=this.pointCoordinate(D,c),ie=(ve,Pe)=>(Pe.y-ve.y)/(Pe.x-ve.x);return P.y>1&&L.y>=0?P=new a.MercatorCoordinate((1-Z.y)/ie(Z,P)+Z.x,1):P.y<0&&L.y<=1&&(P=new a.MercatorCoordinate(-Z.y/ie(Z,P)+Z.x,0)),L.y>1&&P.y>=0?L=new a.MercatorCoordinate((1-W.y)/ie(W,L)+W.x,1):L.y<0&&P.y<=1&&(L=new a.MercatorCoordinate(-W.y/ie(W,L)+W.x,0)),(new a.LngLatBounds).extend(this.coordinateLocation(P)).extend(this.coordinateLocation(L)).extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(W))}_getBounds3D(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBounds(0,0);const c=i.visibleDemTiles.reduce((p,y)=>{if(y.dem){const x=y.dem.tree;p.min=Math.min(p.min,x.minimums[0]),p.max=Math.max(p.max,x.maximums[0])}return p},{min:Number.MAX_VALUE,max:0});return this._getBounds(c.min*i.exaggeration(),c.max*i.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(i=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,p=this.height/2-c*(1-this._horizonShift);return i?Math.max(0,p):p}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-a.MAX_MERCATOR_LATITUDE,this.maxLat=a.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=a.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=a.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=a.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,c){return this.projection.createTileMatrix(this,c,i)}calculateDistanceTileData(i){const c=i.key,p=this._distanceTileDataCache;if(p[c])return p[c];const y=i.canonical,x=1/this.height,D=this.cameraWorldSize,P=D/this.zoomScale(y.z),L=(y.x+Math.pow(2,y.z)*i.wrap)*P,W=y.y*P,Z=this.point;Z.x*=D/this.worldSize,Z.y*=D/this.worldSize;const ie=this.angle,ve=Math.sin(-ie),Pe=-Math.cos(-ie);return p[c]={bearing:[ve,Pe],center:[(Z.x-L)*x,(Z.y-W)*x],scale:P/a.EXTENT*x},p[c]}calculateFogTileMatrix(i){const c=i.key,p=this._fogTileMatrixCache;if(p[c])return p[c];const y=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return a.multiply(y,this.worldToFogMatrix,y),p[c]=new Float32Array(y),p[c]}calculateProjMatrix(i,c=!1){const p=i.key,y=c?this._alignedProjMatrixCache:this._projMatrixCache;if(y[p])return y[p];const x=this.calculatePosMatrix(i,this.worldSize);return a.multiply(x,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:c?this.alignedProjMatrix:this.projMatrix,x),y[p]=new Float32Array(x),y[p]}calculatePixelsToTileUnitsMatrix(i){const c=i.tileID.key,p=this._pixelsToTileUnitsCache;if(p[c])return p[c];const y=function(x,D){const{scale:P}=x.tileTransform,L=P*a.EXTENT/(x.tileSize*Math.pow(2,D.zoom-x.tileID.overscaledZ+x.tileID.canonical.z));return W=new Float32Array(4),ve=(Z=D.inverseAdjustmentMatrix)[1],Pe=Z[2],Le=Z[3],Te=(ie=[L,L])[1],W[0]=Z[0]*(Be=ie[0]),W[1]=ve*Be,W[2]=Pe*Te,W[3]=Le*Te,W;var W,Z,ie,ve,Pe,Le,Be,Te}(i,this);return p[c]=y,p[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const i=this._elevation;this._updateCameraState();const c=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(c),y=this._camera.forward(),x=a.mercatorZfromAltitude(1,this._center.lat);p[2]/=x,y[2]/=x,a.normalize(y,y);const D=i.raycast(p,y,i.exaggeration());if(D){const P=a.scaleAndAdd([],p,y,D),L=new a.MercatorCoordinate(P[0],P[1],a.mercatorZfromAltitude(P[2],a.latFromMercatorY(P[1]))),W=(L.z+a.length([L.x-p[0],L.y-p[1],L.z-p[2]*x]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(W),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const c=this._elevation,p=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(p),x=c.getAtPointOrZero(new a.MercatorCoordinate(...y)),D=this.pixelsPerMeter/this.worldSize*x,P=this._minimumHeightOverTerrain(),L=y[2]-D;if(L<=P)if(L<0||i){const W=this.locationCoordinate(this._center,this._centerAltitude),Z=[y[0],y[1],W.z-y[2]],ie=a.length(Z);Z[2]-=(P-L)/this._pixelsPerMercatorPixel;const ve=a.length(Z);if(0===ve)return;a.scale$2(Z,Z,ie/ve*this._pixelsPerMercatorPixel),this._camera.position=[y[0],y[1],W.z*this._pixelsPerMercatorPixel-Z[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const ve=this.center;return ve.lat=a.clamp(ve.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(ve.lng=a.clamp(ve.lng,this.minLng,this.maxLng)),this.center=ve,void(this._constraining=!1)}const c=this._unmodified,{x:p,y}=this.point;let x=0,D=p,P=y;const L=this.width/2,W=this.height/2,Z=this.worldMinY*this.scale,ie=this.worldMaxY*this.scale;if(y-W<Z&&(P=Z+W),y+W>ie&&(P=ie-W),ie-Z<this.height&&(x=Math.max(x,this.height/(ie-Z)),P=(ie+Z)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ve=this.worldMinX*this.scale,Pe=this.worldMaxX*this.scale,Le=this.worldSize/2-(ve+Pe)/2;D=(p+Le+this.worldSize)%this.worldSize-Le,D-L<ve&&(D=ve+L),D+L>Pe&&(D=Pe-L),Pe-ve<this.width&&(x=Math.max(x,this.width/(Pe-ve)),D=(Pe+ve)/2)}D===p&&P===y||(this.center=this.unproject(new a.pointGeometry(D,P))),x&&(this.zoom+=this.scaleZoom(x)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=a.mercatorZfromAltitude(1,this.center.lat)/a.mercatorZfromAltitude(1,a.GLOBE_SCALE_MATCH_LATITUDE));const p=ue(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,p),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const y=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?c:1),x=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);x[8]=2*-i.x/this.width,x[9]=2*i.y/this.height;let D=a.mul([],x,y);if(this.projection.isReprojectedInTileSpace){const Dt=this.locationCoordinate(this.center),vt=a.identity([]);a.translate(vt,vt,[Dt.x*this.worldSize,Dt.y*this.worldSize,0]),a.multiply(vt,vt,S(this)),a.translate(vt,vt,[-Dt.x*this.worldSize,-Dt.y*this.worldSize,0]),a.multiply(D,D,vt),this.inverseAdjustmentMatrix=function(Vt){const cn=S(Vt,!0);return Ce([],[cn[0],cn[1],cn[4],cn[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=a.scale([],D,[this.worldSize,this.worldSize,this.worldSize/c,1]),this.projMatrix=D,this.invProjMatrix=a.invert(new Float64Array(16),this.projMatrix);const P=a.invert([],x);this.frustumCorners=a.FrustumCorners.fromInvProjectionMatrix(P,this.horizonLineFromTop(),this.height);const L=new Float32Array(16);a.identity(L),a.scale(L,L,[1,-1,1]),a.rotateX(L,L,this._pitch),a.rotateZ(L,L,this.angle);const W=a.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;W[8]=2*-i.x/this.width,W[9]=2*(i.y+Z)/this.height,this.skyboxMatrix=a.multiply(L,W,L);const ie=this.point,ve=ie.x,Pe=ie.y,Le=this.width%2/2,Be=this.height%2/2,Te=Math.cos(this.angle),Ae=Math.sin(this.angle),je=ve-Math.round(ve)+Te*Le+Ae*Be,ze=Pe-Math.round(Pe)+Te*Be+Ae*Le,at=new Float64Array(D);if(a.translate(at,at,[je>.5?je-1:je,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=at,D=a.create(),a.scale(D,D,[this.width/2,-this.height/2,1]),a.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=a.create(),a.scale(D,D,[1,-1,1]),a.translate(D,D,[-1,-1,0]),a.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},D=a.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=D,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=a.calculateGlobeMatrix(this);const Dt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.transformMat4(Dt,Dt,y),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=D;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,p=this._camera.position,y=1/this.height/this._pixelsPerMercatorPixel,x=[i,i,c];a.scale$2(x,x,y),a.scale$2(p,p,-1),a.multiply$2(p,p,x);const D=a.create();a.translate(D,D,p),a.scale(D,D,x),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,c,y)}_computeCameraPosition(i){const c=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,p=this._camera.forward(),y=this.point,x=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-i/this.worldSize*this._centerAltitude;return[y.x/this.worldSize-p[0]*x,y.y/this.worldSize-p[1]*x,i/this.worldSize*this._centerAltitude-p[2]*x]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=this._camera.position[2],y=i[2];let x=1;this.projection.wrap&&(this.center=this.center.wrap()),y>0&&(x=Math.min((c-p)/y,1)),this._camera.position=a.scaleAndAdd([],this._camera.position,i,x),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,c=this._camera.forward(),{pitch:p,bearing:y}=this._camera.getPitchBearing(),x=a.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.degToRad(this._maxPitch)),P=Math.max((i[2]-x)/Math.cos(p),D),L=this._zoomFromMercatorZ(P);a.scaleAndAdd(i,i,c,P),this._pitch=a.clamp(p,a.degToRad(this.minPitch),a.degToRad(this.maxPitch)),this.angle=a.wrap(y,-Math.PI,Math.PI),this._setZoom(a.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){const c=D=>{const P=this.getCameraToCenterDistance(this.projection,D);return this.scaleZoom(P/(i*this.tileSize))};let p,y=c(this.zoom),x=Math.abs(y-c(y));for(;p!==x;)y=c(y),p=x,x=Math.abs(y-c(y));return y}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,c){const p=Math.min(i.x,c.x),y=Math.max(i.x,c.x),x=Math.min(i.y,c.y),D=Math.max(i.y,c.y);if(x<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const P=[new a.pointGeometry(p,x),new a.pointGeometry(y,D),new a.pointGeometry(p,D),new a.pointGeometry(y,x)],L=this.renderWorldCopies?-3:0,W=this.renderWorldCopies?4:1;for(const Z of P){const ie=this.pointRayIntersection(Z);if(ie.t<0)return!0;const ve=this.rayIntersectionCoordinate(ie);if(ve.x<L||ve.y<0||ve.x>W||ve.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.pointGeometry(0,0),new a.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,c){const p=a.length(a.sub([],this._camera.position,i)),y=this._zoomFromMercatorZ(p)+c;return p-this._mercatorZfromZoom(y)}getCameraPoint(){if("globe"===this.projection.name){const i=function([c,p,y],x){const D=[c,p,y,1];a.transformMat4$1(D,D,x);const P=D[3]=Math.max(D[3],1e-6);return D[0]/=P,D[1]/=P,D[2]/=P,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.pointGeometry(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,i))}}getCameraToCenterDistance(i,c=this.zoom){const p=ue(i,c,this.width,this.height,1024),y=i.pixelSpaceConversion(this.center.lat,this.worldSize,p);return.5/Math.tan(.5*this._fov)*this.height*y}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&a.multiply(i,i,this.globeMatrix),i}}function Vn(d,i){let c=!1,p=null;const y=()=>{p=null,c&&(d(),p=setTimeout(y,i),c=!1)};return()=>(c=!0,p||y(),p)}class an{constructor(i){this._hashName=i&&encodeURIComponent(i),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Vn(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,a.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),a.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const c=hi(i);if(this._hashName){const p=this._hashName;let y=!1;const x=a.window.location.hash.slice(1).split("&").map(D=>{const P=D.split("=")[0];return P===p?(y=!0,`${P}=${c}`):D}).filter(D=>D);return y||x.push(`${p}=${c}`),`#${x.join("&")}`}return`#${c}`}_getCurrentHash(){const i=a.window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(c=p)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(c[3]||0):i.getBearing();return i.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=a.window.location.href.replace(/(#.+)?$/,this.getHashString());a.window.history.replaceState(a.window.history.state,null,i)}}function hi(d,i){const c=d.getCenter(),p=Math.round(100*d.getZoom())/100,y=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),D=Math.round(c.lng*x)/x,P=Math.round(c.lat*x)/x,L=d.getBearing(),W=d.getPitch();let Z=i?`/${D}/${P}/${p}`:`${p}/${P}/${D}`;return(L||W)&&(Z+="/"+Math.round(10*L)/10),W&&(Z+=`/${Math.round(W)}`),Z}const Xi={linearity:.3,easing:a.bezier(0,0,.3,1)},nr=a.extend({deceleration:2500,maxSpeed:1400},Xi),Bi=a.extend({deceleration:20,maxSpeed:1400},Xi),Gi=a.extend({deceleration:1e3,maxSpeed:360},Xi),Ir=a.extend({deceleration:1e3,maxSpeed:90},Xi);class Pr{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=a.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const x=Mo(c.pan.mag(),p,a.extend({},nr,i||{}));y.offset=c.pan.mult(x.amount/c.pan.mag()),y.center=this._map.transform.center,mo(y,x)}if(c.zoom){const x=Mo(c.zoom,p,Bi);y.zoom=this._map.transform.zoom+x.amount,mo(y,x)}if(c.bearing){const x=Mo(c.bearing,p,Gi);y.bearing=this._map.transform.bearing+a.clamp(x.amount,-179,179),mo(y,x)}if(c.pitch){const x=Mo(c.pitch,p,Ir);y.pitch=this._map.transform.pitch+x.amount,mo(y,x)}if(y.zoom||y.bearing){const x=void 0===c.pinchAround?c.around:c.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),y.noMoveStart=!0,y}}function mo(d,i){(!d.duration||d.duration<i.duration)&&(d.duration=i.duration,d.easing=i.easing)}function Mo(d,i,c){const{maxSpeed:p,linearity:y,deceleration:x}=c,D=a.clamp(d*y/(i/1e3),-p,p),P=Math.abs(D)/(x*y);return{easing:c.easing,duration:1e3*P,amount:D*(P/2)}}class kr extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,y={}){const x=Qe(c.getCanvasContainer(),p),D=c.unproject(x);super(i,a.extend({point:x,lngLat:D,originalEvent:p},y)),this._defaultPrevented=!1,this.target=c}}class Ks extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const y="touchend"===i?p.changedTouches:p.touches,x=Hn(c.getCanvasContainer(),y),D=x.map(L=>c.unproject(L)),P=x.reduce((L,W,Z,ie)=>L.add(W.div(ie.length)),new a.pointGeometry(0,0));super(i,{points:x,point:P,lngLats:D,lngLat:c.unproject(P),originalEvent:p}),this._defaultPrevented=!1}}class ls extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Fo{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new ls(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new kr(i.type,this._map,i))}mouseup(i){this._map.fire(new kr(i.type,this._map,i))}preclick(i){const c=a.extend({},i);c.type="preclick",this._map.fire(new kr(c.type,this._map,c))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(i),this._map.fire(new kr(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new kr(i.type,this._map,i))}mouseover(i){this._map.fire(new kr(i.type,this._map,i))}mouseout(i){this._map.fire(new kr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ks(i.type,this._map,i))}touchmove(i){this._map.fire(new Ks(i.type,this._map,i))}touchend(i){this._map.fire(new Ks(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ks(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zr{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new kr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new kr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new kr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fa{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&0===i.button&&(wt(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c,y=this._startPos,x=this._lastPos;if(!y||!x||x.equals(p)||!this._box&&p.dist(y)<this._clickTolerance)return;this._lastPos=p,this._box||(this._box=ke("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const D=Math.min(y.x,p.x),P=Math.max(y.x,p.x),L=Math.min(y.y,p.y),W=Math.max(y.y,p.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${L}px)`,this._box.style.width=P-D+"px",this._box.style.height=W-L+"px")})}mouseupWindow(i,c){if(!this._active)return;const p=this._startPos,y=c;if(p&&0===i.button){if(this.reset(),kt(),p.x!==y.x||p.y!==y.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,y,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),et(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new a.Event(i,{originalEvent:c}))}}function Ko(d,i){const c={};for(let p=0;p<d.length;p++)c[d[p].identifier]=i[p];return c}class Za{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(y){const x=new a.pointGeometry(0,0);for(const D of y)x._add(D);return x.div(y.length)}(c),this.touches=Ko(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const y=Ko(p,c);for(const x in this.touches){const D=this.touches[x],P=y[x];(!P||P.dist(D)>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Xo{constructor(i){this.singleTap=new Za(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const y=this.singleTap.touchend(i,c,p);if(y){const x=i.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(y)<30;if(x&&D||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Sa{constructor(){this._zoomIn=new Xo({numTouches:1,numTaps:2}),this._zoomOut=new Xo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const y=this._zoomIn.touchend(i,c,p),x=this._zoomOut.touchend(i,c,p);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(y)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const gl={0:1,2:2};class Aa{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const p=Fn(i);this._correctButton(i,p)&&(this._lastPoint=c,this._eventButton=p)}mousemoveWindow(i,c){const p=this._lastPoint;if(p)if(i.preventDefault(),null!=this._eventButton&&function(y,x){const D=gl[x];return void 0===y.buttons||(y.buttons&D)!==D}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(p,c)}mouseupWindow(i){this._lastPoint&&Fn(i)===this._eventButton&&(this._moved&&kt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai extends Aa{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return 0===c&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class Ni extends Aa{_correctButton(i,c){return 0===c&&i.ctrlKey||2===c}_move(i,c){const p=.8*(c.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class $i extends Aa{_correctButton(i,c){return 0===c&&i.ctrlKey||2===c}_move(i,c){const p=-.5*(c.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class cr{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),a.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0)}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active&&!(p.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===p.length&&!a.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,c,p)}}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const y=Ko(p,c),x=new a.pointGeometry(0,0),D=new a.pointGeometry(0,0);let P=0;for(const W in y){const Z=y[W],ie=this._touches[W];ie&&(x._add(Z),D._add(Z.sub(ie)),P++,y[W]=Z)}if(this._touches=y,P<this._minTouches||!D.mag())return;const L=D.div(P);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(P),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ke("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Xr{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,c,p){return{}}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){const y=this._firstTwoTouches;if(!y)return;i.preventDefault();const[x,D]=y,P=io(p,c,x),L=io(p,c,D);if(!P||!L)return;const W=this._aroundCenter?null:P.add(L).div(2);return this._move([P,L],W,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,D=io(p,c,y),P=io(p,c,x);D&&P||(this._active&&kt(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function io(d,i,c){for(let p=0;p<d.length;p++)if(d[p].identifier===c)return i[p]}function cs(d,i){return Math.log(d/i)/Math.LN2}class Vs extends Xr{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(cs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cs(this._distance,p),pinchAround:c}}}function Tr(d,i){return 180*d.angleWith(i)/Math.PI}class tc extends Xr{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const p=this._vector;if(this._vector=i[0].sub(i[1]),p&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Tr(this._vector,p),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=this._startVector;if(!p)return!1;const y=Tr(i,p);return Math.abs(y)<c}}function Ec(d){return Math.abs(d.y)>Math.abs(d.x)}class ir extends Xr{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,Ec(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){const y=this._lastPoints;if(!y)return;const x=i[0].sub(y[0]),D=i[1].sub(y[1]);return this._map._cooperativeGestures&&!a.isFullscreen()&&p.touches.length<3||(this._valid=this.gestureBeginsVertically(x,D,p.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(x.y+D.y)/2*-.5})}gestureBeginsVertically(i,c,p){if(void 0!==this._valid)return this._valid;const y=i.mag()>=2,x=c.mag()>=2;if(!y&&!x)return;if(!y||!x)return null==this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const D=i.y>0==c.y>0;return Ec(i)&&Ec(c)&&D}}const Wa={panStep:100,bearingStep:15,pitchStep:10};class Hr{constructor(){const i=Wa;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,y=0,x=0,D=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),D=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(p=0,y=0),{cameraAnimation:P=>{const L=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:Cc,zoom:c?Math.round(L)+c*(i.shiftKey?2:1):L,bearing:P.getBearing()+p*this._bearingStep,pitch:P.getPitch()+y*this._pitchStep,offset:[-x*this._panStep,-D*this._panStep],center:P.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cc(d){return d*(2-d)}const nc=4.000244140625;class lh{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||a.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=i.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=a.exported.now(),y=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==c&&c%nc==0?this._type="wheel":0!==c&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Qe(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;"wheel"===this._type&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(0!==this._delta){const L="wheel"===this._type&&Math.abs(this._delta)>nc?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&0!==W&&(W=1/W);const Z=c(),ie=Math.pow(2,Z),ve="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):ie;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(ve*W))),"wheel"===this._type&&(this._startZoom=Z,this._easing=this._smoothOutEasing(200)),this._delta=0}const p="number"==typeof this._targetZoom?this._targetZoom:c(),y=this._startZoom,x=this._easing;let D,P=!1;if("wheel"===this._type&&y&&x){const L=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),W=x(L);D=a.number(y,p,W),L<1?this._frameId||(this._frameId=!0):P=!0}else D=p,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:D-c(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=a.ease;if(this._prevEase){const p=this._prevEase,y=(a.exported.now()-p.start)/p.duration,x=p.easing(y+.01)-p.easing(y),D=.27/Math.sqrt(x*x+1e-4)*.01,P=Math.sqrt(.0729-D*D);c=a.bezier(D,P,.25,1)}return this._prevEase={start:a.exported.now(),duration:i,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ke("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(a.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class hd{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _l{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mc{constructor(){this._tap=new Xo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,c,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=c[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,c,p))}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const y=c[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){this._tapTime?this._swipePoint&&0===p.length&&this.reset():this._tap.touchend(i,c,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yl{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vl{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Oo{constructor(i,c,p,y){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fi=d=>d.zoom||d.drag||d.pitch||d.rotate;class ic extends a.Event{}class fd{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,c){const p=a.sub([],c,i);this.radius=a.length(p[2]<0?a.div([],p,this.constants):[p[0],p[1],0])}projectRay(i){a.div(i,i,this.constants),a.normalize(i,i),a.mul$1(i,i,this.constants);const c=a.scale$2([],i,this.radius);if(c[2]>0){const p=a.scale$2([],[0,0,1],a.dot(c,[0,0,1])),y=a.scale$2([],a.normalize([],[c[0],c[1],0]),this.radius),x=a.add([],c,a.scale$2([],a.sub([],a.add([],y,p),c),2));c[0]=x[0],c[1]=x[1]}return c}}function xl(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}class us{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pr(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new fd,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),a.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[a.window,"blur",void 0]];for(const[y,x,D]of this._listeners)y.addEventListener(x,y===a.window.document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(const[i,c,p]of this._listeners)i.removeEventListener(c,i===a.window.document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Fo(c,i));const y=c.boxZoom=new fa(c,i);this._add("boxZoom",y);const x=new Sa,D=new _l;c.doubleClickZoom=new hd(D,x),this._add("tapZoom",x),this._add("clickZoom",D);const P=new Mc;this._add("tapDragZoom",P);const L=c.touchPitch=new ir(c);this._add("touchPitch",L);const W=new Ni(i),Z=new $i(i);c.dragRotate=new vl(i,W,Z),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);const ie=new Ai(i),ve=new cr(c,i);c.dragPan=new yl(p,ie,ve),this._add("mousePan",ie),this._add("touchPan",ve,["touchZoom","touchRotate"]);const Pe=new tc,Le=new Vs;c.touchZoomRotate=new Oo(p,Le,Pe,P),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]),this._add("blockableMapEvent",new zr(c));const Be=c.scrollZoom=new lh(c,this);this._add("scrollZoom",Be,["mousePan"]);const Te=c.keyboard=new Hr;this._add("keyboard",Te);for(const Ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[Ae]&&c[Ae].enable(i[Ae])}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,c,p){for(const y in i)if(y!==p&&(!c||c.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}handleEvent(i,c){this._updatingCamera=!0;const p="renderFrame"===i.type,y=p?void 0:i,x={needsRenderFrame:!1},D={},P={},L=i.touches?this._getMapTouches(i.touches):void 0,W=L?Hn(this._el,L):p?void 0:Qe(this._el,i);for(const{handlerName:ve,handler:Pe,allowed:Le}of this._handlers){if(!Pe.isEnabled())continue;let Be;this._blockedByActive(P,Le,ve)?Pe.reset():Pe[c||i.type]&&(Be=Pe[c||i.type](i,W,L),this.mergeHandlerResult(x,D,Be,ve,y),Be&&Be.needsRenderFrame&&this._triggerRenderFrame()),(Be||Pe.isActive())&&(P[ve]=Pe)}const Z={};for(const ve in this._previousActiveHandlers)P[ve]||(Z[ve]=y);this._previousActiveHandlers=P,(Object.keys(Z).length||xl(x))&&(this._changes.push([x,D,Z]),this._triggerRenderFrame()),(Object.keys(P).length||xl(x))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ie}=x;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))}mergeHandlerResult(i,c,p,y,x){if(!p)return;a.extend(i,p);const D={handlerName:y,originalEvent:p.originalEvent||x};void 0!==p.zoomDelta&&(c.zoom=D),void 0!==p.panDelta&&(c.drag=D),void 0!==p.pitchDelta&&(c.pitch=D),void 0!==p.bearingDelta&&(c.rotate=D)}_applyChanges(){const i={},c={},p={};for(const[y,x,D]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new a.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),void 0!==y.around&&(i.around=y.around),void 0!==y.aroundCoord&&(i.aroundCoord=y.aroundCoord),void 0!==y.pinchAround&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),a.extend(c,x),a.extend(p,D);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const y=this._map,x=y.transform,D=je=>[je.x,je.y,je.z];if((je=>{const ze=this._eventsInProgress.drag;return ze&&!this._handlersById[ze.handlerName].isActive()})()&&!xl(i)){const je=x.zoom;x.cameraElevationReference="sea",x.recenterOnTerrain(),x.cameraElevationReference="ground",je!==x.zoom&&this._map._update(!0)}if(x._isCameraConstrained&&y._stop(!0),!xl(i))return void this._fireEvents(c,p,!0);let{panDelta:P,zoomDelta:L,bearingDelta:W,pitchDelta:Z,around:ie,aroundCoord:ve,pinchAround:Pe}=i;x._isCameraConstrained&&(L>0&&(L=0),x._isCameraConstrained=!1),void 0!==Pe&&(ie=Pe),(je=>c.drag&&!this._eventsInProgress.drag)()&&ie&&(this._dragOrigin=D(x.pointCoordinate3D(ie)),this._trackingEllipsoid.setup(x._camera.position,this._dragOrigin)),x.cameraElevationReference="sea",y._stop(!0),ie=ie||y.transform.centerPoint,W&&(x.bearing+=W),Z&&(x.pitch+=Z),x._updateCameraState();const Le=[0,0,0];if(P)if("mercator"===x.projection.name){const je=this._trackingEllipsoid.projectRay(x.screenPointToMercatorRay(ie).dir),ze=this._trackingEllipsoid.projectRay(x.screenPointToMercatorRay(ie.sub(P)).dir);Le[0]=ze[0]-je[0],Le[1]=ze[1]-je[1]}else{const je=x.pointCoordinate(ie);if("globe"===x.projection.name){P=P.rotate(-x.angle);const ze=x._pixelsPerMercatorPixel/x.worldSize;Le[0]=-P.x*a.mercatorScale(a.latFromMercatorY(je.y))*ze,Le[1]=-P.y*a.mercatorScale(x.center.lat)*ze}else{const ze=x.pointCoordinate(ie.sub(P));je&&ze&&(Le[0]=ze.x-je.x,Le[1]=ze.y-je.y)}}const Be=x.zoom,Te=[0,0,0];if(L){const je=D(ve||x.pointCoordinate3D(ie)),ze={dir:a.normalize([],a.sub([],je,x._camera.position))};if(ze.dir[2]<0){const at=x.zoomDeltaToMovement(je,L);a.scale$2(Te,ze.dir,at)}}const Ae=a.add(Le,Le,Te);x._translateCameraConstrained(Ae),L&&Math.abs(x.zoom-Be)>1e-4&&x.recenterOnTerrain(),x.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const y=fi(this._eventsInProgress),x=fi(i),D={};for(const Z in i){const{originalEvent:ie}=i[Z];this._eventsInProgress[Z]||(D[`${Z}start`]=ie),this._eventsInProgress[Z]=i[Z]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const Z in D)this._fireEvent(Z,D[Z]);x&&this._fireEvent("move",x.originalEvent);for(const Z in i){const{originalEvent:ie}=i[Z];this._fireEvent(Z,ie)}const P={};let L;for(const Z in this._eventsInProgress){const{handlerName:ie,originalEvent:ve}=this._eventsInProgress[Z];this._handlersById[ie].isActive()||(delete this._eventsInProgress[Z],L=c[ie]||ve,P[`${Z}end`]=L)}for(const Z in P)this._fireEvent(Z,P[Z]);const W=fi(this._eventsInProgress);if(p&&(y||x)&&!W){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ie=ve=>0!==ve&&-this._bearingSnap<ve&&ve<this._bearingSnap;Z?(ie(Z.bearing||this._map.getBearing())&&(Z.bearing=0),this._map.easeTo(Z,{originalEvent:L})):(this._map.fire(new a.Event("moveend",{originalEvent:L})),ie(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new a.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new ic("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ia="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class cu extends a.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=a.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,a.extend({offset:i},c),p)}panTo(i,c,p){return this.easeTo(a.extend({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(a.extend({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(a.extend({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,a.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=a.LngLatBounds.convert(i);const p=c&&c.bearing||0,y=c&&c.pitch||0,x=i.getNorthWest(),D=i.getSouthEast();return this._cameraForBounds(this.transform,x,D,p,y,c)}_extendCameraOptions(i){const c={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=a.extend({padding:c,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const p=i.padding;i.padding={top:p,bottom:p,right:p,left:p}}return i.padding=a.extend(c,i.padding),i}_minimumAABBFrustumDistance(i,c){const p=c.max[0]-c.min[0],y=c.max[1]-c.min[1];return p/y>i.aspect?p/(2*Math.tan(.5*i.fovX)*i.aspect):y/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,c,p,y,x,D){const P=i.clone(),L=this._extendCameraOptions(D);P.bearing=y,P.pitch=x;const W=a.LngLat.convert(c),Z=a.LngLat.convert(p),ie=.5*(W.lat+Z.lat),ve=.5*(W.lng+Z.lng),Pe=a.latLngToECEF(ie,ve),Le=a.normalize([],Pe),Be=a.normalize([],a.cross([],Le,[0,1,0])),Te=a.cross([],Be,Le),Ae=[Be[0],Be[1],Be[2],0,Te[0],Te[1],Te[2],0,Le[0],Le[1],Le[2],0,0,0,0,1],je=[Pe,a.latLngToECEF(W.lat,W.lng),a.latLngToECEF(Z.lat,W.lng),a.latLngToECEF(Z.lat,Z.lng),a.latLngToECEF(W.lat,Z.lng),a.latLngToECEF(ie,W.lng),a.latLngToECEF(ie,Z.lng),a.latLngToECEF(W.lat,ve),a.latLngToECEF(Z.lat,ve)];let ze=a.Aabb.fromPoints(je.map(qt=>[a.dot(Be,qt),a.dot(Te,qt),a.dot(Le,qt)]));const at=a.transformMat4([],ze.center,Ae);0===a.squaredLength(at)&&a.set(at,0,0,1),a.normalize(at,at),a.scale$2(at,at,a.GLOBE_RADIUS),P.center=a.ecefToLatLng(at);const Dt=P.getWorldToCameraMatrix(),vt=a.invert(new Float64Array(16),Dt);ze=a.Aabb.applyTransform(ze,a.multiply([],Dt,Ae)),a.transformMat4(at,at,Dt);const Vt=.5*(ze.max[2]-ze.min[2]),cn=this._minimumAABBFrustumDistance(P,ze),rn=a.scale$2([],[0,0,1],Vt),$t=a.add(rn,at,rn),qn=cn+(0===P.pitch?0:a.distance(at,$t)),Kt=P.globeCenterInViewSpace,Pn=a.sub([],at,[Kt[0],Kt[1],Kt[2]]);a.normalize(Pn,Pn),a.scale$2(Pn,Pn,qn);const gn=a.add([],at,Pn);a.transformMat4(gn,gn,vt);const Wn=a.earthRadius/a.GLOBE_RADIUS,pn=a.length(gn),zn=a.mercatorZfromAltitude(pn*Wn-a.earthRadius,0),Qn=Math.min(P.zoomFromMercatorZAdjusted(zn),L.maxZoom);return Qn>.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"mercator"}),P.zoom=Qn,this._cameraForBounds(P,c,p,y,x,D)):{center:P.center,zoom:Qn,bearing:y,pitch:x}}queryTerrainElevation(i,c){const p=this.transform.elevation;return p?(c=a.extend({},{exaggerated:!0},c),p.getAtPoint(a.MercatorCoordinate.fromLngLat(i),null,c.exaggerated)):null}_cameraForBounds(i,c,p,y,x,D){if("globe"===i.projection.name)return this._cameraForBoundsOnGlobe(i,c,p,y,x,D);const P=i.clone(),L=this._extendCameraOptions(D),W=P.padding;P.bearing=y,P.pitch=x;const Z=a.LngLat.convert(c),ie=a.LngLat.convert(p),ve=new a.LngLat(Z.lng,ie.lat),Pe=new a.LngLat(ie.lng,Z.lat),Le=P.project(Z),Be=P.project(ie),Te=this.queryTerrainElevation(Z),Ae=this.queryTerrainElevation(ie),je=this.queryTerrainElevation(ve),ze=this.queryTerrainElevation(Pe),at=[[Le.x,Le.y,Math.min(Te||0,Ae||0,je||0,ze||0)],[Be.x,Be.y,Math.max(Te||0,Ae||0,je||0,ze||0)]];let Dt=a.Aabb.fromPoints(at);const vt=P.getWorldToCameraMatrix(),Vt=a.invert(new Float64Array(16),vt);Dt=a.Aabb.applyTransform(Dt,vt);const cn=a.sub([],Dt.max,Dt.min),rn=W.left||0,$t=W.right||0,qn=W.bottom||0,Kt=W.top||0,{left:Pn,right:gn,top:Wn,bottom:pn}=L.padding,zn=.5*(rn+$t),Qn=.5*(Kt+qn),qt=Math.min(P.scaleZoom(P.scale*Math.min((P.width-(rn+$t+Pn+gn))/cn[0],(P.height-(qn+Kt+pn+Wn))/cn[1])),L.maxZoom),hn=P.scale/P.zoomScale(qt);Dt=new a.Aabb([Dt.min[0]-(Pn+zn)*hn,Dt.min[1]-(pn+Qn)*hn,Dt.min[2]],[Dt.max[0]+(gn+zn)*hn,Dt.max[1]+(Wn+Qn)*hn,Dt.max[2]]);const Ei=.5*cn[2],Oi=this._minimumAABBFrustumDistance(P,Dt),Ci=[0,0,1,0];a.transformMat4$1(Ci,Ci,vt),a.normalize$2(Ci,Ci);const Vi=a.scale$2([],Ci,Oi+Ei),sr=a.add([],Dt.center,Vi),Si=("number"==typeof L.offset.x&&"number"==typeof L.offset.y?new a.pointGeometry(L.offset.x,L.offset.y):a.pointGeometry.convert(L.offset)).rotate(-a.degToRad(y));Dt.center[0]-=Si.x*hn,Dt.center[1]+=Si.y*hn,a.transformMat4(Dt.center,Dt.center,Vt),a.transformMat4(sr,sr,Vt);const gi=[Dt.center[0],Dt.center[1],sr[2]*P.pixelsPerMeter];a.scale$2(gi,gi,1/P.worldSize);const $r=a.lngFromMercatorX(gi[0]),Or=a.latFromMercatorY(gi[1]),ao=Math.min(P._zoomFromMercatorZ(gi[2]),L.maxZoom),Zr=new a.LngLat($r,Or);return P.mercatorFromTransition&&ao<.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"globe"}),P.zoom=ao,this._cameraForBounds(P,c,p,y,x,D)):{center:Zr,zoom:ao,bearing:y,pitch:x}}fitBounds(i,c,p){const y=this.cameraForBounds(i,c);return this._fitInternal(y,c,p)}fitScreenCoordinates(i,c,p,y,x){const D=a.pointGeometry.convert(i),P=a.pointGeometry.convert(c),L=new a.pointGeometry(Math.min(D.x,P.x),Math.min(D.y,P.y)),W=new a.pointGeometry(Math.max(D.x,P.x),Math.max(D.y,P.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(D,P))return this;const Z=this.transform.pointLocation3D(L),ie=this.transform.pointLocation3D(W),ve=this.transform.pointLocation3D(new a.pointGeometry(L.x,W.y)),Pe=this.transform.pointLocation3D(new a.pointGeometry(W.x,L.y)),Le=[Math.min(Z.lng,ie.lng,ve.lng,Pe.lng),Math.min(Z.lat,ie.lat,ve.lat,Pe.lat)],Be=[Math.max(Z.lng,ie.lng,ve.lng,Pe.lng),Math.max(Z.lat,ie.lat,ve.lat,Pe.lat)],Te=y&&y.pitch?y.pitch:this.getPitch(),Ae=this._cameraForBounds(this.transform,Le,Be,p,Te,y);return this._fitInternal(Ae,y,x)}_fitInternal(i,c,p){return i?(delete(c=a.extend(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=i.preloadOnly?this.transform.clone():this.transform;let y=!1,x=!1,D=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(y=!0,p.zoom=+i.zoom),void 0!==i.center&&(p.center=a.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(D=!0,p.pitch=+i.pitch),null==i.padding||p.isPaddingEqual(i.padding)||(p.padding=i.padding),i.preloadOnly?(this._preloadTiles(p),this):(this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),y&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),x&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),D&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.warnOnce(Ia),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,c){const p=this.transform;if(!p.projection.supportsFreeCamera)return a.warnOnce(Ia),this;this.stop();const y=p.zoom,x=p.pitch,D=p.bearing;p.setFreeCameraOptions(i);const P=y!==p.zoom,L=x!==p.pitch,W=D!==p.bearing;return this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),P&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),W&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),L&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c)),this}easeTo(i,c){this._stop(!1,i.easeId),(!1===(i=a.extend({offset:[0,0],duration:500,easing:a.ease},i)).animate||!i.essential&&a.exported.prefersReducedMotion)&&(i.duration=0);const p=this.transform,y=this.getZoom(),x=this.getBearing(),D=this.getPitch(),P=this.getPadding(),L="zoom"in i?+i.zoom:y,W="bearing"in i?this._normalizeBearing(i.bearing,x):x,Z="pitch"in i?+i.pitch:D,ie="padding"in i?i.padding:p.padding,ve=a.pointGeometry.convert(i.offset);let Pe,Le,Be;if("globe"===p.projection.name){const rn=a.MercatorCoordinate.fromLngLat(p.center),$t=ve.rotate(-p.angle);rn.x+=$t.x/p.worldSize,rn.y+=$t.y/p.worldSize;const qn=rn.toLngLat(),Kt=a.LngLat.convert(i.center||qn);this._normalizeCenter(Kt),Pe=p.centerPoint.add($t),Le=new a.pointGeometry(rn.x,rn.y).mult(p.worldSize),Be=new a.pointGeometry(a.mercatorXfromLng(Kt.lng),a.mercatorYfromLat(Kt.lat)).mult(p.worldSize).sub(Le)}else{Pe=p.centerPoint.add(ve);const rn=p.pointLocation(Pe),$t=a.LngLat.convert(i.center||rn);this._normalizeCenter($t),Le=p.project(rn),Be=p.project($t).sub(Le)}const Te=p.zoomScale(L-y);let Ae,je;i.around&&(Ae=a.LngLat.convert(i.around),je=p.locationPoint(Ae));const ze=this._zooming||L!==y,at=this._rotating||x!==W,Dt=this._pitching||Z!==D,vt=!p.isPaddingEqual(ie),Vt=rn=>$t=>{if(ze&&(rn.zoom=a.number(y,L,$t)),at&&(rn.bearing=a.number(x,W,$t)),Dt&&(rn.pitch=a.number(D,Z,$t)),vt&&(rn.interpolatePadding(P,ie,$t),Pe=rn.centerPoint.add(ve)),Ae)rn.setLocationAtPoint(Ae,je);else{const qn=rn.zoomScale(rn.zoom-y),Kt=L>y?Math.min(2,Te):Math.max(.5,Te),Pn=Math.pow(Kt,1-$t),gn=rn.unproject(Le.add(Be.mult($t*Pn)).mult(qn));rn.setLocationAtPoint(rn.renderWorldCopies?gn.wrap():gn,Pe)}return i.preloadOnly||this._fireMoveEvents(c),rn};if(i.preloadOnly){const rn=this._emulate(Vt,i.duration,p);return this._preloadTiles(rn),this}const cn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ze,this._rotating=at,this._pitching=Dt,this._padding=vt,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,cn),this._ease(Vt(p),rn=>{p.recenterOnTerrain(),this._afterEase(c,rn)},i),this}_prepareEase(i,c,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",c||p.moving||this.fire(new a.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new a.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new a.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new a.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new a.Event("move",i)),this._zooming&&this.fire(new a.Event("zoom",i)),this._rotating&&this.fire(new a.Event("rotate",i)),this._pitching&&this.fire(new a.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const p=this._zooming,y=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new a.Event("zoomend",i)),y&&this.fire(new a.Event("rotateend",i)),x&&this.fire(new a.Event("pitchend",i)),this.fire(new a.Event("moveend",i))}flyTo(i,c){if(!i.essential&&a.exported.prefersReducedMotion){const qt=a.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(qt,c)}this.stop(),i=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},i);const p=this.transform,y=this.getZoom(),x=this.getBearing(),D=this.getPitch(),P=this.getPadding(),L="zoom"in i?a.clamp(+i.zoom,p.minZoom,p.maxZoom):y,W="bearing"in i?this._normalizeBearing(i.bearing,x):x,Z="pitch"in i?+i.pitch:D,ie="padding"in i?i.padding:p.padding,ve=p.zoomScale(L-y),Pe=a.pointGeometry.convert(i.offset);let Le=p.centerPoint.add(Pe);const Be=p.pointLocation(Le),Te=a.LngLat.convert(i.center||Be);this._normalizeCenter(Te);const Ae=p.project(Be),je=p.project(Te).sub(Ae);let ze=i.curve;const at=Math.max(p.width,p.height),Dt=at/ve,vt=je.mag();if("minZoom"in i){const qt=a.clamp(Math.min(i.minZoom,y,L),p.minZoom,p.maxZoom),hn=at/p.zoomScale(qt-y);ze=Math.sqrt(hn/vt*2)}const Vt=ze*ze;function cn(qt){const hn=(Dt*Dt-at*at+(qt?-1:1)*Vt*Vt*vt*vt)/(2*(qt?Dt:at)*Vt*vt);return Math.log(Math.sqrt(hn*hn+1)-hn)}function rn(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function $t(qt){return(Math.exp(qt)+Math.exp(-qt))/2}const qn=cn(0);let Kt=function(qt){return $t(qn)/$t(qn+ze*qt)},Pn=function(qt){return at*(($t(qn)*(rn(hn=qn+ze*qt)/$t(hn))-rn(qn))/Vt)/vt;var hn},gn=(cn(1)-qn)/ze;if(Math.abs(vt)<1e-6||!isFinite(gn)){if(Math.abs(at-Dt)<1e-6)return this.easeTo(i,c);const qt=Dt<at?-1:1;gn=Math.abs(Math.log(Dt/at))/ze,Pn=function(){return 0},Kt=function(hn){return Math.exp(qt*ze*hn)}}i.duration="duration"in i?+i.duration:1e3*gn/("screenSpeed"in i?+i.screenSpeed/ze:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const Wn=x!==W,pn=Z!==D,zn=!p.isPaddingEqual(ie),Qn=qt=>hn=>{const Ei=hn*gn,Oi=1/Kt(Ei);qt.zoom=1===hn?L:y+qt.scaleZoom(Oi),Wn&&(qt.bearing=a.number(x,W,hn)),pn&&(qt.pitch=a.number(D,Z,hn)),zn&&(qt.interpolatePadding(P,ie,hn),Le=qt.centerPoint.add(Pe));const Ci=1===hn?Te:qt.unproject(Ae.add(je.mult(Pn(Ei))).mult(Oi));return qt.setLocationAtPoint(qt.renderWorldCopies?Ci.wrap():Ci,Le),qt._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(c),qt};if(i.preloadOnly){const qt=this._emulate(Qn,i.duration,p);return this._preloadTiles(qt),this}return this._zooming=!0,this._rotating=Wn,this._pitching=pn,this._padding=zn,this._prepareEase(c,!1),this._ease(Qn(p),()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const p=this._onEaseEnd;this._onEaseEnd=void 0,p.call(this,c)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,c,p){!1===p.animate||0===p.duration?(i(1),c()):(this._easeStart=a.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=a.wrap(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.maxBounds)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}_emulate(i,c,p){const y=Math.ceil(15*c/1e3),x=[],D=i(p.clone());for(let P=0;P<=y;P++){const L=D(P/y);x.push(L.clone())}return x}}class rc{constructor(i={}){this.options=i,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const c=this.options&&this.options.compact;return this._map=i,this._container=ke("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ke("button","mapboxgl-ctrl-attrib-button",this._container),ke("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ke("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===c&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.setAttribute("aria-label",p),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",p)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(i){const p=c.reduce((y,x,D)=>(x.value&&(y+=`${x.key}=${x.value}${D<c.length-1?"&":""}`),y),"?");i.href=`${a.config.FEEDBACK_URL}/${p}#${hi(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style._sourceCaches;for(const y in c){const x=c[y];if(x.used){const D=x.getSource();D.attribution&&i.indexOf(D.attribution)<0&&i.push(D.attribution)}}i.sort((y,x)=>y.length-x.length),i=i.filter((y,x)=>{for(let D=x+1;D<i.length;D++)if(i[D].indexOf(y)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class bl{constructor(){a.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=ke("div","mapboxgl-ctrl");const c=ke("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(0===Object.entries(i).length)return!0;for(const c in i){const p=i[c].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class $c{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const y of p)if(y.id===i)return void(y.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ku(d,i,c){if(d=new a.LngLat(d.lng,d.lat),i){const p=new a.LngLat(d.lng-360,d.lat),y=new a.LngLat(d.lng+360,d.lat),x=360*Math.ceil(Math.abs(d.lng-c.center.lng)/360),D=c.locationPoint(d).distSqr(i),P=i.x<0||i.y<0||i.x>c.width||i.y>c.height;c.locationPoint(p).distSqr(i)<D&&(P||Math.abs(p.lng-c.center.lng)<x)?d=p:c.locationPoint(y).distSqr(i)<D&&(P||Math.abs(y.lng-c.center.lng)<x)&&(d=y)}for(;Math.abs(d.lng-c.center.lng)>180;){const p=c.locationPoint(d);if(p.x>=0&&p.y>=0&&p.x<=c.width&&p.y<=c.height)break;d.lng>c.center.lng?d.lng-=360:d.lng+=360}return d}const O={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class k extends a.Evented{constructor(i,c){if(super(),(i instanceof a.window.HTMLElement||c)&&(i=a.extend({element:i},c)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=a.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=ke("div");const y=41,x=27,D=rt("svg",{display:"block",height:y*this._scale+"px",width:x*this._scale+"px",viewBox:`0 0 ${x} ${y}`},this._element),P=rt("radialGradient",{id:"shadowGradient"},rt("defs",{},D));rt("stop",{offset:"10%","stop-opacity":.4},P),rt("stop",{offset:"100%","stop-opacity":.05},P),rt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),rt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),rt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),rt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=a.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()});const p=this._element.classList;for(const y in O)p.remove(`mapboxgl-marker-anchor-${y}`);p.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(24.6+y)],"bottom-right":[-y,-1*(24.6+y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const c=i.code,p=i.charCode||i.keyCode;"Space"!==c&&"Enter"!==c&&32!==p&&13!==p||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,p=this._element;this._popup&&(c===p||p.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,c=this._pos;if(!i||!c)return!1;const p=i.unproject(c),y=i.getFreeCameraOptions();if(!y.position)return!1;const x=y.position.toLngLat();return x.distanceTo(p)<.9*x.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const c=this._pos;if(!c||c.x<0||c.x>i.transform.width||c.y<0||c.y>i.transform.height)return void this._clearFadeTimer();const p=i.unproject(c);let y;i._showingGlobe()&&a.isLngLatBehindGlobe(i.transform,this._lngLat)?y=0:(y=1-i._queryFogOpacity(p),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(y*=this._occludedOpacity)),this._element.style.opacity=`${y}`,this._element.style.pointerEvents=y>0?"auto":"none",this._popup&&this._popup._setOpacity(y),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${i.x}px,${i.y}px)\n            ${O[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${c.x}px,${c.y}px)\n        `}_calculateXYTransform(){const i=this._pos,c=this._map,p=this.getPitchAlignment();if(!c||!i||"map"!==p)return"";if(!c._showingGlobe()){const L=c.getPitch();return L?`rotateX(${L}deg)`:""}const y=a.radToDeg(a.globeTiltAtLngLat(c.transform,this._lngLat)),x=i.sub(a.globeCenterToScreenPoint(c.transform)),D=Math.abs(x.x)+Math.abs(x.y);if(0===D)return"";const P=y/D;return`rotateX(${-x.y*P}deg) rotateY(${x.x*P}deg)`}_calculateZTransform(){const i=this._pos,c=this._map;if(!c||!i)return"";let p=0;const y=this.getRotationAlignment();if("map"===y)if(c._showingGlobe()){const x=c.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),D=c.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(x);p=a.radToDeg(Math.atan2(D.y,D.x))-90}else p=-c.getBearing();else if("horizon"===y){const x=a.smoothstep(4,6,c.getZoom()),D=a.globeCenterToScreenPoint(c.transform);D.y+=x*c.transform.height;const P=i.sub(D),L=a.radToDeg(Math.atan2(P.y,P.x));p=(L>90?L-270:L+90)*(1-x)}return p+=this._rotation,p?`rotateZ(${p}deg)`:""}_update(i){a.window.cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=ku(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),!0===i?this._updateFrameId=a.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=a.pointGeometry.convert(i),this._update(),this}_onMove(i){const c=this._map;if(!c)return;const p=this._pointerdownPos,y=this._positionDelta;if(p&&y){if(!this._isDragging){const x=this._clickTolerance||c._clickTolerance;if(i.point.dist(p)<x)return;this._isDragging=!0}this._pos=i.point.sub(y),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(i){const c=this._map,p=this._pos;c&&p&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(p),this._pointerdownPos=i.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const c=this._map;return c&&(i?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const I={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},V=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Y(d=new a.pointGeometry(0,0),i="bottom"){if("number"==typeof d){const c=Math.round(Math.sqrt(.5*Math.pow(d,2)));switch(i){case"top":return new a.pointGeometry(0,d);case"top-left":return new a.pointGeometry(c,c);case"top-right":return new a.pointGeometry(-c,c);case"bottom":return new a.pointGeometry(0,-d);case"bottom-left":return new a.pointGeometry(c,-c);case"bottom-right":return new a.pointGeometry(-c,-c);case"left":return new a.pointGeometry(d,0);case"right":return new a.pointGeometry(-d,0)}return new a.pointGeometry(0,0)}return d instanceof a.pointGeometry||Array.isArray(d)?a.pointGeometry.convert(d):a.pointGeometry.convert(d[i]||[0,0])}class me{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const c=a.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,c,p){this._start=this.getValue(c),this._end=i,this._startTime=c,this._endTime=c+p}}const tt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},bt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},An={showCompass:!0,showZoom:!0,visualizePitch:!1};class pi{constructor(i,c,p=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Ni({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new $i({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),wt()}move(i,c){const p=this.map,y=this.mouseRotate.mousemoveWindow(i,c),x=y&&y.bearingDelta;if(x&&p.setBearing(p.getBearing()+x),this.mousePitch){const D=this.mousePitch.mousemoveWindow(i,c),P=D&&D.pitchDelta;P&&p.setPitch(p.getPitch()+P)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){et(),a.window.removeEventListener("mousemove",this.mousemove),a.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(a.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Qe(this.element,i)),a.window.addEventListener("mousemove",this.mousemove),a.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Qe(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=Hn(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){1!==i.targetTouches.length?this.reset():(this._lastPos=Hn(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const or={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Di={maxWidth:100,unit:"metric"};function Gr(d,i,c){const p=vs(i),y=p/i,x={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[c];this._map._requestDomTask(()=>{this._container.style.width=d*y+"px",this._container.innerHTML=`${p}&nbsp;${x}`})}function vs(d){const i=Math.pow(10,`${Math.floor(d)}`.length-1);let c=d/i;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:c>=1?1:function(p){const y=Math.pow(10,Math.ceil(-Math.log(p)/Math.LN10));return Math.round(p*y)/y}(c),i*c}const Xs={version:a.version,supported:st,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends cu{constructor(d){if(a.LivePerformanceUtils.mark(a.PerformanceMarkers.create),null!=(d=a.extend({},bt,d)).minZoom&&null!=d.maxZoom&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=d.minPitch&&null!=d.maxPitch&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=d.minPitch&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=d.maxPitch&&d.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(d.antialias&&a.isSafariWithAntialiasingBug(a.window)&&(d.antialias=!1,a.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ln(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies),d),this._interactive=d.interactive,this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=d.crossSourceCollisions,this._collectResourceTiming=d.collectResourceTiming,this._optimizeForTerrain=d.optimizeForTerrain,this._language=this._parseLanguage(d.language),this._worldview=d.worldview,this._renderTaskQueue=new $c,this._domRenderTaskQueue=new $c,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.uniqueId(),this._locale=a.extend({},tt,d.locale),this._clickTolerance=d.clickTolerance,this._cooperativeGestures=d.cooperativeGestures,this._performanceMetricsCollection=d.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new me(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken,d.testMode),this._silenceAuthErrors=!!d.testMode,"string"==typeof d.container){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof a.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(this._container.childNodes.length>0&&a.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1),a.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new us(this,d),this._localFontFamily=d.localFontFamily,this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),d.projection&&this.setProjection(d.projection),this._hash=d.hash&&new an("string"==typeof d.hash&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),d.attributionControl&&this.addControl(new rc({customAttribution:d.customAttribution})),this._logoControl=new bl,this.addControl(this._logoControl,d.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new a.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new a.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(d,i){if(void 0===i&&(i=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=d.onAdd(this);this._controls.push(d);const p=this._controlPositions[i];return-1!==i.indexOf("bottom")?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(d){if(!d||!d.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(d);return i>-1&&this._controls.splice(i,1),d.onRemove(this),this}hasControl(d){return this._controls.indexOf(d)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(d){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),this.fire(new a.Event("resize",d)),i&&this.fire(new a.Event("moveend",d)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(d){return this.transform.setMaxBounds(a.LngLatBounds.convert(d)),this._update()}setMinZoom(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d?this.setZoom(d):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d?this.setZoom(d):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d?this.setPitch(d):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(d){if((d=d??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d?this.setPitch(d):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(d){return this.transform.renderWorldCopies=d,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(d){return"auto"===d?a.window.navigator.language:Array.isArray(d)?0===d.length?void 0:d.map(i=>"auto"===i?a.window.navigator.language:i):d}setLanguage(d){const i=this._parseLanguage(d);if(!this.style||i===this._language)return this;this._language=i,this.style._reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(d){return this.style&&d!==this._worldview?(this._worldview=d,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(d){return this._lazyInitEmptyStyle(),d?"string"==typeof d&&(d={name:d}):d=null,this._useExplicitProjection=!!d,this._prioritizeAndUpdateProjection(d,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const d=this.transform,i=d.projection.name;let c;"globe"===i&&d.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?(d.setMercatorFromTransition(),c=!0):"mercator"===i&&d.zoom<a.GLOBE_ZOOM_THRESHOLD_MAX&&(d.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(d,i){return this._updateProjection(d||i||{name:"mercator"})}_updateProjection(d){let i;if(i="globe"===d.name&&this.transform.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(d),this.style.applyProjectionUpdate(),i){this.painter.clearBackgroundTiles();for(const c in this.style._sourceCaches)this.style._sourceCaches[c].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(d){return this.transform.locationPoint3D(a.LngLat.convert(d))}unproject(d){return this.transform.pointLocation3D(a.pointGeometry.convert(d))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(d,i,c){if("mouseenter"===d||"mouseover"===d){let p=!1;const y=D=>{const P=i.filter(W=>this.getLayer(W)),L=P.length?this.queryRenderedFeatures(D.point,{layers:P}):[];L.length?p||(p=!0,c.call(this,new kr(d,this,D.originalEvent,{features:L}))):p=!1},x=()=>{p=!1};return{layers:new Set(i),listener:c,delegates:{mousemove:y,mouseout:x}}}if("mouseleave"===d||"mouseout"===d){let p=!1;const y=D=>{const P=i.filter(L=>this.getLayer(L));(P.length?this.queryRenderedFeatures(D.point,{layers:P}):[]).length?p=!0:p&&(p=!1,c.call(this,new kr(d,this,D.originalEvent)))},x=D=>{p&&(p=!1,c.call(this,new kr(d,this,D.originalEvent)))};return{layers:new Set(i),listener:c,delegates:{mousemove:y,mouseout:x}}}{const p=y=>{const x=i.filter(P=>this.getLayer(P)),D=x.length?this.queryRenderedFeatures(y.point,{layers:x}):[];D.length&&(y.features=D,c.call(this,y),delete y.features)};return{layers:new Set(i),listener:c,delegates:{[d]:p}}}}on(d,i,c){if(void 0===c)return super.on(d,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(d,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(p);for(const y in p.delegates)this.on(y,p.delegates[y]);return this}once(d,i,c){if(void 0===c)return super.once(d,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(d,i,c);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(d,i,c){if(void 0===c)return super.off(d,i);i=new Set(Array.isArray(i)?i:[i]);const p=(x,D)=>{if(x.size!==D.size)return!1;for(const P of x)if(!D.has(P))return!1;return!0},y=this._delegatedListeners?this._delegatedListeners[d]:void 0;return y&&(x=>{for(let D=0;D<x.length;D++){const P=x[D];if(P.listener===c&&p(P.layers,i)){for(const L in P.delegates)this.off(L,P.delegates[L]);return x.splice(D,1),this}}})(y),this}queryRenderedFeatures(d,i){return this.style?(void 0!==i||void 0===d||d instanceof a.pointGeometry||Array.isArray(d)||(i=d,d=void 0),this.style.queryRenderedFeatures(d=d||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(d,i){return this.style.querySourceFeatures(d,i)}setStyle(d,i){return!1!==(i=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&d?(this._diffStyle(d,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(d,i))}_getUIString(d){const i=this._locale[d];if(null==i)throw new Error(`Missing UI string '${d}'`);return i}_updateStyle(d,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),d&&(this.style=new Kr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof d?this.style.loadURL(d):this.style.loadJSON(d)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Kr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(d,i){if("string"==typeof d){const c=this._requestManager.normalizeStyleURL(d),p=this._requestManager.transformRequest(c,a.ResourceType.Style);a.getJSON(p,(y,x)=>{y?this.fire(new a.ErrorEvent(y)):x&&this._updateDiff(x,i)})}else"object"==typeof d&&this._updateDiff(d,i)}_updateDiff(d,i){try{this.style.setState(d)&&this._update(!0)}catch(c){a.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(d,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.warnOnce("There is no style added to the map."),!1)}addSource(d,i){return this._lazyInitEmptyStyle(),this.style.addSource(d,i),this._update(!0)}isSourceLoaded(d){return!!this.style&&this.style._isSourceCacheLoaded(d)}areTilesLoaded(){const d=this.style&&this.style._sourceCaches;for(const i in d){const c=d[i]._tiles;for(const p in c){const y=c[p];if("loaded"!==y.state&&"errored"!==y.state)return!1}}return!0}addSourceType(d,i,c){this._lazyInitEmptyStyle(),this.style.addSourceType(d,i,c)}removeSource(d){return this.style.removeSource(d),this._updateTerrain(),this._update(!0)}getSource(d){return this.style.getSource(d)}addImage(d,i,{pixelRatio:c=1,sdf:p=!1,stretchX:y,stretchY:x,content:D}={}){if(this._lazyInitEmptyStyle(),i instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&i instanceof a.window.ImageBitmap){const{width:P,height:L,data:W}=a.exported.getImageData(i);this.style.addImage(d,{data:new a.RGBAImage({width:P,height:L},W),pixelRatio:c,stretchX:y,stretchY:x,content:D,sdf:p,version:0})}else if(void 0===i.width||void 0===i.height)this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:P,height:L}=i,W=i;this.style.addImage(d,{data:new a.RGBAImage({width:P,height:L},new Uint8Array(W.data)),pixelRatio:c,stretchX:y,stretchY:x,content:D,sdf:p,version:0,userImage:W}),W.onAdd&&W.onAdd(this,d)}}updateImage(d,i){const c=this.style.getImage(d);if(!c)return void this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&i instanceof a.window.ImageBitmap?a.exported.getImageData(i):i,{width:y,height:x}=p;void 0!==y&&void 0!==x?y===c.data.width&&x===c.data.height?(c.data.replace(p.data,!(i instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&i instanceof a.window.ImageBitmap)),this.style.updateImage(d,c)):this.fire(new a.ErrorEvent(new Error(`The width and height of the updated image (${y}, ${x})\n                must be that same as the previous version of the image\n                (${c.data.width}, ${c.data.height})`))):this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(d){return d?!!this.style.getImage(d):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(d){this.style.removeImage(d)}loadImage(d,i){a.getImage(this._requestManager.transformRequest(d,a.ResourceType.Image),(c,p)=>{i(c,p instanceof a.window.HTMLImageElement?a.exported.getImageData(p):p)})}listImages(){return this.style.listImages()}addLayer(d,i){return this._lazyInitEmptyStyle(),this.style.addLayer(d,i),this._update(!0)}moveLayer(d,i){return this.style.moveLayer(d,i),this._update(!0)}removeLayer(d){return this.style.removeLayer(d),this._update(!0)}getLayer(d){return this.style.getLayer(d)}setLayerZoomRange(d,i,c){return this.style.setLayerZoomRange(d,i,c),this._update(!0)}setFilter(d,i,c={}){return this.style.setFilter(d,i,c),this._update(!0)}getFilter(d){return this.style.getFilter(d)}setPaintProperty(d,i,c,p={}){return this.style.setPaintProperty(d,i,c,p),this._update(!0)}getPaintProperty(d,i){return this.style.getPaintProperty(d,i)}setLayoutProperty(d,i,c,p={}){return this.style.setLayoutProperty(d,i,c,p),this._update(!0)}getLayoutProperty(d,i){return this.style.getLayoutProperty(d,i)}setLight(d,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(d,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(d){return this._lazyInitEmptyStyle(),!d&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(d),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(d){return this._lazyInitEmptyStyle(),this.style.setFog(d),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(d){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.LngLat.convert(d),this.transform):0}setFeatureState(d,i){return this.style.setFeatureState(d,i),this._update()}removeFeatureState(d,i){return this.style.removeFeatureState(d,i),this._update()}getFeatureState(d){return this.style.getFeatureState(d)}_updateContainerDimensions(){if(!this._container)return;const d=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let c,p,y,x=this._container;for(;x&&(!p||!y);){const D=a.window.getComputedStyle(x).transform;D&&"none"!==D&&(c=D.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&"0"!==c[0]&&"1"!==c[0]&&(p=c[0]),c[3]&&"0"!==c[3]&&"1"!==c[3]&&(y=c[3])),x=x.parentElement}this._containerWidth=p?Math.abs(d/p):d,this._containerHeight=y?Math.abs(i/y):i}_detectMissingCSS(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=ke("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=ke("div","mapboxgl-canvas-container",d);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=ke("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=ke("div","mapboxgl-control-container",d),p=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{p[y]=ke("div",`mapboxgl-ctrl-${y}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(d,i){const c=a.exported.devicePixelRatio||1;this._canvas.width=c*Math.ceil(d),this._canvas.height=c*Math.ceil(i),this._canvas.style.width=`${d}px`,this._canvas.style.height=`${i}px`}_addMarker(d){this._markers.push(d)}_removeMarker(d){const i=this._markers.indexOf(d);-1!==i&&this._markers.splice(i,1)}_addPopup(d){this._popups.push(d)}_removePopup(d){const i=this._popups.indexOf(d);-1!==i&&this._popups.splice(i,1)}_setupPainter(){const d=a.extend({},st.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);i?(a.storeAuthState(i,!0),this.painter=new pl(i,this.transform),this.on("data",c=>{"source"===c.dataType&&this.painter.setTileLoadedFlag(!0)}),a.exported$1.testSupport(i)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:d}))}_contextRestored(d){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:d}))}_onMapScroll(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(d){return this._update(),this._renderTaskQueue.add(d)}_cancelRenderFrame(d){this._renderTaskQueue.remove(d)}_requestDomTask(d){!this.loaded()||this.loaded()&&!this.isMoving()?d():this._domRenderTaskQueue.add(d)}_render(d){let i;const c=this.painter.context.extTimerQuery,p=a.exported.now();if(this.listens("gpu-timing-frame")&&(i=c.createQueryEXT(),c.beginQueryEXT(c.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],a.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],a.window.performance.now())),this._renderTaskQueue.run(d),this._domRenderTaskQueue.run(d),this._removed)return;this._updateProjectionTransition();const y=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,L=this.transform.pitch,W=a.exported.now(),Z=new a.EvaluationParameters(P,{now:W,fadeDuration:y,pitch:L,transition:this.style.getTransition()});this.style.update(Z)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let x=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),x=this._updateAverageElevation(p),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):x=this._updateAverageElevation(p),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,y,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:y,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const P=a.exported.now()-p;c.endQueryEXT(c.TIME_ELAPSED_EXT,i),setTimeout(()=>{const L=c.getQueryObjectEXT(i,c.QUERY_RESULT_EXT)/1e6;c.deleteQueryEXT(i),this.fire(new a.Event("gpu-timing-frame",{cpuTime:P,gpuTime:L})),a.window.performance.mark("frame-gpu",{startTime:p,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(P);this.fire(new a.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const P=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(P);this.fire(new a.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const D=this._sourcesDirty||this._styleDirty||this._placementDirty||x;if(D||this._repaint)this.triggerRepaint();else{const P=!this.isMoving()&&this.loaded();if(P&&(x=this._updateAverageElevation(p,!0)),x)this.triggerRepaint();else if(this._triggerFrame(!1),P&&(this.fire(new a.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new a.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,a.LivePerformanceUtils.mark(a.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&a.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(d){for(const i of this._markers)d&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!d||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(d,i=!1){const c=p=>(this.transform.averageElevation=p,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&c(0);if((i||d-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(d)){const p=this.transform.averageElevation;let y=this.transform.sampleAverageElevation(),x=!1;this.transform.elevation&&(x=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(y)?y=0:this._averageElevationLastSampledAt=d;const D=Math.abs(p-y);if(D>1){if(this._isInitialLoad||x)return this._averageElevation.jumpTo(y),c(y);this._averageElevation.easeTo(y,d,300)}else if(D>1e-4)return this._averageElevation.jumpTo(y),c(y)}return!!this._averageElevation.isEasing(d)&&c(this._averageElevation.getValue(d))}_authenticate(){a.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,d=>{if(d&&(d.message===a.AUTH_ERR_MSG||401===d.status)){const i=this.painter.context.gl;a.storeAuthState(i,!1),this._logoControl instanceof bl&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const d=this._isDragging();this.painter.updateTerrain(this.style,d)}_calculateSpeedIndex(){const d=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const c=this.painter.context.gl,p=c.createFramebuffer();function y(x){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,x,0);const D=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,D),D}return c.bindFramebuffer(c.FRAMEBUFFER,p),this._canvasPixelComparison(y(d),i.canvasCopies.map(y),i.timeStamps)}_canvasPixelComparison(d,i,c){let p=c[1]-c[0];const y=d.length/4;for(let x=0;x<i.length;x++){const D=i[x];let P=0;for(let L=0;L<D.length;L+=4)D[L]===d[L]&&D[L+1]===d[L+1]&&D[L+2]===d[L+2]&&D[L+3]===d[L+3]&&(P+=1);p+=(c[x+2]-c[x+1])*(1-P/y)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1),a.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const d=this.painter.context.gl.getExtension("WEBGL_lose_context");d&&d.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(d){this._renderNextFrame=this._renderNextFrame||d,this.style&&!this._frame&&(this._frame=a.exported.frame(i=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(i)}))}_preloadTiles(d){const i=this.style?Object.values(this.style._sourceCaches):[];return a.asyncAll(i,(c,p)=>c._preloadTiles(d,p),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(d){this._trackResize&&this.resize({originalEvent:d})._update()}_onVisibilityChange(){"hidden"===a.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(d){this._showTerrainWireframe!==d&&(this._showTerrainWireframe=d,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(d){this._speedIndexTiming!==d&&(this._speedIndexTiming=d,this._update())}get showPadding(){return!!this._showPadding}set showPadding(d){this._showPadding!==d&&(this._showPadding=d,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())}get repaint(){return!!this._repaint}set repaint(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(d){this._vertices=d,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(d){this._showTileAABBs!==d&&(this._showTileAABBs=d,d&&this._update())}_setCacheLimits(d,i){a.setCacheLimits(d,i)}get version(){return a.version}},NavigationControl:class{constructor(d){this.options=a.extend({},An,d),this._container=ke("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),ke("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),ke("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:i}):c.resetNorth({},{originalEvent:i}))}),this._compassIcon=ke("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const d=this._map;if(!d)return;const i=d.getZoom(),c=i===d.getMaxZoom(),p=i===d.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const d=this._map;if(!d)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(d.transform.pitch*(Math.PI/180)),.5)}) rotateX(${d.transform.pitch}deg) rotateZ(${d.transform.angle*(180/Math.PI)}deg)`:`rotate(${d.transform.angle*(180/Math.PI)}deg)`;d._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),d.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&d.on("pitch",this._rotateCompassArrow),d.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pi(d,this._compass,this.options.visualizePitch)),this._container}onRemove(){const d=this._map;d&&(this._container.remove(),this.options.showZoom&&d.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&d.off("pitch",this._rotateCompassArrow),d.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(d,i){const c=ke("button",d,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(d,i){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${i}`);d.setAttribute("aria-label",c),d.firstElementChild&&d.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends a.Evented{constructor(d){super(),this.options=a.extend({geolocation:a.window.navigator.geolocation},or,d),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Vn(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(d){return this._map=d,this._container=ke("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(d){const i=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,d(c)};void 0!==this._supportsGeolocation?d(this._supportsGeolocation):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(c=>i("denied"!==c.state)).catch(()=>i()):i()}_isOutOfMapMaxBounds(d){const i=this._map.getMaxBounds(),c=d.coords;return!!i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(d){if(this._map){if(this._isOutOfMapMaxBounds(d))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",d)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(d),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",d)),this._finish()}}_updateCamera(d){const i=new a.LngLat(d.coords.longitude,d.coords.latitude),c=d.coords.accuracy,p=this._map.getBearing(),y=a.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),y,{geolocateSource:!0})}_updateMarker(d){if(d){const i=new a.LngLat(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const d=this._map.transform,i=a.mercatorZfromAltitude(1,d._center.lat)*d.worldSize,c=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(d){if(this._map){if(this.options.trackUserLocation)if(1===d.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===d.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",d)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(d){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=ke("button","mapboxgl-ctrl-geolocate",this._container),ke("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===d){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ke("div","mapboxgl-user-location"),this._dotElement.appendChild(ke("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ke("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new k({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ke("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new k({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}}_onDeviceOrientation(d){this._userLocationDotMarker&&(d.webkitCompassHeading?this._heading=d.webkitCompassHeading:!0===d.absolute&&(this._heading=-1*d.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let d;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(d={maximumAge:6e5,timeout:0},this._noTimeout=!0):(d=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,d),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const d=()=>{a.window.addEventListener("ondeviceorientationabsolute"in a.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==a.window.DeviceMotionEvent&&"function"==typeof a.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(i=>{"granted"===i&&d()}).catch(console.error):d()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),a.window.removeEventListener("deviceorientation",this._onDeviceOrientation),a.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:rc,ScaleControl:class{constructor(d){this.options=a.extend({},Di,d),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Gr.bind(this)),a.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const d=this.options.maxWidth||100,i=this._map,c=i._containerHeight/2,p=i._containerWidth/2-d/2,y=i.unproject([p,c]),x=i.unproject([p+d,c]),D=y.distanceTo(x);if("imperial"===this.options.unit){const P=3.2808*D;P>5280?this._setScale(d,P/5280,"mile"):this._setScale(d,P,"foot")}else"nautical"===this.options.unit?this._setScale(d,D/1852,"nautical-mile"):D>=1e3?this._setScale(d,D/1e3,"kilometer"):this._setScale(d,D,"meter")}_setScale(d,i,c){const p=vs(i),y=p/i;this._map._requestDomTask(()=>{this._container.style.width=d*y+"px",this._container.innerHTML="nautical-mile"!==c?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:c}).format(p):`${p}&nbsp;nm`})}onAdd(d){return this._map=d,this._language=d.getLanguage(),this._container=ke("div","mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(d){this._language=d,this._update()}setUnit(d){this.options.unit=d,this._update()}},FullscreenControl:class{constructor(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof a.window.HTMLElement?this._container=d.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in a.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=ke("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!a.window.document.fullscreenEnabled&&!a.window.document.webkitFullscreenEnabled)}_setupUI(){const d=this._fullscreenButton=ke("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ke("span","mapboxgl-ctrl-icon",d).setAttribute("aria-hidden","true"),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",d)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(a.window.document.fullscreenElement||a.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(d){super(),this.options=a.extend(Object.create(I),d),a.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(d&&d.className?d.className.trim().split(/\s+/):[])}addTo(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&d.on("preclick",this._onClose),this.options.closeOnMove&&d.on("move",this._onClose),d.on("remove",this.remove),this._update(),d._addPopup(this),this._focusFirstElement(),this._trackPointer?(d.on("mousemove",this._onMouseEvent),d.on("mouseup",this._onMouseEvent),d._canvasContainer.classList.add("mapboxgl-track-pointer")):d.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const d=this._map;return d&&(d.off("move",this._update),d.off("move",this._onClose),d.off("preclick",this._onClose),d.off("click",this._onClose),d.off("remove",this.remove),d.off("mousemove",this._onMouseEvent),d.off("mouseup",this._onMouseEvent),d.off("drag",this._onMouseEvent),d._canvasContainer&&d._canvasContainer.classList.remove("mapboxgl-track-pointer"),d._removePopup(this),this._map=void 0),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(d){this._lngLat=a.LngLat.convert(d),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const d=this._map;return d&&(d.off("move",this._update),d.on("mousemove",this._onMouseEvent),d.on("drag",this._onMouseEvent),d._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(d){return this.setDOMContent(a.window.document.createTextNode(d))}setHTML(d){const i=a.window.document.createDocumentFragment(),c=a.window.document.createElement("body");let p;for(c.innerHTML=d;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(d){return this.options.maxWidth=d,this._update(),this}setDOMContent(d){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=ke("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(d),this.options.closeButton){const c=this._closeButton=ke("button","mapboxgl-popup-close-button",i);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(d){return this._classList.add(d),this._updateClassList(),this}removeClassName(d){return this._classList.delete(d),this._updateClassList(),this}setOffset(d){return this.options.offset=d,this._update(),this}toggleClassName(d){let i;return this._classList.delete(d)?i=!1:(this._classList.add(d),i=!0),this._updateClassList(),i}_onMouseEvent(d){this._update(d.point)}_getAnchor(d){if(this.options.anchor)return this.options.anchor;const i=this._map,c=this._container,p=this._pos;if(!i||!c||!p)return"bottom";const y=c.offsetWidth,x=c.offsetHeight,D=p.x<y/2,P=p.x>i.transform.width-y/2;if(p.y+d<x)return D?"top-left":P?"top-right":"top";if(p.y>i.transform.height-x){if(D)return"bottom-left";if(P)return"bottom-right"}return D?"left":P?"right":"bottom"}_updateClassList(){const d=this._container;if(!d)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),d.className=i.join(" ")}_update(d){const i=this._map,c=this._content;if(!i||!this._lngLat&&!this._trackPointer||!c)return;let p=this._container;if(p||(p=this._container=ke("div","mapboxgl-popup",i.getContainer()),this._tip=ke("div","mapboxgl-popup-tip",p),p.appendChild(c)),this.options.maxWidth&&p.style.maxWidth!==this.options.maxWidth&&(p.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ku(this._lngLat,this._pos,i.transform)),!this._trackPointer||d){const y=this._pos=this._trackPointer&&d?d:i.project(this._lngLat),x=Y(this.options.offset),D=this._anchor=this._getAnchor(x.y),P=Y(this.options.offset,D),L=y.add(P).round();i._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${O[D]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&i._showingGlobe()){const y=a.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(y)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const d=this._container.querySelector(V);d&&d.focus()}_onClose(){this.remove()}_setOpacity(d){this._container&&(this._container.style.opacity=`${d}`),this._content&&(this._content.style.pointerEvents=d?"auto":"none")}},Marker:k,Style:Kr,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,FreeCameraOptions:X,Evented:a.Evented,config:a.config,prewarm:function(){Xn().acquire(Wt)},clearPrewarmedResources:function(){const d=jn;d&&(d.isPreloaded()&&1===d.numActive()?(d.release(Wt),jn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(d){a.config.ACCESS_TOKEN=d},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(d){a.config.API_URL=d},get workerCount(){return Sn.workerCount},set workerCount(d){Sn.workerCount=d},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){a.config.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage(d){a.clearTileCache(d)},workerUrl:"",workerClass:null,setNow:a.exported.setNow,restoreNow:a.exported.restoreNow};return Xs}),w}()},1135:(ti,Ut,B)=>{"use strict";B.d(Ut,{X:()=>_});var w=B(7579);class _ extends w.x{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const he=super._subscribe(a);return!he.closed&&a.next(this._value),he}getValue(){const{hasError:a,thrownError:he,_value:st}=this;if(a)throw he;return this._throwIfClosed(),st}next(a){super.next(this._value=a)}}},9751:(ti,Ut,B)=>{"use strict";B.d(Ut,{y:()=>Oe});var w=B(930),_=B(727),de=B(8822),a=B(9635),he=B(2416),st=B(576),nt=B(2806);let Oe=(()=>{class Et{constructor(wt){wt&&(this._subscribe=wt)}lift(wt){const et=new Et;return et.source=this,et.operator=wt,et}subscribe(wt,et,Zt){const kt=function pt(Et){return Et&&Et instanceof w.Lv||function rt(Et){return Et&&(0,st.m)(Et.next)&&(0,st.m)(Et.error)&&(0,st.m)(Et.complete)}(Et)&&(0,_.Nn)(Et)}(wt)?wt:new w.Hp(wt,et,Zt);return(0,nt.x)(()=>{const{operator:Qe,source:Hn}=this;kt.add(Qe?Qe.call(kt,Hn):Hn?this._subscribe(kt):this._trySubscribe(kt))}),kt}_trySubscribe(wt){try{return this._subscribe(wt)}catch(et){wt.error(et)}}forEach(wt,et){return new(et=ke(et))((Zt,kt)=>{const Qe=new w.Hp({next:Hn=>{try{wt(Hn)}catch(Fn){kt(Fn),Qe.unsubscribe()}},error:kt,complete:Zt});this.subscribe(Qe)})}_subscribe(wt){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(wt)}[de.L](){return this}pipe(...wt){return(0,a.U)(wt)(this)}toPromise(wt){return new(wt=ke(wt))((et,Zt)=>{let kt;this.subscribe(Qe=>kt=Qe,Qe=>Zt(Qe),()=>et(kt))})}}return Et.create=dt=>new Et(dt),Et})();function ke(Et){var dt;return null!==(dt=Et??he.v.Promise)&&void 0!==dt?dt:Promise}},7579:(ti,Ut,B)=>{"use strict";B.d(Ut,{x:()=>nt});var w=B(9751),_=B(727);const a=(0,B(3888).d)(ke=>function(){ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=B(8737),st=B(2806);let nt=(()=>{class ke extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pt){const Et=new Oe(this,this);return Et.operator=pt,Et}_throwIfClosed(){if(this.closed)throw new a}next(pt){(0,st.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Et of this.currentObservers)Et.next(pt)}})}error(pt){(0,st.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pt;const{observers:Et}=this;for(;Et.length;)Et.shift().error(pt)}})}complete(){(0,st.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pt}=this;for(;pt.length;)pt.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pt;return(null===(pt=this.observers)||void 0===pt?void 0:pt.length)>0}_trySubscribe(pt){return this._throwIfClosed(),super._trySubscribe(pt)}_subscribe(pt){return this._throwIfClosed(),this._checkFinalizedStatuses(pt),this._innerSubscribe(pt)}_innerSubscribe(pt){const{hasError:Et,isStopped:dt,observers:wt}=this;return Et||dt?_.Lc:(this.currentObservers=null,wt.push(pt),new _.w0(()=>{this.currentObservers=null,(0,he.P)(wt,pt)}))}_checkFinalizedStatuses(pt){const{hasError:Et,thrownError:dt,isStopped:wt}=this;Et?pt.error(dt):wt&&pt.complete()}asObservable(){const pt=new w.y;return pt.source=this,pt}}return ke.create=(rt,pt)=>new Oe(rt,pt),ke})();class Oe extends nt{constructor(rt,pt){super(),this.destination=rt,this.source=pt}next(rt){var pt,Et;null===(Et=null===(pt=this.destination)||void 0===pt?void 0:pt.next)||void 0===Et||Et.call(pt,rt)}error(rt){var pt,Et;null===(Et=null===(pt=this.destination)||void 0===pt?void 0:pt.error)||void 0===Et||Et.call(pt,rt)}complete(){var rt,pt;null===(pt=null===(rt=this.destination)||void 0===rt?void 0:rt.complete)||void 0===pt||pt.call(rt)}_subscribe(rt){var pt,Et;return null!==(Et=null===(pt=this.source)||void 0===pt?void 0:pt.subscribe(rt))&&void 0!==Et?Et:_.Lc}}},930:(ti,Ut,B)=>{"use strict";B.d(Ut,{Hp:()=>Zt,Lv:()=>Et});var w=B(576),_=B(727),de=B(2416),a=B(7849),he=B(5032);const st=ke("C",void 0,void 0);function ke(Ye,Ce,we){return{kind:Ye,value:Ce,error:we}}var rt=B(3410),pt=B(2806);class Et extends _.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,_.Nn)(Ce)&&Ce.add(this)):this.destination=Fn}static create(Ce,we,At){return new Zt(Ce,we,At)}next(Ce){this.isStopped?Hn(function Oe(Ye){return ke("N",Ye,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Hn(function nt(Ye){return ke("E",void 0,Ye)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Hn(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dt=Function.prototype.bind;function wt(Ye,Ce){return dt.call(Ye,Ce)}class et{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:we}=this;if(we.next)try{we.next(Ce)}catch(At){kt(At)}}error(Ce){const{partialObserver:we}=this;if(we.error)try{we.error(Ce)}catch(At){kt(At)}else kt(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(we){kt(we)}}}class Zt extends Et{constructor(Ce,we,At){let zt;if(super(),(0,w.m)(Ce)||!Ce)zt={next:Ce??void 0,error:we??void 0,complete:At??void 0};else{let Jt;this&&de.v.useDeprecatedNextContext?(Jt=Object.create(Ce),Jt.unsubscribe=()=>this.unsubscribe(),zt={next:Ce.next&&wt(Ce.next,Jt),error:Ce.error&&wt(Ce.error,Jt),complete:Ce.complete&&wt(Ce.complete,Jt)}):zt=Ce}this.destination=new et(zt)}}function kt(Ye){de.v.useDeprecatedSynchronousErrorHandling?(0,pt.O)(Ye):(0,a.h)(Ye)}function Hn(Ye,Ce){const{onStoppedNotification:we}=de.v;we&&rt.z.setTimeout(()=>we(Ye,Ce))}const Fn={closed:!0,next:he.Z,error:function Qe(Ye){throw Ye},complete:he.Z}},727:(ti,Ut,B)=>{"use strict";B.d(Ut,{Lc:()=>st,w0:()=>he,Nn:()=>nt});var w=B(576);const de=(0,B(3888).d)(ke=>function(pt){ke(this),this.message=pt?`${pt.length} errors occurred during unsubscription:\n${pt.map((Et,dt)=>`${dt+1}) ${Et.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pt});var a=B(8737);class he{constructor(rt){this.initialTeardown=rt,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let rt;if(!this.closed){this.closed=!0;const{_parentage:pt}=this;if(pt)if(this._parentage=null,Array.isArray(pt))for(const wt of pt)wt.remove(this);else pt.remove(this);const{initialTeardown:Et}=this;if((0,w.m)(Et))try{Et()}catch(wt){rt=wt instanceof de?wt.errors:[wt]}const{_finalizers:dt}=this;if(dt){this._finalizers=null;for(const wt of dt)try{Oe(wt)}catch(et){rt=rt??[],et instanceof de?rt=[...rt,...et.errors]:rt.push(et)}}if(rt)throw new de(rt)}}add(rt){var pt;if(rt&&rt!==this)if(this.closed)Oe(rt);else{if(rt instanceof he){if(rt.closed||rt._hasParent(this))return;rt._addParent(this)}(this._finalizers=null!==(pt=this._finalizers)&&void 0!==pt?pt:[]).push(rt)}}_hasParent(rt){const{_parentage:pt}=this;return pt===rt||Array.isArray(pt)&&pt.includes(rt)}_addParent(rt){const{_parentage:pt}=this;this._parentage=Array.isArray(pt)?(pt.push(rt),pt):pt?[pt,rt]:rt}_removeParent(rt){const{_parentage:pt}=this;pt===rt?this._parentage=null:Array.isArray(pt)&&(0,a.P)(pt,rt)}remove(rt){const{_finalizers:pt}=this;pt&&(0,a.P)(pt,rt),rt instanceof he&&rt._removeParent(this)}}he.EMPTY=(()=>{const ke=new he;return ke.closed=!0,ke})();const st=he.EMPTY;function nt(ke){return ke instanceof he||ke&&"closed"in ke&&(0,w.m)(ke.remove)&&(0,w.m)(ke.add)&&(0,w.m)(ke.unsubscribe)}function Oe(ke){(0,w.m)(ke)?ke():ke.unsubscribe()}},2416:(ti,Ut,B)=>{"use strict";B.d(Ut,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(ti,Ut,B)=>{"use strict";B.d(Ut,{a:()=>rt});var w=B(9751),_=B(4742),de=B(2076),a=B(4671),he=B(3268),st=B(3269),nt=B(1810),Oe=B(5403),ke=B(9672);function rt(...dt){const wt=(0,st.yG)(dt),et=(0,st.jO)(dt),{args:Zt,keys:kt}=(0,_.D)(dt);if(0===Zt.length)return(0,de.D)([],wt);const Qe=new w.y(function pt(dt,wt,et=a.y){return Zt=>{Et(wt,()=>{const{length:kt}=dt,Qe=new Array(kt);let Hn=kt,Fn=kt;for(let Ye=0;Ye<kt;Ye++)Et(wt,()=>{const Ce=(0,de.D)(dt[Ye],wt);let we=!1;Ce.subscribe((0,Oe.x)(Zt,At=>{Qe[Ye]=At,we||(we=!0,Fn--),Fn||Zt.next(et(Qe.slice()))},()=>{--Hn||Zt.complete()}))},Zt)},Zt)}}(Zt,wt,kt?Hn=>(0,nt.n)(kt,Hn):a.y));return et?Qe.pipe((0,he.Z)(et)):Qe}function Et(dt,wt,et){dt?(0,ke.f)(et,dt,wt):wt()}},7272:(ti,Ut,B)=>{"use strict";B.d(Ut,{z:()=>he});var w=B(8189),de=B(3269),a=B(2076);function he(...st){return function _(){return(0,w.J)(1)}()((0,a.D)(st,(0,de.yG)(st)))}},9770:(ti,Ut,B)=>{"use strict";B.d(Ut,{P:()=>de});var w=B(9751),_=B(8421);function de(a){return new w.y(he=>{(0,_.Xf)(a()).subscribe(he)})}},515:(ti,Ut,B)=>{"use strict";B.d(Ut,{E:()=>_});const _=new(B(9751).y)(he=>he.complete())},4128:(ti,Ut,B)=>{"use strict";B.d(Ut,{D:()=>Oe});var w=B(9751),_=B(4742),de=B(8421),a=B(3269),he=B(5403),st=B(3268),nt=B(1810);function Oe(...ke){const rt=(0,a.jO)(ke),{args:pt,keys:Et}=(0,_.D)(ke),dt=new w.y(wt=>{const{length:et}=pt;if(!et)return void wt.complete();const Zt=new Array(et);let kt=et,Qe=et;for(let Hn=0;Hn<et;Hn++){let Fn=!1;(0,de.Xf)(pt[Hn]).subscribe((0,he.x)(wt,Ye=>{Fn||(Fn=!0,Qe--),Zt[Hn]=Ye},()=>kt--,void 0,()=>{(!kt||!Fn)&&(Qe||wt.next(Et?(0,nt.n)(Et,Zt):Zt),wt.complete())}))}});return rt?dt.pipe((0,st.Z)(rt)):dt}},2076:(ti,Ut,B)=>{"use strict";B.d(Ut,{D:()=>At});var w=B(8421),_=B(9672),de=B(4482),a=B(5403);function he(zt,Jt=0){return(0,de.e)((Mn,Ke)=>{Mn.subscribe((0,a.x)(Ke,Ne=>(0,_.f)(Ke,zt,()=>Ke.next(Ne),Jt),()=>(0,_.f)(Ke,zt,()=>Ke.complete(),Jt),Ne=>(0,_.f)(Ke,zt,()=>Ke.error(Ne),Jt)))})}function st(zt,Jt=0){return(0,de.e)((Mn,Ke)=>{Ke.add(zt.schedule(()=>Mn.subscribe(Ke),Jt))})}var ke=B(9751),pt=B(2202),Et=B(576);function wt(zt,Jt){if(!zt)throw new Error("Iterable cannot be null");return new ke.y(Mn=>{(0,_.f)(Mn,Jt,()=>{const Ke=zt[Symbol.asyncIterator]();(0,_.f)(Mn,Jt,()=>{Ke.next().then(Ne=>{Ne.done?Mn.complete():Mn.next(Ne.value)})},0,!0)})})}var et=B(3670),Zt=B(8239),kt=B(1144),Qe=B(6495),Hn=B(2206),Fn=B(4532),Ye=B(3260);function At(zt,Jt){return Jt?function we(zt,Jt){if(null!=zt){if((0,et.c)(zt))return function nt(zt,Jt){return(0,w.Xf)(zt).pipe(st(Jt),he(Jt))}(zt,Jt);if((0,kt.z)(zt))return function rt(zt,Jt){return new ke.y(Mn=>{let Ke=0;return Jt.schedule(function(){Ke===zt.length?Mn.complete():(Mn.next(zt[Ke++]),Mn.closed||this.schedule())})})}(zt,Jt);if((0,Zt.t)(zt))return function Oe(zt,Jt){return(0,w.Xf)(zt).pipe(st(Jt),he(Jt))}(zt,Jt);if((0,Hn.D)(zt))return wt(zt,Jt);if((0,Qe.T)(zt))return function dt(zt,Jt){return new ke.y(Mn=>{let Ke;return(0,_.f)(Mn,Jt,()=>{Ke=zt[pt.h](),(0,_.f)(Mn,Jt,()=>{let Ne,He;try{({value:Ne,done:He}=Ke.next())}catch(yt){return void Mn.error(yt)}He?Mn.complete():Mn.next(Ne)},0,!0)}),()=>(0,Et.m)(Ke?.return)&&Ke.return()})}(zt,Jt);if((0,Ye.L)(zt))return function Ce(zt,Jt){return wt((0,Ye.Q)(zt),Jt)}(zt,Jt)}throw(0,Fn.z)(zt)}(zt,Jt):(0,w.Xf)(zt)}},4968:(ti,Ut,B)=>{"use strict";B.d(Ut,{R:()=>rt});var w=B(8421),_=B(9751),de=B(5577),a=B(1144),he=B(576),st=B(3268);const nt=["addListener","removeListener"],Oe=["addEventListener","removeEventListener"],ke=["on","off"];function rt(et,Zt,kt,Qe){if((0,he.m)(kt)&&(Qe=kt,kt=void 0),Qe)return rt(et,Zt,kt).pipe((0,st.Z)(Qe));const[Hn,Fn]=function wt(et){return(0,he.m)(et.addEventListener)&&(0,he.m)(et.removeEventListener)}(et)?Oe.map(Ye=>Ce=>et[Ye](Zt,Ce,kt)):function Et(et){return(0,he.m)(et.addListener)&&(0,he.m)(et.removeListener)}(et)?nt.map(pt(et,Zt)):function dt(et){return(0,he.m)(et.on)&&(0,he.m)(et.off)}(et)?ke.map(pt(et,Zt)):[];if(!Hn&&(0,a.z)(et))return(0,de.z)(Ye=>rt(Ye,Zt,kt))((0,w.Xf)(et));if(!Hn)throw new TypeError("Invalid event target");return new _.y(Ye=>{const Ce=(...we)=>Ye.next(1<we.length?we:we[0]);return Hn(Ce),()=>Fn(Ce)})}function pt(et,Zt){return kt=>Qe=>et[kt](Zt,Qe)}},8421:(ti,Ut,B)=>{"use strict";B.d(Ut,{Xf:()=>dt});var w=B(1230),_=B(1144),de=B(8239),a=B(9751),he=B(3670),st=B(2206),nt=B(4532),Oe=B(6495),ke=B(3260),rt=B(576),pt=B(7849),Et=B(8822);function dt(Ye){if(Ye instanceof a.y)return Ye;if(null!=Ye){if((0,he.c)(Ye))return function wt(Ye){return new a.y(Ce=>{const we=Ye[Et.L]();if((0,rt.m)(we.subscribe))return we.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ye);if((0,_.z)(Ye))return function et(Ye){return new a.y(Ce=>{for(let we=0;we<Ye.length&&!Ce.closed;we++)Ce.next(Ye[we]);Ce.complete()})}(Ye);if((0,de.t)(Ye))return function Zt(Ye){return new a.y(Ce=>{Ye.then(we=>{Ce.closed||(Ce.next(we),Ce.complete())},we=>Ce.error(we)).then(null,pt.h)})}(Ye);if((0,st.D)(Ye))return Qe(Ye);if((0,Oe.T)(Ye))return function kt(Ye){return new a.y(Ce=>{for(const we of Ye)if(Ce.next(we),Ce.closed)return;Ce.complete()})}(Ye);if((0,ke.L)(Ye))return function Hn(Ye){return Qe((0,ke.Q)(Ye))}(Ye)}throw(0,nt.z)(Ye)}function Qe(Ye){return new a.y(Ce=>{(function Fn(Ye,Ce){var we,At,zt,Jt;return(0,w.mG)(this,void 0,void 0,function*(){try{for(we=(0,w.KL)(Ye);!(At=yield we.next()).done;)if(Ce.next(At.value),Ce.closed)return}catch(Mn){zt={error:Mn}}finally{try{At&&!At.done&&(Jt=we.return)&&(yield Jt.call(we))}finally{if(zt)throw zt.error}}Ce.complete()})})(Ye,Ce).catch(we=>Ce.error(we))})}},6451:(ti,Ut,B)=>{"use strict";B.d(Ut,{T:()=>st});var w=B(8189),_=B(8421),de=B(515),a=B(3269),he=B(2076);function st(...nt){const Oe=(0,a.yG)(nt),ke=(0,a._6)(nt,1/0),rt=nt;return rt.length?1===rt.length?(0,_.Xf)(rt[0]):(0,w.J)(ke)((0,he.D)(rt,Oe)):de.E}},9646:(ti,Ut,B)=>{"use strict";B.d(Ut,{of:()=>de});var w=B(3269),_=B(2076);function de(...a){const he=(0,w.yG)(a);return(0,_.D)(a,he)}},2843:(ti,Ut,B)=>{"use strict";B.d(Ut,{_:()=>de});var w=B(9751),_=B(576);function de(a,he){const st=(0,_.m)(a)?a:()=>a,nt=Oe=>Oe.error(st());return new w.y(he?Oe=>he.schedule(nt,0,Oe):nt)}},5963:(ti,Ut,B)=>{"use strict";B.d(Ut,{H:()=>he});var w=B(9751),_=B(4986),de=B(3532);function he(st=0,nt,Oe=_.P){let ke=-1;return null!=nt&&((0,de.K)(nt)?Oe=nt:ke=nt),new w.y(rt=>{let pt=function a(st){return st instanceof Date&&!isNaN(st)}(st)?+st-Oe.now():st;pt<0&&(pt=0);let Et=0;return Oe.schedule(function(){rt.closed||(rt.next(Et++),0<=ke?this.schedule(void 0,ke):rt.complete())},pt)})}},5403:(ti,Ut,B)=>{"use strict";B.d(Ut,{x:()=>_});var w=B(930);function _(a,he,st,nt,Oe){return new de(a,he,st,nt,Oe)}class de extends w.Lv{constructor(he,st,nt,Oe,ke,rt){super(he),this.onFinalize=ke,this.shouldUnsubscribe=rt,this._next=st?function(pt){try{st(pt)}catch(Et){he.error(Et)}}:super._next,this._error=Oe?function(pt){try{Oe(pt)}catch(Et){he.error(Et)}finally{this.unsubscribe()}}:super._error,this._complete=nt?function(){try{nt()}catch(pt){he.error(pt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:st}=this;super.unsubscribe(),!st&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},262:(ti,Ut,B)=>{"use strict";B.d(Ut,{K:()=>a});var w=B(8421),_=B(5403),de=B(4482);function a(he){return(0,de.e)((st,nt)=>{let rt,Oe=null,ke=!1;Oe=st.subscribe((0,_.x)(nt,void 0,void 0,pt=>{rt=(0,w.Xf)(he(pt,a(he)(st))),Oe?(Oe.unsubscribe(),Oe=null,rt.subscribe(nt)):ke=!0})),ke&&(Oe.unsubscribe(),Oe=null,rt.subscribe(nt))})}},4351:(ti,Ut,B)=>{"use strict";B.d(Ut,{b:()=>de});var w=B(5577),_=B(576);function de(a,he){return(0,_.m)(he)?(0,w.z)(a,he,1):(0,w.z)(a,1)}},8372:(ti,Ut,B)=>{"use strict";B.d(Ut,{b:()=>a});var w=B(4986),_=B(4482),de=B(5403);function a(he,st=w.z){return(0,_.e)((nt,Oe)=>{let ke=null,rt=null,pt=null;const Et=()=>{if(ke){ke.unsubscribe(),ke=null;const wt=rt;rt=null,Oe.next(wt)}};function dt(){const wt=pt+he,et=st.now();if(et<wt)return ke=this.schedule(void 0,wt-et),void Oe.add(ke);Et()}nt.subscribe((0,de.x)(Oe,wt=>{rt=wt,pt=st.now(),ke||(ke=st.schedule(dt,he),Oe.add(ke))},()=>{Et(),Oe.complete()},void 0,()=>{rt=ke=null}))})}},1005:(ti,Ut,B)=>{"use strict";B.d(Ut,{g:()=>Et});var w=B(4986),_=B(7272),de=B(5698),a=B(4482),he=B(5403),st=B(5032),Oe=B(9718),ke=B(5577);function rt(dt,wt){return wt?et=>(0,_.z)(wt.pipe((0,de.q)(1),function nt(){return(0,a.e)((dt,wt)=>{dt.subscribe((0,he.x)(wt,st.Z))})}()),et.pipe(rt(dt))):(0,ke.z)((et,Zt)=>dt(et,Zt).pipe((0,de.q)(1),(0,Oe.h)(et)))}var pt=B(5963);function Et(dt,wt=w.z){const et=(0,pt.H)(dt,wt);return rt(()=>et)}},1884:(ti,Ut,B)=>{"use strict";B.d(Ut,{x:()=>a});var w=B(4671),_=B(4482),de=B(5403);function a(st,nt=w.y){return st=st??he,(0,_.e)((Oe,ke)=>{let rt,pt=!0;Oe.subscribe((0,de.x)(ke,Et=>{const dt=nt(Et);(pt||!st(rt,dt))&&(pt=!1,rt=dt,ke.next(Et))}))})}function he(st,nt){return st===nt}},9300:(ti,Ut,B)=>{"use strict";B.d(Ut,{h:()=>de});var w=B(4482),_=B(5403);function de(a,he){return(0,w.e)((st,nt)=>{let Oe=0;st.subscribe((0,_.x)(nt,ke=>a.call(he,ke,Oe++)&&nt.next(ke)))})}},8746:(ti,Ut,B)=>{"use strict";B.d(Ut,{x:()=>_});var w=B(4482);function _(de){return(0,w.e)((a,he)=>{try{a.subscribe(he)}finally{he.add(de)}})}},4004:(ti,Ut,B)=>{"use strict";B.d(Ut,{U:()=>de});var w=B(4482),_=B(5403);function de(a,he){return(0,w.e)((st,nt)=>{let Oe=0;st.subscribe((0,_.x)(nt,ke=>{nt.next(a.call(he,ke,Oe++))}))})}},9718:(ti,Ut,B)=>{"use strict";B.d(Ut,{h:()=>_});var w=B(4004);function _(de){return(0,w.U)(()=>de)}},8189:(ti,Ut,B)=>{"use strict";B.d(Ut,{J:()=>de});var w=B(5577),_=B(4671);function de(a=1/0){return(0,w.z)(_.y,a)}},5577:(ti,Ut,B)=>{"use strict";B.d(Ut,{z:()=>Oe});var w=B(4004),_=B(8421),de=B(4482),a=B(9672),he=B(5403),nt=B(576);function Oe(ke,rt,pt=1/0){return(0,nt.m)(rt)?Oe((Et,dt)=>(0,w.U)((wt,et)=>rt(Et,wt,dt,et))((0,_.Xf)(ke(Et,dt))),pt):("number"==typeof rt&&(pt=rt),(0,de.e)((Et,dt)=>function st(ke,rt,pt,Et,dt,wt,et,Zt){const kt=[];let Qe=0,Hn=0,Fn=!1;const Ye=()=>{Fn&&!kt.length&&!Qe&&rt.complete()},Ce=At=>Qe<Et?we(At):kt.push(At),we=At=>{wt&&rt.next(At),Qe++;let zt=!1;(0,_.Xf)(pt(At,Hn++)).subscribe((0,he.x)(rt,Jt=>{dt?.(Jt),wt?Ce(Jt):rt.next(Jt)},()=>{zt=!0},void 0,()=>{if(zt)try{for(Qe--;kt.length&&Qe<Et;){const Jt=kt.shift();et?(0,a.f)(rt,et,()=>we(Jt)):we(Jt)}Ye()}catch(Jt){rt.error(Jt)}}))};return ke.subscribe((0,he.x)(rt,Ce,()=>{Fn=!0,Ye()})),()=>{Zt?.()}}(Et,dt,ke,pt)))}},3099:(ti,Ut,B)=>{"use strict";B.d(Ut,{B:()=>he});var w=B(8421),_=B(7579),de=B(930),a=B(4482);function he(nt={}){const{connector:Oe=(()=>new _.x),resetOnError:ke=!0,resetOnComplete:rt=!0,resetOnRefCountZero:pt=!0}=nt;return Et=>{let dt,wt,et,Zt=0,kt=!1,Qe=!1;const Hn=()=>{wt?.unsubscribe(),wt=void 0},Fn=()=>{Hn(),dt=et=void 0,kt=Qe=!1},Ye=()=>{const Ce=dt;Fn(),Ce?.unsubscribe()};return(0,a.e)((Ce,we)=>{Zt++,!Qe&&!kt&&Hn();const At=et=et??Oe();we.add(()=>{Zt--,0===Zt&&!Qe&&!kt&&(wt=st(Ye,pt))}),At.subscribe(we),!dt&&Zt>0&&(dt=new de.Hp({next:zt=>At.next(zt),error:zt=>{Qe=!0,Hn(),wt=st(Fn,ke,zt),At.error(zt)},complete:()=>{kt=!0,Hn(),wt=st(Fn,rt),At.complete()}}),(0,w.Xf)(Ce).subscribe(dt))})(Et)}}function st(nt,Oe,...ke){if(!0===Oe)return void nt();if(!1===Oe)return;const rt=new de.Hp({next:()=>{rt.unsubscribe(),nt()}});return Oe(...ke).subscribe(rt)}},5684:(ti,Ut,B)=>{"use strict";B.d(Ut,{T:()=>_});var w=B(9300);function _(de){return(0,w.h)((a,he)=>de<=he)}},8675:(ti,Ut,B)=>{"use strict";B.d(Ut,{O:()=>a});var w=B(7272),_=B(3269),de=B(4482);function a(...he){const st=(0,_.yG)(he);return(0,de.e)((nt,Oe)=>{(st?(0,w.z)(he,nt,st):(0,w.z)(he,nt)).subscribe(Oe)})}},3900:(ti,Ut,B)=>{"use strict";B.d(Ut,{w:()=>a});var w=B(8421),_=B(4482),de=B(5403);function a(he,st){return(0,_.e)((nt,Oe)=>{let ke=null,rt=0,pt=!1;const Et=()=>pt&&!ke&&Oe.complete();nt.subscribe((0,de.x)(Oe,dt=>{ke?.unsubscribe();let wt=0;const et=rt++;(0,w.Xf)(he(dt,et)).subscribe(ke=(0,de.x)(Oe,Zt=>Oe.next(st?st(dt,Zt,et,wt++):Zt),()=>{ke=null,Et()}))},()=>{pt=!0,Et()}))})}},5698:(ti,Ut,B)=>{"use strict";B.d(Ut,{q:()=>a});var w=B(515),_=B(4482),de=B(5403);function a(he){return he<=0?()=>w.E:(0,_.e)((st,nt)=>{let Oe=0;st.subscribe((0,de.x)(nt,ke=>{++Oe<=he&&(nt.next(ke),he<=Oe&&nt.complete())}))})}},2722:(ti,Ut,B)=>{"use strict";B.d(Ut,{R:()=>he});var w=B(4482),_=B(5403),de=B(8421),a=B(5032);function he(st){return(0,w.e)((nt,Oe)=>{(0,de.Xf)(st).subscribe((0,_.x)(Oe,()=>Oe.complete(),a.Z)),!Oe.closed&&nt.subscribe(Oe)})}},8505:(ti,Ut,B)=>{"use strict";B.d(Ut,{b:()=>he});var w=B(576),_=B(4482),de=B(5403),a=B(4671);function he(st,nt,Oe){const ke=(0,w.m)(st)||nt||Oe?{next:st,error:nt,complete:Oe}:st;return ke?(0,_.e)((rt,pt)=>{var Et;null===(Et=ke.subscribe)||void 0===Et||Et.call(ke);let dt=!0;rt.subscribe((0,de.x)(pt,wt=>{var et;null===(et=ke.next)||void 0===et||et.call(ke,wt),pt.next(wt)},()=>{var wt;dt=!1,null===(wt=ke.complete)||void 0===wt||wt.call(ke),pt.complete()},wt=>{var et;dt=!1,null===(et=ke.error)||void 0===et||et.call(ke,wt),pt.error(wt)},()=>{var wt,et;dt&&(null===(wt=ke.unsubscribe)||void 0===wt||wt.call(ke)),null===(et=ke.finalize)||void 0===et||et.call(ke)}))}):a.y}},4408:(ti,Ut,B)=>{"use strict";B.d(Ut,{o:()=>he});var w=B(727);class _ extends w.w0{constructor(nt,Oe){super()}schedule(nt,Oe=0){return this}}const de={setInterval(st,nt,...Oe){const{delegate:ke}=de;return ke?.setInterval?ke.setInterval(st,nt,...Oe):setInterval(st,nt,...Oe)},clearInterval(st){const{delegate:nt}=de;return(nt?.clearInterval||clearInterval)(st)},delegate:void 0};var a=B(8737);class he extends _{constructor(nt,Oe){super(nt,Oe),this.scheduler=nt,this.work=Oe,this.pending=!1}schedule(nt,Oe=0){var ke;if(this.closed)return this;this.state=nt;const rt=this.id,pt=this.scheduler;return null!=rt&&(this.id=this.recycleAsyncId(pt,rt,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(ke=this.id)&&void 0!==ke?ke:this.requestAsyncId(pt,this.id,Oe),this}requestAsyncId(nt,Oe,ke=0){return de.setInterval(nt.flush.bind(nt,this),ke)}recycleAsyncId(nt,Oe,ke=0){if(null!=ke&&this.delay===ke&&!1===this.pending)return Oe;null!=Oe&&de.clearInterval(Oe)}execute(nt,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ke=this._execute(nt,Oe);if(ke)return ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(nt,Oe){let rt,ke=!1;try{this.work(nt)}catch(pt){ke=!0,rt=pt||new Error("Scheduled action threw falsy error")}if(ke)return this.unsubscribe(),rt}unsubscribe(){if(!this.closed){const{id:nt,scheduler:Oe}=this,{actions:ke}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,a.P)(ke,this),null!=nt&&(this.id=this.recycleAsyncId(Oe,nt,null)),this.delay=null,super.unsubscribe()}}}},640:(ti,Ut,B)=>{"use strict";B.d(Ut,{v:()=>de});const w={now:()=>(w.delegate||Date).now(),delegate:void 0};class _{constructor(he,st=_.now){this.schedulerActionCtor=he,this.now=st}schedule(he,st=0,nt){return new this.schedulerActionCtor(this,he).schedule(nt,st)}}_.now=w.now;class de extends _{constructor(he,st=_.now){super(he,st),this.actions=[],this._active=!1}flush(he){const{actions:st}=this;if(this._active)return void st.push(he);let nt;this._active=!0;do{if(nt=he.execute(he.state,he.delay))break}while(he=st.shift());if(this._active=!1,nt){for(;he=st.shift();)he.unsubscribe();throw nt}}}},4986:(ti,Ut,B)=>{"use strict";B.d(Ut,{P:()=>a,z:()=>de});var w=B(4408);const de=new(B(640).v)(w.o),a=de},3410:(ti,Ut,B)=>{"use strict";B.d(Ut,{z:()=>w});const w={setTimeout(_,de,...a){const{delegate:he}=w;return he?.setTimeout?he.setTimeout(_,de,...a):setTimeout(_,de,...a)},clearTimeout(_){const{delegate:de}=w;return(de?.clearTimeout||clearTimeout)(_)},delegate:void 0}},2202:(ti,Ut,B)=>{"use strict";B.d(Ut,{h:()=>_});const _=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ti,Ut,B)=>{"use strict";B.d(Ut,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ti,Ut,B)=>{"use strict";B.d(Ut,{_6:()=>st,jO:()=>a,yG:()=>he});var w=B(576),_=B(3532);function de(nt){return nt[nt.length-1]}function a(nt){return(0,w.m)(de(nt))?nt.pop():void 0}function he(nt){return(0,_.K)(de(nt))?nt.pop():void 0}function st(nt,Oe){return"number"==typeof de(nt)?nt.pop():Oe}},4742:(ti,Ut,B)=>{"use strict";B.d(Ut,{D:()=>he});const{isArray:w}=Array,{getPrototypeOf:_,prototype:de,keys:a}=Object;function he(nt){if(1===nt.length){const Oe=nt[0];if(w(Oe))return{args:Oe,keys:null};if(function st(nt){return nt&&"object"==typeof nt&&_(nt)===de}(Oe)){const ke=a(Oe);return{args:ke.map(rt=>Oe[rt]),keys:ke}}}return{args:nt,keys:null}}},8737:(ti,Ut,B)=>{"use strict";function w(_,de){if(_){const a=_.indexOf(de);0<=a&&_.splice(a,1)}}B.d(Ut,{P:()=>w})},3888:(ti,Ut,B)=>{"use strict";function w(_){const a=_(he=>{Error.call(he),he.stack=(new Error).stack});return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}B.d(Ut,{d:()=>w})},1810:(ti,Ut,B)=>{"use strict";function w(_,de){return _.reduce((a,he,st)=>(a[he]=de[st],a),{})}B.d(Ut,{n:()=>w})},2806:(ti,Ut,B)=>{"use strict";B.d(Ut,{O:()=>a,x:()=>de});var w=B(2416);let _=null;function de(he){if(w.v.useDeprecatedSynchronousErrorHandling){const st=!_;if(st&&(_={errorThrown:!1,error:null}),he(),st){const{errorThrown:nt,error:Oe}=_;if(_=null,nt)throw Oe}}else he()}function a(he){w.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=he)}},9672:(ti,Ut,B)=>{"use strict";function w(_,de,a,he=0,st=!1){const nt=de.schedule(function(){a(),st?_.add(this.schedule(null,he)):this.unsubscribe()},he);if(_.add(nt),!st)return nt}B.d(Ut,{f:()=>w})},4671:(ti,Ut,B)=>{"use strict";function w(_){return _}B.d(Ut,{y:()=>w})},1144:(ti,Ut,B)=>{"use strict";B.d(Ut,{z:()=>w});const w=_=>_&&"number"==typeof _.length&&"function"!=typeof _},2206:(ti,Ut,B)=>{"use strict";B.d(Ut,{D:()=>_});var w=B(576);function _(de){return Symbol.asyncIterator&&(0,w.m)(de?.[Symbol.asyncIterator])}},576:(ti,Ut,B)=>{"use strict";function w(_){return"function"==typeof _}B.d(Ut,{m:()=>w})},3670:(ti,Ut,B)=>{"use strict";B.d(Ut,{c:()=>de});var w=B(8822),_=B(576);function de(a){return(0,_.m)(a[w.L])}},6495:(ti,Ut,B)=>{"use strict";B.d(Ut,{T:()=>de});var w=B(2202),_=B(576);function de(a){return(0,_.m)(a?.[w.h])}},8239:(ti,Ut,B)=>{"use strict";B.d(Ut,{t:()=>_});var w=B(576);function _(de){return(0,w.m)(de?.then)}},3260:(ti,Ut,B)=>{"use strict";B.d(Ut,{L:()=>a,Q:()=>de});var w=B(1230),_=B(576);function de(he){return(0,w.FC)(this,arguments,function*(){const nt=he.getReader();try{for(;;){const{value:Oe,done:ke}=yield(0,w.qq)(nt.read());if(ke)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(Oe)}}finally{nt.releaseLock()}})}function a(he){return(0,_.m)(he?.getReader)}},3532:(ti,Ut,B)=>{"use strict";B.d(Ut,{K:()=>_});var w=B(576);function _(de){return de&&(0,w.m)(de.schedule)}},4482:(ti,Ut,B)=>{"use strict";B.d(Ut,{A:()=>_,e:()=>de});var w=B(576);function _(a){return(0,w.m)(a?.lift)}function de(a){return he=>{if(_(he))return he.lift(function(st){try{return a(st,this)}catch(nt){this.error(nt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(ti,Ut,B)=>{"use strict";B.d(Ut,{Z:()=>a});var w=B(4004);const{isArray:_}=Array;function a(he){return(0,w.U)(st=>function de(he,st){return _(st)?he(...st):he(st)}(he,st))}},5032:(ti,Ut,B)=>{"use strict";function w(){}B.d(Ut,{Z:()=>w})},9635:(ti,Ut,B)=>{"use strict";B.d(Ut,{U:()=>de,z:()=>_});var w=B(4671);function _(...a){return de(a)}function de(a){return 0===a.length?w.y:1===a.length?a[0]:function(st){return a.reduce((nt,Oe)=>Oe(nt),st)}}},7849:(ti,Ut,B)=>{"use strict";B.d(Ut,{h:()=>de});var w=B(2416),_=B(3410);function de(a){_.z.setTimeout(()=>{const{onUnhandledError:he}=w.v;if(!he)throw a;he(a)})}},4532:(ti,Ut,B)=>{"use strict";function w(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Ut,{z:()=>w})},1230:(ti,Ut,B)=>{"use strict";function he(Ke,Ne,He,yt){var ii,Tn=arguments.length,Xt=Tn<3?Ne:null===yt?yt=Object.getOwnPropertyDescriptor(Ne,He):yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Xt=Reflect.decorate(Ke,Ne,He,yt);else for(var vi=Ke.length-1;vi>=0;vi--)(ii=Ke[vi])&&(Xt=(Tn<3?ii(Xt):Tn>3?ii(Ne,He,Xt):ii(Ne,He))||Xt);return Tn>3&&Xt&&Object.defineProperty(Ne,He,Xt),Xt}function st(Ke,Ne){return function(He,yt){Ne(He,yt,Ke)}}function nt(Ke,Ne){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Ke,Ne)}function Oe(Ke,Ne,He,yt){return new(He||(He=Promise))(function(Xt,ii){function vi(Li){try{Nn(yt.next(Li))}catch(Jn){ii(Jn)}}function wi(Li){try{Nn(yt.throw(Li))}catch(Jn){ii(Jn)}}function Nn(Li){Li.done?Xt(Li.value):function Tn(Xt){return Xt instanceof He?Xt:new He(function(ii){ii(Xt)})}(Li.value).then(vi,wi)}Nn((yt=yt.apply(Ke,Ne||[])).next())})}function kt(Ke){return this instanceof kt?(this.v=Ke,this):new kt(Ke)}function Qe(Ke,Ne,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Tn,yt=He.apply(Ke,Ne||[]),Xt=[];return Tn={},ii("next"),ii("throw"),ii("return"),Tn[Symbol.asyncIterator]=function(){return this},Tn;function ii(mn){yt[mn]&&(Tn[mn]=function(Tt){return new Promise(function(Ge,Fe){Xt.push([mn,Tt,Ge,Fe])>1||vi(mn,Tt)})})}function vi(mn,Tt){try{!function wi(mn){mn.value instanceof kt?Promise.resolve(mn.value.v).then(Nn,Li):Jn(Xt[0][2],mn)}(yt[mn](Tt))}catch(Ge){Jn(Xt[0][3],Ge)}}function Nn(mn){vi("next",mn)}function Li(mn){vi("throw",mn)}function Jn(mn,Tt){mn(Tt),Xt.shift(),Xt.length&&vi(Xt[0][0],Xt[0][1])}}function Fn(Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Ne=Ke[Symbol.asyncIterator];return Ne?Ne.call(Ke):(Ke=function Et(Ke){var Ne="function"==typeof Symbol&&Symbol.iterator,He=Ne&&Ke[Ne],yt=0;if(He)return He.call(Ke);if(Ke&&"number"==typeof Ke.length)return{next:function(){return Ke&&yt>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[yt++],done:!Ke}}};throw new TypeError(Ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ke),He={},yt("next"),yt("throw"),yt("return"),He[Symbol.asyncIterator]=function(){return this},He);function yt(Xt){He[Xt]=Ke[Xt]&&function(ii){return new Promise(function(vi,wi){!function Tn(Xt,ii,vi,wi){Promise.resolve(wi).then(function(Nn){Xt({value:Nn,done:vi})},ii)}(vi,wi,(ii=Ke[Xt](ii)).done,ii.value)})}}}B.d(Ut,{FC:()=>Qe,KL:()=>Fn,fM:()=>st,gn:()=>he,mG:()=>Oe,qq:()=>kt,w6:()=>nt})},7340:(ti,Ut,B)=>{"use strict";B.d(Ut,{IO:()=>et,LC:()=>_,SB:()=>ke,X$:()=>a,ZE:()=>Hn,ZN:()=>Qe,_j:()=>w,eR:()=>pt,jt:()=>he,k1:()=>Fn,l3:()=>de,oB:()=>Oe,pV:()=>dt,vP:()=>nt});class w{}class _{}const de="*";function a(Ye,Ce){return{type:7,name:Ye,definitions:Ce,options:{}}}function he(Ye,Ce=null){return{type:4,styles:Ce,timings:Ye}}function nt(Ye,Ce=null){return{type:2,steps:Ye,options:Ce}}function Oe(Ye){return{type:6,styles:Ye,offset:null}}function ke(Ye,Ce,we){return{type:0,name:Ye,styles:Ce,options:we}}function pt(Ye,Ce,we=null){return{type:1,expr:Ye,animation:Ce,options:we}}function dt(Ye=null){return{type:9,options:Ye}}function et(Ye,Ce,we=null){return{type:11,selector:Ye,animation:Ce,options:we}}function kt(Ye){Promise.resolve().then(Ye)}class Qe{constructor(Ce=0,we=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ce+we}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ce=>Ce()),this._onDoneFns=[])}onStart(Ce){this._originalOnStartFns.push(Ce),this._onStartFns.push(Ce)}onDone(Ce){this._originalOnDoneFns.push(Ce),this._onDoneFns.push(Ce)}onDestroy(Ce){this._onDestroyFns.push(Ce)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){kt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ce=>Ce()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ce=>Ce()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ce){this._position=this.totalTime?Ce*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ce){const we="start"==Ce?this._onStartFns:this._onDoneFns;we.forEach(At=>At()),we.length=0}}class Hn{constructor(Ce){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ce;let we=0,At=0,zt=0;const Jt=this.players.length;0==Jt?kt(()=>this._onFinish()):this.players.forEach(Mn=>{Mn.onDone(()=>{++we==Jt&&this._onFinish()}),Mn.onDestroy(()=>{++At==Jt&&this._onDestroy()}),Mn.onStart(()=>{++zt==Jt&&this._onStart()})}),this.totalTime=this.players.reduce((Mn,Ke)=>Math.max(Mn,Ke.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ce=>Ce()),this._onDoneFns=[])}init(){this.players.forEach(Ce=>Ce.init())}onStart(Ce){this._onStartFns.push(Ce)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ce=>Ce()),this._onStartFns=[])}onDone(Ce){this._onDoneFns.push(Ce)}onDestroy(Ce){this._onDestroyFns.push(Ce)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ce=>Ce.play())}pause(){this.players.forEach(Ce=>Ce.pause())}restart(){this.players.forEach(Ce=>Ce.restart())}finish(){this._onFinish(),this.players.forEach(Ce=>Ce.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ce=>Ce.destroy()),this._onDestroyFns.forEach(Ce=>Ce()),this._onDestroyFns=[])}reset(){this.players.forEach(Ce=>Ce.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ce){const we=Ce*this.totalTime;this.players.forEach(At=>{const zt=At.totalTime?Math.min(1,we/At.totalTime):1;At.setPosition(zt)})}getPosition(){const Ce=this.players.reduce((we,At)=>null===we||At.totalTime>we.totalTime?At:we,null);return null!=Ce?Ce.getPosition():0}beforeDestroy(){this.players.forEach(Ce=>{Ce.beforeDestroy&&Ce.beforeDestroy()})}triggerCallback(Ce){const we="start"==Ce?this._onStartFns:this._onDoneFns;we.forEach(At=>At()),we.length=0}}const Fn="!"},2687:(ti,Ut,B)=>{"use strict";B.d(Ut,{Em:()=>Xt,Kd:()=>Rn,X6:()=>Ot,ic:()=>vi,qV:()=>St,qm:()=>nn,s1:()=>Tn,tE:()=>Ji,yG:()=>on});var w=B(6895),_=B(4650),de=B(7579),a=B(727),he=B(1135),st=B(9646),nt=B(9521),Oe=B(8505),ke=B(8372),rt=B(9300),pt=B(4004),Et=B(5698),dt=B(5684),wt=B(1884),et=B(2722),Zt=B(1281),kt=B(3353);class yt{constructor(xt){this._items=xt,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new de.x,this._typeaheadSubscription=a.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=ft=>ft.disabled,this._pressedLetters=[],this.tabOut=new de.x,this.change=new de.x,xt instanceof _.n_E&&xt.changes.subscribe(ft=>{if(this._activeItem){const wn=ft.toArray().indexOf(this._activeItem);wn>-1&&wn!==this._activeItemIndex&&(this._activeItemIndex=wn)}})}skipPredicate(xt){return this._skipPredicateFn=xt,this}withWrap(xt=!0){return this._wrap=xt,this}withVerticalOrientation(xt=!0){return this._vertical=xt,this}withHorizontalOrientation(xt){return this._horizontal=xt,this}withAllowedModifierKeys(xt){return this._allowedModifierKeys=xt,this}withTypeAhead(xt=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Oe.b)(ft=>this._pressedLetters.push(ft)),(0,ke.b)(xt),(0,rt.h)(()=>this._pressedLetters.length>0),(0,pt.U)(()=>this._pressedLetters.join(""))).subscribe(ft=>{const Yt=this._getItemsArray();for(let wn=1;wn<Yt.length+1;wn++){const ri=(this._activeItemIndex+wn)%Yt.length,Ee=Yt[ri];if(!this._skipPredicateFn(Ee)&&0===Ee.getLabel().toUpperCase().trim().indexOf(ft)){this.setActiveItem(ri);break}}this._pressedLetters=[]}),this}withHomeAndEnd(xt=!0){return this._homeAndEnd=xt,this}setActiveItem(xt){const ft=this._activeItem;this.updateActiveItem(xt),this._activeItem!==ft&&this.change.next(this._activeItemIndex)}onKeydown(xt){const ft=xt.keyCode,wn=["altKey","ctrlKey","metaKey","shiftKey"].every(ri=>!xt[ri]||this._allowedModifierKeys.indexOf(ri)>-1);switch(ft){case nt.Mf:return void this.tabOut.next();case nt.JH:if(this._vertical&&wn){this.setNextItemActive();break}return;case nt.LH:if(this._vertical&&wn){this.setPreviousItemActive();break}return;case nt.SV:if(this._horizontal&&wn){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case nt.oh:if(this._horizontal&&wn){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case nt.Sd:if(this._homeAndEnd&&wn){this.setFirstItemActive();break}return;case nt.uR:if(this._homeAndEnd&&wn){this.setLastItemActive();break}return;default:return void((wn||(0,nt.Vb)(xt,"shiftKey"))&&(xt.key&&1===xt.key.length?this._letterKeyStream.next(xt.key.toLocaleUpperCase()):(ft>=nt.A&&ft<=nt.Z||ft>=nt.xE&&ft<=nt.aO)&&this._letterKeyStream.next(String.fromCharCode(ft))))}this._pressedLetters=[],xt.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(xt){const ft=this._getItemsArray(),Yt="number"==typeof xt?xt:ft.indexOf(xt);this._activeItem=ft[Yt]??null,this._activeItemIndex=Yt}_setActiveItemByDelta(xt){this._wrap?this._setActiveInWrapMode(xt):this._setActiveInDefaultMode(xt)}_setActiveInWrapMode(xt){const ft=this._getItemsArray();for(let Yt=1;Yt<=ft.length;Yt++){const wn=(this._activeItemIndex+xt*Yt+ft.length)%ft.length;if(!this._skipPredicateFn(ft[wn]))return void this.setActiveItem(wn)}}_setActiveInDefaultMode(xt){this._setActiveItemByIndex(this._activeItemIndex+xt,xt)}_setActiveItemByIndex(xt,ft){const Yt=this._getItemsArray();if(Yt[xt]){for(;this._skipPredicateFn(Yt[xt]);)if(!Yt[xt+=ft])return;this.setActiveItem(xt)}}_getItemsArray(){return this._items instanceof _.n_E?this._items.toArray():this._items}}class Tn extends yt{setActiveItem(xt){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(xt),this.activeItem&&this.activeItem.setActiveStyles()}}class Xt extends yt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(xt){return this._origin=xt,this}setActiveItem(xt){super.setActiveItem(xt),this.activeItem&&this.activeItem.focus(this._origin)}}let vi=(()=>{class Qt{constructor(ft){this._platform=ft}isDisabled(ft){return ft.hasAttribute("disabled")}isVisible(ft){return function Nn(Qt){return!!(Qt.offsetWidth||Qt.offsetHeight||"function"==typeof Qt.getClientRects&&Qt.getClientRects().length)}(ft)&&"visible"===getComputedStyle(ft).visibility}isTabbable(ft){if(!this._platform.isBrowser)return!1;const Yt=function wi(Qt){try{return Qt.frameElement}catch{return null}}(function ot(Qt){return Qt.ownerDocument&&Qt.ownerDocument.defaultView||window}(ft));if(Yt&&(-1===ht(Yt)||!this.isVisible(Yt)))return!1;let wn=ft.nodeName.toLowerCase(),ri=ht(ft);return ft.hasAttribute("contenteditable")?-1!==ri:!("iframe"===wn||"object"===wn||this._platform.WEBKIT&&this._platform.IOS&&!function Xe(Qt){let xt=Qt.nodeName.toLowerCase(),ft="input"===xt&&Qt.type;return"text"===ft||"password"===ft||"select"===xt||"textarea"===xt}(ft))&&("audio"===wn?!!ft.hasAttribute("controls")&&-1!==ri:"video"===wn?-1!==ri&&(null!==ri||this._platform.FIREFOX||ft.hasAttribute("controls")):ft.tabIndex>=0)}isFocusable(ft,Yt){return function ce(Qt){return!function Jn(Qt){return function Tt(Qt){return"input"==Qt.nodeName.toLowerCase()}(Qt)&&"hidden"==Qt.type}(Qt)&&(function Li(Qt){let xt=Qt.nodeName.toLowerCase();return"input"===xt||"select"===xt||"button"===xt||"textarea"===xt}(Qt)||function mn(Qt){return function Ge(Qt){return"a"==Qt.nodeName.toLowerCase()}(Qt)&&Qt.hasAttribute("href")}(Qt)||Qt.hasAttribute("contenteditable")||Fe(Qt))}(ft)&&!this.isDisabled(ft)&&(Yt?.ignoreVisibility||this.isVisible(ft))}}return Qt.\u0275fac=function(ft){return new(ft||Qt)(_.LFG(kt.t4))},Qt.\u0275prov=_.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})();function Fe(Qt){if(!Qt.hasAttribute("tabindex")||void 0===Qt.tabIndex)return!1;let xt=Qt.getAttribute("tabindex");return!(!xt||isNaN(parseInt(xt,10)))}function ht(Qt){if(!Fe(Qt))return null;const xt=parseInt(Qt.getAttribute("tabindex")||"",10);return isNaN(xt)?-1:xt}class Se{constructor(xt,ft,Yt,wn,ri=!1){this._element=xt,this._checker=ft,this._ngZone=Yt,this._document=wn,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,ri||this.attachAnchors()}get enabled(){return this._enabled}set enabled(xt){this._enabled=xt,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(xt,this._startAnchor),this._toggleAnchorTabIndex(xt,this._endAnchor))}destroy(){const xt=this._startAnchor,ft=this._endAnchor;xt&&(xt.removeEventListener("focus",this.startAnchorListener),xt.remove()),ft&&(ft.removeEventListener("focus",this.endAnchorListener),ft.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(xt){return new Promise(ft=>{this._executeOnStable(()=>ft(this.focusInitialElement(xt)))})}focusFirstTabbableElementWhenReady(xt){return new Promise(ft=>{this._executeOnStable(()=>ft(this.focusFirstTabbableElement(xt)))})}focusLastTabbableElementWhenReady(xt){return new Promise(ft=>{this._executeOnStable(()=>ft(this.focusLastTabbableElement(xt)))})}_getRegionBoundary(xt){let ft=this._element.querySelectorAll(`[cdk-focus-region-${xt}], [cdkFocusRegion${xt}], [cdk-focus-${xt}]`);for(let Yt=0;Yt<ft.length;Yt++)ft[Yt].hasAttribute(`cdk-focus-${xt}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${xt}', use 'cdkFocusRegion${xt}' instead. The deprecated attribute will be removed in 8.0.0.`,ft[Yt]):ft[Yt].hasAttribute(`cdk-focus-region-${xt}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${xt}', use 'cdkFocusRegion${xt}' instead. The deprecated attribute will be removed in 8.0.0.`,ft[Yt]);return"start"==xt?ft.length?ft[0]:this._getFirstTabbableElement(this._element):ft.length?ft[ft.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(xt){const ft=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(ft){if(ft.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",ft),!this._checker.isFocusable(ft)){const Yt=this._getFirstTabbableElement(ft);return Yt?.focus(xt),!!Yt}return ft.focus(xt),!0}return this.focusFirstTabbableElement(xt)}focusFirstTabbableElement(xt){const ft=this._getRegionBoundary("start");return ft&&ft.focus(xt),!!ft}focusLastTabbableElement(xt){const ft=this._getRegionBoundary("end");return ft&&ft.focus(xt),!!ft}hasAttached(){return this._hasAttached}_getFirstTabbableElement(xt){if(this._checker.isFocusable(xt)&&this._checker.isTabbable(xt))return xt;const ft=xt.children;for(let Yt=0;Yt<ft.length;Yt++){const wn=ft[Yt].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ft[Yt]):null;if(wn)return wn}return null}_getLastTabbableElement(xt){if(this._checker.isFocusable(xt)&&this._checker.isTabbable(xt))return xt;const ft=xt.children;for(let Yt=ft.length-1;Yt>=0;Yt--){const wn=ft[Yt].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ft[Yt]):null;if(wn)return wn}return null}_createAnchor(){const xt=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,xt),xt.classList.add("cdk-visually-hidden"),xt.classList.add("cdk-focus-trap-anchor"),xt.setAttribute("aria-hidden","true"),xt}_toggleAnchorTabIndex(xt,ft){xt?ft.setAttribute("tabindex","0"):ft.removeAttribute("tabindex")}toggleAnchors(xt){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(xt,this._startAnchor),this._toggleAnchorTabIndex(xt,this._endAnchor))}_executeOnStable(xt){this._ngZone.isStable?xt():this._ngZone.onStable.pipe((0,Et.q)(1)).subscribe(xt)}}let St=(()=>{class Qt{constructor(ft,Yt,wn){this._checker=ft,this._ngZone=Yt,this._document=wn}create(ft,Yt=!1){return new Se(ft,this._checker,this._ngZone,this._document,Yt)}}return Qt.\u0275fac=function(ft){return new(ft||Qt)(_.LFG(vi),_.LFG(_.R0b),_.LFG(w.K0))},Qt.\u0275prov=_.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})();function Ot(Qt){return 0===Qt.offsetX&&0===Qt.offsetY}function on(Qt){const xt=Qt.touches&&Qt.touches[0]||Qt.changedTouches&&Qt.changedTouches[0];return!(!xt||-1!==xt.identifier||null!=xt.radiusX&&1!==xt.radiusX||null!=xt.radiusY&&1!==xt.radiusY)}const jt=new _.OlP("cdk-input-modality-detector-options"),Bt={ignoreKeys:[nt.zL,nt.jx,nt.b2,nt.MW,nt.JU]},ge=(0,kt.i$)({passive:!0,capture:!0});let pe=(()=>{class Qt{constructor(ft,Yt,wn,ri){this._platform=ft,this._mostRecentTarget=null,this._modality=new he.X(null),this._lastTouchMs=0,this._onKeydown=Ee=>{this._options?.ignoreKeys?.some(ee=>ee===Ee.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,kt.sA)(Ee))},this._onMousedown=Ee=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ot(Ee)?"keyboard":"mouse"),this._mostRecentTarget=(0,kt.sA)(Ee))},this._onTouchstart=Ee=>{on(Ee)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,kt.sA)(Ee))},this._options={...Bt,...ri},this.modalityDetected=this._modality.pipe((0,dt.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,wt.x)()),ft.isBrowser&&Yt.runOutsideAngular(()=>{wn.addEventListener("keydown",this._onKeydown,ge),wn.addEventListener("mousedown",this._onMousedown,ge),wn.addEventListener("touchstart",this._onTouchstart,ge)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ge),document.removeEventListener("mousedown",this._onMousedown,ge),document.removeEventListener("touchstart",this._onTouchstart,ge))}}return Qt.\u0275fac=function(ft){return new(ft||Qt)(_.LFG(kt.t4),_.LFG(_.R0b),_.LFG(w.K0),_.LFG(jt,8))},Qt.\u0275prov=_.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})();const te=new _.OlP("liveAnnouncerElement",{providedIn:"root",factory:function it(){return null}}),Ht=new _.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Rn=(()=>{class Qt{constructor(ft,Yt,wn,ri){this._ngZone=Yt,this._defaultOptions=ri,this._document=wn,this._liveElement=ft||this._createLiveElement()}announce(ft,...Yt){const wn=this._defaultOptions;let ri,Ee;return 1===Yt.length&&"number"==typeof Yt[0]?Ee=Yt[0]:[ri,Ee]=Yt,this.clear(),clearTimeout(this._previousTimeout),ri||(ri=wn&&wn.politeness?wn.politeness:"polite"),null==Ee&&wn&&(Ee=wn.duration),this._liveElement.setAttribute("aria-live",ri),this._ngZone.runOutsideAngular(()=>new Promise(ee=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=ft,ee(),"number"==typeof Ee&&(this._previousTimeout=setTimeout(()=>this.clear(),Ee))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null}_createLiveElement(){const ft="cdk-live-announcer-element",Yt=this._document.getElementsByClassName(ft),wn=this._document.createElement("div");for(let ri=0;ri<Yt.length;ri++)Yt[ri].remove();return wn.classList.add(ft),wn.classList.add("cdk-visually-hidden"),wn.setAttribute("aria-atomic","true"),wn.setAttribute("aria-live","polite"),this._document.body.appendChild(wn),wn}}return Qt.\u0275fac=function(ft){return new(ft||Qt)(_.LFG(te,8),_.LFG(_.R0b),_.LFG(w.K0),_.LFG(Ht,8))},Qt.\u0275prov=_.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})();const Ii=new _.OlP("cdk-focus-monitor-default-options"),bn=(0,kt.i$)({passive:!0,capture:!0});let Ji=(()=>{class Qt{constructor(ft,Yt,wn,ri,Ee){this._ngZone=ft,this._platform=Yt,this._inputModalityDetector=wn,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new de.x,this._rootNodeFocusAndBlurListener=ee=>{const oe=(0,kt.sA)(ee),Me="focus"===ee.type?this._onFocus:this._onBlur;for(let Ve=oe;Ve;Ve=Ve.parentElement)Me.call(this,ee,Ve)},this._document=ri,this._detectionMode=Ee?.detectionMode||0}monitor(ft,Yt=!1){const wn=(0,Zt.fI)(ft);if(!this._platform.isBrowser||1!==wn.nodeType)return(0,st.of)(null);const ri=(0,kt.kV)(wn)||this._getDocument(),Ee=this._elementInfo.get(wn);if(Ee)return Yt&&(Ee.checkChildren=!0),Ee.subject;const ee={checkChildren:Yt,subject:new de.x,rootNode:ri};return this._elementInfo.set(wn,ee),this._registerGlobalListeners(ee),ee.subject}stopMonitoring(ft){const Yt=(0,Zt.fI)(ft),wn=this._elementInfo.get(Yt);wn&&(wn.subject.complete(),this._setClasses(Yt),this._elementInfo.delete(Yt),this._removeGlobalListeners(wn))}focusVia(ft,Yt,wn){const ri=(0,Zt.fI)(ft);ri===this._getDocument().activeElement?this._getClosestElementsInfo(ri).forEach(([ee,oe])=>this._originChanged(ee,Yt,oe)):(this._setOrigin(Yt),"function"==typeof ri.focus&&ri.focus(wn))}ngOnDestroy(){this._elementInfo.forEach((ft,Yt)=>this.stopMonitoring(Yt))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(ft){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ft)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(ft){return 1===this._detectionMode||!!ft?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(ft,Yt){ft.classList.toggle("cdk-focused",!!Yt),ft.classList.toggle("cdk-touch-focused","touch"===Yt),ft.classList.toggle("cdk-keyboard-focused","keyboard"===Yt),ft.classList.toggle("cdk-mouse-focused","mouse"===Yt),ft.classList.toggle("cdk-program-focused","program"===Yt)}_setOrigin(ft,Yt=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ft,this._originFromTouchInteraction="touch"===ft&&Yt,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ft,Yt){const wn=this._elementInfo.get(Yt),ri=(0,kt.sA)(ft);!wn||!wn.checkChildren&&Yt!==ri||this._originChanged(Yt,this._getFocusOrigin(ri),wn)}_onBlur(ft,Yt){const wn=this._elementInfo.get(Yt);!wn||wn.checkChildren&&ft.relatedTarget instanceof Node&&Yt.contains(ft.relatedTarget)||(this._setClasses(Yt),this._emitOrigin(wn.subject,null))}_emitOrigin(ft,Yt){this._ngZone.run(()=>ft.next(Yt))}_registerGlobalListeners(ft){if(!this._platform.isBrowser)return;const Yt=ft.rootNode,wn=this._rootNodeFocusListenerCount.get(Yt)||0;wn||this._ngZone.runOutsideAngular(()=>{Yt.addEventListener("focus",this._rootNodeFocusAndBlurListener,bn),Yt.addEventListener("blur",this._rootNodeFocusAndBlurListener,bn)}),this._rootNodeFocusListenerCount.set(Yt,wn+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,et.R)(this._stopInputModalityDetector)).subscribe(ri=>{this._setOrigin(ri,!0)}))}_removeGlobalListeners(ft){const Yt=ft.rootNode;if(this._rootNodeFocusListenerCount.has(Yt)){const wn=this._rootNodeFocusListenerCount.get(Yt);wn>1?this._rootNodeFocusListenerCount.set(Yt,wn-1):(Yt.removeEventListener("focus",this._rootNodeFocusAndBlurListener,bn),Yt.removeEventListener("blur",this._rootNodeFocusAndBlurListener,bn),this._rootNodeFocusListenerCount.delete(Yt))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ft,Yt,wn){this._setClasses(ft,Yt),this._emitOrigin(wn.subject,Yt),this._lastFocusOrigin=Yt}_getClosestElementsInfo(ft){const Yt=[];return this._elementInfo.forEach((wn,ri)=>{(ri===ft||wn.checkChildren&&ri.contains(ft))&&Yt.push([ri,wn])}),Yt}}return Qt.\u0275fac=function(ft){return new(ft||Qt)(_.LFG(_.R0b),_.LFG(kt.t4),_.LFG(pe),_.LFG(w.K0,8),_.LFG(Ii,8))},Qt.\u0275prov=_.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})();const dn="cdk-high-contrast-black-on-white",It="cdk-high-contrast-white-on-black",ct="cdk-high-contrast-active";let nn=(()=>{class Qt{constructor(ft,Yt){this._platform=ft,this._document=Yt}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ft=this._document.createElement("div");ft.style.backgroundColor="rgb(1,2,3)",ft.style.position="absolute",this._document.body.appendChild(ft);const Yt=this._document.defaultView||window,wn=Yt&&Yt.getComputedStyle?Yt.getComputedStyle(ft):null,ri=(wn&&wn.backgroundColor||"").replace(/ /g,"");switch(ft.remove(),ri){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ft=this._document.body.classList;ft.remove(ct),ft.remove(dn),ft.remove(It),this._hasCheckedHighContrastMode=!0;const Yt=this.getHighContrastMode();1===Yt?(ft.add(ct),ft.add(dn)):2===Yt&&(ft.add(ct),ft.add(It))}}}return Qt.\u0275fac=function(ft){return new(ft||Qt)(_.LFG(kt.t4),_.LFG(w.K0))},Qt.\u0275prov=_.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"root"}),Qt})()},445:(ti,Ut,B)=>{"use strict";B.d(Ut,{Is:()=>he,vT:()=>nt});var w=B(4650),_=B(6895);const de=new w.OlP("cdk-dir-doc",{providedIn:"root",factory:function a(){return(0,w.f3M)(_.K0)}});let he=(()=>{class Oe{constructor(rt){if(this.value="ltr",this.change=new w.vpe,rt){const Et=rt.documentElement?rt.documentElement.dir:null,dt=(rt.body?rt.body.dir:null)||Et;this.value="ltr"===dt||"rtl"===dt?dt:"ltr"}}ngOnDestroy(){this.change.complete()}}return Oe.\u0275fac=function(rt){return new(rt||Oe)(w.LFG(de,8))},Oe.\u0275prov=w.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})(),nt=(()=>{class Oe{}return Oe.\u0275fac=function(rt){return new(rt||Oe)},Oe.\u0275mod=w.oAB({type:Oe}),Oe.\u0275inj=w.cJS({}),Oe})()},1281:(ti,Ut,B)=>{"use strict";B.d(Ut,{Eq:()=>he,HM:()=>st,Ig:()=>_,du:()=>Oe,fI:()=>nt,su:()=>de});var w=B(4650);function _(ke){return null!=ke&&"false"!=`${ke}`}function de(ke,rt=0){return function a(ke){return!isNaN(parseFloat(ke))&&!isNaN(Number(ke))}(ke)?Number(ke):rt}function he(ke){return Array.isArray(ke)?ke:[ke]}function st(ke){return null==ke?"":"string"==typeof ke?ke:`${ke}px`}function nt(ke){return ke instanceof w.SBq?ke.nativeElement:ke}function Oe(ke,rt=/\s+/){const pt=[];if(null!=ke){const Et=Array.isArray(ke)?ke:`${ke}`.split(rt);for(const dt of Et){const wt=`${dt}`.trim();wt&&pt.push(wt)}}return pt}},5017:(ti,Ut,B)=>{"use strict";B.d(Ut,{A8:()=>rt,Ov:()=>Oe});var w=B(7579),_=B(4650);class Oe{constructor(dt=!1,wt,et=!0){this._multiple=dt,this._emitChanges=et,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new w.x,wt&&wt.length&&(dt?wt.forEach(Zt=>this._markSelected(Zt)):this._markSelected(wt[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...dt){this._verifyValueAssignment(dt),dt.forEach(wt=>this._markSelected(wt)),this._emitChangeEvent()}deselect(...dt){this._verifyValueAssignment(dt),dt.forEach(wt=>this._unmarkSelected(wt)),this._emitChangeEvent()}toggle(dt){this.isSelected(dt)?this.deselect(dt):this.select(dt)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(dt){return this._selection.has(dt)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(dt){this._multiple&&this.selected&&this._selected.sort(dt)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(dt){this.isSelected(dt)||(this._multiple||this._unmarkAll(),this._selection.add(dt),this._emitChanges&&this._selectedToEmit.push(dt))}_unmarkSelected(dt){this.isSelected(dt)&&(this._selection.delete(dt),this._emitChanges&&this._deselectedToEmit.push(dt))}_unmarkAll(){this.isEmpty()||this._selection.forEach(dt=>this._unmarkSelected(dt))}_verifyValueAssignment(dt){}}let rt=(()=>{class Et{constructor(){this._listeners=[]}notify(wt,et){for(let Zt of this._listeners)Zt(wt,et)}listen(wt){return this._listeners.push(wt),()=>{this._listeners=this._listeners.filter(et=>wt!==et)}}ngOnDestroy(){this._listeners=[]}}return Et.\u0275fac=function(wt){return new(wt||Et)},Et.\u0275prov=_.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})()},9521:(ti,Ut,B)=>{"use strict";B.d(Ut,{A:()=>Jn,JH:()=>Fn,JU:()=>st,K5:()=>he,LH:()=>Qe,L_:()=>Et,MW:()=>Ht,Mf:()=>de,SV:()=>Hn,Sd:()=>Zt,Vb:()=>di,Z:()=>it,aO:()=>ii,b2:()=>Ln,hY:()=>pt,jx:()=>nt,oh:()=>kt,uR:()=>et,xE:()=>zt,zL:()=>Oe});const de=9,he=13,st=16,nt=17,Oe=18,pt=27,Et=32,et=35,Zt=36,kt=37,Qe=38,Hn=39,Fn=40,zt=48,ii=57,Jn=65,it=90,Ht=91,Ln=224;function di(Mi,...mi){return mi.length?mi.some(Ki=>Mi[Ki]):Mi.altKey||Mi.shiftKey||Mi.ctrlKey||Mi.metaKey}},8184:(ti,Ut,B)=>{"use strict";B.d(Ut,{U8:()=>li,X_:()=>we,Xj:()=>Tn,aV:()=>ht});var w=B(8605),_=B(6895),de=B(4650),a=B(1281),he=B(3353),st=B(1230),nt=B(445),Oe=B(4080),ke=B(7579),rt=B(727),pt=B(6451),Et=B(5698),dt=B(2722);const wt=(0,he.Mq)();class et{constructor(ae,$e){this._viewportRuler=ae,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=$e}attach(){}enable(){if(this._canBeEnabled()){const ae=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=ae.style.left||"",this._previousHTMLStyles.top=ae.style.top||"",ae.style.left=(0,a.HM)(-this._previousScrollPosition.left),ae.style.top=(0,a.HM)(-this._previousScrollPosition.top),ae.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const ae=this._document.documentElement,Ot=ae.style,on=this._document.body.style,jt=Ot.scrollBehavior||"",Bt=on.scrollBehavior||"";this._isEnabled=!1,Ot.left=this._previousHTMLStyles.left,Ot.top=this._previousHTMLStyles.top,ae.classList.remove("cdk-global-scrollblock"),wt&&(Ot.scrollBehavior=on.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wt&&(Ot.scrollBehavior=jt,on.scrollBehavior=Bt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const $e=this._document.body,Ot=this._viewportRuler.getViewportSize();return $e.scrollHeight>Ot.height||$e.scrollWidth>Ot.width}}class kt{constructor(ae,$e,Ot,on){this._scrollDispatcher=ae,this._ngZone=$e,this._viewportRuler=Ot,this._config=on,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(ae){this._overlayRef=ae}enable(){if(this._scrollSubscription)return;const ae=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=ae.subscribe(()=>{const $e=this._viewportRuler.getViewportScrollPosition().top;Math.abs($e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=ae.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Qe{enable(){}disable(){}attach(){}}function Hn(Dn,ae){return ae.some($e=>Dn.bottom<$e.top||Dn.top>$e.bottom||Dn.right<$e.left||Dn.left>$e.right)}function Fn(Dn,ae){return ae.some($e=>Dn.top<$e.top||Dn.bottom>$e.bottom||Dn.left<$e.left||Dn.right>$e.right)}class Ye{constructor(ae,$e,Ot,on){this._scrollDispatcher=ae,this._viewportRuler=$e,this._ngZone=Ot,this._config=on,this._scrollSubscription=null}attach(ae){this._overlayRef=ae}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const $e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Ot,height:on}=this._viewportRuler.getViewportSize();Hn($e,[{width:Ot,height:on,bottom:on,right:Ot,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ce=(()=>{class Dn{constructor($e,Ot,on,jt){this._scrollDispatcher=$e,this._viewportRuler=Ot,this._ngZone=on,this.noop=()=>new Qe,this.close=Bt=>new kt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Bt),this.block=()=>new et(this._viewportRuler,this._document),this.reposition=Bt=>new Ye(this._scrollDispatcher,this._viewportRuler,this._ngZone,Bt),this._document=jt}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(w.mF),de.LFG(w.rL),de.LFG(de.R0b),de.LFG(_.K0))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn})();class we{constructor(ae){if(this.scrollStrategy=new Qe,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,ae){const $e=Object.keys(ae);for(const Ot of $e)void 0!==ae[Ot]&&(this[Ot]=ae[Ot])}}}class At{constructor(ae,$e,Ot,on,jt){this.offsetX=Ot,this.offsetY=on,this.panelClass=jt,this.originX=ae.originX,this.originY=ae.originY,this.overlayX=$e.overlayX,this.overlayY=$e.overlayY}}class zt{}let Jt=(()=>{let Dn=class{constructor($e,Ot){this.connectionPair=$e,this.scrollableViewProperties=Ot}};return Dn=(0,st.gn)([(0,st.fM)(1,(0,de.FiY)()),(0,st.w6)("design:paramtypes",[At,zt])],Dn),Dn})(),Ne=(()=>{class Dn{constructor($e){this._attachedOverlays=[],this._document=$e}ngOnDestroy(){this.detach()}add($e){this.remove($e),this._attachedOverlays.push($e)}remove($e){const Ot=this._attachedOverlays.indexOf($e);Ot>-1&&this._attachedOverlays.splice(Ot,1),0===this._attachedOverlays.length&&this.detach()}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(_.K0))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn})(),He=(()=>{class Dn extends Ne{constructor($e){super($e),this._keydownListener=Ot=>{const on=this._attachedOverlays;for(let jt=on.length-1;jt>-1;jt--)if(on[jt]._keydownEvents.observers.length>0){on[jt]._keydownEvents.next(Ot);break}}}add($e){super.add($e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(_.K0))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn})(),yt=(()=>{class Dn extends Ne{constructor($e,Ot){super($e),this._platform=Ot,this._cursorStyleIsSet=!1,this._pointerDownListener=on=>{this._pointerDownEventTarget=(0,he.sA)(on)},this._clickListener=on=>{const jt=(0,he.sA)(on),Bt="click"===on.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:jt;this._pointerDownEventTarget=null;const Je=this._attachedOverlays.slice();for(let ge=Je.length-1;ge>-1;ge--){const pe=Je[ge];if(!(pe._outsidePointerEvents.observers.length<1)&&pe.hasAttached()){if(pe.overlayElement.contains(jt)||pe.overlayElement.contains(Bt))break;pe._outsidePointerEvents.next(on)}}}}add($e){if(super.add($e),!this._isAttached){const Ot=this._document.body;Ot.addEventListener("pointerdown",this._pointerDownListener,!0),Ot.addEventListener("click",this._clickListener,!0),Ot.addEventListener("auxclick",this._clickListener,!0),Ot.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Ot.style.cursor,Ot.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const $e=this._document.body;$e.removeEventListener("pointerdown",this._pointerDownListener,!0),$e.removeEventListener("click",this._clickListener,!0),$e.removeEventListener("auxclick",this._clickListener,!0),$e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&($e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(_.K0),de.LFG(he.t4))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn})(),Tn=(()=>{class Dn{constructor($e,Ot){this._platform=Ot,this._document=$e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const $e="cdk-overlay-container";if(this._platform.isBrowser||(0,he.Oy)()){const on=this._document.querySelectorAll(`.${$e}[platform="server"], .${$e}[platform="test"]`);for(let jt=0;jt<on.length;jt++)on[jt].remove()}const Ot=this._document.createElement("div");Ot.classList.add($e),(0,he.Oy)()?Ot.setAttribute("platform","test"):this._platform.isBrowser||Ot.setAttribute("platform","server"),this._document.body.appendChild(Ot),this._containerElement=Ot}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(_.K0),de.LFG(he.t4))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn})();class Xt{constructor(ae,$e,Ot,on,jt,Bt,Je,ge,pe){this._portalOutlet=ae,this._host=$e,this._pane=Ot,this._config=on,this._ngZone=jt,this._keyboardDispatcher=Bt,this._document=Je,this._location=ge,this._outsideClickDispatcher=pe,this._backdropElement=null,this._backdropClick=new ke.x,this._attachments=new ke.x,this._detachments=new ke.x,this._locationChanges=rt.w0.EMPTY,this._backdropClickHandler=te=>this._backdropClick.next(te),this._keydownEvents=new ke.x,this._outsidePointerEvents=new ke.x,on.scrollStrategy&&(this._scrollStrategy=on.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=on.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(ae){let $e=this._portalOutlet.attach(ae);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Et.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),$e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const ae=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),ae}dispose(){const ae=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,ae&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(ae){ae!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=ae,this.hasAttached()&&(ae.attach(this),this.updatePosition()))}updateSize(ae){this._config={...this._config,...ae},this._updateElementSize()}setDirection(ae){this._config={...this._config,direction:ae},this._updateElementDirection()}addPanelClass(ae){this._pane&&this._toggleClasses(this._pane,ae,!0)}removePanelClass(ae){this._pane&&this._toggleClasses(this._pane,ae,!1)}getDirection(){const ae=this._config.direction;return ae?"string"==typeof ae?ae:ae.value:"ltr"}updateScrollStrategy(ae){ae!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=ae,this.hasAttached()&&(ae.attach(this),ae.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const ae=this._pane.style;ae.width=(0,a.HM)(this._config.width),ae.height=(0,a.HM)(this._config.height),ae.minWidth=(0,a.HM)(this._config.minWidth),ae.minHeight=(0,a.HM)(this._config.minHeight),ae.maxWidth=(0,a.HM)(this._config.maxWidth),ae.maxHeight=(0,a.HM)(this._config.maxHeight)}_togglePointerEvents(ae){this._pane.style.pointerEvents=ae?"":"none"}_attachBackdrop(){const ae="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(ae)})}):this._backdropElement.classList.add(ae)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const ae=this._backdropElement;if(!ae)return;let $e;const Ot=()=>{ae&&(ae.removeEventListener("click",this._backdropClickHandler),ae.removeEventListener("transitionend",Ot),this._disposeBackdrop(ae)),this._config.backdropClass&&this._toggleClasses(ae,this._config.backdropClass,!1),clearTimeout($e)};ae.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{ae.addEventListener("transitionend",Ot)}),ae.style.pointerEvents="none",$e=this._ngZone.runOutsideAngular(()=>setTimeout(Ot,500))}_toggleClasses(ae,$e,Ot){const on=(0,a.Eq)($e||[]).filter(jt=>!!jt);on.length&&(Ot?ae.classList.add(...on):ae.classList.remove(...on))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const ae=this._ngZone.onStable.pipe((0,dt.R)((0,pt.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),ae.unsubscribe())})})}_disposeScrollStrategy(){const ae=this._scrollStrategy;ae&&(ae.disable(),ae.detach&&ae.detach())}_disposeBackdrop(ae){ae&&(ae.remove(),this._backdropElement===ae&&(this._backdropElement=null))}}const ii="cdk-overlay-connected-position-bounding-box",vi=/([A-Za-z%]+)$/;class wi{constructor(ae,$e,Ot,on,jt){this._viewportRuler=$e,this._document=Ot,this._platform=on,this._overlayContainer=jt,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ke.x,this._resizeSubscription=rt.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(ae)}get positions(){return this._preferredPositions}attach(ae){this._validatePositions(),ae.hostElement.classList.add(ii),this._overlayRef=ae,this._boundingBox=ae.hostElement,this._pane=ae.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const ae=this._originRect,$e=this._overlayRect,Ot=this._viewportRect,on=[];let jt;for(let Bt of this._preferredPositions){let Je=this._getOriginPoint(ae,Bt),ge=this._getOverlayPoint(Je,$e,Bt),pe=this._getOverlayFit(ge,$e,Ot,Bt);if(pe.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Bt,Je);this._canFitWithFlexibleDimensions(pe,ge,Ot)?on.push({position:Bt,origin:Je,overlayRect:$e,boundingBoxRect:this._calculateBoundingBoxRect(Je,Bt)}):(!jt||jt.overlayFit.visibleArea<pe.visibleArea)&&(jt={overlayFit:pe,overlayPoint:ge,originPoint:Je,position:Bt,overlayRect:$e})}if(on.length){let Bt=null,Je=-1;for(const ge of on){const pe=ge.boundingBoxRect.width*ge.boundingBoxRect.height*(ge.position.weight||1);pe>Je&&(Je=pe,Bt=ge)}return this._isPushed=!1,void this._applyPosition(Bt.position,Bt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(jt.position,jt.originPoint);this._applyPosition(jt.position,jt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Nn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ii),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const ae=this._lastPosition||this._preferredPositions[0],$e=this._getOriginPoint(this._originRect,ae);this._applyPosition(ae,$e)}}withScrollableContainers(ae){return this._scrollables=ae,this}withPositions(ae){return this._preferredPositions=ae,-1===ae.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(ae){return this._viewportMargin=ae,this}withFlexibleDimensions(ae=!0){return this._hasFlexibleDimensions=ae,this}withGrowAfterOpen(ae=!0){return this._growAfterOpen=ae,this}withPush(ae=!0){return this._canPush=ae,this}withLockedPosition(ae=!0){return this._positionLocked=ae,this}setOrigin(ae){return this._origin=ae,this}withDefaultOffsetX(ae){return this._offsetX=ae,this}withDefaultOffsetY(ae){return this._offsetY=ae,this}withTransformOriginOn(ae){return this._transformOriginSelector=ae,this}_getOriginPoint(ae,$e){let Ot,on;if("center"==$e.originX)Ot=ae.left+ae.width/2;else{const jt=this._isRtl()?ae.right:ae.left,Bt=this._isRtl()?ae.left:ae.right;Ot="start"==$e.originX?jt:Bt}return on="center"==$e.originY?ae.top+ae.height/2:"top"==$e.originY?ae.top:ae.bottom,{x:Ot,y:on}}_getOverlayPoint(ae,$e,Ot){let on,jt;return on="center"==Ot.overlayX?-$e.width/2:"start"===Ot.overlayX?this._isRtl()?-$e.width:0:this._isRtl()?0:-$e.width,jt="center"==Ot.overlayY?-$e.height/2:"top"==Ot.overlayY?0:-$e.height,{x:ae.x+on,y:ae.y+jt}}_getOverlayFit(ae,$e,Ot,on){const jt=Jn($e);let{x:Bt,y:Je}=ae,ge=this._getOffset(on,"x"),pe=this._getOffset(on,"y");ge&&(Bt+=ge),pe&&(Je+=pe);let Ht=0-Je,Rn=Je+jt.height-Ot.height,ni=this._subtractOverflows(jt.width,0-Bt,Bt+jt.width-Ot.width),Ii=this._subtractOverflows(jt.height,Ht,Rn),bn=ni*Ii;return{visibleArea:bn,isCompletelyWithinViewport:jt.width*jt.height===bn,fitsInViewportVertically:Ii===jt.height,fitsInViewportHorizontally:ni==jt.width}}_canFitWithFlexibleDimensions(ae,$e,Ot){if(this._hasFlexibleDimensions){const on=Ot.bottom-$e.y,jt=Ot.right-$e.x,Bt=Li(this._overlayRef.getConfig().minHeight),Je=Li(this._overlayRef.getConfig().minWidth),pe=ae.fitsInViewportHorizontally||null!=Je&&Je<=jt;return(ae.fitsInViewportVertically||null!=Bt&&Bt<=on)&&pe}return!1}_pushOverlayOnScreen(ae,$e,Ot){if(this._previousPushAmount&&this._positionLocked)return{x:ae.x+this._previousPushAmount.x,y:ae.y+this._previousPushAmount.y};const on=Jn($e),jt=this._viewportRect,Bt=Math.max(ae.x+on.width-jt.width,0),Je=Math.max(ae.y+on.height-jt.height,0),ge=Math.max(jt.top-Ot.top-ae.y,0),pe=Math.max(jt.left-Ot.left-ae.x,0);let te=0,it=0;return te=on.width<=jt.width?pe||-Bt:ae.x<this._viewportMargin?jt.left-Ot.left-ae.x:0,it=on.height<=jt.height?ge||-Je:ae.y<this._viewportMargin?jt.top-Ot.top-ae.y:0,this._previousPushAmount={x:te,y:it},{x:ae.x+te,y:ae.y+it}}_applyPosition(ae,$e){if(this._setTransformOrigin(ae),this._setOverlayElementStyles($e,ae),this._setBoundingBoxStyles($e,ae),ae.panelClass&&this._addPanelClasses(ae.panelClass),this._lastPosition=ae,this._positionChanges.observers.length){const Ot=this._getScrollVisibility(),on=new Jt(ae,Ot);this._positionChanges.next(on)}this._isInitialRender=!1}_setTransformOrigin(ae){if(!this._transformOriginSelector)return;const $e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Ot,on=ae.overlayY;Ot="center"===ae.overlayX?"center":this._isRtl()?"start"===ae.overlayX?"right":"left":"start"===ae.overlayX?"left":"right";for(let jt=0;jt<$e.length;jt++)$e[jt].style.transformOrigin=`${Ot} ${on}`}_calculateBoundingBoxRect(ae,$e){const Ot=this._viewportRect,on=this._isRtl();let jt,Bt,Je,te,it,Ht;if("top"===$e.overlayY)Bt=ae.y,jt=Ot.height-Bt+this._viewportMargin;else if("bottom"===$e.overlayY)Je=Ot.height-ae.y+2*this._viewportMargin,jt=Ot.height-Je+this._viewportMargin;else{const Rn=Math.min(Ot.bottom-ae.y+Ot.top,ae.y),ni=this._lastBoundingBoxSize.height;jt=2*Rn,Bt=ae.y-Rn,jt>ni&&!this._isInitialRender&&!this._growAfterOpen&&(Bt=ae.y-ni/2)}if("end"===$e.overlayX&&!on||"start"===$e.overlayX&&on)Ht=Ot.width-ae.x+this._viewportMargin,te=ae.x-this._viewportMargin;else if("start"===$e.overlayX&&!on||"end"===$e.overlayX&&on)it=ae.x,te=Ot.right-ae.x;else{const Rn=Math.min(Ot.right-ae.x+Ot.left,ae.x),ni=this._lastBoundingBoxSize.width;te=2*Rn,it=ae.x-Rn,te>ni&&!this._isInitialRender&&!this._growAfterOpen&&(it=ae.x-ni/2)}return{top:Bt,left:it,bottom:Je,right:Ht,width:te,height:jt}}_setBoundingBoxStyles(ae,$e){const Ot=this._calculateBoundingBoxRect(ae,$e);!this._isInitialRender&&!this._growAfterOpen&&(Ot.height=Math.min(Ot.height,this._lastBoundingBoxSize.height),Ot.width=Math.min(Ot.width,this._lastBoundingBoxSize.width));const on={};if(this._hasExactPosition())on.top=on.left="0",on.bottom=on.right=on.maxHeight=on.maxWidth="",on.width=on.height="100%";else{const jt=this._overlayRef.getConfig().maxHeight,Bt=this._overlayRef.getConfig().maxWidth;on.height=(0,a.HM)(Ot.height),on.top=(0,a.HM)(Ot.top),on.bottom=(0,a.HM)(Ot.bottom),on.width=(0,a.HM)(Ot.width),on.left=(0,a.HM)(Ot.left),on.right=(0,a.HM)(Ot.right),on.alignItems="center"===$e.overlayX?"center":"end"===$e.overlayX?"flex-end":"flex-start",on.justifyContent="center"===$e.overlayY?"center":"bottom"===$e.overlayY?"flex-end":"flex-start",jt&&(on.maxHeight=(0,a.HM)(jt)),Bt&&(on.maxWidth=(0,a.HM)(Bt))}this._lastBoundingBoxSize=Ot,Nn(this._boundingBox.style,on)}_resetBoundingBoxStyles(){Nn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Nn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(ae,$e){const Ot={},on=this._hasExactPosition(),jt=this._hasFlexibleDimensions,Bt=this._overlayRef.getConfig();if(on){const te=this._viewportRuler.getViewportScrollPosition();Nn(Ot,this._getExactOverlayY($e,ae,te)),Nn(Ot,this._getExactOverlayX($e,ae,te))}else Ot.position="static";let Je="",ge=this._getOffset($e,"x"),pe=this._getOffset($e,"y");ge&&(Je+=`translateX(${ge}px) `),pe&&(Je+=`translateY(${pe}px)`),Ot.transform=Je.trim(),Bt.maxHeight&&(on?Ot.maxHeight=(0,a.HM)(Bt.maxHeight):jt&&(Ot.maxHeight="")),Bt.maxWidth&&(on?Ot.maxWidth=(0,a.HM)(Bt.maxWidth):jt&&(Ot.maxWidth="")),Nn(this._pane.style,Ot)}_getExactOverlayY(ae,$e,Ot){let on={top:"",bottom:""},jt=this._getOverlayPoint($e,this._overlayRect,ae);this._isPushed&&(jt=this._pushOverlayOnScreen(jt,this._overlayRect,Ot));let Bt=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return jt.y-=Bt,"bottom"===ae.overlayY?on.bottom=this._document.documentElement.clientHeight-(jt.y+this._overlayRect.height)+"px":on.top=(0,a.HM)(jt.y),on}_getExactOverlayX(ae,$e,Ot){let Bt,on={left:"",right:""},jt=this._getOverlayPoint($e,this._overlayRect,ae);return this._isPushed&&(jt=this._pushOverlayOnScreen(jt,this._overlayRect,Ot)),Bt=this._isRtl()?"end"===ae.overlayX?"left":"right":"end"===ae.overlayX?"right":"left","right"===Bt?on.right=this._document.documentElement.clientWidth-(jt.x+this._overlayRect.width)+"px":on.left=(0,a.HM)(jt.x),on}_getScrollVisibility(){const ae=this._getOriginRect(),$e=this._pane.getBoundingClientRect(),Ot=this._scrollables.map(on=>on.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Fn(ae,Ot),isOriginOutsideView:Hn(ae,Ot),isOverlayClipped:Fn($e,Ot),isOverlayOutsideView:Hn($e,Ot)}}_subtractOverflows(ae,...$e){return $e.reduce((Ot,on)=>Ot-Math.max(on,0),ae)}_getNarrowedViewportRect(){const ae=this._document.documentElement.clientWidth,$e=this._document.documentElement.clientHeight,Ot=this._viewportRuler.getViewportScrollPosition();return{top:Ot.top+this._viewportMargin,left:Ot.left+this._viewportMargin,right:Ot.left+ae-this._viewportMargin,bottom:Ot.top+$e-this._viewportMargin,width:ae-2*this._viewportMargin,height:$e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(ae,$e){return"x"===$e?ae.offsetX??this._offsetX:ae.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(ae){this._pane&&(0,a.Eq)(ae).forEach($e=>{""!==$e&&-1===this._appliedPanelClasses.indexOf($e)&&(this._appliedPanelClasses.push($e),this._pane.classList.add($e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(ae=>{this._pane.classList.remove(ae)}),this._appliedPanelClasses=[])}_getOriginRect(){const ae=this._origin;if(ae instanceof de.SBq)return ae.nativeElement.getBoundingClientRect();if(ae instanceof Element)return ae.getBoundingClientRect();const $e=ae.width||0,Ot=ae.height||0;return{top:ae.y,bottom:ae.y+Ot,left:ae.x,right:ae.x+$e,height:Ot,width:$e}}}function Nn(Dn,ae){for(let $e in ae)ae.hasOwnProperty($e)&&(Dn[$e]=ae[$e]);return Dn}function Li(Dn){if("number"!=typeof Dn&&null!=Dn){const[ae,$e]=Dn.split(vi);return $e&&"px"!==$e?null:parseFloat(ae)}return Dn||null}function Jn(Dn){return{top:Math.floor(Dn.top),right:Math.floor(Dn.right),bottom:Math.floor(Dn.bottom),left:Math.floor(Dn.left),width:Math.floor(Dn.width),height:Math.floor(Dn.height)}}const mn="cdk-global-overlay-wrapper";class Tt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(ae){const $e=ae.getConfig();this._overlayRef=ae,this._width&&!$e.width&&ae.updateSize({width:this._width}),this._height&&!$e.height&&ae.updateSize({height:this._height}),ae.hostElement.classList.add(mn),this._isDisposed=!1}top(ae=""){return this._bottomOffset="",this._topOffset=ae,this._alignItems="flex-start",this}left(ae=""){return this._rightOffset="",this._leftOffset=ae,this._justifyContent="flex-start",this}bottom(ae=""){return this._topOffset="",this._bottomOffset=ae,this._alignItems="flex-end",this}right(ae=""){return this._leftOffset="",this._rightOffset=ae,this._justifyContent="flex-end",this}width(ae=""){return this._overlayRef?this._overlayRef.updateSize({width:ae}):this._width=ae,this}height(ae=""){return this._overlayRef?this._overlayRef.updateSize({height:ae}):this._height=ae,this}centerHorizontally(ae=""){return this.left(ae),this._justifyContent="center",this}centerVertically(ae=""){return this.top(ae),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const ae=this._overlayRef.overlayElement.style,$e=this._overlayRef.hostElement.style,Ot=this._overlayRef.getConfig(),{width:on,height:jt,maxWidth:Bt,maxHeight:Je}=Ot,ge=!("100%"!==on&&"100vw"!==on||Bt&&"100%"!==Bt&&"100vw"!==Bt),pe=!("100%"!==jt&&"100vh"!==jt||Je&&"100%"!==Je&&"100vh"!==Je);ae.position=this._cssPosition,ae.marginLeft=ge?"0":this._leftOffset,ae.marginTop=pe?"0":this._topOffset,ae.marginBottom=this._bottomOffset,ae.marginRight=this._rightOffset,ge?$e.justifyContent="flex-start":"center"===this._justifyContent?$e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?$e.justifyContent="flex-end":"flex-end"===this._justifyContent&&($e.justifyContent="flex-start"):$e.justifyContent=this._justifyContent,$e.alignItems=pe?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const ae=this._overlayRef.overlayElement.style,$e=this._overlayRef.hostElement,Ot=$e.style;$e.classList.remove(mn),Ot.justifyContent=Ot.alignItems=ae.marginTop=ae.marginBottom=ae.marginLeft=ae.marginRight=ae.position="",this._overlayRef=null,this._isDisposed=!0}}let Ge=(()=>{class Dn{constructor($e,Ot,on,jt){this._viewportRuler=$e,this._document=Ot,this._platform=on,this._overlayContainer=jt}global(){return new Tt}flexibleConnectedTo($e){return new wi($e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(w.rL),de.LFG(_.K0),de.LFG(he.t4),de.LFG(Tn))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn})(),Fe=0,ht=(()=>{class Dn{constructor($e,Ot,on,jt,Bt,Je,ge,pe,te,it,Ht){this.scrollStrategies=$e,this._overlayContainer=Ot,this._componentFactoryResolver=on,this._positionBuilder=jt,this._keyboardDispatcher=Bt,this._injector=Je,this._ngZone=ge,this._document=pe,this._directionality=te,this._location=it,this._outsideClickDispatcher=Ht}create($e){const Ot=this._createHostElement(),on=this._createPaneElement(Ot),jt=this._createPortalOutlet(on),Bt=new we($e);return Bt.direction=Bt.direction||this._directionality.value,new Xt(jt,Ot,on,Bt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement($e){const Ot=this._document.createElement("div");return Ot.id="cdk-overlay-"+Fe++,Ot.classList.add("cdk-overlay-pane"),$e.appendChild(Ot),Ot}_createHostElement(){const $e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild($e),$e}_createPortalOutlet($e){return this._appRef||(this._appRef=this._injector.get(de.z2F)),new Oe.u0($e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Dn.\u0275fac=function($e){return new($e||Dn)(de.LFG(Ce),de.LFG(Tn),de.LFG(de._Vd),de.LFG(Ge),de.LFG(He),de.LFG(de.zs3),de.LFG(de.R0b),de.LFG(_.K0),de.LFG(nt.Is),de.LFG(_.Ye),de.LFG(yt))},Dn.\u0275prov=de.Yz7({token:Dn,factory:Dn.\u0275fac}),Dn})();const tn={provide:new de.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ht],useFactory:function St(Dn){return()=>Dn.scrollStrategies.reposition()}};let li=(()=>{class Dn{}return Dn.\u0275fac=function($e){return new($e||Dn)},Dn.\u0275mod=de.oAB({type:Dn}),Dn.\u0275inj=de.cJS({providers:[ht,tn],imports:[[nt.vT,Oe.eL,w.Cl],w.Cl]}),Dn})()},3353:(ti,Ut,B)=>{"use strict";B.d(Ut,{Mq:()=>wt,Oy:()=>Ce,_i:()=>et,ht:()=>Hn,i$:()=>pt,kV:()=>Qe,qK:()=>Oe,sA:()=>Fn,t4:()=>a,ud:()=>he});var w=B(4650),_=B(6895);let de;try{de=typeof Intl<"u"&&Intl.v8BreakIterator}catch{de=!1}let st,a=(()=>{class we{constructor(zt){this._platformId=zt,this.isBrowser=this._platformId?(0,_.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!de)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return we.\u0275fac=function(zt){return new(zt||we)(w.LFG(w.Lbi))},we.\u0275prov=w.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),he=(()=>{class we{}return we.\u0275fac=function(zt){return new(zt||we)},we.\u0275mod=w.oAB({type:we}),we.\u0275inj=w.cJS({}),we})();const nt=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Oe(){if(st)return st;if("object"!=typeof document||!document)return st=new Set(nt),st;let we=document.createElement("input");return st=new Set(nt.filter(At=>(we.setAttribute("type",At),we.type===At))),st}let ke,Et,dt,Zt,Ye;function pt(we){return function rt(){if(null==ke&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ke=!0}))}finally{ke=ke||!1}return ke}()?we:!!we.capture}function wt(){if(null==dt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return dt=!1,dt;if("scrollBehavior"in document.documentElement.style)dt=!0;else{const we=Element.prototype.scrollTo;dt=!!we&&!/\{\s*\[native code\]\s*\}/.test(we.toString())}}return dt}function et(){if("object"!=typeof document||!document)return 0;if(null==Et){const we=document.createElement("div"),At=we.style;we.dir="rtl",At.width="1px",At.overflow="auto",At.visibility="hidden",At.pointerEvents="none",At.position="absolute";const zt=document.createElement("div"),Jt=zt.style;Jt.width="2px",Jt.height="1px",we.appendChild(zt),document.body.appendChild(we),Et=0,0===we.scrollLeft&&(we.scrollLeft=1,Et=0===we.scrollLeft?1:2),we.remove()}return Et}function Qe(we){if(function kt(){if(null==Zt){const we=typeof document<"u"?document.head:null;Zt=!(!we||!we.createShadowRoot&&!we.attachShadow)}return Zt}()){const At=we.getRootNode?we.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&At instanceof ShadowRoot)return At}return null}function Hn(){let we=typeof document<"u"&&document?document.activeElement:null;for(;we&&we.shadowRoot;){const At=we.shadowRoot.activeElement;if(At===we)break;we=At}return we}function Fn(we){return we.composedPath?we.composedPath()[0]:we.target}function Ce(){return typeof Ye.__karma__<"u"&&!!Ye.__karma__||typeof Ye.jasmine<"u"&&!!Ye.jasmine||typeof Ye.jest<"u"&&!!Ye.jest||typeof Ye.Mocha<"u"&&!!Ye.Mocha}Ye=typeof global<"u"?global:typeof window<"u"?window:{}},4080:(ti,Ut,B)=>{"use strict";B.d(Ut,{C5:()=>rt,Pl:()=>Hn,UE:()=>pt,eL:()=>Ye,en:()=>dt,u0:()=>et});var w=B(4650),_=B(6895);class ke{attach(At){return this._attachedHost=At,At.attach(this)}detach(){let At=this._attachedHost;null!=At&&(this._attachedHost=null,At.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(At){this._attachedHost=At}}class rt extends ke{constructor(At,zt,Jt,Mn){super(),this.component=At,this.viewContainerRef=zt,this.injector=Jt,this.componentFactoryResolver=Mn}}class pt extends ke{constructor(At,zt,Jt){super(),this.templateRef=At,this.viewContainerRef=zt,this.context=Jt}get origin(){return this.templateRef.elementRef}attach(At,zt=this.context){return this.context=zt,super.attach(At)}detach(){return this.context=void 0,super.detach()}}class Et extends ke{constructor(At){super(),this.element=At instanceof w.SBq?At.nativeElement:At}}class dt{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(At){return At instanceof rt?(this._attachedPortal=At,this.attachComponentPortal(At)):At instanceof pt?(this._attachedPortal=At,this.attachTemplatePortal(At)):this.attachDomPortal&&At instanceof Et?(this._attachedPortal=At,this.attachDomPortal(At)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(At){this._disposeFn=At}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class et extends dt{constructor(At,zt,Jt,Mn,Ke){super(),this.outletElement=At,this._componentFactoryResolver=zt,this._appRef=Jt,this._defaultInjector=Mn,this.attachDomPortal=Ne=>{const He=Ne.element,yt=this._document.createComment("dom-portal");He.parentNode.insertBefore(yt,He),this.outletElement.appendChild(He),this._attachedPortal=Ne,super.setDisposeFn(()=>{yt.parentNode&&yt.parentNode.replaceChild(He,yt)})},this._document=Ke}attachComponentPortal(At){const Jt=(At.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(At.component);let Mn;return At.viewContainerRef?(Mn=At.viewContainerRef.createComponent(Jt,At.viewContainerRef.length,At.injector||At.viewContainerRef.injector),this.setDisposeFn(()=>Mn.destroy())):(Mn=Jt.create(At.injector||this._defaultInjector),this._appRef.attachView(Mn.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Mn.hostView),Mn.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Mn)),this._attachedPortal=At,Mn}attachTemplatePortal(At){let zt=At.viewContainerRef,Jt=zt.createEmbeddedView(At.templateRef,At.context);return Jt.rootNodes.forEach(Mn=>this.outletElement.appendChild(Mn)),Jt.detectChanges(),this.setDisposeFn(()=>{let Mn=zt.indexOf(Jt);-1!==Mn&&zt.remove(Mn)}),this._attachedPortal=At,Jt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(At){return At.hostView.rootNodes[0]}}let Hn=(()=>{class we extends dt{constructor(zt,Jt,Mn){super(),this._componentFactoryResolver=zt,this._viewContainerRef=Jt,this._isInitialized=!1,this.attached=new w.vpe,this.attachDomPortal=Ke=>{const Ne=Ke.element,He=this._document.createComment("dom-portal");Ke.setAttachedHost(this),Ne.parentNode.insertBefore(He,Ne),this._getRootNode().appendChild(Ne),this._attachedPortal=Ke,super.setDisposeFn(()=>{He.parentNode&&He.parentNode.replaceChild(Ne,He)})},this._document=Mn}get portal(){return this._attachedPortal}set portal(zt){this.hasAttached()&&!zt&&!this._isInitialized||(this.hasAttached()&&super.detach(),zt&&super.attach(zt),this._attachedPortal=zt)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(zt){zt.setAttachedHost(this);const Jt=null!=zt.viewContainerRef?zt.viewContainerRef:this._viewContainerRef,Ke=(zt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(zt.component),Ne=Jt.createComponent(Ke,Jt.length,zt.injector||Jt.injector);return Jt!==this._viewContainerRef&&this._getRootNode().appendChild(Ne.hostView.rootNodes[0]),super.setDisposeFn(()=>Ne.destroy()),this._attachedPortal=zt,this._attachedRef=Ne,this.attached.emit(Ne),Ne}attachTemplatePortal(zt){zt.setAttachedHost(this);const Jt=this._viewContainerRef.createEmbeddedView(zt.templateRef,zt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=zt,this._attachedRef=Jt,this.attached.emit(Jt),Jt}_getRootNode(){const zt=this._viewContainerRef.element.nativeElement;return zt.nodeType===zt.ELEMENT_NODE?zt:zt.parentNode}}return we.\u0275fac=function(zt){return new(zt||we)(w.Y36(w._Vd),w.Y36(w.s_b),w.Y36(_.K0))},we.\u0275dir=w.lG2({type:we,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[w.qOj]}),we})(),Ye=(()=>{class we{}return we.\u0275fac=function(zt){return new(zt||we)},we.\u0275mod=w.oAB({type:we}),we.\u0275inj=w.cJS({}),we})()},8605:(ti,Ut,B)=>{"use strict";B.d(Ut,{PQ:()=>Se,ZD:()=>Ot,mF:()=>ot,Cl:()=>on,rL:()=>tn});var w=B(1281),_=B(4650),de=B(7579),a=B(9646),he=B(9751),st=B(4968),nt=B(4408),Oe=B(727);const ke={schedule(jt){let Bt=requestAnimationFrame,Je=cancelAnimationFrame;const{delegate:ge}=ke;ge&&(Bt=ge.requestAnimationFrame,Je=ge.cancelAnimationFrame);const pe=Bt(te=>{Je=void 0,jt(te)});return new Oe.w0(()=>Je?.(pe))},requestAnimationFrame(...jt){const{delegate:Bt}=ke;return(Bt?.requestAnimationFrame||requestAnimationFrame)(...jt)},cancelAnimationFrame(...jt){const{delegate:Bt}=ke;return(Bt?.cancelAnimationFrame||cancelAnimationFrame)(...jt)},delegate:void 0};var pt=B(640);new class Et extends pt.v{flush(Bt){this._active=!0;const Je=this._scheduled;this._scheduled=void 0;const{actions:ge}=this;let pe;Bt=Bt||ge.shift();do{if(pe=Bt.execute(Bt.state,Bt.delay))break}while((Bt=ge[0])&&Bt.id===Je&&ge.shift());if(this._active=!1,pe){for(;(Bt=ge[0])&&Bt.id===Je&&ge.shift();)Bt.unsubscribe();throw pe}}}(class rt extends nt.o{constructor(Bt,Je){super(Bt,Je),this.scheduler=Bt,this.work=Je}requestAsyncId(Bt,Je,ge=0){return null!==ge&&ge>0?super.requestAsyncId(Bt,Je,ge):(Bt.actions.push(this),Bt._scheduled||(Bt._scheduled=ke.requestAnimationFrame(()=>Bt.flush(void 0))))}recycleAsyncId(Bt,Je,ge=0){var pe;if(null!=ge?ge>0:this.delay>0)return super.recycleAsyncId(Bt,Je,ge);const{actions:te}=Bt;null!=Je&&(null===(pe=te[te.length-1])||void 0===pe?void 0:pe.id)!==Je&&(ke.cancelAnimationFrame(Je),Bt._scheduled=void 0)}});let Zt,et=1;const kt={};function Qe(jt){return jt in kt&&(delete kt[jt],!0)}const Hn={setImmediate(jt){const Bt=et++;return kt[Bt]=!0,Zt||(Zt=Promise.resolve()),Zt.then(()=>Qe(Bt)&&jt()),Bt},clearImmediate(jt){Qe(jt)}},{setImmediate:Ye,clearImmediate:Ce}=Hn,we={setImmediate(...jt){const{delegate:Bt}=we;return(Bt?.setImmediate||Ye)(...jt)},clearImmediate(jt){const{delegate:Bt}=we;return(Bt?.clearImmediate||Ce)(jt)},delegate:void 0};new class zt extends pt.v{flush(Bt){this._active=!0;const Je=this._scheduled;this._scheduled=void 0;const{actions:ge}=this;let pe;Bt=Bt||ge.shift();do{if(pe=Bt.execute(Bt.state,Bt.delay))break}while((Bt=ge[0])&&Bt.id===Je&&ge.shift());if(this._active=!1,pe){for(;(Bt=ge[0])&&Bt.id===Je&&ge.shift();)Bt.unsubscribe();throw pe}}}(class At extends nt.o{constructor(Bt,Je){super(Bt,Je),this.scheduler=Bt,this.work=Je}requestAsyncId(Bt,Je,ge=0){return null!==ge&&ge>0?super.requestAsyncId(Bt,Je,ge):(Bt.actions.push(this),Bt._scheduled||(Bt._scheduled=we.setImmediate(Bt.flush.bind(Bt,void 0))))}recycleAsyncId(Bt,Je,ge=0){var pe;if(null!=ge?ge>0:this.delay>0)return super.recycleAsyncId(Bt,Je,ge);const{actions:te}=Bt;null!=Je&&(null===(pe=te[te.length-1])||void 0===pe?void 0:pe.id)!==Je&&(we.clearImmediate(Je),Bt._scheduled=void 0)}});var Ke=B(4986),Ne=B(4482),He=B(8421),yt=B(5403),Xt=B(5963);function ii(jt,Bt=Ke.z){return function Tn(jt){return(0,Ne.e)((Bt,Je)=>{let ge=!1,pe=null,te=null,it=!1;const Ht=()=>{if(te?.unsubscribe(),te=null,ge){ge=!1;const ni=pe;pe=null,Je.next(ni)}it&&Je.complete()},Rn=()=>{te=null,it&&Je.complete()};Bt.subscribe((0,yt.x)(Je,ni=>{ge=!0,pe=ni,te||(0,He.Xf)(jt(ni)).subscribe(te=(0,yt.x)(Je,Ht,Rn))},()=>{it=!0,(!ge||!te||te.closed)&&Je.complete()}))})}(()=>(0,Xt.H)(jt,Bt))}var vi=B(9300),wi=B(2722),Nn=B(3353),Li=B(6895),Jn=B(445);let ot=(()=>{class jt{constructor(Je,ge,pe){this._ngZone=Je,this._platform=ge,this._scrolled=new de.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=pe}register(Je){this.scrollContainers.has(Je)||this.scrollContainers.set(Je,Je.elementScrolled().subscribe(()=>this._scrolled.next(Je)))}deregister(Je){const ge=this.scrollContainers.get(Je);ge&&(ge.unsubscribe(),this.scrollContainers.delete(Je))}scrolled(Je=20){return this._platform.isBrowser?new he.y(ge=>{this._globalSubscription||this._addGlobalListener();const pe=Je>0?this._scrolled.pipe(ii(Je)).subscribe(ge):this._scrolled.subscribe(ge);return this._scrolledCount++,()=>{pe.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,a.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Je,ge)=>this.deregister(ge)),this._scrolled.complete()}ancestorScrolled(Je,ge){const pe=this.getAncestorScrollContainers(Je);return this.scrolled(ge).pipe((0,vi.h)(te=>!te||pe.indexOf(te)>-1))}getAncestorScrollContainers(Je){const ge=[];return this.scrollContainers.forEach((pe,te)=>{this._scrollableContainsElement(te,Je)&&ge.push(te)}),ge}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Je,ge){let pe=(0,w.fI)(ge),te=Je.getElementRef().nativeElement;do{if(pe==te)return!0}while(pe=pe.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Je=this._getWindow();return(0,st.R)(Je.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return jt.\u0275fac=function(Je){return new(Je||jt)(_.LFG(_.R0b),_.LFG(Nn.t4),_.LFG(Li.K0,8))},jt.\u0275prov=_.Yz7({token:jt,factory:jt.\u0275fac,providedIn:"root"}),jt})(),Se=(()=>{class jt{constructor(Je,ge,pe,te){this.elementRef=Je,this.scrollDispatcher=ge,this.ngZone=pe,this.dir=te,this._destroyed=new de.x,this._elementScrolled=new he.y(it=>this.ngZone.runOutsideAngular(()=>(0,st.R)(this.elementRef.nativeElement,"scroll").pipe((0,wi.R)(this._destroyed)).subscribe(it)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Je){const ge=this.elementRef.nativeElement,pe=this.dir&&"rtl"==this.dir.value;null==Je.left&&(Je.left=pe?Je.end:Je.start),null==Je.right&&(Je.right=pe?Je.start:Je.end),null!=Je.bottom&&(Je.top=ge.scrollHeight-ge.clientHeight-Je.bottom),pe&&0!=(0,Nn._i)()?(null!=Je.left&&(Je.right=ge.scrollWidth-ge.clientWidth-Je.left),2==(0,Nn._i)()?Je.left=Je.right:1==(0,Nn._i)()&&(Je.left=Je.right?-Je.right:Je.right)):null!=Je.right&&(Je.left=ge.scrollWidth-ge.clientWidth-Je.right),this._applyScrollToOptions(Je)}_applyScrollToOptions(Je){const ge=this.elementRef.nativeElement;(0,Nn.Mq)()?ge.scrollTo(Je):(null!=Je.top&&(ge.scrollTop=Je.top),null!=Je.left&&(ge.scrollLeft=Je.left))}measureScrollOffset(Je){const ge="left",te=this.elementRef.nativeElement;if("top"==Je)return te.scrollTop;if("bottom"==Je)return te.scrollHeight-te.clientHeight-te.scrollTop;const it=this.dir&&"rtl"==this.dir.value;return"start"==Je?Je=it?"right":ge:"end"==Je&&(Je=it?ge:"right"),it&&2==(0,Nn._i)()?Je==ge?te.scrollWidth-te.clientWidth-te.scrollLeft:te.scrollLeft:it&&1==(0,Nn._i)()?Je==ge?te.scrollLeft+te.scrollWidth-te.clientWidth:-te.scrollLeft:Je==ge?te.scrollLeft:te.scrollWidth-te.clientWidth-te.scrollLeft}}return jt.\u0275fac=function(Je){return new(Je||jt)(_.Y36(_.SBq),_.Y36(ot),_.Y36(_.R0b),_.Y36(Jn.Is,8))},jt.\u0275dir=_.lG2({type:jt,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),jt})(),tn=(()=>{class jt{constructor(Je,ge,pe){this._platform=Je,this._change=new de.x,this._changeListener=te=>{this._change.next(te)},this._document=pe,ge.runOutsideAngular(()=>{if(Je.isBrowser){const te=this._getWindow();te.addEventListener("resize",this._changeListener),te.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Je=this._getWindow();Je.removeEventListener("resize",this._changeListener),Je.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Je={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Je}getViewportRect(){const Je=this.getViewportScrollPosition(),{width:ge,height:pe}=this.getViewportSize();return{top:Je.top,left:Je.left,bottom:Je.top+pe,right:Je.left+ge,height:pe,width:ge}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Je=this._document,ge=this._getWindow(),pe=Je.documentElement,te=pe.getBoundingClientRect();return{top:-te.top||Je.body.scrollTop||ge.scrollY||pe.scrollTop||0,left:-te.left||Je.body.scrollLeft||ge.scrollX||pe.scrollLeft||0}}change(Je=20){return Je>0?this._change.pipe(ii(Je)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Je=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Je.innerWidth,height:Je.innerHeight}:{width:0,height:0}}}return jt.\u0275fac=function(Je){return new(Je||jt)(_.LFG(Nn.t4),_.LFG(_.R0b),_.LFG(Li.K0,8))},jt.\u0275prov=_.Yz7({token:jt,factory:jt.\u0275fac,providedIn:"root"}),jt})(),Ot=(()=>{class jt{}return jt.\u0275fac=function(Je){return new(Je||jt)},jt.\u0275mod=_.oAB({type:jt}),jt.\u0275inj=_.cJS({}),jt})(),on=(()=>{class jt{}return jt.\u0275fac=function(Je){return new(Je||jt)},jt.\u0275mod=_.oAB({type:jt}),jt.\u0275inj=_.cJS({imports:[[Jn.vT,Nn.ud,Ot],Jn.vT,Ot]}),jt})()},6895:(ti,Ut,B)=>{"use strict";B.d(Ut,{Do:()=>Fn,EM:()=>hl,HT:()=>he,JF:()=>Zs,K0:()=>nt,Mx:()=>va,NF:()=>la,O5:()=>Mi,RF:()=>ro,S$:()=>kt,V_:()=>rt,Ye:()=>Ye,b0:()=>Hn,bD:()=>ts,ez:()=>nl,mk:()=>Yi,n9:()=>Ur,q:()=>de,rS:()=>to,sg:()=>Gt,w_:()=>st});var w=B(4650);let _=null;function de(){return _}function he(z){_||(_=z)}class st{}const nt=new w.OlP("DocumentToken");let Oe=(()=>{class z{historyGo($){throw new Error("Not implemented")}}return z.\u0275fac=function($){return new($||z)},z.\u0275prov=w.Yz7({token:z,factory:function(){return function ke(){return(0,w.LFG)(pt)}()},providedIn:"platform"}),z})();const rt=new w.OlP("Location Initialized");let pt=(()=>{class z extends Oe{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return de().getBaseHref(this._doc)}onPopState($){const ye=de().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("popstate",$,!1),()=>ye.removeEventListener("popstate",$)}onHashChange($){const ye=de().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("hashchange",$,!1),()=>ye.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,ye,gt){Et()?this._history.pushState($,ye,gt):this.location.hash=gt}replaceState($,ye,gt){Et()?this._history.replaceState($,ye,gt):this.location.hash=gt}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return z.\u0275fac=function($){return new($||z)(w.LFG(nt))},z.\u0275prov=w.Yz7({token:z,factory:function(){return function dt(){return new pt((0,w.LFG)(nt))}()},providedIn:"platform"}),z})();function Et(){return!!window.history.pushState}function wt(z,re){if(0==z.length)return re;if(0==re.length)return z;let $=0;return z.endsWith("/")&&$++,re.startsWith("/")&&$++,2==$?z+re.substring(1):1==$?z+re:z+"/"+re}function et(z){const re=z.match(/#|\?|$/),$=re&&re.index||z.length;return z.slice(0,$-("/"===z[$-1]?1:0))+z.slice($)}function Zt(z){return z&&"?"!==z[0]?"?"+z:z}let kt=(()=>{class z{historyGo($){throw new Error("Not implemented")}}return z.\u0275fac=function($){return new($||z)},z.\u0275prov=w.Yz7({token:z,factory:function(){return(0,w.f3M)(Hn)},providedIn:"root"}),z})();const Qe=new w.OlP("appBaseHref");let Hn=(()=>{class z extends kt{constructor($,ye){super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=ye??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return wt(this._baseHref,$)}path($=!1){const ye=this._platformLocation.pathname+Zt(this._platformLocation.search),gt=this._platformLocation.hash;return gt&&$?`${ye}${gt}`:ye}pushState($,ye,gt,vn){const On=this.prepareExternalUrl(gt+Zt(vn));this._platformLocation.pushState($,ye,On)}replaceState($,ye,gt,vn){const On=this.prepareExternalUrl(gt+Zt(vn));this._platformLocation.replaceState($,ye,On)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return z.\u0275fac=function($){return new($||z)(w.LFG(Oe),w.LFG(Qe,8))},z.\u0275prov=w.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})(),Fn=(()=>{class z extends kt{constructor($,ye){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ye&&(this._baseHref=ye)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ye=this._platformLocation.hash;return null==ye&&(ye="#"),ye.length>0?ye.substring(1):ye}prepareExternalUrl($){const ye=wt(this._baseHref,$);return ye.length>0?"#"+ye:ye}pushState($,ye,gt,vn){let On=this.prepareExternalUrl(gt+Zt(vn));0==On.length&&(On=this._platformLocation.pathname),this._platformLocation.pushState($,ye,On)}replaceState($,ye,gt,vn){let On=this.prepareExternalUrl(gt+Zt(vn));0==On.length&&(On=this._platformLocation.pathname),this._platformLocation.replaceState($,ye,On)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return z.\u0275fac=function($){return new($||z)(w.LFG(Oe),w.LFG(Qe,8))},z.\u0275prov=w.Yz7({token:z,factory:z.\u0275fac}),z})(),Ye=(()=>{class z{constructor($){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const ye=this._locationStrategy.getBaseHref();this._baseHref=et(At(ye)),this._locationStrategy.onPopState(gt=>{this._subject.emit({url:this.path(!0),pop:!0,state:gt.state,type:gt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,ye=""){return this.path()==this.normalize($+Zt(ye))}normalize($){return z.stripTrailingSlash(function we(z,re){return z&&re.startsWith(z)?re.substring(z.length):re}(this._baseHref,At($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,ye="",gt=null){this._locationStrategy.pushState(gt,"",$,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Zt(ye)),gt)}replaceState($,ye="",gt=null){this._locationStrategy.replaceState(gt,"",$,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Zt(ye)),gt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){this._locationStrategy.historyGo?.($)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ye=>{this._notifyUrlChangeListeners(ye.url,ye.state)})),()=>{const ye=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(ye,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",ye){this._urlChangeListeners.forEach(gt=>gt($,ye))}subscribe($,ye,gt){return this._subject.subscribe({next:$,error:ye,complete:gt})}}return z.normalizeQueryParams=Zt,z.joinWithSlash=wt,z.stripTrailingSlash=et,z.\u0275fac=function($){return new($||z)(w.LFG(kt))},z.\u0275prov=w.Yz7({token:z,factory:function(){return function Ce(){return new Ye((0,w.LFG)(kt))}()},providedIn:"root"}),z})();function At(z){return z.replace(/\/index.html$/,"")}function va(z,re){re=encodeURIComponent(re);for(const $ of z.split(";")){const ye=$.indexOf("="),[gt,vn]=-1==ye?[$,""]:[$.slice(0,ye),$.slice(ye+1)];if(gt.trim()===re)return decodeURIComponent(vn)}return null}let Yi=(()=>{class z{constructor($,ye,gt,vn){this._iterableDiffers=$,this._keyValueDiffers=ye,this._ngEl=gt,this._renderer=vn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,w.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(ye=>this._toggleClass(ye.key,ye.currentValue)),$.forEachChangedItem(ye=>this._toggleClass(ye.key,ye.currentValue)),$.forEachRemovedItem(ye=>{ye.previousValue&&this._toggleClass(ye.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(ye=>{if("string"!=typeof ye.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,w.AaK)(ye.item)}`);this._toggleClass(ye.item,!0)}),$.forEachRemovedItem(ye=>this._toggleClass(ye.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ye=>this._toggleClass(ye,!0)):Object.keys($).forEach(ye=>this._toggleClass(ye,!!$[ye])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ye=>this._toggleClass(ye,!1)):Object.keys($).forEach(ye=>this._toggleClass(ye,!1)))}_toggleClass($,ye){($=$.trim())&&$.split(/\s+/g).forEach(gt=>{ye?this._renderer.addClass(this._ngEl.nativeElement,gt):this._renderer.removeClass(this._ngEl.nativeElement,gt)})}}return z.\u0275fac=function($){return new($||z)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))},z.\u0275dir=w.lG2({type:z,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),z})();class Ie{constructor(re,$,ye,gt){this.$implicit=re,this.ngForOf=$,this.index=ye,this.count=gt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gt=(()=>{class z{constructor($,ye,gt){this._viewContainer=$,this._template=ye,this._differs=gt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ye=this._viewContainer;$.forEachOperation((gt,vn,On)=>{if(null==gt.previousIndex)ye.createEmbeddedView(this._template,new Ie(gt.item,this._ngForOf,-1,-1),null===On?void 0:On);else if(null==On)ye.remove(null===vn?void 0:vn);else if(null!==vn){const yi=ye.get(vn);ye.move(yi,On),Ln(yi,gt)}});for(let gt=0,vn=ye.length;gt<vn;gt++){const yi=ye.get(gt).context;yi.index=gt,yi.count=vn,yi.ngForOf=this._ngForOf}$.forEachIdentityChange(gt=>{Ln(ye.get(gt.currentIndex),gt)})}static ngTemplateContextGuard($,ye){return!0}}return z.\u0275fac=function($){return new($||z)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},z.\u0275dir=w.lG2({type:z,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),z})();function Ln(z,re){z.context.$implicit=re.item}let Mi=(()=>{class z{constructor($,ye){this._viewContainer=$,this._context=new mi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ye}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){Ki("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){Ki("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ye){return!0}}return z.\u0275fac=function($){return new($||z)(w.Y36(w.s_b),w.Y36(w.Rgc))},z.\u0275dir=w.lG2({type:z,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),z})();class mi{constructor(){this.$implicit=null,this.ngIf=null}}function Ki(z,re){if(re&&!re.createEmbeddedView)throw new Error(`${z} must be a TemplateRef, but received '${(0,w.AaK)(re)}'.`)}class vr{constructor(re,$){this._viewContainerRef=re,this._templateRef=$,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(re){re&&!this._created?this.create():!re&&this._created&&this.destroy()}}let ro=(()=>{class z{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch($){this._ngSwitch=$,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault($){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push($)}_matchCase($){const ye=$==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ye,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ye}_updateDefaultCases($){if(this._defaultViews&&$!==this._defaultUsed){this._defaultUsed=$;for(let ye=0;ye<this._defaultViews.length;ye++)this._defaultViews[ye].enforceState($)}}}return z.\u0275fac=function($){return new($||z)},z.\u0275dir=w.lG2({type:z,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),z})(),Ur=(()=>{class z{constructor($,ye,gt){this.ngSwitch=gt,gt._addCase(),this._view=new vr($,ye)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return z.\u0275fac=function($){return new($||z)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(ro,9))},z.\u0275dir=w.lG2({type:z,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),z})();const xa=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let to=(()=>{class z{transform($){if(null==$)return null;if("string"!=typeof $)throw function wo(z,re){return new w.vHH(2100,!1)}();return $.replace(xa,ye=>ye[0].toUpperCase()+ye.slice(1).toLowerCase())}}return z.\u0275fac=function($){return new($||z)},z.\u0275pipe=w.Yjl({name:"titlecase",type:z,pure:!0,standalone:!0}),z})(),nl=(()=>{class z{}return z.\u0275fac=function($){return new($||z)},z.\u0275mod=w.oAB({type:z}),z.\u0275inj=w.cJS({}),z})();const ts="browser";function la(z){return z===ts}let hl=(()=>{class z{}return z.\u0275prov=(0,w.Yz7)({token:z,providedIn:"root",factory:()=>new Lo((0,w.LFG)(nt),window)}),z})();class Lo{constructor(re,$){this.document=re,this.window=$,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(re){this.supportsScrolling()&&this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){if(!this.supportsScrolling())return;const $=function vo(z,re){const $=z.getElementById(re)||z.getElementsByName(re)[0];if($)return $;if("function"==typeof z.createTreeWalker&&z.body&&(z.body.createShadowRoot||z.body.attachShadow)){const ye=z.createTreeWalker(z.body,NodeFilter.SHOW_ELEMENT);let gt=ye.currentNode;for(;gt;){const vn=gt.shadowRoot;if(vn){const On=vn.getElementById(re)||vn.querySelector(`[name="${re}"]`);if(On)return On}gt=ye.nextNode()}}return null}(this.document,re);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(re){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=re)}}scrollToElement(re){const $=re.getBoundingClientRect(),ye=$.left+this.window.pageXOffset,gt=$.top+this.window.pageYOffset,vn=this.offset();this.window.scrollTo(ye-vn[0],gt-vn[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const re=Go(this.window.history)||Go(Object.getPrototypeOf(this.window.history));return!(!re||!re.writable&&!re.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Go(z){return Object.getOwnPropertyDescriptor(z,"scrollRestoration")}class Zs{}},529:(ti,Ut,B)=>{"use strict";B.d(Ut,{JF:()=>jt,eN:()=>Xt});var w=B(6895),_=B(4650),de=B(9646),a=B(9751),he=B(4351),st=B(9300),nt=B(4004);class Oe{}class ke{}class rt{constructor(pe){this.normalizedNames=new Map,this.lazyUpdate=null,pe?this.lazyInit="string"==typeof pe?()=>{this.headers=new Map,pe.split("\n").forEach(te=>{const it=te.indexOf(":");if(it>0){const Ht=te.slice(0,it),Rn=Ht.toLowerCase(),ni=te.slice(it+1).trim();this.maybeSetNormalizedName(Ht,Rn),this.headers.has(Rn)?this.headers.get(Rn).push(ni):this.headers.set(Rn,[ni])}})}:()=>{this.headers=new Map,Object.keys(pe).forEach(te=>{let it=pe[te];const Ht=te.toLowerCase();"string"==typeof it&&(it=[it]),it.length>0&&(this.headers.set(Ht,it),this.maybeSetNormalizedName(te,Ht))})}:this.headers=new Map}has(pe){return this.init(),this.headers.has(pe.toLowerCase())}get(pe){this.init();const te=this.headers.get(pe.toLowerCase());return te&&te.length>0?te[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(pe){return this.init(),this.headers.get(pe.toLowerCase())||null}append(pe,te){return this.clone({name:pe,value:te,op:"a"})}set(pe,te){return this.clone({name:pe,value:te,op:"s"})}delete(pe,te){return this.clone({name:pe,value:te,op:"d"})}maybeSetNormalizedName(pe,te){this.normalizedNames.has(te)||this.normalizedNames.set(te,pe)}init(){this.lazyInit&&(this.lazyInit instanceof rt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(pe=>this.applyUpdate(pe)),this.lazyUpdate=null))}copyFrom(pe){pe.init(),Array.from(pe.headers.keys()).forEach(te=>{this.headers.set(te,pe.headers.get(te)),this.normalizedNames.set(te,pe.normalizedNames.get(te))})}clone(pe){const te=new rt;return te.lazyInit=this.lazyInit&&this.lazyInit instanceof rt?this.lazyInit:this,te.lazyUpdate=(this.lazyUpdate||[]).concat([pe]),te}applyUpdate(pe){const te=pe.name.toLowerCase();switch(pe.op){case"a":case"s":let it=pe.value;if("string"==typeof it&&(it=[it]),0===it.length)return;this.maybeSetNormalizedName(pe.name,te);const Ht=("a"===pe.op?this.headers.get(te):void 0)||[];Ht.push(...it),this.headers.set(te,Ht);break;case"d":const Rn=pe.value;if(Rn){let ni=this.headers.get(te);if(!ni)return;ni=ni.filter(Ii=>-1===Rn.indexOf(Ii)),0===ni.length?(this.headers.delete(te),this.normalizedNames.delete(te)):this.headers.set(te,ni)}else this.headers.delete(te),this.normalizedNames.delete(te)}}forEach(pe){this.init(),Array.from(this.normalizedNames.keys()).forEach(te=>pe(this.normalizedNames.get(te),this.headers.get(te)))}}class Et{encodeKey(pe){return Zt(pe)}encodeValue(pe){return Zt(pe)}decodeKey(pe){return decodeURIComponent(pe)}decodeValue(pe){return decodeURIComponent(pe)}}const wt=/%(\d[a-f0-9])/gi,et={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Zt(ge){return encodeURIComponent(ge).replace(wt,(pe,te)=>et[te]??pe)}function kt(ge){return`${ge}`}class Qe{constructor(pe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=pe.encoder||new Et,pe.fromString){if(pe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function dt(ge,pe){const te=new Map;return ge.length>0&&ge.replace(/^\?/,"").split("&").forEach(Ht=>{const Rn=Ht.indexOf("="),[ni,Ii]=-1==Rn?[pe.decodeKey(Ht),""]:[pe.decodeKey(Ht.slice(0,Rn)),pe.decodeValue(Ht.slice(Rn+1))],bn=te.get(ni)||[];bn.push(Ii),te.set(ni,bn)}),te}(pe.fromString,this.encoder)}else pe.fromObject?(this.map=new Map,Object.keys(pe.fromObject).forEach(te=>{const it=pe.fromObject[te],Ht=Array.isArray(it)?it.map(kt):[kt(it)];this.map.set(te,Ht)})):this.map=null}has(pe){return this.init(),this.map.has(pe)}get(pe){this.init();const te=this.map.get(pe);return te?te[0]:null}getAll(pe){return this.init(),this.map.get(pe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(pe,te){return this.clone({param:pe,value:te,op:"a"})}appendAll(pe){const te=[];return Object.keys(pe).forEach(it=>{const Ht=pe[it];Array.isArray(Ht)?Ht.forEach(Rn=>{te.push({param:it,value:Rn,op:"a"})}):te.push({param:it,value:Ht,op:"a"})}),this.clone(te)}set(pe,te){return this.clone({param:pe,value:te,op:"s"})}delete(pe,te){return this.clone({param:pe,value:te,op:"d"})}toString(){return this.init(),this.keys().map(pe=>{const te=this.encoder.encodeKey(pe);return this.map.get(pe).map(it=>te+"="+this.encoder.encodeValue(it)).join("&")}).filter(pe=>""!==pe).join("&")}clone(pe){const te=new Qe({encoder:this.encoder});return te.cloneFrom=this.cloneFrom||this,te.updates=(this.updates||[]).concat(pe),te}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(pe=>this.map.set(pe,this.cloneFrom.map.get(pe))),this.updates.forEach(pe=>{switch(pe.op){case"a":case"s":const te=("a"===pe.op?this.map.get(pe.param):void 0)||[];te.push(kt(pe.value)),this.map.set(pe.param,te);break;case"d":if(void 0===pe.value){this.map.delete(pe.param);break}{let it=this.map.get(pe.param)||[];const Ht=it.indexOf(kt(pe.value));-1!==Ht&&it.splice(Ht,1),it.length>0?this.map.set(pe.param,it):this.map.delete(pe.param)}}}),this.cloneFrom=this.updates=null)}}class Fn{constructor(){this.map=new Map}set(pe,te){return this.map.set(pe,te),this}get(pe){return this.map.has(pe)||this.map.set(pe,pe.defaultValue()),this.map.get(pe)}delete(pe){return this.map.delete(pe),this}has(pe){return this.map.has(pe)}keys(){return this.map.keys()}}function Ce(ge){return typeof ArrayBuffer<"u"&&ge instanceof ArrayBuffer}function we(ge){return typeof Blob<"u"&&ge instanceof Blob}function At(ge){return typeof FormData<"u"&&ge instanceof FormData}class Jt{constructor(pe,te,it,Ht){let Rn;if(this.url=te,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=pe.toUpperCase(),function Ye(ge){switch(ge){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ht?(this.body=void 0!==it?it:null,Rn=Ht):Rn=it,Rn&&(this.reportProgress=!!Rn.reportProgress,this.withCredentials=!!Rn.withCredentials,Rn.responseType&&(this.responseType=Rn.responseType),Rn.headers&&(this.headers=Rn.headers),Rn.context&&(this.context=Rn.context),Rn.params&&(this.params=Rn.params)),this.headers||(this.headers=new rt),this.context||(this.context=new Fn),this.params){const ni=this.params.toString();if(0===ni.length)this.urlWithParams=te;else{const Ii=te.indexOf("?");this.urlWithParams=te+(-1===Ii?"?":Ii<te.length-1?"&":"")+ni}}else this.params=new Qe,this.urlWithParams=te}serializeBody(){return null===this.body?null:Ce(this.body)||we(this.body)||At(this.body)||function zt(ge){return typeof URLSearchParams<"u"&&ge instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||At(this.body)?null:we(this.body)?this.body.type||null:Ce(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(pe={}){const te=pe.method||this.method,it=pe.url||this.url,Ht=pe.responseType||this.responseType,Rn=void 0!==pe.body?pe.body:this.body,ni=void 0!==pe.withCredentials?pe.withCredentials:this.withCredentials,Ii=void 0!==pe.reportProgress?pe.reportProgress:this.reportProgress;let bn=pe.headers||this.headers,Ji=pe.params||this.params;const ji=pe.context??this.context;return void 0!==pe.setHeaders&&(bn=Object.keys(pe.setHeaders).reduce((dn,It)=>dn.set(It,pe.setHeaders[It]),bn)),pe.setParams&&(Ji=Object.keys(pe.setParams).reduce((dn,It)=>dn.set(It,pe.setParams[It]),Ji)),new Jt(te,it,Rn,{params:Ji,headers:bn,context:ji,reportProgress:Ii,responseType:Ht,withCredentials:ni})}}var Mn=(()=>((Mn=Mn||{})[Mn.Sent=0]="Sent",Mn[Mn.UploadProgress=1]="UploadProgress",Mn[Mn.ResponseHeader=2]="ResponseHeader",Mn[Mn.DownloadProgress=3]="DownloadProgress",Mn[Mn.Response=4]="Response",Mn[Mn.User=5]="User",Mn))();class Ke{constructor(pe,te=200,it="OK"){this.headers=pe.headers||new rt,this.status=void 0!==pe.status?pe.status:te,this.statusText=pe.statusText||it,this.url=pe.url||null,this.ok=this.status>=200&&this.status<300}}class Ne extends Ke{constructor(pe={}){super(pe),this.type=Mn.ResponseHeader}clone(pe={}){return new Ne({headers:pe.headers||this.headers,status:void 0!==pe.status?pe.status:this.status,statusText:pe.statusText||this.statusText,url:pe.url||this.url||void 0})}}class He extends Ke{constructor(pe={}){super(pe),this.type=Mn.Response,this.body=void 0!==pe.body?pe.body:null}clone(pe={}){return new He({body:void 0!==pe.body?pe.body:this.body,headers:pe.headers||this.headers,status:void 0!==pe.status?pe.status:this.status,statusText:pe.statusText||this.statusText,url:pe.url||this.url||void 0})}}class yt extends Ke{constructor(pe){super(pe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${pe.url||"(unknown url)"}`:`Http failure response for ${pe.url||"(unknown url)"}: ${pe.status} ${pe.statusText}`,this.error=pe.error||null}}function Tn(ge,pe){return{body:pe,headers:ge.headers,context:ge.context,observe:ge.observe,params:ge.params,reportProgress:ge.reportProgress,responseType:ge.responseType,withCredentials:ge.withCredentials}}let Xt=(()=>{class ge{constructor(te){this.handler=te}request(te,it,Ht={}){let Rn;if(te instanceof Jt)Rn=te;else{let bn,Ji;bn=Ht.headers instanceof rt?Ht.headers:new rt(Ht.headers),Ht.params&&(Ji=Ht.params instanceof Qe?Ht.params:new Qe({fromObject:Ht.params})),Rn=new Jt(te,it,void 0!==Ht.body?Ht.body:null,{headers:bn,context:Ht.context,params:Ji,reportProgress:Ht.reportProgress,responseType:Ht.responseType||"json",withCredentials:Ht.withCredentials})}const ni=(0,de.of)(Rn).pipe((0,he.b)(bn=>this.handler.handle(bn)));if(te instanceof Jt||"events"===Ht.observe)return ni;const Ii=ni.pipe((0,st.h)(bn=>bn instanceof He));switch(Ht.observe||"body"){case"body":switch(Rn.responseType){case"arraybuffer":return Ii.pipe((0,nt.U)(bn=>{if(null!==bn.body&&!(bn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return bn.body}));case"blob":return Ii.pipe((0,nt.U)(bn=>{if(null!==bn.body&&!(bn.body instanceof Blob))throw new Error("Response is not a Blob.");return bn.body}));case"text":return Ii.pipe((0,nt.U)(bn=>{if(null!==bn.body&&"string"!=typeof bn.body)throw new Error("Response is not a string.");return bn.body}));default:return Ii.pipe((0,nt.U)(bn=>bn.body))}case"response":return Ii;default:throw new Error(`Unreachable: unhandled observe type ${Ht.observe}}`)}}delete(te,it={}){return this.request("DELETE",te,it)}get(te,it={}){return this.request("GET",te,it)}head(te,it={}){return this.request("HEAD",te,it)}jsonp(te,it){return this.request("JSONP",te,{params:(new Qe).append(it,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(te,it={}){return this.request("OPTIONS",te,it)}patch(te,it,Ht={}){return this.request("PATCH",te,Tn(Ht,it))}post(te,it,Ht={}){return this.request("POST",te,Tn(Ht,it))}put(te,it,Ht={}){return this.request("PUT",te,Tn(Ht,it))}}return ge.\u0275fac=function(te){return new(te||ge)(_.LFG(Oe))},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac}),ge})();class ii{constructor(pe,te){this.next=pe,this.interceptor=te}handle(pe){return this.interceptor.intercept(pe,this.next)}}const vi=new _.OlP("HTTP_INTERCEPTORS");let wi=(()=>{class ge{intercept(te,it){return it.handle(te)}}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac}),ge})();const ce=/^\)\]\}',?\n/;let Se=(()=>{class ge{constructor(te){this.xhrFactory=te}handle(te){if("JSONP"===te.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new a.y(it=>{const Ht=this.xhrFactory.build();if(Ht.open(te.method,te.urlWithParams),te.withCredentials&&(Ht.withCredentials=!0),te.headers.forEach((ct,nn)=>Ht.setRequestHeader(ct,nn.join(","))),te.headers.has("Accept")||Ht.setRequestHeader("Accept","application/json, text/plain, */*"),!te.headers.has("Content-Type")){const ct=te.detectContentTypeHeader();null!==ct&&Ht.setRequestHeader("Content-Type",ct)}if(te.responseType){const ct=te.responseType.toLowerCase();Ht.responseType="json"!==ct?ct:"text"}const Rn=te.serializeBody();let ni=null;const Ii=()=>{if(null!==ni)return ni;const ct=Ht.statusText||"OK",nn=new rt(Ht.getAllResponseHeaders()),_i=function ot(ge){return"responseURL"in ge&&ge.responseURL?ge.responseURL:/^X-Request-URL:/m.test(ge.getAllResponseHeaders())?ge.getResponseHeader("X-Request-URL"):null}(Ht)||te.url;return ni=new Ne({headers:nn,status:Ht.status,statusText:ct,url:_i}),ni},bn=()=>{let{headers:ct,status:nn,statusText:_i,url:Qt}=Ii(),xt=null;204!==nn&&(xt=typeof Ht.response>"u"?Ht.responseText:Ht.response),0===nn&&(nn=xt?200:0);let ft=nn>=200&&nn<300;if("json"===te.responseType&&"string"==typeof xt){const Yt=xt;xt=xt.replace(ce,"");try{xt=""!==xt?JSON.parse(xt):null}catch(wn){xt=Yt,ft&&(ft=!1,xt={error:wn,text:xt})}}ft?(it.next(new He({body:xt,headers:ct,status:nn,statusText:_i,url:Qt||void 0})),it.complete()):it.error(new yt({error:xt,headers:ct,status:nn,statusText:_i,url:Qt||void 0}))},Ji=ct=>{const{url:nn}=Ii(),_i=new yt({error:ct,status:Ht.status||0,statusText:Ht.statusText||"Unknown Error",url:nn||void 0});it.error(_i)};let ji=!1;const dn=ct=>{ji||(it.next(Ii()),ji=!0);let nn={type:Mn.DownloadProgress,loaded:ct.loaded};ct.lengthComputable&&(nn.total=ct.total),"text"===te.responseType&&!!Ht.responseText&&(nn.partialText=Ht.responseText),it.next(nn)},It=ct=>{let nn={type:Mn.UploadProgress,loaded:ct.loaded};ct.lengthComputable&&(nn.total=ct.total),it.next(nn)};return Ht.addEventListener("load",bn),Ht.addEventListener("error",Ji),Ht.addEventListener("timeout",Ji),Ht.addEventListener("abort",Ji),te.reportProgress&&(Ht.addEventListener("progress",dn),null!==Rn&&Ht.upload&&Ht.upload.addEventListener("progress",It)),Ht.send(Rn),it.next({type:Mn.Sent}),()=>{Ht.removeEventListener("error",Ji),Ht.removeEventListener("abort",Ji),Ht.removeEventListener("load",bn),Ht.removeEventListener("timeout",Ji),te.reportProgress&&(Ht.removeEventListener("progress",dn),null!==Rn&&Ht.upload&&Ht.upload.removeEventListener("progress",It)),Ht.readyState!==Ht.DONE&&Ht.abort()}})}}return ge.\u0275fac=function(te){return new(te||ge)(_.LFG(w.JF))},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac}),ge})();const St=new _.OlP("XSRF_COOKIE_NAME"),tn=new _.OlP("XSRF_HEADER_NAME");class li{}let Wi=(()=>{class ge{constructor(te,it,Ht){this.doc=te,this.platform=it,this.cookieName=Ht,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const te=this.doc.cookie||"";return te!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,w.Mx)(te,this.cookieName),this.lastCookieString=te),this.lastToken}}return ge.\u0275fac=function(te){return new(te||ge)(_.LFG(w.K0),_.LFG(_.Lbi),_.LFG(St))},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac}),ge})(),Dn=(()=>{class ge{constructor(te,it){this.tokenService=te,this.headerName=it}intercept(te,it){const Ht=te.url.toLowerCase();if("GET"===te.method||"HEAD"===te.method||Ht.startsWith("http://")||Ht.startsWith("https://"))return it.handle(te);const Rn=this.tokenService.getToken();return null!==Rn&&!te.headers.has(this.headerName)&&(te=te.clone({headers:te.headers.set(this.headerName,Rn)})),it.handle(te)}}return ge.\u0275fac=function(te){return new(te||ge)(_.LFG(li),_.LFG(tn))},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac}),ge})(),ae=(()=>{class ge{constructor(te,it){this.backend=te,this.injector=it,this.chain=null}handle(te){if(null===this.chain){const it=this.injector.get(vi,[]);this.chain=it.reduceRight((Ht,Rn)=>new ii(Ht,Rn),this.backend)}return this.chain.handle(te)}}return ge.\u0275fac=function(te){return new(te||ge)(_.LFG(ke),_.LFG(_.zs3))},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac}),ge})(),on=(()=>{class ge{static disable(){return{ngModule:ge,providers:[{provide:Dn,useClass:wi}]}}static withOptions(te={}){return{ngModule:ge,providers:[te.cookieName?{provide:St,useValue:te.cookieName}:[],te.headerName?{provide:tn,useValue:te.headerName}:[]]}}}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275mod=_.oAB({type:ge}),ge.\u0275inj=_.cJS({providers:[Dn,{provide:vi,useExisting:Dn,multi:!0},{provide:li,useClass:Wi},{provide:St,useValue:"XSRF-TOKEN"},{provide:tn,useValue:"X-XSRF-TOKEN"}]}),ge})(),jt=(()=>{class ge{}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275mod=_.oAB({type:ge}),ge.\u0275inj=_.cJS({providers:[Xt,{provide:Oe,useClass:ae},Se,{provide:ke,useExisting:Se}],imports:[on.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),ge})()},4650:(ti,Ut,B)=>{"use strict";B.d(Ut,{$8M:()=>$i,$Z:()=>wu,AFp:()=>Uv,ALo:()=>ov,AaK:()=>Oe,AsE:()=>rh,BQk:()=>f,CHM:()=>Va,CRH:()=>gv,CZH:()=>Bg,CqO:()=>R,D6c:()=>Sw,EJc:()=>H1,EiD:()=>oc,EpF:()=>v,F$t:()=>Ze,F4k:()=>C,FYo:()=>yd,FiY:()=>vt,G48:()=>uw,Gf:()=>pv,GfV:()=>Sl,Gpc:()=>pt,Hsn:()=>lt,Ikx:()=>ty,JOm:()=>uc,JVY:()=>Vp,KtG:()=>ua,L6k:()=>jp,LAX:()=>Gp,LFG:()=>Pe,LSH:()=>wf,Lbi:()=>z1,Lck:()=>kb,MAs:()=>Cg,MGl:()=>mt,MMx:()=>dy,NdJ:()=>N,O4$:()=>yi,OlP:()=>ir,Oqu:()=>sf,PXZ:()=>rw,Q6J:()=>th,QGY:()=>E,QP$:()=>Ft,QbO:()=>U1,Qsj:()=>Ka,R0b:()=>vc,RDi:()=>Js,Rgc:()=>zp,SBq:()=>zu,Sil:()=>$1,Suo:()=>mv,TTD:()=>Rs,TgZ:()=>t,Udp:()=>Ro,VKq:()=>J0,W1O:()=>xv,WFA:()=>H,X6Q:()=>cw,XFs:()=>ae,Xpm:()=>Qt,Xts:()=>sc,Y36:()=>Lc,YKP:()=>G0,YNc:()=>Tp,Yjl:()=>oe,Yz7:()=>Tt,Z0I:()=>Xe,ZZ4:()=>Ly,_Bn:()=>H0,_UZ:()=>n,_Vd:()=>lc,_c5:()=>Dw,_uU:()=>Ql,aQg:()=>Fy,c2e:()=>V1,cJS:()=>Fe,cg1:()=>iy,d8E:()=>ny,dDg:()=>ew,dqk:()=>Ht,eBb:()=>Hp,eFA:()=>Jv,ekj:()=>hs,eoX:()=>Kv,f3M:()=>Be,g9A:()=>jv,h0i:()=>df,hGG:()=>Tw,hij:()=>yc,iGM:()=>fv,ifc:()=>it,ip1:()=>zv,jDz:()=>Z0,kL8:()=>m0,lG2:()=>ee,lcZ:()=>sv,lqb:()=>fu,lri:()=>qv,mCW:()=>ch,n5z:()=>gl,n_E:()=>Og,oAB:()=>wn,oxw:()=>We,pB0:()=>$p,q3G:()=>Do,qLn:()=>yu,qOj:()=>bp,qZA:()=>e,qzn:()=>du,rWj:()=>Yv,s9C:()=>Ct,sBO:()=>dw,sIi:()=>iu,s_b:()=>kg,soG:()=>Ng,tb:()=>Hv,tp0:()=>cn,uIk:()=>Jh,vHH:()=>et,vpe:()=>lu,wAp:()=>rr,xi3:()=>av,xp6:()=>Im,ynx:()=>u,z2F:()=>zg,z3N:()=>Ml,zSh:()=>hh,zs3:()=>bu});var w=B(7579),_=B(727),de=B(9751),a=B(6451),he=B(3099);function st(r){for(let o in r)if(r[o]===st)return o;throw Error("Could not find renamed property on target object.")}function nt(r,o){for(const l in o)o.hasOwnProperty(l)&&!r.hasOwnProperty(l)&&(r[l]=o[l])}function Oe(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Oe).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const o=r.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ke(r,o){return null==r||""===r?null===o?"":o:null==o||""===o?r:r+" "+o}const rt=st({__forward_ref__:st});function pt(r){return r.__forward_ref__=pt,r.toString=function(){return Oe(this())},r}function Et(r){return dt(r)?r():r}function dt(r){return"function"==typeof r&&r.hasOwnProperty(rt)&&r.__forward_ref__===pt}class et extends Error{constructor(o,l){super(function Zt(r,o){return`NG0${Math.abs(r)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function kt(r){return"string"==typeof r?r:null==r?"":String(r)}function Ce(r,o){throw new et(-201,!1)}function wi(r,o){null==r&&function Nn(r,o,l,h){throw new Error(`ASSERTION ERROR: ${r}`+(null==h?"":` [Expected=> ${l} ${h} ${o} <=Actual]`))}(o,r,null,"!=")}function Tt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Fe(r){return{providers:r.providers||[],imports:r.imports||[]}}function ht(r){return ce(r,tn)||ce(r,Wi)}function Xe(r){return null!==ht(r)}function ce(r,o){return r.hasOwnProperty(o)?r[o]:null}function St(r){return r&&(r.hasOwnProperty(li)||r.hasOwnProperty(Dn))?r[li]:null}const tn=st({\u0275prov:st}),li=st({\u0275inj:st}),Wi=st({ngInjectableDef:st}),Dn=st({ngInjectorDef:st});var ae=(()=>((ae=ae||{})[ae.Default=0]="Default",ae[ae.Host=1]="Host",ae[ae.Self=2]="Self",ae[ae.SkipSelf=4]="SkipSelf",ae[ae.Optional=8]="Optional",ae))();let $e;function on(r){const o=$e;return $e=r,o}function jt(r,o,l){const h=ht(r);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&ae.Optional?null:void 0!==o?o:void Ce(Oe(r))}function Je(r){return{toString:r}.toString()}var ge=(()=>((ge=ge||{})[ge.OnPush=0]="OnPush",ge[ge.Default=1]="Default",ge))(),it=(()=>{return(r=it||(it={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",it;var r})();const Ht=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ii={},bn=[],Ji=st({\u0275cmp:st}),ji=st({\u0275dir:st}),dn=st({\u0275pipe:st}),It=st({\u0275mod:st}),ct=st({\u0275fac:st}),nn=st({__NG_ELEMENT_ID__:st});let _i=0;function Qt(r){return Je(()=>{const l=!0===r.standalone,h={},g={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ge.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||bn,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||it.Emulated,id:"c"+_i++,styles:r.styles||bn,_:null,setInput:null,schemas:r.schemas||null,tView:null},b=r.dependencies,T=r.features;return g.inputs=Ee(r.inputs,h),g.outputs=Ee(r.outputs),T&&T.forEach(F=>F(g)),g.directiveDefs=b?()=>("function"==typeof b?b():b).map(ft).filter(Yt):null,g.pipeDefs=b?()=>("function"==typeof b?b():b).map(ut).filter(Yt):null,g})}function ft(r){return Me(r)||Ve(r)}function Yt(r){return null!==r}function wn(r){return Je(()=>({type:r.type,bootstrap:r.bootstrap||bn,declarations:r.declarations||bn,imports:r.imports||bn,exports:r.exports||bn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Ee(r,o){if(null==r)return Ii;const l={};for(const h in r)if(r.hasOwnProperty(h)){let g=r[h],b=g;Array.isArray(g)&&(b=g[1],g=g[0]),l[g]=h,o&&(o[g]=b)}return l}const ee=Qt;function oe(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Me(r){return r[Ji]||null}function Ve(r){return r[ji]||null}function ut(r){return r[dn]||null}function Ft(r){const o=Me(r)||Ve(r)||ut(r);return null!==o&&o.standalone}function Lt(r,o){const l=r[It]||null;if(!l&&!0===o)throw new Error(`Type ${Oe(r)} does not have '\u0275mod' property.`);return l}function Ki(r){return Array.isArray(r)&&"object"==typeof r[1]}function vr(r){return Array.isArray(r)&&!0===r[1]}function ro(r){return 0!=(8&r.flags)}function Ur(r){return 2==(2&r.flags)}function pr(r){return 1==(1&r.flags)}function Yr(r){return null!==r.template}function Es(r){return 0!=(256&r[2])}function gs(r,o){return r.hasOwnProperty(ct)?r[ct]:null}class jo{constructor(o,l,h){this.previousValue=o,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function Rs(){return ks}function ks(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ls),ba}function ba(){const r=wa(this),o=r?.current;if(o){const l=r.previous;if(l===Ii)r.previous=o;else for(let h in o)l[h]=o[h];r.current=null,this.ngOnChanges(o)}}function Ls(r,o,l,h){const g=wa(r)||function nl(r,o){return r[Ho]=o}(r,{previous:Ii,current:null}),b=g.current||(g.current={}),T=g.previous,F=this.declaredInputs[l],U=T[F];b[F]=new jo(U&&U.currentValue,o,T===Ii),r[h]=o}Rs.ngInherit=!0;const Ho="__ngSimpleChanges__";function wa(r){return r[Ho]||null}function Br(r){for(;Array.isArray(r);)r=r[0];return r}function Go(r,o){return Br(o[r])}function vo(r,o){return Br(o[r.index])}function Zs(r,o){return r.data[o]}function ca(r,o){return r[o]}function dr(r,o){const l=o[r];return Ki(l)?l:l[0]}function Fs(r){return 64==(64&r[2])}function is(r,o){return null==o?null:r[o]}function _s(r){r[18]=0}function xo(r,o){r[5]+=o;let l=r,h=r[3];for(;null!==h&&(1===o&&1===l[5]||-1===o&&0===l[5]);)h[5]+=o,l=h,h=h[3]}const Hi={lFrame:xc(null),bindingsEnabled:!0};function Ds(){return Hi.bindingsEnabled}function En(){return Hi.lFrame.lView}function lr(){return Hi.lFrame.tView}function Va(r){return Hi.lFrame.contextLView=r,r[8]}function ua(r){return Hi.lFrame.contextLView=null,r}function jr(){let r=Q();for(;null!==r&&64===r.type;)r=r.parent;return r}function Q(){return Hi.lFrame.currentTNode}function j(r,o){const l=Hi.lFrame;l.currentTNode=r,l.isParent=o}function be(){return Hi.lFrame.isParent}function Cn(){Hi.lFrame.isParent=!1}function Nr(){const r=Hi.lFrame;let o=r.bindingRootIndex;return-1===o&&(o=r.bindingRootIndex=r.tView.bindingStartIndex),o}function Ns(){return Hi.lFrame.bindingIndex++}function qs(r){const o=Hi.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+r,l}function zs(r,o){const l=Hi.lFrame;l.bindingIndex=l.bindingRootIndex=r,ol(o)}function ol(r){Hi.lFrame.currentDirectiveIndex=r}function ja(r){const o=Hi.lFrame.currentDirectiveIndex;return-1===o?null:r[o]}function Jl(){return Hi.lFrame.currentQueryIndex}function fl(r){Hi.lFrame.currentQueryIndex=r}function Bl(r){const o=r[1];return 2===o.type?o.declTNode:1===o.type?r[6]:null}function Yo(r,o,l){if(l&ae.SkipSelf){let g=o,b=r;for(;!(g=g.parent,null!==g||l&ae.Host||(g=Bl(b),null===g||(b=b[15],10&g.type))););if(null===g)return!1;o=g,r=b}const h=Hi.lFrame=da();return h.currentTNode=o,h.lView=r,!0}function Ha(r){const o=da(),l=r[1];Hi.lFrame=o,o.currentTNode=l.firstChild,o.lView=r,o.tView=l,o.contextLView=r,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function da(){const r=Hi.lFrame,o=null===r?null:r.child;return null===o?xc(r):o}function xc(r){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=o),o}function Nl(){const r=Hi.lFrame;return Hi.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const z=Nl;function re(){const r=Nl();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function gt(){return Hi.lFrame.selectedIndex}function vn(r){Hi.lFrame.selectedIndex=r}function On(){const r=Hi.lFrame;return Zs(r.tView,r.selectedIndex)}function yi(){Hi.lFrame.currentNamespace="svg"}function Rr(r,o){for(let l=o.directiveStart,h=o.directiveEnd;l<h;l++){const b=r.data[l].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:F,ngAfterViewInit:U,ngAfterViewChecked:ne,ngOnDestroy:xe}=b;T&&(r.contentHooks||(r.contentHooks=[])).push(-l,T),F&&((r.contentHooks||(r.contentHooks=[])).push(l,F),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(l,F)),U&&(r.viewHooks||(r.viewHooks=[])).push(-l,U),ne&&((r.viewHooks||(r.viewHooks=[])).push(l,ne),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(l,ne)),null!=xe&&(r.destroyHooks||(r.destroyHooks=[])).push(l,xe)}}function po(r,o,l){Us(r,o,3,l)}function Zo(r,o,l,h){(3&r[2])===l&&Us(r,o,l,h)}function ss(r,o){let l=r[2];(3&l)===o&&(l&=2047,l+=1,r[2]=l)}function Us(r,o,l,h){const b=h??-1,T=o.length-1;let F=0;for(let U=void 0!==h?65535&r[18]:0;U<T;U++)if("number"==typeof o[U+1]){if(F=o[U],null!=h&&F>=h)break}else o[U]<0&&(r[18]+=65536),(F<b||-1==b)&&(Ys(r,l,o,U),r[18]=(4294901760&r[18])+U+2),U++}function Ys(r,o,l,h){const g=l[h]<0,b=l[h+1],F=r[g?-l[h]:l[h]];if(g){if(r[2]>>11<r[18]>>16&&(3&r[2])===o){r[2]+=2048;try{b.call(F)}finally{}}}else try{b.call(F)}finally{}}class zo{constructor(o,l,h){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function pl(r,o,l){let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const b=l[h++],T=l[h++],F=l[h++];r.setAttribute(o,T,F,b)}else{const b=g,T=l[++h];$a(b)?r.setProperty(o,b,T):r.setAttribute(o,b,T),h++}}return h}function Ul(r){return 3===r||4===r||6===r}function $a(r){return 64===r.charCodeAt(0)}function ml(r,o){if(null!==o&&0!==o.length)if(null===r||0===r.length)r=o.slice();else{let l=-1;for(let h=0;h<o.length;h++){const g=o[h];"number"==typeof g?l=g:0===l||wc(r,l,g,null,-1===l||2===l?o[++h]:null)}}return r}function wc(r,o,l,h,g){let b=0,T=r.length;if(-1===o)T=-1;else for(;b<r.length;){const F=r[b++];if("number"==typeof F){if(F===o){T=-1;break}if(F>o){T=b-1;break}}}for(;b<r.length;){const F=r[b];if("number"==typeof F)break;if(F===l){if(null===h)return void(null!==g&&(r[b+1]=g));if(h===r[b+1])return void(r[b+2]=g)}b++,null!==h&&b++,null!==g&&b++}-1!==T&&(r.splice(T,0,o),b=T+1),r.splice(b++,0,l),null!==h&&r.splice(b++,0,h),null!==g&&r.splice(b++,0,g)}function X(r){return-1!==r}function M(r){return 32767&r}function G(r,o){let l=function S(r){return r>>16}(r),h=o;for(;l>0;)h=h[15],l--;return h}let ue=!0;function Re(r){const o=ue;return ue=r,o}let Vn=0;const an={};function Xi(r,o){const l=Bi(r,o);if(-1!==l)return l;const h=o[1];h.firstCreatePass&&(r.injectorIndex=o.length,nr(h.data,r),nr(o,null),nr(h.blueprint,null));const g=Gi(r,o),b=r.injectorIndex;if(X(g)){const T=M(g),F=G(g,o),U=F[1].data;for(let ne=0;ne<8;ne++)o[b+ne]=F[T+ne]|U[T+ne]}return o[b+8]=g,b}function nr(r,o){r.push(0,0,0,0,0,0,0,0,o)}function Bi(r,o){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===o[r.injectorIndex+8]?-1:r.injectorIndex}function Gi(r,o){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let l=0,h=null,g=o;for(;null!==g;){if(h=Ni(g),null===h)return-1;if(l++,g=g[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function Ir(r,o,l){!function hi(r,o,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(nn)&&(h=l[nn]),null==h&&(h=l[nn]=Vn++);const g=255&h;o.data[r+(g>>5)]|=1<<g}(r,o,l)}function mo(r,o,l){if(l&ae.Optional||void 0!==r)return r;Ce()}function Mo(r,o,l,h){if(l&ae.Optional&&void 0===h&&(h=null),0==(l&(ae.Self|ae.Host))){const g=r[9],b=on(void 0);try{return g?g.get(o,h,l&ae.Optional):jt(o,h,l&ae.Optional)}finally{on(b)}}return mo(h,0,l)}function kr(r,o,l,h=ae.Default,g){if(null!==r){if(1024&o[2]){const T=function Ai(r,o,l,h,g){let b=r,T=o;for(;null!==b&&null!==T&&1024&T[2]&&!(256&T[2]);){const F=Ks(b,T,l,h|ae.Self,an);if(F!==an)return F;let U=b.parent;if(!U){const ne=T[21];if(ne){const xe=ne.get(l,an,h);if(xe!==an)return xe}U=Ni(T),T=T[15]}b=U}return g}(r,o,l,h,an);if(T!==an)return T}const b=Ks(r,o,l,h,an);if(b!==an)return b}return Mo(o,l,h,g)}function Ks(r,o,l,h,g){const b=function fa(r){if("string"==typeof r)return r.charCodeAt(0)||0;const o=r.hasOwnProperty(nn)?r[nn]:void 0;return"number"==typeof o?o>=0?255&o:Sa:o}(l);if("function"==typeof b){if(!Yo(o,r,h))return h&ae.Host?mo(g,0,h):Mo(o,l,h,g);try{const T=b(h);if(null!=T||h&ae.Optional)return T;Ce()}finally{z()}}else if("number"==typeof b){let T=null,F=Bi(r,o),U=-1,ne=h&ae.Host?o[16][6]:null;for((-1===F||h&ae.SkipSelf)&&(U=-1===F?Gi(r,o):o[F+8],-1!==U&&Za(h,!1)?(T=o[1],F=M(U),o=G(U,o)):F=-1);-1!==F;){const xe=o[1];if(Ko(b,F,xe.data)){const qe=ls(F,o,l,T,h,ne);if(qe!==an)return qe}U=o[F+8],-1!==U&&Za(h,o[1].data[F+8]===ne)&&Ko(b,F,o)?(T=xe,F=M(U),o=G(U,o)):F=-1}}return g}function ls(r,o,l,h,g,b){const T=o[1],F=T.data[r+8],xe=Fo(F,T,l,null==h?Ur(F)&&ue:h!=T&&0!=(3&F.type),g&ae.Host&&b===F);return null!==xe?zr(o,T,xe,F):an}function Fo(r,o,l,h,g){const b=r.providerIndexes,T=o.data,F=1048575&b,U=r.directiveStart,xe=b>>20,Nt=g?F+xe:r.directiveEnd;for(let un=h?F:F+xe;un<Nt;un++){const Zn=T[un];if(un<U&&l===Zn||un>=U&&Zn.type===l)return un}if(g){const un=T[U];if(un&&Yr(un)&&un.type===l)return U}return null}function zr(r,o,l,h){let g=r[l];const b=o.data;if(function ha(r){return r instanceof zo}(g)){const T=g;T.resolving&&function Hn(r,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${r}`:"";throw new et(-200,`Circular dependency in DI detected for ${r}${l}`)}(function Qe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():kt(r)}(b[l]));const F=Re(T.canSeeViewProviders);T.resolving=!0;const U=T.injectImpl?on(T.injectImpl):null;Yo(r,h,ae.Default);try{g=r[l]=T.factory(void 0,b,r,h),o.firstCreatePass&&l>=h.directiveStart&&function Po(r,o,l){const{ngOnChanges:h,ngOnInit:g,ngDoCheck:b}=o.type.prototype;if(h){const T=ks(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(r,T),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(r,T)}g&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-r,g),b&&((l.preOrderHooks||(l.preOrderHooks=[])).push(r,b),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(r,b))}(l,b[l],o)}finally{null!==U&&on(U),Re(F),T.resolving=!1,z()}}return g}function Ko(r,o,l){return!!(l[o+(r>>5)]&1<<r)}function Za(r,o){return!(r&ae.Self||r&ae.Host&&o)}class Xo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,h){return kr(this._tNode,this._lView,o,h,l)}}function Sa(){return new Xo(jr(),En())}function gl(r){return Je(()=>{const o=r.prototype.constructor,l=o[ct]||Aa(o),h=Object.prototype;let g=Object.getPrototypeOf(r.prototype).constructor;for(;g&&g!==h;){const b=g[ct]||Aa(g);if(b&&b!==l)return b;g=Object.getPrototypeOf(g)}return b=>new b})}function Aa(r){return dt(r)?()=>{const o=Aa(Et(r));return o&&o()}:gs(r)}function Ni(r){const o=r[1],l=o.type;return 2===l?o.declTNode:1===l?r[6]:null}function $i(r){return function Pr(r,o){if("class"===o)return r.classes;if("style"===o)return r.styles;const l=r.attrs;if(l){const h=l.length;let g=0;for(;g<h;){const b=l[g];if(Ul(b))break;if(0===b)g+=2;else if("number"==typeof b)for(g++;g<h&&"string"==typeof l[g];)g++;else{if(b===o)return l[g+1];g+=2}}}return null}(jr(),r)}const Xr="__parameters__";function Tr(r,o,l){return Je(()=>{const h=function Vs(r){return function(...l){if(r){const h=r(...l);for(const g in h)this[g]=h[g]}}}(o);function g(...b){if(this instanceof g)return h.apply(this,b),this;const T=new g(...b);return F.annotation=T,F;function F(U,ne,xe){const qe=U.hasOwnProperty(Xr)?U[Xr]:Object.defineProperty(U,Xr,{value:[]})[Xr];for(;qe.length<=xe;)qe.push(null);return(qe[xe]=qe[xe]||[]).push(T),U}}return l&&(g.prototype=Object.create(l.prototype)),g.prototype.ngMetadataName=r,g.annotationCls=g,g})}class ir{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Tt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function us(r,o){void 0===o&&(o=r);for(let l=0;l<r.length;l++){let h=r[l];Array.isArray(h)?(o===r&&(o=r.slice(0,l)),us(h,o)):o!==r&&o.push(h)}return o}function Ia(r,o){r.forEach(l=>Array.isArray(l)?Ia(l,o):o(l))}function cu(r,o,l){o>=r.length?r.push(l):r.splice(o,0,l)}function rc(r,o){return o>=r.length-1?r.pop():r.splice(o,1)[0]}function bl(r,o){const l=[];for(let h=0;h<r;h++)l.push(o);return l}function Y(r,o,l){let h=tt(r,o);return h>=0?r[1|h]=l:(h=~h,function O(r,o,l,h){let g=r.length;if(g==o)r.push(l,h);else if(1===g)r.push(h,r[0]),r[0]=l;else{for(g--,r.push(r[g-1],r[g]);g>o;)r[g]=r[g-2],g--;r[o]=l,r[o+1]=h}}(r,h,o,l)),h}function me(r,o){const l=tt(r,o);if(l>=0)return r[1|l]}function tt(r,o){return function An(r,o,l){let h=0,g=r.length>>l;for(;g!==h;){const b=h+(g-h>>1),T=r[b<<l];if(o===T)return b<<l;T>o?g=b:h=b+1}return~(g<<l)}(r,o,1)}const p={},y="__NG_DI_FLAG__",x="ngTempTokenPath",P=/\n/gm,W="__source";let Z;function ie(r){const o=Z;return Z=r,o}function ve(r,o=ae.Default){if(void 0===Z)throw new et(-203,!1);return null===Z?jt(r,void 0,o):Z.get(r,o&ae.Optional?null:void 0,o)}function Pe(r,o=ae.Default){return(function Ot(){return $e}()||ve)(Et(r),o)}function Be(r,o=ae.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Pe(r,o)}function Te(r){const o=[];for(let l=0;l<r.length;l++){const h=Et(r[l]);if(Array.isArray(h)){if(0===h.length)throw new et(900,!1);let g,b=ae.Default;for(let T=0;T<h.length;T++){const F=h[T],U=je(F);"number"==typeof U?-1===U?g=F.token:b|=U:g=F}o.push(Pe(g,b))}else o.push(Pe(h))}return o}function Ae(r,o){return r[y]=o,r.prototype[y]=o,r}function je(r){return r[y]}const vt=Ae(Tr("Optional"),8),cn=Ae(Tr("SkipSelf"),4);let Qs,Qr;function Js(r){Qs=r}function wr(r){return function Wr(){if(void 0===Qr&&(Qr=null,Ht.trustedTypes))try{Qr=Ht.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Qr}()?.createHTML(r)||r}class Hs{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class El extends Hs{getTypeName(){return"HTML"}}class uu extends Hs{getTypeName(){return"Style"}}class Zc extends Hs{getTypeName(){return"Script"}}class Cl extends Hs{getTypeName(){return"URL"}}class pd extends Hs{getTypeName(){return"ResourceURL"}}function Ml(r){return r instanceof Hs?r.changingThisBreaksApplicationSecurity:r}function du(r,o){const l=function pf(r){return r instanceof Hs&&r.getTypeName()||null}(r);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function Vp(r){return new El(r)}function jp(r){return new uu(r)}function Hp(r){return new Zc(r)}function Gp(r){return new Cl(r)}function $p(r){return new pd(r)}class Zp{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(wr(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class Wp{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const h=this.inertDocument.createElement("body");l.appendChild(h)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=wr(o),l;const h=this.inertDocument.createElement("body");return h.innerHTML=wr(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(o){const l=o.attributes;for(let g=l.length-1;0<g;g--){const T=l.item(g).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&o.removeAttribute(T)}let h=o.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Hg=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ch(r){return(r=String(r)).match(Hg)?r:"unsafe:"+r}function qa(r){const o={};for(const l of r.split(","))o[l]=!0;return o}function Lu(...r){const o={};for(const l of r)for(const h in l)l.hasOwnProperty(h)&&(o[h]=!0);return o}const gf=qa("area,br,col,hr,img,wbr"),_f=qa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yp=qa("rp,rt"),Fu=Lu(gf,Lu(_f,qa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Lu(Yp,qa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lu(Yp,_f)),Vl=qa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xf=Lu(Vl,qa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zg=qa("script,style,template");class Wg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,h=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?h=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,h&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let g=this.checkClobberedElement(l,l.nextSibling);if(g){l=g;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Fu.hasOwnProperty(l))return this.sanitizedSomething=!0,!Zg.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const h=o.attributes;for(let g=0;g<h.length;g++){const b=h.item(g),T=b.name,F=T.toLowerCase();if(!xf.hasOwnProperty(F)){this.sanitizedSomething=!0;continue}let U=b.value;Vl[F]&&(U=ch(U)),this.buf.push(" ",T,'="',Bu(U),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Fu.hasOwnProperty(l)&&!gf.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Bu(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const qg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bf=/([^\#-~ |!])/g;function Bu(r){return r.replace(/&/g,"&amp;").replace(qg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(bf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tc;function oc(r,o){let l=null;try{Tc=Tc||function mf(r){const o=new Wp(r);return function qp(){try{return!!(new window.DOMParser).parseFromString(wr(""),"text/html")}catch{return!1}}()?new Zp(o):o}(r);let h=o?String(o):"";l=Tc.getInertBodyElement(h);let g=5,b=h;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,h=b,b=l.innerHTML,l=Tc.getInertBodyElement(h)}while(h!==b);return wr((new Wg).sanitizeChildren(al(l)||l))}finally{if(l){const h=al(l)||l;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function al(r){return"content"in r&&function Wc(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Do=(()=>((Do=Do||{})[Do.NONE=0]="NONE",Do[Do.HTML=1]="HTML",Do[Do.STYLE=2]="STYLE",Do[Do.SCRIPT=3]="SCRIPT",Do[Do.URL=4]="URL",Do[Do.RESOURCE_URL=5]="RESOURCE_URL",Do))();function wf(r){const o=function ki(){const r=En();return r&&r[12]}();return o?o.sanitize(Do.URL,r)||"":du(r,"URL")?Ml(r):ch(kt(r))}const sc=new ir("ENVIRONMENT_INITIALIZER"),md=new ir("INJECTOR",-1),Sr=new ir("INJECTOR_DEF_TYPES");class Ef{get(o,l=p){if(l===p){const h=new Error(`NullInjectorError: No provider for ${Oe(o)}!`);throw h.name="NullInjectorError",h}return l}}function Cf(...r){return{\u0275providers:Hl(0,r)}}function Hl(r,...o){const l=[],h=new Set;let g;return Ia(o,b=>{const T=b;Ya(T,l,[],h)&&(g||(g=[]),g.push(T))}),void 0!==g&&Gl(g,l),l}function Gl(r,o){for(let l=0;l<r.length;l++){const{providers:g}=r[l];Ia(g,b=>{o.push(b)})}}function Ya(r,o,l,h){if(!(r=Et(r)))return!1;let g=null,b=St(r);const T=!b&&Me(r);if(b||T){if(T&&!T.standalone)return!1;g=r}else{const U=r.ngModule;if(b=St(U),!b)return!1;g=U}const F=h.has(g);if(T){if(F)return!1;if(h.add(g),T.dependencies){const U="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const ne of U)Ya(ne,o,l,h)}}else{if(!b)return!1;{if(null!=b.imports&&!F){let ne;h.add(g);try{Ia(b.imports,xe=>{Ya(xe,o,l,h)&&(ne||(ne=[]),ne.push(xe))})}finally{}void 0!==ne&&Gl(ne,o)}if(!F){const ne=gs(g)||(()=>new g);o.push({provide:g,useFactory:ne,deps:bn},{provide:Sr,useValue:g,multi:!0},{provide:sc,useValue:()=>Pe(g),multi:!0})}const U=b.providers;null==U||F||Ia(U,xe=>{o.push(xe)})}}return g!==r&&void 0!==r.providers}const Gs=st({provide:String,useValue:st});function dh(r){return null!==r&&"object"==typeof r&&Gs in r}function Tl(r){return"function"==typeof r}const hh=new ir("Set Injector scope."),Nu={},Qg={};let gd;function _d(){return void 0===gd&&(gd=new Ef),gd}class fu{}class ac extends fu{constructor(o,l,h,g){super(),this.parent=l,this.source=h,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sf(o,T=>this.processProvider(T)),this.records.set(md,pu(void 0,this)),g.has("environment")&&this.records.set(fu,pu(void 0,this));const b=this.records.get(hh);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(Sr.multi,bn,ae.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=ie(this),h=on(void 0);try{return o()}finally{ie(l),on(h)}}get(o,l=p,h=ae.Default){this.assertNotDestroyed();const g=ie(this),b=on(void 0);try{if(!(h&ae.SkipSelf)){let F=this.records.get(o);if(void 0===F){const U=function e_(r){return"function"==typeof r||"object"==typeof r&&r instanceof ir}(o)&&ht(o);F=U&&this.injectableDefInScope(U)?pu(Sc(o),Nu):null,this.records.set(o,F)}if(null!=F)return this.hydrate(o,F)}return(h&ae.Self?_d():this.parent).get(o,l=h&ae.Optional&&l===p?null:l)}catch(T){if("NullInjectorError"===T.name){if((T[x]=T[x]||[]).unshift(Oe(o)),g)throw T;return function ze(r,o,l,h){const g=r[x];throw o[W]&&g.unshift(o[W]),r.message=function at(r,o,l,h=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let g=Oe(o);if(Array.isArray(o))g=o.map(Oe).join(" -> ");else if("object"==typeof o){let b=[];for(let T in o)if(o.hasOwnProperty(T)){let F=o[T];b.push(T+":"+("string"==typeof F?JSON.stringify(F):Oe(F)))}g=`{${b.join(", ")}}`}return`${l}${h?"("+h+")":""}[${g}]: ${r.replace(P,"\n  ")}`}("\n"+r.message,g,l,h),r.ngTokenPath=g,r[x]=null,r}(T,o,"R3InjectorError",this.source)}throw T}finally{on(b),ie(g)}}resolveInjectorInitializers(){const o=ie(this),l=on(void 0);try{const h=this.get(sc.multi,bn,ae.Self);for(const g of h)g()}finally{ie(o),on(l)}}toString(){const o=[],l=this.records;for(const h of l.keys())o.push(Oe(h));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new et(205,!1)}processProvider(o){let l=Tl(o=Et(o))?o:Et(o&&o.provide);const h=function ph(r){return dh(r)?pu(void 0,r.useValue):pu(mh(r),Nu)}(o);if(Tl(o)||!0!==o.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=pu(void 0,Nu,!0),g.factory=()=>Te(g.multi),this.records.set(l,g)),l=o,g.multi.push(o)}this.records.set(l,h)}hydrate(o,l){return l.value===Nu&&(l.value=Qg,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Jp(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Et(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Sc(r){const o=ht(r),l=null!==o?o.factory:gs(r);if(null!==l)return l;if(r instanceof ir)throw new et(204,!1);if(r instanceof Function)return function fh(r){const o=r.length;if(o>0)throw bl(o,"?"),new et(204,!1);const l=function ot(r){const o=r&&(r[tn]||r[Wi]);if(o){const l=function Se(r){if(r.hasOwnProperty("name"))return r.name;const o=(""+r).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(r);return null!==l?()=>l.factory(r):()=>new r}(r);throw new et(204,!1)}function mh(r,o,l){let h;if(Tl(r)){const g=Et(r);return gs(g)||Sc(g)}if(dh(r))h=()=>Et(r.useValue);else if(function Mf(r){return!(!r||!r.useFactory)}(r))h=()=>r.useFactory(...Te(r.deps||[]));else if(function $l(r){return!(!r||!r.useExisting)}(r))h=()=>Pe(Et(r.useExisting));else{const g=Et(r&&(r.useClass||r.provide));if(!function Jg(r){return!!r.deps}(r))return gs(g)||Sc(g);h=()=>new g(...Te(r.deps))}return h}function pu(r,o,l=!1){return{factory:r,value:o,multi:l?[]:void 0}}function Tf(r){return!!r.\u0275providers}function Sf(r,o){for(const l of r)Array.isArray(l)?Sf(l,o):Tf(l)?Sf(l.\u0275providers,o):o(l)}class If{}class n_{resolveComponentFactory(o){throw function em(r){const o=Error(`No component factory found for ${Oe(r)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=r,o}(o)}}let lc=(()=>{class r{}return r.NULL=new n_,r})();function gh(){return mu(jr(),En())}function mu(r,o){return new zu(vo(r,o))}let zu=(()=>{class r{constructor(l){this.nativeElement=l}}return r.__NG_ELEMENT_ID__=gh,r})();function i_(r){return r instanceof zu?r.nativeElement:r}class yd{}let Ka=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function tm(){const r=En(),l=dr(jr().index,r);return(Ki(l)?l:r)[11]}(),r})(),nm=(()=>{class r{}return r.\u0275prov=Tt({token:r,providedIn:"root",factory:()=>null}),r})();class Sl{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Pf=new Sl("14.2.11"),Ac={};function Qa(r){return r.ngOriginalError}class yu{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Qa(o);for(;l&&Qa(l);)l=Qa(l);return l||null}}const Pc=new Map;let am=0;const bh="__ngContext__";function ma(r,o){Ki(o)?(r[bh]=o[20],function cm(r){Pc.set(r[20],r)}(o)):r[bh]=o}function Il(r){return r instanceof Function?r():r}var uc=(()=>((uc=uc||{})[uc.Important=1]="Important",uc[uc.DashCase=2]="DashCase",uc))();function Nf(r,o){return undefined(r,o)}function dc(r){const o=r[3];return vr(o)?o[3]:o}function Hu(r){return Cd(r[13])}function Mh(r){return Cd(r[4])}function Cd(r){for(;null!==r&&!vr(r);)r=r[4];return r}function hc(r,o,l,h,g){if(null!=h){let b,T=!1;vr(h)?b=h:Ki(h)&&(T=!0,h=h[0]);const F=Br(h);0===r&&null!==l?null==g?vm(o,l,F):xu(o,l,F,g||null,!0):1===r&&null!==l?xu(o,l,F,g||null,!0):2===r?function Id(r,o,l){const h=Rc(r,o);h&&function b_(r,o,l,h){r.removeChild(o,l,h)}(r,h,o,l)}(o,F,T):3===r&&o.destroyNode(F),null!=b&&function Em(r,o,l,h,g){const b=l[7];b!==Br(l)&&hc(o,r,h,b,g);for(let F=10;F<l.length;F++){const U=l[F];Pd(U[1],U,r,o,h,b)}}(o,r,b,l,g)}}function Dd(r,o,l){return r.createElement(o,l)}function gm(r,o){const l=r[9],h=l.indexOf(o),g=o[3];512&o[2]&&(o[2]&=-513,xo(g,-1)),l.splice(h,1)}function Sd(r,o){if(r.length<=10)return;const l=10+o,h=r[l];if(h){const g=h[17];null!==g&&g!==r&&gm(g,h),o>0&&(r[l-1][4]=h[4]);const b=rc(r,10+o);!function Vf(r,o){Pd(r,o,o[11],2,null,null),o[0]=null,o[6]=null}(h[1],h);const T=b[19];null!==T&&T.detachView(b[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Th(r,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&Pd(r,o,l,3,null,null),function Td(r){let o=r[13];if(!o)return Gu(r[1],r);for(;o;){let l=null;if(Ki(o))l=o[13];else{const h=o[10];h&&(l=h)}if(!l){for(;o&&!o[4]&&o!==r;)Ki(o)&&Gu(o[1],o),o=o[3];null===o&&(o=r),Ki(o)&&Gu(o[1],o),l=o&&o[4]}o=l}}(o)}}function Gu(r,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function x_(r,o){let l;if(null!=r&&null!=(l=r.destroyHooks))for(let h=0;h<l.length;h+=2){const g=o[l[h]];if(!(g instanceof zo)){const b=l[h+1];if(Array.isArray(b))for(let T=0;T<b.length;T+=2){const F=g[b[T]],U=b[T+1];try{U.call(F)}finally{}}else try{b.call(g)}finally{}}}}(r,o),function v_(r,o){const l=r.cleanup,h=o[7];let g=-1;if(null!==l)for(let b=0;b<l.length-1;b+=2)if("string"==typeof l[b]){const T=l[b+1],F="function"==typeof T?T(o):Br(o[T]),U=h[g=l[b+2]],ne=l[b+3];"boolean"==typeof ne?F.removeEventListener(l[b],U,ne):ne>=0?h[g=ne]():h[g=-ne].unsubscribe(),b+=2}else{const T=h[g=l[b+1]];l[b].call(T)}if(null!==h){for(let b=g+1;b<h.length;b++)(0,h[b])();o[7]=null}}(r,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&vr(o[3])){l!==o[3]&&gm(l,o);const h=o[19];null!==h&&h.detachView(r)}!function l_(r){Pc.delete(r[20])}(o)}}function _m(r,o,l){return function ym(r,o,l){let h=o;for(;null!==h&&40&h.type;)h=(o=h).parent;if(null===h)return l[0];if(2&h.flags){const g=r.data[h.directiveStart].encapsulation;if(g===it.None||g===it.Emulated)return null}return vo(h,l)}(r,o.parent,l)}function xu(r,o,l,h,g){r.insertBefore(o,l,h,g)}function vm(r,o,l){r.appendChild(o,l)}function Ad(r,o,l,h,g){null!==h?xu(r,o,l,h,g):vm(r,o,l)}function Rc(r,o){return r.parentNode(o)}function xm(r,o,l){return Hf(r,o,l)}let Hf=function bm(r,o,l){return 40&r.type?vo(r,l):null};function Ah(r,o,l,h){const g=_m(r,h,o),b=o[11],F=xm(h.parent||o[6],h,o);if(null!=g)if(Array.isArray(l))for(let U=0;U<l.length;U++)Ad(b,g,l[U],F,!1);else Ad(b,g,l,F,!1)}function Ih(r,o){if(null!==o){const l=o.type;if(3&l)return vo(o,r);if(4&l)return $u(-1,r[o.index]);if(8&l){const h=o.child;if(null!==h)return Ih(r,h);{const g=r[o.index];return vr(g)?$u(-1,g):Br(g)}}if(32&l)return Nf(o,r)()||Br(r[o.index]);{const h=Ph(r,o);return null!==h?Array.isArray(h)?h[0]:Ih(dc(r[16]),h):Ih(r,o.next)}}return null}function Ph(r,o){return null!==o?r[16][6].projection[o.projection]:null}function $u(r,o){const l=10+r+1;if(l<o.length){const h=o[l],g=h[1].firstChild;if(null!==g)return Ih(h,g)}return o[7]}function Gf(r,o,l,h,g,b,T){for(;null!=l;){const F=h[l.index],U=l.type;if(T&&0===o&&(F&&ma(Br(F),h),l.flags|=4),64!=(64&l.flags))if(8&U)Gf(r,o,l.child,h,g,b,!1),hc(o,r,g,F,b);else if(32&U){const ne=Nf(l,h);let xe;for(;xe=ne();)hc(o,r,g,xe,b);hc(o,r,g,F,b)}else 16&U?Zu(r,o,h,l,g,b):hc(o,r,g,F,b);l=T?l.projectionNext:l.next}}function Pd(r,o,l,h,g,b){Gf(l,h,r.firstChild,o,g,b,!1)}function Zu(r,o,l,h,g,b){const T=l[16],U=T[6].projection[h.projection];if(Array.isArray(U))for(let ne=0;ne<U.length;ne++)hc(o,r,g,U[ne],b);else Gf(r,o,U,T[3],g,b,!0)}function $f(r,o,l){r.setAttribute(o,"style",l)}function Zf(r,o,l){""===l?r.removeAttribute(o,"class"):r.setAttribute(o,"class",l)}function Wf(r,o,l){let h=r.length;for(;;){const g=r.indexOf(o,l);if(-1===g)return g;if(0===g||r.charCodeAt(g-1)<=32){const b=o.length;if(g+b===h||r.charCodeAt(g+b)<=32)return g}l=g+1}}const qf="ng-template";function Cm(r,o,l){let h=0;for(;h<r.length;){let g=r[h++];if(l&&"class"===g){if(g=r[h],-1!==Wf(g.toLowerCase(),o,0))return!0}else if(1===g){for(;h<r.length&&"string"==typeof(g=r[h++]);)if(g.toLowerCase()===o)return!0;return!1}}return!1}function Yf(r){return 4===r.type&&r.value!==qf}function Mm(r,o,l){return o===(4!==r.type||l?r.value:qf)}function M_(r,o,l){let h=4;const g=r.attrs||[],b=function ga(r){for(let o=0;o<r.length;o++)if(Ul(r[o]))return o;return r.length}(g);let T=!1;for(let F=0;F<o.length;F++){const U=o[F];if("number"!=typeof U){if(!T)if(4&h){if(h=2|1&h,""!==U&&!Mm(r,U,l)||""===U&&1===o.length){if(Zl(h))return!1;T=!0}}else{const ne=8&h?U:o[++F];if(8&h&&null!==r.attrs){if(!Cm(r.attrs,ne,l)){if(Zl(h))return!1;T=!0}continue}const qe=Dm(8&h?"class":U,g,Yf(r),l);if(-1===qe){if(Zl(h))return!1;T=!0;continue}if(""!==ne){let Nt;Nt=qe>b?"":g[qe+1].toLowerCase();const un=8&h?Nt:null;if(un&&-1!==Wf(un,ne,0)||2&h&&ne!==Nt){if(Zl(h))return!1;T=!0}}}}else{if(!T&&!Zl(h)&&!Zl(U))return!1;if(T&&Zl(U))continue;T=!1,h=U|1&h}}return Zl(h)||T}function Zl(r){return 0==(1&r)}function Dm(r,o,l,h){if(null===o)return-1;let g=0;if(h||!l){let b=!1;for(;g<o.length;){const T=o[g];if(T===r)return g;if(3===T||6===T)b=!0;else{if(1===T||2===T){let F=o[++g];for(;"string"==typeof F;)F=o[++g];continue}if(4===T)break;if(0===T){g+=4;continue}}g+=b?1:2}return-1}return function Ld(r,o){let l=r.indexOf(4);if(l>-1)for(l++;l<r.length;){const h=r[l];if("number"==typeof h)return-1;if(h===o)return l;l++}return-1}(o,r)}function kd(r,o,l=!1){for(let h=0;h<o.length;h++)if(M_(r,o[h],l))return!0;return!1}function Wu(r,o){e:for(let l=0;l<o.length;l++){const h=o[l];if(r.length===h.length){for(let g=0;g<r.length;g++)if(r[g]!==h[g])continue e;return!0}}return!1}function qu(r,o){return r?":not("+o.trim()+")":o}function Sm(r){let o=r[0],l=1,h=2,g="",b=!1;for(;l<r.length;){let T=r[l];if("string"==typeof T)if(2&h){const F=r[++l];g+="["+T+(F.length>0?'="'+F+'"':"")+"]"}else 8&h?g+="."+T:4&h&&(g+=" "+T);else""!==g&&!Zl(T)&&(o+=qu(b,g),g=""),h=T,b=b||!Zl(h);l++}return""!==g&&(o+=qu(b,g)),o}const gr={};function Im(r){Pm(lr(),En(),gt()+r,!1)}function Pm(r,o,l,h){if(!h)if(3==(3&o[2])){const b=r.preOrderCheckHooks;null!==b&&po(o,b,l)}else{const b=r.preOrderHooks;null!==b&&Zo(o,b,0,l)}vn(l)}function Fm(r,o=null,l=null,h){const g=Bm(r,o,l,h);return g.resolveInjectorInitializers(),g}function Bm(r,o=null,l=null,h,g=new Set){const b=[l||bn,Cf(r)];return h=h||("object"==typeof r?void 0:Oe(r)),new ac(b,o||_d(),h||null,g)}let bu=(()=>{class r{static create(l,h){if(Array.isArray(l))return Fm({name:""},h,l,"");{const g=l.name??"";return Fm({name:g},l.parent,l.providers,g)}}}return r.THROW_IF_NOT_FOUND=p,r.NULL=new Ef,r.\u0275prov=Tt({token:r,providedIn:"any",factory:()=>Pe(md)}),r.__NG_ELEMENT_ID__=-1,r})();function Lc(r,o=ae.Default){const l=En();return null===l?Pe(r,o):kr(jr(),l,Et(r),o)}function wu(){throw new Error("invalid")}function Lh(r,o){return r<<17|o<<2}function Wl(r){return r>>17&32767}function zd(r){return 2|r}function pc(r){return(131068&r)>>2}function ka(r,o){return-131069&r|o<<2}function Yc(r){return 1|r}function Nc(r,o){const l=r.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const g=l[h],b=l[h+1];if(-1!==b){const T=r.data[b];fl(g),T.contentQueries(2,o[b],b)}}}function Cu(r,o,l,h,g,b,T,F,U,ne,xe){const qe=o.blueprint.slice();return qe[0]=g,qe[2]=76|h,(null!==xe||r&&1024&r[2])&&(qe[2]|=1024),_s(qe),qe[3]=qe[15]=r,qe[8]=l,qe[10]=T||r&&r[10],qe[11]=F||r&&r[11],qe[12]=U||r&&r[12]||null,qe[9]=ne||r&&r[9]||null,qe[6]=b,qe[20]=function lm(){return am++}(),qe[21]=xe,qe[16]=2==o.type?r[16]:qe,qe}function Xc(r,o,l,h,g){let b=r.data[o];if(null===b)b=function hp(r,o,l,h,g){const b=Q(),T=be(),U=r.data[o]=function fp(r,o,l,h,g,b){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?b:b&&b.parent,l,o,h,g);return null===r.firstChild&&(r.firstChild=U),null!==b&&(T?null==b.child&&null!==U.parent&&(b.child=U):null===b.next&&(b.next=U)),U}(r,o,l,h,g),function Ll(){return Hi.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=l,b.value=h,b.attrs=g;const T=function q(){const r=Hi.lFrame,o=r.currentTNode;return r.isParent?o:o.parent}();b.injectorIndex=null===T?-1:T.injectorIndex}return j(b,!0),b}function Qu(r,o,l,h){if(0===l)return-1;const g=o.length;for(let b=0;b<l;b++)o.push(h),r.blueprint.push(h),r.data.push(null);return g}function Uh(r,o,l){Ha(o);try{const h=r.viewQuery;null!==h&&$h(1,h,l);const g=r.template;null!==g&&Ju(r,o,g,1,l),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Nc(r,o),r.staticViewQueries&&$h(2,r.viewQuery,l);const b=r.components;null!==b&&function sg(r,o){for(let l=0;l<o.length;l++)$_(r,o[l])}(o,b)}catch(h){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),h}finally{o[2]&=-5,re()}}function $d(r,o,l,h){const g=o[2];if(128!=(128&g)){Ha(o);try{_s(o),function Da(r){return Hi.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==l&&Ju(r,o,l,2,h);const T=3==(3&g);if(T){const ne=r.preOrderCheckHooks;null!==ne&&po(o,ne,null)}else{const ne=r.preOrderHooks;null!==ne&&Zo(o,ne,0,null),ss(o,0)}if(function Yd(r){for(let o=Hu(r);null!==o;o=Mh(o)){if(!o[2])continue;const l=o[9];for(let h=0;h<l.length;h++){const g=l[h],b=g[3];0==(512&g[2])&&xo(b,1),g[2]|=512}}}(o),function qd(r){for(let o=Hu(r);null!==o;o=Mh(o))for(let l=10;l<o.length;l++){const h=o[l],g=h[1];Fs(h)&&$d(g,h,g.template,h[8])}}(o),null!==r.contentQueries&&Nc(r,o),T){const ne=r.contentCheckHooks;null!==ne&&po(o,ne)}else{const ne=r.contentHooks;null!==ne&&Zo(o,ne,1),ss(o,1)}!function j_(r,o){const l=r.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const g=l[h];if(g<0)vn(~g);else{const b=g,T=l[++h],F=l[++h];zs(T,b),F(2,o[b])}}}finally{vn(-1)}}(r,o);const F=r.components;null!==F&&function og(r,o){for(let l=0;l<o.length;l++)Kd(r,o[l])}(o,F);const U=r.viewQuery;if(null!==U&&$h(2,U,h),T){const ne=r.viewCheckHooks;null!==ne&&po(o,ne)}else{const ne=r.viewHooks;null!==ne&&Zo(o,ne,2),ss(o,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,xo(o[3],-1))}finally{re()}}}function Ju(r,o,l,h,g){const b=gt(),T=2&h;try{vn(-1),T&&o.length>22&&Pm(r,o,22,!1),l(h,g)}finally{vn(b)}}function mc(r,o,l){if(ro(o)){const g=o.directiveEnd;for(let b=o.directiveStart;b<g;b++){const T=r.data[b];T.contentQueries&&T.contentQueries(1,l[b],b)}}}function Zd(r,o,l){!Ds()||(function hg(r,o,l,h){const g=l.directiveStart,b=l.directiveEnd;r.firstCreatePass||Xi(l,o),ma(h,o);const T=l.initialInputs;for(let F=g;F<b;F++){const U=r.data[F],ne=Yr(U);ne&&H_(o,l,U);const xe=zr(o,r,F,l);ma(xe,o),null!==T&&G_(0,F-g,xe,U,0,T),ne&&(dr(l.index,o)[8]=xe)}}(r,o,l,vo(l,o)),128==(128&l.flags)&&function Wd(r,o,l){const h=l.directiveStart,g=l.directiveEnd,b=l.index,T=function rl(){return Hi.lFrame.currentDirectiveIndex}();try{vn(b);for(let F=h;F<g;F++){const U=r.data[F],ne=o[F];ol(F),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&Hh(U,ne)}}finally{vn(-1),ol(T)}}(r,o,l))}function Qc(r,o,l=vo){const h=o.localNames;if(null!==h){let g=o.index+1;for(let b=0;b<h.length;b+=2){const T=h[b+1],F=-1===T?l(o,r):r[T];r[g++]=F}}}function Mu(r){const o=r.tView;return null===o||o.incompleteFirstPass?r.tView=Ja(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):o}function Ja(r,o,l,h,g,b,T,F,U,ne){const xe=22+h,qe=xe+g,Nt=function Pl(r,o){const l=[];for(let h=0;h<o;h++)l.push(h<r?null:gr);return l}(xe,qe),un="function"==typeof ne?ne():ne;return Nt[1]={type:r,blueprint:Nt,template:l,queries:null,viewQuery:F,declTNode:o,data:Nt.slice().fill(null,xe),bindingStartIndex:xe,expandoStartIndex:qe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:U,consts:un,incompleteFirstPass:!1}}function lg(r,o,l,h){const g=gp(o);null===l?g.push(h):(g.push(l),r.firstCreatePass&&gg(r).push(h,g.length-1))}function ql(r,o,l){for(let h in r)if(r.hasOwnProperty(h)){const g=r[h];(l=null===l?{}:l).hasOwnProperty(h)?l[h].push(o,g):l[h]=[o,g]}return l}function Jc(r,o){const h=o.directiveEnd,g=r.data,b=o.attrs,T=[];let F=null,U=null;for(let ne=o.directiveStart;ne<h;ne++){const xe=g[ne],qe=xe.inputs,Nt=null===b||Yf(o)?null:eu(qe,b);T.push(Nt),F=ql(qe,ne,F),U=ql(xe.outputs,ne,U)}null!==F&&(F.hasOwnProperty("class")&&(o.flags|=16),F.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=T,o.inputs=F,o.outputs=U}function el(r,o,l,h,g,b,T,F){const U=vo(o,l);let xe,ne=o.inputs;!F&&null!=ne&&(xe=ne[h])?(Zh(r,l,xe,h,g),Ur(o)&&ug(l,o.index)):3&o.type&&(h=function cg(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(h),g=null!=T?T(g,o.value||"",h):g,b.setProperty(U,h,g))}function ug(r,o){const l=dr(o,r);16&l[2]||(l[2]|=32)}function Du(r,o,l,h){let g=!1;if(Ds()){const b=function fg(r,o,l){const h=r.directiveRegistry;let g=null;if(h)for(let b=0;b<h.length;b++){const T=h[b];kd(l,T.selectors,!1)&&(g||(g=[]),Ir(Xi(l,o),r,T.type),Yr(T)?(Tu(r,l),g.unshift(T)):g.push(T))}return g}(r,o,l),T=null===h?null:{"":-1};if(null!==b){g=!0,mp(l,r.data.length,b.length);for(let xe=0;xe<b.length;xe++){const qe=b[xe];qe.providersResolver&&qe.providersResolver(qe)}let F=!1,U=!1,ne=Qu(r,o,b.length,null);for(let xe=0;xe<b.length;xe++){const qe=b[xe];l.mergedAttrs=ml(l.mergedAttrs,qe.hostAttrs),mg(r,l,o,ne,qe),pp(ne,qe,T),null!==qe.contentQueries&&(l.flags|=8),(null!==qe.hostBindings||null!==qe.hostAttrs||0!==qe.hostVars)&&(l.flags|=128);const Nt=qe.type.prototype;!F&&(Nt.ngOnChanges||Nt.ngOnInit||Nt.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(l.index),F=!0),!U&&(Nt.ngOnChanges||Nt.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(l.index),U=!0),ne++}Jc(r,l)}T&&function pg(r,o,l){if(o){const h=r.localNames=[];for(let g=0;g<o.length;g+=2){const b=l[o[g+1]];if(null==b)throw new et(-301,!1);h.push(o[g],b)}}}(l,h,T)}return l.mergedAttrs=ml(l.mergedAttrs,l.attrs),g}function td(r,o,l,h,g,b){const T=b.hostBindings;if(T){let F=r.hostBindingOpCodes;null===F&&(F=r.hostBindingOpCodes=[]);const U=~o.index;(function jh(r){let o=r.length;for(;o>0;){const l=r[--o];if("number"==typeof l&&l<0)return l}return 0})(F)!=U&&F.push(U),F.push(h,g,T)}}function Hh(r,o){null!==r.hostBindings&&r.hostBindings(1,o)}function Tu(r,o){o.flags|=2,(r.components||(r.components=[])).push(o.index)}function pp(r,o,l){if(l){if(o.exportAs)for(let h=0;h<o.exportAs.length;h++)l[o.exportAs[h]]=r;Yr(o)&&(l[""]=r)}}function mp(r,o,l){r.flags|=1,r.directiveStart=o,r.directiveEnd=o+l,r.providerIndexes=o}function mg(r,o,l,h,g){r.data[h]=g;const b=g.factory||(g.factory=gs(g.type)),T=new zo(b,Yr(g),Lc);r.blueprint[h]=T,l[h]=T,td(r,o,0,h,Qu(r,l,g.hostVars,gr),g)}function H_(r,o,l){const h=vo(o,r),g=Mu(l),b=r[10],T=Uc(r,Cu(r,g,null,l.onPush?32:16,h,o,b,b.createRenderer(h,l),null,null,null));r[o.index]=T}function Yl(r,o,l,h,g,b){const T=vo(r,o);!function zc(r,o,l,h,g,b,T){if(null==b)r.removeAttribute(o,g,l);else{const F=null==T?kt(b):T(b,h||"",g);r.setAttribute(o,g,F,l)}}(o[11],T,b,r.value,l,h,g)}function G_(r,o,l,h,g,b){const T=b[o];if(null!==T){const F=h.setInput;for(let U=0;U<T.length;){const ne=T[U++],xe=T[U++],qe=T[U++];null!==F?h.setInput(l,qe,ne,xe):l[xe]=qe}}}function eu(r,o){let l=null,h=0;for(;h<o.length;){const g=o[h];if(0!==g)if(5!==g){if("number"==typeof g)break;r.hasOwnProperty(g)&&(null===l&&(l=[]),l.push(g,r[g],o[h+1])),h+=2}else h+=2;else h+=4}return l}function nd(r,o,l,h){return new Array(r,!0,!1,o,null,0,h,l,null,null)}function Kd(r,o){const l=dr(o,r);if(Fs(l)){const h=l[1];48&l[2]?$d(h,l,h.template,l[8]):l[5]>0&&id(l)}}function id(r){for(let h=Hu(r);null!==h;h=Mh(h))for(let g=10;g<h.length;g++){const b=h[g];if(Fs(b))if(512&b[2]){const T=b[1];$d(T,b,T.template,b[8])}else b[5]>0&&id(b)}const l=r[1].components;if(null!==l)for(let h=0;h<l.length;h++){const g=dr(l[h],r);Fs(g)&&g[5]>0&&id(g)}}function $_(r,o){const l=dr(o,r),h=l[1];(function Z_(r,o){for(let l=o.length;l<r.blueprint.length;l++)o.push(r.blueprint[l])})(h,l),Uh(h,l,l[8])}function Uc(r,o){return r[13]?r[14][4]=o:r[13]=o,r[14]=o,o}function rd(r){for(;r;){r[2]|=32;const o=dc(r);if(Es(r)&&!o)return r;r=o}return null}function Gh(r,o,l,h=!0){const g=o[10];g.begin&&g.begin();try{$d(r,o,r.template,l)}catch(T){throw h&&_g(o,T),T}finally{g.end&&g.end()}}function $h(r,o,l){fl(0),o(r,l)}function gp(r){return r[7]||(r[7]=[])}function gg(r){return r.cleanup||(r.cleanup=[])}function _p(r,o,l){return(null===r||Yr(r))&&(l=function hl(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(l[o.index])),l[11]}function _g(r,o){const l=r[9],h=l?l.get(yu,null):null;h&&h.handleError(o)}function Zh(r,o,l,h,g){for(let b=0;b<l.length;){const T=l[b++],F=l[b++],U=o[T],ne=r.data[T];null!==ne.setInput?ne.setInput(U,g,h,F):U[F]=g}}function Vc(r,o,l){const h=Go(o,r);!function Uf(r,o,l){r.setValue(o,l)}(r[11],h,l)}function Wh(r,o,l){let h=l?r.styles:null,g=l?r.classes:null,b=0;if(null!==o)for(let T=0;T<o.length;T++){const F=o[T];"number"==typeof F?b=F:1==b?g=ke(g,F):2==b&&(h=ke(h,F+": "+o[++T]+";"))}l?r.styles=h:r.stylesWithoutHost=h,l?r.classes=g:r.classesWithoutHost=g}function Su(r,o,l,h,g=!1){for(;null!==l;){const b=o[l.index];if(null!==b&&h.push(Br(b)),vr(b))for(let F=10;F<b.length;F++){const U=b[F],ne=U[1].firstChild;null!==ne&&Su(U[1],U,ne,h)}const T=l.type;if(8&T)Su(r,o,l.child,h);else if(32&T){const F=Nf(l,o);let U;for(;U=F();)h.push(U)}else if(16&T){const F=Ph(o,l);if(Array.isArray(F))h.push(...F);else{const U=dc(o[16]);Su(U[1],U,F,h,!0)}}l=g?l.projectionNext:l.next}return h}class tu{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Su(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(vr(o)){const l=o[8],h=l?l.indexOf(this):-1;h>-1&&(Sd(o,h),rc(l,h))}this._attachedToViewContainer=!1}Th(this._lView[1],this._lView)}onDestroy(o){lg(this._lView[1],this._lView,null,o)}markForCheck(){rd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Gh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new et(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mm(r,o){Pd(r,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new et(902,!1);this._appRef=o}}class qh extends tu{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Gh(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class yp extends lc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Me(o);return new Xd(l,this.ngModule)}}function Yh(r){const o=[];for(let l in r)r.hasOwnProperty(l)&&o.push({propName:r[l],templateName:l});return o}class nu{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,h){const g=this.injector.get(o,Ac,h);return g!==Ac||l===Ac?g:this.parentInjector.get(o,l,h)}}class Xd extends If{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Am(r){return r.map(Sm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Yh(this.componentDef.inputs)}get outputs(){return Yh(this.componentDef.outputs)}create(o,l,h,g){let b=(g=g||this.ngModule)instanceof fu?g:g?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const T=b?new nu(o,b):o,F=T.get(yd,null);if(null===F)throw new et(407,!1);const U=T.get(nm,null),ne=F.createRenderer(null,this.componentDef),xe=this.componentDef.selectors[0][0]||"div",qe=h?function ag(r,o,l){return r.selectRootElement(o,l===it.ShadowDom)}(ne,h,this.componentDef.encapsulation):Dd(ne,xe,function vp(r){const o=r.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(xe)),Nt=this.componentDef.onPush?288:272,un=Ja(0,null,null,1,0,null,null,null,null,null),Zn=Cu(null,un,null,Nt,null,null,F,ne,U,T,null);let ci,xi;Ha(Zn);try{const Fi=function Y_(r,o,l,h,g,b){const T=l[1];l[22]=r;const U=Xc(T,22,2,"#host",null),ne=U.mergedAttrs=o.hostAttrs;null!==ne&&(Wh(U,ne,!0),null!==r&&(pl(g,r,ne),null!==U.classes&&Zf(g,r,U.classes),null!==U.styles&&$f(g,r,U.styles)));const xe=h.createRenderer(r,o),qe=Cu(l,Mu(o),null,o.onPush?32:16,l[22],U,h,xe,b||null,null,null);return T.firstCreatePass&&(Ir(Xi(U,l),T,o.type),Tu(T,U),mp(U,l.length,1)),Uc(l,qe),l[22]=qe}(qe,this.componentDef,Zn,F,ne);if(qe)if(h)pl(ne,qe,["ng-version",Pf.full]);else{const{attrs:Qi,classes:ei}=function D_(r){const o=[],l=[];let h=1,g=2;for(;h<r.length;){let b=r[h];if("string"==typeof b)2===g?""!==b&&o.push(b,r[++h]):8===g&&l.push(b);else{if(!Zl(g))break;g=b}h++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Qi&&pl(ne,qe,Qi),ei&&ei.length>0&&Zf(ne,qe,ei.join(" "))}if(xi=Zs(un,22),void 0!==l){const Qi=xi.projection=[];for(let ei=0;ei<this.ngContentSelectors.length;ei++){const ar=l[ei];Qi.push(null!=ar?Array.from(ar):null)}}ci=function K_(r,o,l,h){const g=l[1],b=function ed(r,o,l){const h=jr();r.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),mg(r,h,o,Qu(r,o,1,null),l),Jc(r,h));const g=zr(o,r,h.directiveStart,h);ma(g,o);const b=vo(h,o);return b&&ma(b,o),g}(g,l,o);if(r[8]=l[8]=b,null!==h)for(const F of h)F(b,o);if(o.contentQueries){const F=jr();o.contentQueries(1,b,F.directiveStart)}const T=jr();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(vn(T.index),td(l[1],T,0,T.directiveStart,T.directiveEnd,o),Hh(o,b)),b}(Fi,this.componentDef,Zn,[X_]),Uh(un,Zn,null)}finally{re()}return new Kh(this.componentType,ci,mu(xi,Zn),Zn,xi)}}class Kh extends class Af{}{constructor(o,l,h,g,b){super(),this.location=h,this._rootLView=g,this._tNode=b,this.instance=l,this.hostView=this.changeDetectorRef=new qh(g),this.componentType=o}setInput(o,l){const h=this._tNode.inputs;let g;if(null!==h&&(g=h[o])){const b=this._rootLView;Zh(b[1],b,g,o,l),ug(b,this._tNode.index)}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function X_(){const r=jr();Rr(En()[1],r)}function bp(r){let o=function Xh(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),l=!0;const h=[r];for(;o;){let g;if(Yr(r))g=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new et(903,!1);g=o.\u0275dir}if(g){if(l){h.push(g);const T=r;T.inputs=wp(r.inputs),T.declaredInputs=wp(r.declaredInputs),T.outputs=wp(r.outputs);const F=g.hostBindings;F&&J_(r,F);const U=g.viewQuery,ne=g.contentQueries;if(U&&Q_(r,U),ne&&yg(r,ne),nt(r.inputs,g.inputs),nt(r.declaredInputs,g.declaredInputs),nt(r.outputs,g.outputs),Yr(g)&&g.data.animation){const xe=r.data;xe.animation=(xe.animation||[]).concat(g.data.animation)}}const b=g.features;if(b)for(let T=0;T<b.length;T++){const F=b[T];F&&F.ngInherit&&F(r),F===bp&&(l=!1)}}o=Object.getPrototypeOf(o)}!function Qd(r){let o=0,l=null;for(let h=r.length-1;h>=0;h--){const g=r[h];g.hostVars=o+=g.hostVars,g.hostAttrs=ml(g.hostAttrs,l=ml(l,g.hostAttrs))}}(h)}function wp(r){return r===Ii?{}:r===bn?[]:r}function Q_(r,o){const l=r.viewQuery;r.viewQuery=l?(h,g)=>{o(h,g),l(h,g)}:o}function yg(r,o){const l=r.contentQueries;r.contentQueries=l?(h,g,b)=>{o(h,g,b),l(h,g,b)}:o}function J_(r,o){const l=r.hostBindings;r.hostBindings=l?(h,g)=>{o(h,g),l(h,g)}:o}let Kl=null;function _a(){if(!Kl){const r=Ht.Symbol;if(r&&r.iterator)Kl=r.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const h=o[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Kl=h)}}}return Kl}function iu(r){return!!Qh(r)&&(Array.isArray(r)||!(r instanceof Map)&&_a()in r)}function Qh(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function _c(r,o,l){return r[o]=l}function na(r,o,l){return!Object.is(r[o],l)&&(r[o]=l,!0)}function ru(r,o,l,h){const g=na(r,o,l);return na(r,o+1,h)||g}function Jh(r,o,l,h){const g=En();return na(g,Ns(),o)&&(lr(),Yl(On(),g,r,o,l,h)),Jh}function cl(r,o,l,h){return na(r,Ns(),l)?o+kt(l)+h:gr}function Pu(r,o,l,h,g,b){const F=ru(r,function $o(){return Hi.lFrame.bindingIndex}(),l,g);return qs(2),F?o+kt(l)+h+kt(g)+b:gr}function Tp(r,o,l,h,g,b,T,F){const U=En(),ne=lr(),xe=r+22,qe=ne.firstCreatePass?function ey(r,o,l,h,g,b,T,F,U){const ne=o.consts,xe=Xc(o,r,4,T||null,is(ne,F));Du(o,l,xe,is(ne,U)),Rr(o,xe);const qe=xe.tViews=Ja(2,xe,h,g,b,o.directiveRegistry,o.pipeRegistry,null,o.schemas,ne);return null!==o.queries&&(o.queries.template(o,xe),qe.queries=o.queries.embeddedTView(xe)),xe}(xe,ne,U,o,l,h,g,b,T):ne.data[xe];j(qe,!1);const Nt=U[11].createComment("");Ah(ne,U,Nt,qe),ma(Nt,U),Uc(U,U[xe]=nd(Nt,U,Nt,qe)),pr(qe)&&Zd(ne,U,qe),null!=T&&Qc(U,qe,F)}function Cg(r){return ca(function so(){return Hi.lFrame.contextLView}(),22+r)}function th(r,o,l){const h=En();return na(h,Ns(),o)&&el(lr(),On(),h,r,o,h[11],l,!1),th}function nf(r,o,l,h,g){const T=g?"class":"style";Zh(r,l,o.inputs[T],T,h)}function t(r,o,l,h){const g=En(),b=lr(),T=22+r,F=g[11],U=g[T]=Dd(F,o,function br(){return Hi.lFrame.currentNamespace}()),ne=b.firstCreatePass?function Mg(r,o,l,h,g,b,T){const F=o.consts,ne=Xc(o,r,2,g,is(F,b));return Du(o,l,ne,is(F,T)),null!==ne.attrs&&Wh(ne,ne.attrs,!1),null!==ne.mergedAttrs&&Wh(ne,ne.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,ne),ne}(T,b,g,0,o,l,h):b.data[T];j(ne,!0);const xe=ne.mergedAttrs;null!==xe&&pl(F,U,xe);const qe=ne.classes;null!==qe&&Zf(F,U,qe);const Nt=ne.styles;return null!==Nt&&$f(F,U,Nt),64!=(64&ne.flags)&&Ah(b,g,U,ne),0===function Ca(){return Hi.lFrame.elementDepthCount}()&&ma(U,g),function Bs(){Hi.lFrame.elementDepthCount++}(),pr(ne)&&(Zd(b,g,ne),mc(b,ne,g)),null!==h&&Qc(g,ne),t}function e(){let r=jr();be()?Cn():(r=r.parent,j(r,!1));const o=r;!function rs(){Hi.lFrame.elementDepthCount--}();const l=lr();return l.firstCreatePass&&(Rr(l,r),ro(r)&&l.queries.elementEnd(r)),null!=o.classesWithoutHost&&function Ga(r){return 0!=(16&r.flags)}(o)&&nf(l,o,En(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ec(r){return 0!=(32&r.flags)}(o)&&nf(l,o,En(),o.stylesWithoutHost,!1),e}function n(r,o,l,h){return t(r,o,l,h),e(),n}function u(r,o,l){const h=En(),g=lr(),b=r+22,T=g.firstCreatePass?function s(r,o,l,h,g){const b=o.consts,T=is(b,h),F=Xc(o,r,8,"ng-container",T);return null!==T&&Wh(F,T,!0),Du(o,l,F,is(b,g)),null!==o.queries&&o.queries.elementStart(o,F),F}(b,g,h,o,l):g.data[b];j(T,!0);const F=h[b]=h[11].createComment("");return Ah(g,h,F,T),ma(F,h),pr(T)&&(Zd(g,h,T),mc(g,T,h)),null!=l&&Qc(h,T),u}function f(){let r=jr();const o=lr();return be()?Cn():(r=r.parent,j(r,!1)),o.firstCreatePass&&(Rr(o,r),ro(r)&&o.queries.elementEnd(r)),f}function v(){return En()}function E(r){return!!r&&"function"==typeof r.then}function C(r){return!!r&&"function"==typeof r.subscribe}const R=C;function N(r,o,l,h){const g=En(),b=lr(),T=jr();return J(b,g,g[11],T,r,o,0,h),N}function H(r,o){const l=jr(),h=En(),g=lr();return J(g,h,_p(ja(g.data),l,h),l,r,o),H}function J(r,o,l,h,g,b,T,F){const U=pr(h),xe=r.firstCreatePass&&gg(r),qe=o[8],Nt=gp(o);let un=!0;if(3&h.type||F){const xi=vo(h,o),Fi=F?F(xi):xi,Qi=Nt.length,ei=F?bo=>F(Br(bo[h.index])):h.index;let ar=null;if(!F&&U&&(ar=function K(r,o,l,h){const g=r.cleanup;if(null!=g)for(let b=0;b<g.length-1;b+=2){const T=g[b];if(T===l&&g[b+1]===h){const F=o[7],U=g[b+2];return F.length>U?F[U]:null}"string"==typeof T&&(b+=2)}return null}(r,o,g,h.index)),null!==ar)(ar.__ngLastListenerFn__||ar).__ngNextListenerFn__=b,ar.__ngLastListenerFn__=b,un=!1;else{b=De(h,o,qe,b,!1);const bo=l.listen(Fi,g,b);Nt.push(b,bo),xe&&xe.push(g,ei,Qi,Qi+1)}}else b=De(h,o,qe,b,!1);const Zn=h.outputs;let ci;if(un&&null!==Zn&&(ci=Zn[g])){const xi=ci.length;if(xi)for(let Fi=0;Fi<xi;Fi+=2){const Jo=o[ci[Fi]][ci[Fi+1]].subscribe(b),ah=Nt.length;Nt.push(b,Jo),xe&&xe.push(g,h.index,ah,-(ah+1))}}}function se(r,o,l,h){try{return!1!==l(h)}catch(g){return _g(r,g),!1}}function De(r,o,l,h,g){return function b(T){if(T===Function)return h;rd(2&r.flags?dr(r.index,o):o);let U=se(o,0,h,T),ne=b.__ngNextListenerFn__;for(;ne;)U=se(o,0,ne,T)&&U,ne=ne.__ngNextListenerFn__;return g&&!1===U&&(T.preventDefault(),T.returnValue=!1),U}}function We(r=1){return function $(r){return(Hi.lFrame.contextLView=function ye(r,o){for(;r>0;)o=o[15],r--;return o}(r,Hi.lFrame.contextLView))[8]}(r)}function _t(r,o){let l=null;const h=function Tm(r){const o=r.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(r);for(let g=0;g<o.length;g++){const b=o[g];if("*"!==b){if(null===h?kd(r,b,!0):Wu(h,b))return g}else l=g}return l}function Ze(r){const o=En()[16][6];if(!o.projection){const h=o.projection=bl(r?r.length:1,null),g=h.slice();let b=o.child;for(;null!==b;){const T=r?_t(b,r):0;null!==T&&(g[T]?g[T].projectionNext=b:h[T]=b,g[T]=b),b=b.next}}}function lt(r,o=0,l){const h=En(),g=lr(),b=Xc(g,22+r,16,null,l||null);null===b.projection&&(b.projection=o),Cn(),64!=(64&b.flags)&&function Od(r,o,l){Zu(o[11],0,o,l,_m(r,l,o),xm(l.parent||o[6],l,o))}(g,h,b)}function Ct(r,o,l){return mt(r,"",o,"",l),Ct}function mt(r,o,l,h,g){const b=En(),T=cl(b,o,l,h);return T!==gr&&el(lr(),On(),b,r,T,b[11],g,!1),mt}function Ri(r,o,l,h,g){const b=r[l+1],T=null===o;let F=h?Wl(b):pc(b),U=!1;for(;0!==F&&(!1===U||T);){const xe=r[F+1];ui(r[F],o)&&(U=!0,r[F+1]=h?Yc(xe):zd(xe)),F=h?Wl(xe):pc(xe)}U&&(r[l+1]=h?zd(b):Yc(b))}function ui(r,o){return null===r||null==o||(Array.isArray(r)?r[1]:r)===o||!(!Array.isArray(r)||"string"!=typeof o)&&tt(r,o)>=0}function Ro(r,o,l){return Lr(r,o,l,!1),Ro}function hs(r,o){return Lr(r,o,null,!0),hs}function Lr(r,o,l,h){const g=En(),b=lr(),T=qs(2);b.firstUpdatePass&&function Bo(r,o,l,h){const g=r.data;if(null===g[l+1]){const b=g[gt()],T=function qr(r,o){return o>=r.expandoStartIndex}(r,l);(function rf(r,o){return 0!=(r.flags&(o?16:32))})(b,h)&&null===o&&!T&&(o=!1),o=function ia(r,o,l,h){const g=ja(r);let b=h?o.residualClasses:o.residualStyles;if(null===g)0===(h?o.classBindings:o.styleBindings)&&(l=ul(l=fs(null,r,o,l,h),o.attrs,h),b=null);else{const T=o.directiveStylingLast;if(-1===T||r[T]!==g)if(l=fs(g,r,o,l,h),null===b){let U=function As(r,o,l){const h=l?o.classBindings:o.styleBindings;if(0!==pc(h))return r[Wl(h)]}(r,o,h);void 0!==U&&Array.isArray(U)&&(U=fs(null,r,o,U[1],h),U=ul(U,o.attrs,h),function Is(r,o,l,h){r[Wl(l?o.classBindings:o.styleBindings)]=h}(r,o,h,U))}else b=function ya(r,o,l){let h;const g=o.directiveEnd;for(let b=1+o.directiveStylingLast;b<g;b++)h=ul(h,r[b].hostAttrs,l);return ul(h,o.attrs,l)}(r,o,h)}return void 0!==b&&(h?o.residualClasses=b:o.residualStyles=b),l}(g,b,o,h),function xn(r,o,l,h,g,b){let T=b?o.classBindings:o.styleBindings,F=Wl(T),U=pc(T);r[h]=l;let xe,ne=!1;if(Array.isArray(l)){const qe=l;xe=qe[1],(null===xe||tt(qe,xe)>0)&&(ne=!0)}else xe=l;if(g)if(0!==U){const Nt=Wl(r[F+1]);r[h+1]=Lh(Nt,F),0!==Nt&&(r[Nt+1]=ka(r[Nt+1],h)),r[F+1]=function ip(r,o){return 131071&r|o<<17}(r[F+1],h)}else r[h+1]=Lh(F,0),0!==F&&(r[F+1]=ka(r[F+1],h)),F=h;else r[h+1]=Lh(U,0),0===F?F=h:r[U+1]=ka(r[U+1],h),U=h;ne&&(r[h+1]=zd(r[h+1])),Ri(r,xe,h,!0),Ri(r,xe,h,!1),function oi(r,o,l,h,g){const b=g?r.residualClasses:r.residualStyles;null!=b&&"string"==typeof o&&tt(b,o)>=0&&(l[h+1]=Yc(l[h+1]))}(o,xe,r,h,b),T=Lh(F,U),b?o.classBindings=T:o.styleBindings=T}(g,b,o,l,T,h)}}(b,r,T,h),o!==gr&&na(g,T,o)&&function Sp(r,o,l,h,g,b,T,F){if(!(3&o.type))return;const U=r.data,ne=U[F+1];ih(function Xu(r){return 1==(1&r)}(ne)?Ap(U,o,l,g,pc(ne),T):void 0)||(ih(b)||function Wm(r){return 2==(2&r)}(ne)&&(b=Ap(U,null,l,g,F,T)),function Rd(r,o,l,h,g){if(o)g?r.addClass(l,h):r.removeClass(l,h);else{let b=-1===h.indexOf("-")?void 0:uc.DashCase;null==g?r.removeStyle(l,h,b):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),b|=uc.Important),r.setStyle(l,h,g,b))}}(h,T,Go(gt(),l),g,b))}(b,b.data[gt()],g,g[11],r,g[T+1]=function Ip(r,o){return null==r||("string"==typeof o?r+=o:"object"==typeof r&&(r=Oe(Ml(r)))),r}(o,l),h,T)}function fs(r,o,l,h,g){let b=null;const T=l.directiveEnd;let F=l.directiveStylingLast;for(-1===F?F=l.directiveStart:F++;F<T&&(b=o[F],h=ul(h,b.hostAttrs,g),b!==r);)F++;return null!==r&&(l.directiveStylingLast=F),h}function ul(r,o,l){const h=l?1:2;let g=-1;if(null!==o)for(let b=0;b<o.length;b++){const T=o[b];"number"==typeof T?g=T:g===h&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Y(r,T,!!l||o[++b]))}return void 0===r?null:r}function Ap(r,o,l,h,g,b){const T=null===o;let F;for(;g>0;){const U=r[g],ne=Array.isArray(U),xe=ne?U[1]:U,qe=null===xe;let Nt=l[g+1];Nt===gr&&(Nt=qe?bn:void 0);let un=qe?me(Nt,h):xe===h?Nt:void 0;if(ne&&!ih(un)&&(un=me(U,h)),ih(un)&&(F=un,T))return F;const Zn=r[g+1];g=T?Wl(Zn):pc(Zn)}if(null!==o){let U=b?o.residualClasses:o.residualStyles;null!=U&&(F=me(U,h))}return F}function ih(r){return void 0!==r}function Ql(r,o=""){const l=En(),h=lr(),g=r+22,b=h.firstCreatePass?Xc(h,g,1,o,null):h.data[g],T=l[g]=function Dh(r,o){return r.createText(o)}(l[11],o);Ah(h,l,T,b),j(b,!1)}function sf(r){return yc("",r,""),sf}function yc(r,o,l){const h=En(),g=cl(h,r,o,l);return g!==gr&&Vc(h,gt(),g),yc}function rh(r,o,l,h,g){const b=En(),T=Pu(b,r,o,l,h,g);return T!==gr&&Vc(b,gt(),T),rh}function ty(r,o,l){const h=En();return na(h,Ns(),o)&&el(lr(),On(),h,r,o,h[11],l,!0),ty}function ny(r,o,l){const h=En();if(na(h,Ns(),o)){const b=lr(),T=On();el(b,T,h,r,o,_p(ja(b.data),T,h),l,!0)}return ny}const oh=void 0;var Lx=["en",[["a","p"],["AM","PM"],oh],[["AM","PM"],oh,oh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oh,"{1} 'at' {0}",oh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kx(r){const l=Math.floor(Math.abs(r)),h=r.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let cf={};function iy(r){const o=function Fx(r){return r.toLowerCase().replace(/_/g,"-")}(r);let l=g0(o);if(l)return l;const h=o.split("-")[0];if(l=g0(h),l)return l;if("en"===h)return Lx;throw new et(701,!1)}function m0(r){return iy(r)[rr.PluralCase]}function g0(r){return r in cf||(cf[r]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[r]),cf[r]}var rr=(()=>((rr=rr||{})[rr.LocaleId=0]="LocaleId",rr[rr.DayPeriodsFormat=1]="DayPeriodsFormat",rr[rr.DayPeriodsStandalone=2]="DayPeriodsStandalone",rr[rr.DaysFormat=3]="DaysFormat",rr[rr.DaysStandalone=4]="DaysStandalone",rr[rr.MonthsFormat=5]="MonthsFormat",rr[rr.MonthsStandalone=6]="MonthsStandalone",rr[rr.Eras=7]="Eras",rr[rr.FirstDayOfWeek=8]="FirstDayOfWeek",rr[rr.WeekendRange=9]="WeekendRange",rr[rr.DateFormat=10]="DateFormat",rr[rr.TimeFormat=11]="TimeFormat",rr[rr.DateTimeFormat=12]="DateTimeFormat",rr[rr.NumberSymbols=13]="NumberSymbols",rr[rr.NumberFormats=14]="NumberFormats",rr[rr.CurrencyCode=15]="CurrencyCode",rr[rr.CurrencySymbol=16]="CurrencySymbol",rr[rr.CurrencyName=17]="CurrencyName",rr[rr.Currencies=18]="Currencies",rr[rr.Directionality=19]="Directionality",rr[rr.PluralCase=20]="PluralCase",rr[rr.ExtraData=21]="ExtraData",rr))();const uf="en-US";let _0=uf;function sy(r,o,l,h,g){if(r=Et(r),Array.isArray(r))for(let b=0;b<r.length;b++)sy(r[b],o,l,h,g);else{const b=lr(),T=En();let F=Tl(r)?r:Et(r.provide),U=mh(r);const ne=jr(),xe=1048575&ne.providerIndexes,qe=ne.directiveStart,Nt=ne.providerIndexes>>20;if(Tl(r)||!r.multi){const un=new zo(U,g,Lc),Zn=ly(F,o,g?xe:xe+Nt,qe);-1===Zn?(Ir(Xi(ne,T),b,F),ay(b,r,o.length),o.push(F),ne.directiveStart++,ne.directiveEnd++,g&&(ne.providerIndexes+=1048576),l.push(un),T.push(un)):(l[Zn]=un,T[Zn]=un)}else{const un=ly(F,o,xe+Nt,qe),Zn=ly(F,o,xe,xe+Nt),ci=un>=0&&l[un],xi=Zn>=0&&l[Zn];if(g&&!xi||!g&&!ci){Ir(Xi(ne,T),b,F);const Fi=function Rb(r,o,l,h,g){const b=new zo(r,l,Lc);return b.multi=[],b.index=o,b.componentProviders=0,j0(b,g,h&&!l),b}(g?Ob:Pb,l.length,g,h,U);!g&&xi&&(l[Zn].providerFactory=Fi),ay(b,r,o.length,0),o.push(F),ne.directiveStart++,ne.directiveEnd++,g&&(ne.providerIndexes+=1048576),l.push(Fi),T.push(Fi)}else ay(b,r,un>-1?un:Zn,j0(l[g?Zn:un],U,!g&&h));!g&&h&&xi&&l[Zn].componentProviders++}}}function ay(r,o,l,h){const g=Tl(o),b=function Df(r){return!!r.useClass}(o);if(g||b){const U=(b?Et(o.useClass):o).prototype.ngOnDestroy;if(U){const ne=r.destroyHooks||(r.destroyHooks=[]);if(!g&&o.multi){const xe=ne.indexOf(l);-1===xe?ne.push(l,[h,U]):ne[xe+1].push(h,U)}else ne.push(l,U)}}}function j0(r,o,l){return l&&r.componentProviders++,r.multi.push(o)-1}function ly(r,o,l,h){for(let g=l;g<h;g++)if(o[g]===r)return g;return-1}function Pb(r,o,l,h){return cy(this.multi,[])}function Ob(r,o,l,h){const g=this.multi;let b;if(this.providerFactory){const T=this.providerFactory.componentProviders,F=zr(l,l[1],this.providerFactory.index,h);b=F.slice(0,T),cy(g,b);for(let U=T;U<F.length;U++)b.push(F[U])}else b=[],cy(g,b);return b}function cy(r,o){for(let l=0;l<r.length;l++)o.push((0,r[l])());return o}function H0(r,o=[]){return l=>{l.providersResolver=(h,g)=>function Ib(r,o,l){const h=lr();if(h.firstCreatePass){const g=Yr(r);sy(l,h.data,h.blueprint,g,!0),sy(o,h.data,h.blueprint,g,!1)}}(h,g?g(r):r,o)}}class df{}class G0{}function kb(r,o){return new $0(r,o??null)}class $0 extends df{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yp(this);const h=Lt(o);this._bootstrapComponents=Il(h.bootstrap),this._r3Injector=Bm(o,l,[{provide:df,useValue:this},{provide:lc,useValue:this.componentFactoryResolver}],Oe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class uy extends G0{constructor(o){super(),this.moduleType=o}create(o){return new $0(this.moduleType,o)}}class Lb extends df{constructor(o,l,h){super(),this.componentFactoryResolver=new yp(this),this.instance=null;const g=new ac([...o,{provide:df,useValue:this},{provide:lc,useValue:this.componentFactoryResolver}],l||_d(),h,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function dy(r,o,l=null){return new Lb(r,o,l).injector}let Fb=(()=>{class r{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=Hl(0,l.type),g=h.length>0?dy([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,g)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=Tt({token:r,providedIn:"environment",factory:()=>new r(Pe(fu))}),r})();function Z0(r){r.getStandaloneInjector=o=>o.get(Fb).getOrCreateStandaloneInjector(r)}function J0(r,o,l,h){return ev(En(),Nr(),r,o,l,h)}function Bp(r,o){const l=r[o];return l===gr?void 0:l}function ev(r,o,l,h,g,b){const T=o+l;return na(r,T,g)?_c(r,T+1,b?h.call(b,g):h(g)):Bp(r,T+1)}function ov(r,o){const l=lr();let h;const g=r+22;l.firstCreatePass?(h=function e1(r,o){if(o)for(let l=o.length-1;l>=0;l--){const h=o[l];if(r===h.name)return h}}(o,l.pipeRegistry),l.data[g]=h,h.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(g,h.onDestroy)):h=l.data[g];const b=h.factory||(h.factory=gs(h.type)),T=on(Lc);try{const F=Re(!1),U=b();return Re(F),function Eg(r,o,l,h){l>=r.data.length&&(r.data[l]=null,r.blueprint[l]=null),o[l]=h}(l,En(),g,U),U}finally{on(T)}}function sv(r,o,l){const h=r+22,g=En(),b=ca(g,h);return Np(g,h)?ev(g,Nr(),o,b.transform,l,b):b.transform(l)}function av(r,o,l,h){const g=r+22,b=En(),T=ca(b,g);return Np(b,g)?function tv(r,o,l,h,g,b,T){const F=o+l;return ru(r,F,g,b)?_c(r,F+2,T?h.call(T,g,b):h(g,b)):Bp(r,F+2)}(b,Nr(),o,T.transform,l,h,T):T.transform(l,h)}function Np(r,o){return r[1].data[o].pure}function fy(r){return o=>{setTimeout(r,void 0,o)}}const lu=class o1 extends w.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,h){let g=o,b=l||(()=>null),T=h;if(o&&"object"==typeof o){const U=o;g=U.next?.bind(U),b=U.error?.bind(U),T=U.complete?.bind(U)}this.__isAsync&&(b=fy(b),g&&(g=fy(g)),T&&(T=fy(T)));const F=super.subscribe({next:g,error:b,complete:T});return o instanceof _.w0&&o.add(F),F}};function s1(){return this._results[_a()]()}class Og{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=_a(),h=Og.prototype;h[l]||(h[l]=s1)}get changes(){return this._changes||(this._changes=new lu)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const h=this;h.dirty=!1;const g=us(o);(this._changesDetected=!function xl(r,o,l){if(r.length!==o.length)return!1;for(let h=0;h<r.length;h++){let g=r[h],b=o[h];if(l&&(g=l(g),b=l(b)),b!==g)return!1}return!0}(h._results,g,l))&&(h._results=g,h.length=g.length,h.last=g[this.length-1],h.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zp=(()=>{class r{}return r.__NG_ELEMENT_ID__=c1,r})();const a1=zp,l1=class extends a1{constructor(o,l,h){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(o,l){const h=this._declarationTContainer.tViews,g=Cu(this._declarationLView,h,o,16,null,h.declTNode,null,null,null,null,l||null);g[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(g[19]=T.createEmbeddedView(h)),Uh(h,g,o),new tu(g)}};function c1(){return Rg(jr(),En())}function Rg(r,o){return 4&r.type?new l1(o,r,mu(r,o)):null}let kg=(()=>{class r{}return r.__NG_ELEMENT_ID__=u1,r})();function u1(){return uv(jr(),En())}const d1=kg,lv=class extends d1{constructor(o,l,h){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=h}get element(){return mu(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Gi(this._hostTNode,this._hostLView);if(X(o)){const l=G(o,this._hostLView),h=M(o);return new Xo(l[1].data[h+8],l)}return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=cv(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,h){let g,b;"number"==typeof h?g=h:null!=h&&(g=h.index,b=h.injector);const T=o.createEmbeddedView(l||{},b);return this.insert(T,g),T}createComponent(o,l,h,g,b){const T=o&&!function ic(r){return"function"==typeof r}(o);let F;if(T)F=l;else{const qe=l||{};F=qe.index,h=qe.injector,g=qe.projectableNodes,b=qe.environmentInjector||qe.ngModuleRef}const U=T?o:new Xd(Me(o)),ne=h||this.parentInjector;if(!b&&null==U.ngModule){const Nt=(T?ne:this.parentInjector).get(fu,null);Nt&&(b=Nt)}const xe=U.create(ne,g,void 0,b);return this.insert(xe.hostView,F),xe}insert(o,l){const h=o._lView,g=h[1];if(function Ws(r){return vr(r[3])}(h)){const xe=this.indexOf(o);if(-1!==xe)this.detach(xe);else{const qe=h[3],Nt=new lv(qe,qe[6],qe[3]);Nt.detach(Nt.indexOf(o))}}const b=this._adjustIndex(l),T=this._lContainer;!function y_(r,o,l,h){const g=10+h,b=l.length;h>0&&(l[g-1][4]=o),h<b-10?(o[4]=l[g],cu(l,10+h,o)):(l.push(o),o[4]=null),o[3]=l;const T=o[17];null!==T&&l!==T&&function jf(r,o){const l=r[9];o[16]!==o[3][3][16]&&(r[2]=!0),null===l?r[9]=[o]:l.push(o)}(T,o);const F=o[19];null!==F&&F.insertView(r),o[2]|=64}(g,h,T,b);const F=$u(b,T),U=h[11],ne=Rc(U,T[7]);return null!==ne&&function __(r,o,l,h,g,b){h[0]=g,h[6]=o,Pd(r,h,l,1,g,b)}(g,T[6],U,h,ne,F),o.attachToViewContainerRef(),cu(py(T),b,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=cv(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),h=Sd(this._lContainer,l);h&&(rc(py(this._lContainer),l),Th(h[1],h))}detach(o){const l=this._adjustIndex(o,-1),h=Sd(this._lContainer,l);return h&&null!=rc(py(this._lContainer),l)?new tu(h):null}_adjustIndex(o,l=0){return o??this.length+l}};function cv(r){return r[8]}function py(r){return r[8]||(r[8]=[])}function uv(r,o){let l;const h=o[r.index];if(vr(h))l=h;else{let g;if(8&r.type)g=Br(h);else{const b=o[11];g=b.createComment("");const T=vo(r,o);xu(b,Rc(b,T),g,function E_(r,o){return r.nextSibling(o)}(b,T),!1)}o[r.index]=l=nd(h,o,g,r),Uc(o,l)}return new lv(l,r,o)}class my{constructor(o){this.queryList=o,this.matches=null}clone(){return new my(this.queryList)}setDirty(){this.queryList.setDirty()}}class gy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const h=null!==o.contentQueries?o.contentQueries[0]:l.length,g=[];for(let b=0;b<h;b++){const T=l.getByIndex(b);g.push(this.queries[T.indexInDeclarationView].clone())}return new gy(g)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==vv(o,l).matches&&this.queries[l].setDirty()}}class dv{constructor(o,l,h=null){this.predicate=o,this.flags=l,this.read=h}}class _y{constructor(o=[]){this.queries=o}elementStart(o,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let h=0;h<this.length;h++){const g=null!==l?l.length:0,b=this.getByIndex(h).embeddedTView(o,g);b&&(b.indexInDeclarationView=h,null!==l?l.push(b):l=[b])}return null!==l?new _y(l):null}template(o,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class yy{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new yy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=o.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let g=0;g<h.length;g++){const b=h[g];this.matchTNodeWithReadOption(o,l,p1(l,b)),this.matchTNodeWithReadOption(o,l,Fo(l,o,b,!1,!1))}else h===zp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Fo(l,o,h,!1,!1))}matchTNodeWithReadOption(o,l,h){if(null!==h){const g=this.metadata.read;if(null!==g)if(g===zu||g===kg||g===zp&&4&l.type)this.addMatch(l.index,-2);else{const b=Fo(l,o,g,!1,!1);null!==b&&this.addMatch(l.index,b)}else this.addMatch(l.index,h)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function p1(r,o){const l=r.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===o)return l[h+1];return null}function g1(r,o,l,h){return-1===l?function m1(r,o){return 11&r.type?mu(r,o):4&r.type?Rg(r,o):null}(o,r):-2===l?function _1(r,o,l){return l===zu?mu(o,r):l===zp?Rg(o,r):l===kg?uv(o,r):void 0}(r,o,h):zr(r,r[1],l,o)}function hv(r,o,l,h){const g=o[19].queries[h];if(null===g.matches){const b=r.data,T=l.matches,F=[];for(let U=0;U<T.length;U+=2){const ne=T[U];F.push(ne<0?null:g1(o,b[ne],T[U+1],l.metadata.read))}g.matches=F}return g.matches}function vy(r,o,l,h){const g=r.queries.getByIndex(l),b=g.matches;if(null!==b){const T=hv(r,o,g,l);for(let F=0;F<b.length;F+=2){const U=b[F];if(U>0)h.push(T[F/2]);else{const ne=b[F+1],xe=o[-U];for(let qe=10;qe<xe.length;qe++){const Nt=xe[qe];Nt[17]===Nt[3]&&vy(Nt[1],Nt,ne,h)}if(null!==xe[9]){const qe=xe[9];for(let Nt=0;Nt<qe.length;Nt++){const un=qe[Nt];vy(un[1],un,ne,h)}}}}}return h}function fv(r){const o=En(),l=lr(),h=Jl();fl(h+1);const g=vv(l,h);if(r.dirty&&function mr(r){return 4==(4&r[2])}(o)===(2==(2&g.metadata.flags))){if(null===g.matches)r.reset([]);else{const b=g.crossesNgTemplate?vy(l,o,h,[]):hv(l,o,g,h);r.reset(b,i_),r.notifyOnChanges()}return!0}return!1}function pv(r,o,l){const h=lr();h.firstCreatePass&&(yv(h,new dv(r,o,l),-1),2==(2&o)&&(h.staticViewQueries=!0)),_v(h,En(),o)}function mv(r,o,l,h){const g=lr();if(g.firstCreatePass){const b=jr();yv(g,new dv(o,l,h),b.index),function v1(r,o){const l=r.contentQueries||(r.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(r.queries.length-1,o)}(g,r),2==(2&l)&&(g.staticContentQueries=!0)}_v(g,En(),l)}function gv(){return function y1(r,o){return r[19].queries[o].queryList}(En(),Jl())}function _v(r,o,l){const h=new Og(4==(4&l));lg(r,o,h,h.destroy),null===o[19]&&(o[19]=new gy),o[19].queries.push(new my(h))}function yv(r,o,l){null===r.queries&&(r.queries=new _y),r.queries.track(new yy(o,l))}function vv(r,o){return r.queries.getByIndex(o)}function xv(r,o){return Rg(r,o)}function Fg(...r){}const zv=new ir("Application Initializer");let Bg=(()=>{class r{constructor(l){this.appInits=l,this.resolve=Fg,this.reject=Fg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,g)=>{this.resolve=h,this.reject=g})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const b=this.appInits[g]();if(E(b))l.push(b);else if(R(b)){const T=new Promise((F,U)=>{b.subscribe({complete:F,error:U})});l.push(T)}}Promise.all(l).then(()=>{h()}).catch(g=>{this.reject(g)}),0===l.length&&h(),this.initialized=!0}}return r.\u0275fac=function(l){return new(l||r)(Pe(zv,8))},r.\u0275prov=Tt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Uv=new ir("AppId",{providedIn:"root",factory:function Vv(){return`${Cy()}${Cy()}${Cy()}`}});function Cy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jv=new ir("Platform Initializer"),z1=new ir("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hv=new ir("appBootstrapListener"),U1=new ir("AnimationModuleType");let V1=(()=>{class r{log(l){console.log(l)}warn(l){console.warn(l)}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=Tt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Ng=new ir("LocaleId",{providedIn:"root",factory:()=>Be(Ng,ae.Optional|ae.SkipSelf)||function j1(){return typeof $localize<"u"&&$localize.locale||uf}()}),H1=new ir("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class G1{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let $1=(()=>{class r{compileModuleSync(l){return new uy(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),b=Il(Lt(l).declarations).reduce((T,F)=>{const U=Me(F);return U&&T.push(new Xd(U)),T},[]);return new G1(h,b)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=Tt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const q1=(()=>Promise.resolve(0))();function My(r){typeof Zone>"u"?q1.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class vc{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lu(!1),this.onMicrotaskEmpty=new lu(!1),this.onStable=new lu(!1),this.onError=new lu(!1),typeof Zone>"u")throw new et(908,!1);Zone.assertZonePatched();const g=this;if(g._nesting=0,g._outer=g._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const b=Zone.AsyncStackTaggingZoneSpec;g._inner=g._inner.fork(new b("Angular"))}Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!h&&l,g.shouldCoalesceRunChangeDetection=h,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function Y1(){let r=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if(typeof Zone<"u"&&r&&o){const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l);const h=o[Zone.__symbol__("OriginalDelegate")];h&&(o=h)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Q1(r){const o=()=>{!function X1(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ht,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Ty(r),r.isCheckStableRunning=!0,Dy(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Ty(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,g,b,T,F)=>{try{return Zv(r),l.invokeTask(g,b,T,F)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||r.shouldCoalesceRunChangeDetection)&&o(),Wv(r)}},onInvoke:(l,h,g,b,T,F,U)=>{try{return Zv(r),l.invoke(g,b,T,F,U)}finally{r.shouldCoalesceRunChangeDetection&&o(),Wv(r)}},onHasTask:(l,h,g,b)=>{l.hasTask(g,b),h===g&&("microTask"==b.change?(r._hasPendingMicrotasks=b.microTask,Ty(r),Dy(r)):"macroTask"==b.change&&(r.hasPendingMacrotasks=b.macroTask))},onHandleError:(l,h,g,b)=>(l.handleError(g,b),r.runOutsideAngular(()=>r.onError.emit(b)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vc.isInAngularZone())throw new et(909,!1)}static assertNotInAngularZone(){if(vc.isInAngularZone())throw new et(909,!1)}run(o,l,h){return this._inner.run(o,l,h)}runTask(o,l,h,g){const b=this._inner,T=b.scheduleEventTask("NgZoneEvent: "+g,o,K1,Fg,Fg);try{return b.runTask(T,l,h)}finally{b.cancelTask(T)}}runGuarded(o,l,h){return this._inner.runGuarded(o,l,h)}runOutsideAngular(o){return this._outer.run(o)}}const K1={};function Dy(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Ty(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Zv(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Wv(r){r._nesting--,Dy(r)}class J1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lu,this.onMicrotaskEmpty=new lu,this.onStable=new lu,this.onError=new lu}run(o,l,h){return o.apply(l,h)}runGuarded(o,l,h){return o.apply(l,h)}runOutsideAngular(o){return o()}runTask(o,l,h,g){return o.apply(l,h)}}const qv=new ir(""),Yv=new ir("");let Sy,ew=(()=>{class r{constructor(l,h,g){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sy||(function tw(r){Sy=r}(g),g.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vc.assertNotInAngularZone(),My(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())My(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,g){let b=-1;h&&h>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==b),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:b,updateCb:g})}whenStable(l,h,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,g){return[]}}return r.\u0275fac=function(l){return new(l||r)(Pe(vc),Pe(Kv),Pe(Yv))},r.\u0275prov=Tt({token:r,factory:r.\u0275fac}),r})(),Kv=(()=>{class r{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return Sy?.findTestabilityInTree(this,l,h)??null}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=Tt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),dd=null;const Xv=new ir("AllowMultipleToken"),Ay=new ir("PlatformDestroyListeners");class rw{constructor(o,l){this.name=o,this.token=l}}function Jv(r,o,l=[]){const h=`Platform: ${o}`,g=new ir(h);return(b=[])=>{let T=Iy();if(!T||T.injector.get(Xv,!1)){const F=[...l,...b,{provide:g,useValue:!0}];r?r(F):function ow(r){if(dd&&!dd.get(Xv,!1))throw new et(400,!1);dd=r;const o=r.get(tx);(function Qv(r){const o=r.get(jv,null);o&&o.forEach(l=>l())})(r)}(function ex(r=[],o){return bu.create({name:o,providers:[{provide:hh,useValue:"platform"},{provide:Ay,useValue:new Set([()=>dd=null])},...r]})}(F,h))}return function aw(r){const o=Iy();if(!o)throw new et(401,!1);return o}()}}function Iy(){return dd?.get(tx)??null}let tx=(()=>{class r{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const g=function ix(r,o){let l;return l="noop"===r?new J1:("zone.js"===r?void 0:r)||new vc(o),l}(h?.ngZone,function nx(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(h)),b=[{provide:vc,useValue:g}];return g.run(()=>{const T=bu.create({providers:b,parent:this.injector,name:l.moduleType.name}),F=l.create(T),U=F.injector.get(yu,null);if(!U)throw new et(402,!1);return g.runOutsideAngular(()=>{const ne=g.onError.subscribe({next:xe=>{U.handleError(xe)}});F.onDestroy(()=>{Ug(this._modules,F),ne.unsubscribe()})}),function rx(r,o,l){try{const h=l();return E(h)?h.catch(g=>{throw o.runOutsideAngular(()=>r.handleError(g)),g}):h}catch(h){throw o.runOutsideAngular(()=>r.handleError(h)),h}}(U,g,()=>{const ne=F.injector.get(Bg);return ne.runInitializers(),ne.donePromise.then(()=>(function y0(r){wi(r,"Expected localeId to be defined"),"string"==typeof r&&(_0=r.toLowerCase().replace(/_/g,"-"))}(F.injector.get(Ng,uf)||uf),this._moduleDoBootstrap(F),F))})})}bootstrapModule(l,h=[]){const g=ox({},h);return function nw(r,o,l){const h=new uy(l);return Promise.resolve(h)}(0,0,l).then(b=>this.bootstrapModuleFactory(b,g))}_moduleDoBootstrap(l){const h=l.injector.get(zg);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>h.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new et(403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new et(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(Ay,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(l){return new(l||r)(Pe(bu))},r.\u0275prov=Tt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function ox(r,o){return Array.isArray(o)?o.reduce(ox,r):{...r,...o}}let zg=(()=>{class r{constructor(l,h,g){this._zone=l,this._injector=h,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new de.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),T=new de.y(F=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{vc.assertNotInAngularZone(),My(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{vc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{U.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,a.T)(b,T.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const g=l instanceof If;if(!this._injector.get(Bg).done)throw!g&&Ft(l),new et(405,false);let T;T=g?l:this._injector.get(lc).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const F=function iw(r){return r.isBoundToModule}(T)?void 0:this._injector.get(df),ne=T.create(bu.NULL,[],h||T.selector,F),xe=ne.location.nativeElement,qe=ne.injector.get(qv,null);return qe?.registerApplication(xe),ne.onDestroy(()=>{this.detachView(ne.hostView),Ug(this.components,ne),qe?.unregisterApplication(xe)}),this._loadComponent(ne),ne}tick(){if(this._runningTick)throw new et(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;Ug(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Hv,[]).concat(this._bootstrapListeners).forEach(g=>g(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Ug(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new et(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(l){return new(l||r)(Pe(vc),Pe(fu),Pe(yu))},r.\u0275prov=Tt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Ug(r,o){const l=r.indexOf(o);l>-1&&r.splice(l,1)}let ax=!0,lx=!1;function cw(){return lx=!0,ax}function uw(){if(lx)throw new Error("Cannot enable prod mode after platform setup.");ax=!1}let dw=(()=>{class r{}return r.__NG_ELEMENT_ID__=hw,r})();function hw(r){return function fw(r,o,l){if(Ur(r)&&!l){const h=dr(r.index,o);return new tu(h,h)}return 47&r.type?new tu(o[16],o):null}(jr(),En(),16==(16&r))}class hx{constructor(){}supports(o){return iu(o)}create(o){return new vw(o)}}const yw=(r,o)=>o;class vw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||yw}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,h=this._removalsHead,g=0,b=null;for(;l||h;){const T=!h||l&&l.currentIndex<px(h,g,b)?l:h,F=px(T,g,b),U=T.currentIndex;if(T===h)g--,h=h._nextRemoved;else if(l=l._next,null==T.previousIndex)g++;else{b||(b=[]);const ne=F-g,xe=U-g;if(ne!=xe){for(let Nt=0;Nt<ne;Nt++){const un=Nt<b.length?b[Nt]:b[Nt]=0,Zn=un+Nt;xe<=Zn&&Zn<ne&&(b[Nt]=un+1)}b[T.previousIndex]=xe-ne}}F!==U&&o(T,F,U)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!iu(o))throw new et(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let g,b,T,l=this._itHead,h=!1;if(Array.isArray(o)){this.length=o.length;for(let F=0;F<this.length;F++)b=o[F],T=this._trackByFn(F,b),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,b,T,F)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,T,F),h=!0),l=l._next}else g=0,function bg(r,o){if(Array.isArray(r))for(let l=0;l<r.length;l++)o(r[l]);else{const l=r[_a()]();let h;for(;!(h=l.next()).done;)o(h.value)}}(o,F=>{T=this._trackByFn(g,F),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,F,T,g)),Object.is(l.item,F)||this._addIdentityChange(l,F)):(l=this._mismatch(l,F,T,g),h=!0),l=l._next,g++}),this.length=g;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,h,g){let b;return null===o?b=this._itTail:(b=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,b,g)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(h,g))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,b,g)):o=this._addAfter(new xw(l,h),b,g),o}_verifyReinsertion(o,l,h,g){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==b?o=this._reinsertAfter(b,o._prev,g):o.currentIndex!=g&&(o.currentIndex=g,this._addToMoves(o,g)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const g=o._prevRemoved,b=o._nextRemoved;return null===g?this._removalsHead=b:g._nextRemoved=b,null===b?this._removalsTail=g:b._prevRemoved=g,this._insertAfter(o,l,h),this._addToMoves(o,h),o}_moveAfter(o,l,h){return this._unlink(o),this._insertAfter(o,l,h),this._addToMoves(o,h),o}_addAfter(o,l,h){return this._insertAfter(o,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,h){const g=null===l?this._itHead:l._next;return o._next=g,o._prev=l,null===g?this._itTail=o:g._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new fx),this._linkedRecords.put(o),o.currentIndex=h,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,h=o._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fx),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class xw{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,o))return h;return null}remove(o){const l=o._prevDup,h=o._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class fx{constructor(){this.map=new Map}put(o){const l=o.trackById;let h=this.map.get(l);h||(h=new bw,this.map.set(l,h)),h.add(o)}get(o,l){const g=this.map.get(o);return g?g.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function px(r,o,l){const h=r.previousIndex;if(null===h)return h;let g=0;return l&&h<l.length&&(g=l[h]),h+o+g}class mx{constructor(){}supports(o){return o instanceof Map||Qh(o)}create(){return new ww}}class ww{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Qh(o)))throw new et(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(h,g)=>{if(l&&l.key===g)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const b=this._getOrCreateRecordForKey(g,h);l=this._insertBeforeOrAppend(l,b)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const h=o._prev;return l._next=o,l._prev=h,o._prev=l,h&&(h._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const g=this._records.get(o);this._maybeAddToChanges(g,l);const b=g._prev,T=g._next;return b&&(b._next=T),T&&(T._prev=b),g._next=null,g._prev=null,g}const h=new Ew(o);return this._records.set(o,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(h=>l(o[h],h))}}class Ew{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gx(){return new Ly([new hx])}let Ly=(()=>{class r{constructor(l){this.factories=l}static create(l,h){if(null!=h){const g=h.factories.slice();l=l.concat(g)}return new r(l)}static extend(l){return{provide:r,useFactory:h=>r.create(l,h||gx()),deps:[[r,new cn,new vt]]}}find(l){const h=this.factories.find(g=>g.supports(l));if(null!=h)return h;throw new et(901,!1)}}return r.\u0275prov=Tt({token:r,providedIn:"root",factory:gx}),r})();function _x(){return new Fy([new mx])}let Fy=(()=>{class r{constructor(l){this.factories=l}static create(l,h){if(h){const g=h.factories.slice();l=l.concat(g)}return new r(l)}static extend(l){return{provide:r,useFactory:h=>r.create(l,h||_x()),deps:[[r,new cn,new vt]]}}find(l){const h=this.factories.find(g=>g.supports(l));if(h)return h;throw new et(901,!1)}}return r.\u0275prov=Tt({token:r,providedIn:"root",factory:_x}),r})();const Dw=Jv(null,"core",[]);let Tw=(()=>{class r{constructor(l){}}return r.\u0275fac=function(l){return new(l||r)(Pe(zg))},r.\u0275mod=wn({type:r}),r.\u0275inj=Fe({}),r})();function Sw(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},4006:(ti,Ut,B)=>{"use strict";B.d(Ut,{EJ:()=>Ls,F:()=>fn,Fj:()=>wt,JJ:()=>ae,JL:()=>$e,JU:()=>Oe,Kr:()=>Kr,On:()=>es,UX:()=>rs,Wl:()=>rt,YN:()=>Ho,_:()=>Fr,_Y:()=>Ps,a5:()=>tn,kI:()=>Ye,qu:()=>lr,sg:()=>no,u:()=>jo,u5:()=>Bs});var w=B(4650),_=B(6895),de=B(2076),a=B(4128),he=B(4004);let st=(()=>{class Q{constructor(j,be){this._renderer=j,this._elementRef=be,this.onChange=Cn=>{},this.onTouched=()=>{}}setProperty(j,be){this._renderer.setProperty(this._elementRef.nativeElement,j,be)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(w.Qsj),w.Y36(w.SBq))},Q.\u0275dir=w.lG2({type:Q}),Q})(),nt=(()=>{class Q extends st{}return Q.\u0275fac=function(){let q;return function(be){return(q||(q=w.n5z(Q)))(be||Q)}}(),Q.\u0275dir=w.lG2({type:Q,features:[w.qOj]}),Q})();const Oe=new w.OlP("NgValueAccessor"),ke={provide:Oe,useExisting:(0,w.Gpc)(()=>rt),multi:!0};let rt=(()=>{class Q extends nt{writeValue(j){this.setProperty("checked",j)}}return Q.\u0275fac=function(){let q;return function(be){return(q||(q=w.n5z(Q)))(be||Q)}}(),Q.\u0275dir=w.lG2({type:Q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(j,be){1&j&&w.NdJ("change",function(bi){return be.onChange(bi.target.checked)})("blur",function(){return be.onTouched()})},features:[w._Bn([ke]),w.qOj]}),Q})();const pt={provide:Oe,useExisting:(0,w.Gpc)(()=>wt),multi:!0},dt=new w.OlP("CompositionEventMode");let wt=(()=>{class Q extends st{constructor(j,be,Cn){super(j,be),this._compositionMode=Cn,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Et(){const Q=(0,_.q)()?(0,_.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(j){this.setProperty("value",j??"")}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(dt,8))},Q.\u0275dir=w.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,be){1&j&&w.NdJ("input",function(bi){return be._handleInput(bi.target.value)})("blur",function(){return be.onTouched()})("compositionstart",function(){return be._compositionStart()})("compositionend",function(bi){return be._compositionEnd(bi.target.value)})},features:[w._Bn([pt]),w.qOj]}),Q})();function Zt(Q){return null==Q||("string"==typeof Q||Array.isArray(Q))&&0===Q.length}function kt(Q){return null!=Q&&"number"==typeof Q.length}const Qe=new w.OlP("NgValidators"),Hn=new w.OlP("NgAsyncValidators"),Fn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ye{static min(q){return function Ce(Q){return q=>{if(Zt(q.value)||Zt(Q))return null;const j=parseFloat(q.value);return!isNaN(j)&&j<Q?{min:{min:Q,actual:q.value}}:null}}(q)}static max(q){return function we(Q){return q=>{if(Zt(q.value)||Zt(Q))return null;const j=parseFloat(q.value);return!isNaN(j)&&j>Q?{max:{max:Q,actual:q.value}}:null}}(q)}static required(q){return function At(Q){return Zt(Q.value)?{required:!0}:null}(q)}static requiredTrue(q){return function zt(Q){return!0===Q.value?null:{required:!0}}(q)}static email(q){return function Jt(Q){return Zt(Q.value)||Fn.test(Q.value)?null:{email:!0}}(q)}static minLength(q){return function Mn(Q){return q=>Zt(q.value)||!kt(q.value)?null:q.value.length<Q?{minlength:{requiredLength:Q,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function Ke(Q){return q=>kt(q.value)&&q.value.length>Q?{maxlength:{requiredLength:Q,actualLength:q.value.length}}:null}(q)}static pattern(q){return function Ne(Q){if(!Q)return He;let q,j;return"string"==typeof Q?(j="","^"!==Q.charAt(0)&&(j+="^"),j+=Q,"$"!==Q.charAt(Q.length-1)&&(j+="$"),q=new RegExp(j)):(j=Q.toString(),q=Q),be=>{if(Zt(be.value))return null;const Cn=be.value;return q.test(Cn)?null:{pattern:{requiredPattern:j,actualValue:Cn}}}}(q)}static nullValidator(q){return null}static compose(q){return Nn(q)}static composeAsync(q){return Jn(q)}}function He(Q){return null}function yt(Q){return null!=Q}function Tn(Q){return(0,w.QGY)(Q)?(0,de.D)(Q):Q}function Xt(Q){let q={};return Q.forEach(j=>{q=null!=j?{...q,...j}:q}),0===Object.keys(q).length?null:q}function ii(Q,q){return q.map(j=>j(Q))}function wi(Q){return Q.map(q=>function vi(Q){return!Q.validate}(q)?q:j=>q.validate(j))}function Nn(Q){if(!Q)return null;const q=Q.filter(yt);return 0==q.length?null:function(j){return Xt(ii(j,q))}}function Li(Q){return null!=Q?Nn(wi(Q)):null}function Jn(Q){if(!Q)return null;const q=Q.filter(yt);return 0==q.length?null:function(j){const be=ii(j,q).map(Tn);return(0,a.D)(be).pipe((0,he.U)(Xt))}}function mn(Q){return null!=Q?Jn(wi(Q)):null}function Tt(Q,q){return null===Q?[q]:Array.isArray(Q)?[...Q,q]:[Q,q]}function Ge(Q){return Q._rawValidators}function Fe(Q){return Q._rawAsyncValidators}function ht(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Xe(Q,q){return Array.isArray(Q)?Q.includes(q):Q===q}function ce(Q,q){const j=ht(q);return ht(Q).forEach(Cn=>{Xe(j,Cn)||j.push(Cn)}),j}function ot(Q,q){return ht(q).filter(j=>!Xe(Q,j))}class Se{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=Li(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=mn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q){this.control&&this.control.reset(q)}hasError(q,j){return!!this.control&&this.control.hasError(q,j)}getError(q,j){return this.control?this.control.getError(q,j):null}}class St extends Se{get formDirective(){return null}get path(){return null}}class tn extends Se{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class li{constructor(q){this._cd=q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ae=(()=>{class Q extends li{constructor(j){super(j)}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(tn,2))},Q.\u0275dir=w.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,be){2&j&&w.ekj("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)},features:[w.qOj]}),Q})(),$e=(()=>{class Q extends li{constructor(j){super(j)}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(St,10))},Q.\u0275dir=w.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(j,be){2&j&&w.ekj("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)("ng-submitted",be.isSubmitted)},features:[w.qOj]}),Q})();const ct="VALID",nn="INVALID",_i="PENDING",Qt="DISABLED";function xt(Q){return(ri(Q)?Q.validators:Q)||null}function ft(Q){return Array.isArray(Q)?Li(Q):Q||null}function Yt(Q,q){return(ri(q)?q.asyncValidators:Q)||null}function wn(Q){return Array.isArray(Q)?mn(Q):Q||null}function ri(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}function Ee(Q,q,j){const be=Q.controls;if(!(q?Object.keys(be):be).length)throw new w.vHH(1e3,"");if(!be[j])throw new w.vHH(1001,"")}function ee(Q,q,j){Q._forEachChild((be,Cn)=>{if(void 0===j[Cn])throw new w.vHH(1002,"")})}class oe{constructor(q,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=q,this._rawAsyncValidators=j,this._composedValidatorFn=ft(this._rawValidators),this._composedAsyncValidatorFn=wn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===ct}get invalid(){return this.status===nn}get pending(){return this.status==_i}get disabled(){return this.status===Qt}get enabled(){return this.status!==Qt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._rawValidators=q,this._composedValidatorFn=ft(q)}setAsyncValidators(q){this._rawAsyncValidators=q,this._composedAsyncValidatorFn=wn(q)}addValidators(q){this.setValidators(ce(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(ce(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(ot(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(ot(q,this._rawAsyncValidators))}hasValidator(q){return Xe(this._rawValidators,q)}hasAsyncValidator(q){return Xe(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=_i,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const j=this._parentMarkedDirty(q.onlySelf);this.status=Qt,this.errors=null,this._forEachChild(be=>{be.disable({...q,onlySelf:!0})}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...q,skipPristineCheck:j}),this._onDisabledChange.forEach(be=>be(!0))}enable(q={}){const j=this._parentMarkedDirty(q.onlySelf);this.status=ct,this._forEachChild(be=>{be.enable({...q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors({...q,skipPristineCheck:j}),this._onDisabledChange.forEach(be=>be(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}getRawValue(){return this.value}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ct||this.status===_i)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qt:ct}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=_i,this._hasOwnPendingAsyncValidator=!0;const j=Tn(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(be=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(be,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,j={}){this.errors=q,this._updateControlsErrors(!1!==j.emitEvent)}get(q){let j=q;return null==j||(Array.isArray(j)||(j=j.split(".")),0===j.length)?null:j.reduce((be,Cn)=>be&&be._find(Cn),this)}getError(q,j){const be=j?this.get(j):this;return be&&be.errors?be.errors[q]:null}hasError(q,j){return!!this.getError(q,j)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?Qt:this.errors?nn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_i)?_i:this._anyControlsHaveStatus(nn)?nn:ct}_anyControlsHaveStatus(q){return this._anyControls(j=>j.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){ri(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(q){return null}}class Me extends oe{constructor(q,j,be){super(xt(j),Yt(be,j)),this.controls=q,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,j){return this.controls[q]?this.controls[q]:(this.controls[q]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(q,j,be={}){this.registerControl(q,j),this.updateValueAndValidity({emitEvent:be.emitEvent}),this._onCollectionChange()}removeControl(q,j={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(q,j,be={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],j&&this.registerControl(q,j),this.updateValueAndValidity({emitEvent:be.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,j={}){ee(this,0,q),Object.keys(q).forEach(be=>{Ee(this,!0,be),this.controls[be].setValue(q[be],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(q,j={}){null!=q&&(Object.keys(q).forEach(be=>{const Cn=this.controls[be];Cn&&Cn.patchValue(q[be],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(q={},j={}){this._forEachChild((be,Cn)=>{be.reset(q[Cn],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(q,j,be)=>(q[be]=j.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(j,be)=>!!be._syncPendingControls()||j);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach(j=>{const be=this.controls[j];be&&q(be,j)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const[j,be]of Object.entries(this.controls))if(this.contains(j)&&q(be))return!0;return!1}_reduceValue(){return this._reduceChildren({},(j,be,Cn)=>((be.enabled||this.disabled)&&(j[Cn]=be.value),j))}_reduceChildren(q,j){let be=q;return this._forEachChild((Cn,bi)=>{be=j(be,Cn,bi)}),be}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(q){return this.controls.hasOwnProperty(q)?this.controls[q]:null}}class Ft extends Me{}function Mt(Q,q){return[...q.path,Q]}function le(Q,q){Wt(Q,q),q.valueAccessor.writeValue(Q.value),Q.disabled&&q.valueAccessor.setDisabledState?.(!0),function jn(Q,q){q.valueAccessor.registerOnChange(j=>{Q._pendingValue=j,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&Ti(Q,q)})}(Q,q),function Pi(Q,q){const j=(be,Cn)=>{q.valueAccessor.writeValue(be),Cn&&q.viewToModelUpdate(be)};Q.registerOnChange(j),q._registerOnDestroy(()=>{Q._unregisterOnChange(j)})}(Q,q),function Xn(Q,q){q.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&Ti(Q,q),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,q),function Ue(Q,q){if(q.valueAccessor.setDisabledState){const j=be=>{q.valueAccessor.setDisabledState(be)};Q.registerOnDisabledChange(j),q._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(j)})}}(Q,q)}function _e(Q,q,j=!0){const be=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(be),q.valueAccessor.registerOnTouched(be)),Sn(Q,q),Q&&(q._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function fe(Q,q){Q.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(q)})}function Wt(Q,q){const j=Ge(Q);null!==q.validator?Q.setValidators(Tt(j,q.validator)):"function"==typeof j&&Q.setValidators([j]);const be=Fe(Q);null!==q.asyncValidator?Q.setAsyncValidators(Tt(be,q.asyncValidator)):"function"==typeof be&&Q.setAsyncValidators([be]);const Cn=()=>Q.updateValueAndValidity();fe(q._rawValidators,Cn),fe(q._rawAsyncValidators,Cn)}function Sn(Q,q){let j=!1;if(null!==Q){if(null!==q.validator){const Cn=Ge(Q);if(Array.isArray(Cn)&&Cn.length>0){const bi=Cn.filter(so=>so!==q.validator);bi.length!==Cn.length&&(j=!0,Q.setValidators(bi))}}if(null!==q.asyncValidator){const Cn=Fe(Q);if(Array.isArray(Cn)&&Cn.length>0){const bi=Cn.filter(so=>so!==q.asyncValidator);bi.length!==Cn.length&&(j=!0,Q.setAsyncValidators(bi))}}}const be=()=>{};return fe(q._rawValidators,be),fe(q._rawAsyncValidators,be),j}function Ti(Q,q){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function Gn(Q,q){Wt(Q,q)}function yn(Q,q){if(!Q.hasOwnProperty("model"))return!1;const j=Q.model;return!!j.isFirstChange()||!Object.is(q,j.currentValue)}function tr(Q,q){Q._syncPendingControls(),q.forEach(j=>{const be=j.control;"submit"===be.updateOn&&be._pendingChange&&(j.viewToModelUpdate(be._pendingValue),be._pendingChange=!1)})}function Ao(Q,q){if(!q)return null;let j,be,Cn;return Array.isArray(q),q.forEach(bi=>{bi.constructor===wt?j=bi:function So(Q){return Object.getPrototypeOf(Q.constructor)===nt}(bi)?be=bi:Cn=bi}),Cn||be||j||null}const ps={provide:St,useExisting:(0,w.Gpc)(()=>fn)},kn=(()=>Promise.resolve())();let fn=(()=>{class Q extends St{constructor(j,be){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new w.vpe,this.form=new Me({},Li(j),mn(be))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(j){kn.then(()=>{const be=this._findContainer(j.path);j.control=be.registerControl(j.name,j.control),le(j.control,j),j.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(j)})}getControl(j){return this.form.get(j.path)}removeControl(j){kn.then(()=>{const be=this._findContainer(j.path);be&&be.removeControl(j.name),this._directives.delete(j)})}addFormGroup(j){kn.then(()=>{const be=this._findContainer(j.path),Cn=new Me({});Gn(Cn,j),be.registerControl(j.name,Cn),Cn.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(j){kn.then(()=>{const be=this._findContainer(j.path);be&&be.removeControl(j.name)})}getFormGroup(j){return this.form.get(j.path)}updateModel(j,be){kn.then(()=>{this.form.get(j.path).setValue(be)})}setValue(j){this.control.setValue(j)}onSubmit(j){return this.submitted=!0,tr(this.form,this._directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(j){return j.pop(),j.length?this.form.get(j):this.form}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(Qe,10),w.Y36(Hn,10))},Q.\u0275dir=w.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(j,be){1&j&&w.NdJ("submit",function(bi){return be.onSubmit(bi)})("reset",function(){return be.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([ps]),w.qOj]}),Q})();function Ie(Q,q){const j=Q.indexOf(q);j>-1&&Q.splice(j,1)}function Gt(Q){return"object"==typeof Q&&null!==Q&&2===Object.keys(Q).length&&"value"in Q&&"disabled"in Q}const Ln=class extends oe{constructor(q=null,j,be){super(xt(j),Yt(be,j)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ri(j)&&(j.nonNullable||j.initialValueIsDefault)&&(this.defaultValue=Gt(q)?q.value:q)}setValue(q,j={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(be=>be(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(q,j={}){this.setValue(q,j)}reset(q=this.defaultValue,j={}){this._applyFormState(q),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){Ie(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){Ie(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){Gt(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}},Es={provide:tn,useExisting:(0,w.Gpc)(()=>es)},Cs=(()=>Promise.resolve())();let es=(()=>{class Q extends tn{constructor(j,be,Cn,bi,so){super(),this._changeDetectorRef=so,this.control=new Ln,this._registered=!1,this.update=new w.vpe,this._parent=j,this._setValidators(be),this._setAsyncValidators(Cn),this.valueAccessor=Ao(0,bi)}ngOnChanges(j){if(this._checkForErrors(),!this._registered||"name"in j){if(this._registered&&(this._checkName(),this.formDirective)){const be=j.name.previousValue;this.formDirective.removeControl({name:be,path:this._getPath(be)})}this._setUpControl()}"isDisabled"in j&&this._updateDisabled(j),yn(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){le(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){Cs.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(j){const be=j.isDisabled.currentValue,Cn=0!==be&&(0,w.D6c)(be);Cs.then(()=>{Cn&&!this.control.disabled?this.control.disable():!Cn&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(j){return this._parent?Mt(j,this._parent):[j]}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(St,9),w.Y36(Qe,10),w.Y36(Hn,10),w.Y36(Oe,10),w.Y36(w.sBO,8))},Q.\u0275dir=w.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([Es]),w.qOj,w.TTD]}),Q})(),Ps=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275dir=w.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})();const Na={provide:Oe,useExisting:(0,w.Gpc)(()=>Fr),multi:!0};let tl=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=w.oAB({type:Q}),Q.\u0275inj=w.cJS({}),Q})(),Io=(()=>{class Q{constructor(){this._accessors=[]}add(j,be){this._accessors.push([j,be])}remove(j){for(let be=this._accessors.length-1;be>=0;--be)if(this._accessors[be][1]===j)return void this._accessors.splice(be,1)}select(j){this._accessors.forEach(be=>{this._isSameGroup(be,j)&&be[1]!==j&&be[1].fireUncheck(j.value)})}_isSameGroup(j,be){return!!j[0].control&&j[0]._parent===be._control._parent&&j[1].name===be.name}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275prov=w.Yz7({token:Q,factory:Q.\u0275fac,providedIn:tl}),Q})(),Fr=(()=>{class Q extends nt{constructor(j,be,Cn,bi){super(j,be),this._registry=Cn,this._injector=bi,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(tn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(j){this._state=j===this.value,this.setProperty("checked",this._state)}registerOnChange(j){this._fn=j,this.onChange=()=>{j(this.value),this._registry.select(this)}}fireUncheck(j){this.writeValue(j)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Io),w.Y36(w.zs3))},Q.\u0275dir=w.lG2({type:Q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(j,be){1&j&&w.NdJ("change",function(){return be.onChange()})("blur",function(){return be.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[w._Bn([Na]),w.qOj]}),Q})();const to=new w.OlP("NgModelWithFormControlWarning"),oa={provide:St,useExisting:(0,w.Gpc)(()=>no)};let no=(()=>{class Q extends St{constructor(j,be){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(j),this._setAsyncValidators(be)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const be=this.form.get(j.path);return le(be,j),be.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),be}getControl(j){return this.form.get(j.path)}removeControl(j){_e(j.control||null,j,!1),function va(Q,q){const j=Q.indexOf(q);j>-1&&Q.splice(j,1)}(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,be){this.form.get(j.path).setValue(be)}onSubmit(j){return this.submitted=!0,tr(this.form,this.directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const be=j.control,Cn=this.form.get(j.path);be!==Cn&&(_e(be||null,j),(Q=>Q instanceof Ln)(Cn)&&(le(Cn,j),j.control=Cn))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const be=this.form.get(j.path);Gn(be,j),be.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const be=this.form.get(j.path);be&&function er(Q,q){return Sn(Q,q)}(be,j)&&be.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wt(this.form,this),this._oldForm&&Sn(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(Qe,10),w.Y36(Hn,10))},Q.\u0275dir=w.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(j,be){1&j&&w.NdJ("submit",function(bi){return be.onSubmit(bi)})("reset",function(){return be.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([oa]),w.qOj,w.TTD]}),Q})();const gs={provide:tn,useExisting:(0,w.Gpc)(()=>jo)};let jo=(()=>{class Q extends tn{constructor(j,be,Cn,bi,so){super(),this._ngModelWarningConfig=so,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=j,this._setValidators(be),this._setAsyncValidators(Cn),this.valueAccessor=Ao(0,bi)}set isDisabled(j){}ngOnChanges(j){this._added||this._setUpControl(),yn(j,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}get path(){return Mt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(j){return new(j||Q)(w.Y36(St,13),w.Y36(Qe,10),w.Y36(Hn,10),w.Y36(Oe,10),w.Y36(to,8))},Q.\u0275dir=w.lG2({type:Q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([gs]),w.qOj,w.TTD]}),Q})();const Rs={provide:Oe,useExisting:(0,w.Gpc)(()=>Ls),multi:!0};function ks(Q,q){return null==Q?`${q}`:(q&&"object"==typeof q&&(q="Object"),`${Q}: ${q}`.slice(0,50))}let Ls=(()=>{class Q extends nt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){this.value=j;const Cn=ks(this._getOptionId(j),j);this.setProperty("value",Cn)}registerOnChange(j){this.onChange=be=>{this.value=this._getOptionValue(be),j(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(j){for(const be of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(be),j))return be;return null}_getOptionValue(j){const be=function ba(Q){return Q.split(":")[0]}(j);return this._optionMap.has(be)?this._optionMap.get(be):j}}return Q.\u0275fac=function(){let q;return function(be){return(q||(q=w.n5z(Q)))(be||Q)}}(),Q.\u0275dir=w.lG2({type:Q,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(j,be){1&j&&w.NdJ("change",function(bi){return be.onChange(bi.target.value)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([Rs]),w.qOj]}),Q})(),Ho=(()=>{class Q{constructor(j,be,Cn){this._element=j,this._renderer=be,this._select=Cn,this._select&&(this.id=this._select._registerOption())}set ngValue(j){null!=this._select&&(this._select._optionMap.set(this.id,j),this._setElementValue(ks(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._setElementValue(j),this._select&&this._select.writeValue(this._select.value)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Ls,9))},Q.\u0275dir=w.lG2({type:Q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Q})();const wa={provide:Oe,useExisting:(0,w.Gpc)(()=>Eo),multi:!0};function nl(Q,q){return null==Q?`${q}`:("string"==typeof q&&(q=`'${q}'`),q&&"object"==typeof q&&(q="Object"),`${Q}: ${q}`.slice(0,50))}let Eo=(()=>{class Q extends nt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){let be;if(this.value=j,Array.isArray(j)){const Cn=j.map(bi=>this._getOptionId(bi));be=(bi,so)=>{bi._setSelected(Cn.indexOf(so.toString())>-1)}}else be=(Cn,bi)=>{Cn._setSelected(!1)};this._optionMap.forEach(be)}registerOnChange(j){this.onChange=be=>{const Cn=[],bi=be.selectedOptions;if(void 0!==bi){const so=bi;for(let Ts=0;Ts<so.length;Ts++){const Nr=this._getOptionValue(so[Ts].value);Cn.push(Nr)}}else{const so=be.options;for(let Ts=0;Ts<so.length;Ts++){const ys=so[Ts];if(ys.selected){const Nr=this._getOptionValue(ys.value);Cn.push(Nr)}}}this.value=Cn,j(Cn)}}_registerOption(j){const be=(this._idCounter++).toString();return this._optionMap.set(be,j),be}_getOptionId(j){for(const be of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(be)._value,j))return be;return null}_getOptionValue(j){const be=function ts(Q){return Q.split(":")[0]}(j);return this._optionMap.has(be)?this._optionMap.get(be)._value:j}}return Q.\u0275fac=function(){let q;return function(be){return(q||(q=w.n5z(Q)))(be||Q)}}(),Q.\u0275dir=w.lG2({type:Q,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(j,be){1&j&&w.NdJ("change",function(bi){return be.onChange(bi.target)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([wa]),w.qOj]}),Q})(),Kr=(()=>{class Q{constructor(j,be,Cn){this._element=j,this._renderer=be,this._select=Cn,this._select&&(this.id=this._select._registerOption(this))}set ngValue(j){null!=this._select&&(this._value=j,this._setElementValue(nl(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._select?(this._value=j,this._setElementValue(nl(this.id,j)),this._select.writeValue(this._select.value)):this._setElementValue(j)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}_setSelected(j){this._renderer.setProperty(this._element.nativeElement,"selected",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Q.\u0275fac=function(j){return new(j||Q)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Eo,9))},Q.\u0275dir=w.lG2({type:Q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Q})(),Ca=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=w.oAB({type:Q}),Q.\u0275inj=w.cJS({imports:[tl]}),Q})(),Bs=(()=>{class Q{}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=w.oAB({type:Q}),Q.\u0275inj=w.cJS({imports:[Ca]}),Q})(),rs=(()=>{class Q{static withConfig(j){return{ngModule:Q,providers:[{provide:to,useValue:j.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275mod=w.oAB({type:Q}),Q.\u0275inj=w.cJS({imports:[Ca]}),Q})();class Ds extends oe{constructor(q,j,be){super(xt(j),Yt(be,j)),this.controls=q,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[this._adjustIndex(q)]}push(q,j={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(q,j,be={}){this.controls.splice(q,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:be.emitEvent})}removeAt(q,j={}){let be=this._adjustIndex(q);be<0&&(be=0),this.controls[be]&&this.controls[be]._registerOnCollectionChange(()=>{}),this.controls.splice(be,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(q,j,be={}){let Cn=this._adjustIndex(q);Cn<0&&(Cn=0),this.controls[Cn]&&this.controls[Cn]._registerOnCollectionChange(()=>{}),this.controls.splice(Cn,1),j&&(this.controls.splice(Cn,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:be.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,j={}){ee(this,0,q),q.forEach((be,Cn)=>{Ee(this,!1,Cn),this.at(Cn).setValue(be,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(q,j={}){null!=q&&(q.forEach((be,Cn)=>{this.at(Cn)&&this.at(Cn).patchValue(be,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(q=[],j={}){this._forEachChild((be,Cn)=>{be.reset(q[Cn],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(q=>q.getRawValue())}clear(q={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_adjustIndex(q){return q<0?q+this.length:q}_syncPendingControls(){let q=this.controls.reduce((j,be)=>!!be._syncPendingControls()||j,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){this.controls.forEach((j,be)=>{q(j,be)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(j=>j.enabled&&q(j))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}_find(q){return this.at(q)??null}}function En(Q){return!!Q&&(void 0!==Q.asyncValidators||void 0!==Q.validators||void 0!==Q.updateOn)}let lr=(()=>{class Q{constructor(){this.useNonNullable=!1}get nonNullable(){const j=new Q;return j.useNonNullable=!0,j}group(j,be=null){const Cn=this._reduceControls(j);let bi={};return En(be)?bi=be:null!==be&&(bi.validators=be.validator,bi.asyncValidators=be.asyncValidator),new Me(Cn,bi)}record(j,be=null){const Cn=this._reduceControls(j);return new Ft(Cn,be)}control(j,be,Cn){let bi={};return this.useNonNullable?(En(be)?bi=be:(bi.validators=be,bi.asyncValidators=Cn),new Ln(j,{...bi,nonNullable:!0})):new Ln(j,be,Cn)}array(j,be,Cn){const bi=j.map(so=>this._createControl(so));return new Ds(bi,be,Cn)}_reduceControls(j){const be={};return Object.keys(j).forEach(Cn=>{be[Cn]=this._createControl(j[Cn])}),be}_createControl(j){return j instanceof Ln||j instanceof oe?j:Array.isArray(j)?this.control(j[0],j.length>1?j[1]:null,j.length>2?j[2]:null):this.control(j)}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275prov=w.Yz7({token:Q,factory:Q.\u0275fac,providedIn:rs}),Q})()},7957:(ti,Ut,B)=>{"use strict";B.d(Ut,{Bb:()=>Xe,XC:()=>vi,ZL:()=>ht});var w=B(2687),_=B(1281),de=B(3353),a=B(4650),he=B(3238),st=B(727),nt=B(7579),Oe=B(9770),ke=B(6451),rt=B(9646),pt=B(4968),Et=B(6895),dt=B(8184),wt=B(8605),et=B(445),Zt=B(9521),kt=B(4080),Qe=B(4006),Hn=B(7676),Fn=B(5698),Ye=B(3900),Ce=B(9300),we=B(4004),At=B(8505),zt=B(1005);const Jt=["panel"];function Mn(ce,ot){if(1&ce&&(a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA()),2&ce){const Se=ot.id,St=a.oxw();a.Q6J("id",St.id)("ngClass",St._classList),a.uIk("aria-label",St.ariaLabel||null)("aria-labelledby",St._getPanelAriaLabelledby(Se))}}const Ke=["*"];let Ne=0;class He{constructor(ot,Se){this.source=ot,this.option=Se}}const yt=(0,he.Kr)(class{}),Tn=new a.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function Xt(){return{autoActiveFirstOption:!1}}});let ii=(()=>{class ce extends yt{constructor(Se,St,tn,li){super(),this._changeDetectorRef=Se,this._elementRef=St,this._activeOptionChanges=st.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new a.vpe,this.opened=new a.vpe,this.closed=new a.vpe,this.optionActivated=new a.vpe,this._classList={},this.id="mat-autocomplete-"+Ne++,this.inertGroups=li?.SAFARI||!1,this._autoActiveFirstOption=!!tn.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(Se){this._autoActiveFirstOption=(0,_.Ig)(Se)}set classList(Se){this._classList=Se&&Se.length?(0,_.du)(Se).reduce((St,tn)=>(St[tn]=!0,St),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new w.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(Se=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[Se]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(Se){this.panel&&(this.panel.nativeElement.scrollTop=Se)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(Se){const St=new He(this,Se);this.optionSelected.emit(St)}_getPanelAriaLabelledby(Se){return this.ariaLabel?null:this.ariaLabelledby?(Se?Se+" ":"")+this.ariaLabelledby:Se}_setVisibilityClasses(Se){Se[this._visibleClass]=this.showPanel,Se[this._hiddenClass]=!this.showPanel}}return ce.\u0275fac=function(Se){return new(Se||ce)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(Tn),a.Y36(de.t4))},ce.\u0275dir=a.lG2({type:ce,viewQuery:function(Se,St){if(1&Se&&(a.Gf(a.Rgc,7),a.Gf(Jt,5)),2&Se){let tn;a.iGM(tn=a.CRH())&&(St.template=tn.first),a.iGM(tn=a.CRH())&&(St.panel=tn.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[a.qOj]}),ce})(),vi=(()=>{class ce extends ii{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return ce.\u0275fac=function(){let ot;return function(St){return(ot||(ot=a.n5z(ce)))(St||ce)}}(),ce.\u0275cmp=a.Xpm({type:ce,selectors:[["mat-autocomplete"]],contentQueries:function(Se,St,tn){if(1&Se&&(a.Suo(tn,he.K7,5),a.Suo(tn,he.ey,5)),2&Se){let li;a.iGM(li=a.CRH())&&(St.optionGroups=li),a.iGM(li=a.CRH())&&(St.options=li)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[a._Bn([{provide:he.HF,useExisting:ce}]),a.qOj],ngContentSelectors:Ke,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(Se,St){1&Se&&(a.F$t(),a.YNc(0,Mn,3,4,"ng-template"))},dependencies:[Et.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),ce})();const Li=new a.OlP("mat-autocomplete-scroll-strategy"),mn={provide:Li,deps:[dt.aV],useFactory:function Jn(ce){return()=>ce.scrollStrategies.reposition()}},Tt={provide:Qe.JU,useExisting:(0,a.Gpc)(()=>ht),multi:!0};let Fe=(()=>{class ce{constructor(Se,St,tn,li,Wi,Dn,ae,$e,Ot,on,jt){this._element=Se,this._overlay=St,this._viewContainerRef=tn,this._zone=li,this._changeDetectorRef=Wi,this._dir=ae,this._formField=$e,this._document=Ot,this._viewportRuler=on,this._defaults=jt,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=st.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new nt.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,Oe.P)(()=>this.autocomplete&&this.autocomplete.options?(0,ke.T)(...this.autocomplete.options.map(Bt=>Bt.onSelectionChange)):this._zone.onStable.pipe((0,Fn.q)(1),(0,Ye.w)(()=>this.optionSelections))),this._scrollStrategy=Dn}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(Se){this._autocompleteDisabled=(0,_.Ig)(Se)}ngAfterViewInit(){const Se=this._getWindow();typeof Se<"u"&&this._zone.runOutsideAngular(()=>Se.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(Se){Se.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const Se=this._getWindow();typeof Se<"u"&&Se.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,ke.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Ce.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Ce.h)(()=>this._overlayAttached)):(0,rt.of)()).pipe((0,we.U)(Se=>Se instanceof he.rN?Se:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,ke.T)((0,pt.R)(this._document,"click"),(0,pt.R)(this._document,"auxclick"),(0,pt.R)(this._document,"touchend")).pipe((0,Ce.h)(Se=>{const St=(0,de.sA)(Se),tn=this._formField?this._formField._elementRef.nativeElement:null,li=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&St!==this._element.nativeElement&&(!tn||!tn.contains(St))&&(!li||!li.contains(St))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(St)}))}writeValue(Se){Promise.resolve(null).then(()=>this._setTriggerValue(Se))}registerOnChange(Se){this._onChange=Se}registerOnTouched(Se){this._onTouched=Se}setDisabledState(Se){this._element.nativeElement.disabled=Se}_handleKeydown(Se){const St=Se.keyCode;if(St===Zt.hY&&!(0,Zt.Vb)(Se)&&Se.preventDefault(),this.activeOption&&St===Zt.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),Se.preventDefault();else if(this.autocomplete){const tn=this.autocomplete._keyManager.activeItem,li=St===Zt.LH||St===Zt.JH;this.panelOpen||St===Zt.Mf?this.autocomplete._keyManager.onKeydown(Se):li&&this._canOpen()&&this.openPanel(),(li||this.autocomplete._keyManager.activeItem!==tn)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(Se){let St=Se.target,tn=St.value;"number"===St.type&&(tn=""==tn?null:parseFloat(tn)),this._previousValue!==tn&&(this._previousValue=tn,this._onChange(tn),this._canOpen()&&this._document.activeElement===Se.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(Se=!1){this._formField&&"auto"===this._formField.floatLabel&&(Se?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const Se=this._zone.onStable.pipe((0,Fn.q)(1)),St=this.autocomplete.options.changes.pipe((0,At.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,zt.g)(0));return(0,ke.T)(Se,St).pipe((0,Ye.w)(()=>{const tn=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),tn!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Fn.q)(1)).subscribe(tn=>this._setValueAndClose(tn))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(Se){const tn=(this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(Se):Se)??"";this._formField?this._formField._control.value=tn:this._element.nativeElement.value=tn,this._previousValue=tn}_setValueAndClose(Se){Se&&Se.source&&(this._clearPreviousSelectedOption(Se.source),this._setTriggerValue(Se.source.value),this._onChange(Se.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(Se.source)),this.closePanel()}_clearPreviousSelectedOption(Se){this.autocomplete.options.forEach(St=>{St!==Se&&St.selected&&St.deselect()})}_attachOverlay(){let Se=this._overlayRef;Se?(this._positionStrategy.setOrigin(this._getConnectedElement()),Se.updateSize({width:this._getPanelWidth()})):(this._portal=new kt.UE(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),Se=this._overlay.create(this._getOverlayConfig()),this._overlayRef=Se,Se.keydownEvents().subscribe(tn=>{(tn.keyCode===Zt.hY&&!(0,Zt.Vb)(tn)||tn.keyCode===Zt.LH&&(0,Zt.Vb)(tn,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),tn.stopPropagation(),tn.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&Se&&Se.updateSize({width:this._getPanelWidth()})})),Se&&!Se.hasAttached()&&(Se.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const St=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&St!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new dt.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const Se=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(Se),this._positionStrategy=Se,Se}_setStrategyPositions(Se){const St=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],tn=this._aboveClass,li=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:tn},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:tn}];let Wi;Wi="above"===this.position?li:"below"===this.position?St:[...St,...li],Se.withPositions(Wi)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const Se=this.autocomplete;Se.autoActiveFirstOption?Se._keyManager.setFirstItemActive():Se._keyManager.setActiveItem(-1)}_canOpen(){const Se=this._element.nativeElement;return!Se.readOnly&&!Se.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(Se){const St=this.autocomplete,tn=(0,he.CB)(Se,St.options,St.optionGroups);if(0===Se&&1===tn)St._setScrollTop(0);else if(St.panel){const li=St.options.toArray()[Se];if(li){const Wi=li._getHostElement(),Dn=(0,he.jH)(Wi.offsetTop,Wi.offsetHeight,St._getScrollTop(),St.panel.nativeElement.offsetHeight);St._setScrollTop(Dn)}}}}return ce.\u0275fac=function(Se){return new(Se||ce)(a.Y36(a.SBq),a.Y36(dt.aV),a.Y36(a.s_b),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(Li),a.Y36(et.Is,8),a.Y36(Hn.G_,9),a.Y36(Et.K0,8),a.Y36(wt.rL),a.Y36(Tn,8))},ce.\u0275dir=a.lG2({type:ce,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[a.TTD]}),ce})(),ht=(()=>{class ce extends Fe{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return ce.\u0275fac=function(){let ot;return function(St){return(ot||(ot=a.n5z(ce)))(St||ce)}}(),ce.\u0275dir=a.lG2({type:ce,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(Se,St){1&Se&&a.NdJ("focusin",function(){return St._handleFocus()})("blur",function(){return St._onTouched()})("input",function(li){return St._handleInput(li)})("keydown",function(li){return St._handleKeydown(li)}),2&Se&&a.uIk("autocomplete",St.autocompleteAttribute)("role",St.autocompleteDisabled?null:"combobox")("aria-autocomplete",St.autocompleteDisabled?null:"list")("aria-activedescendant",St.panelOpen&&St.activeOption?St.activeOption.id:null)("aria-expanded",St.autocompleteDisabled?null:St.panelOpen.toString())("aria-owns",St.autocompleteDisabled||!St.panelOpen||null==St.autocomplete?null:St.autocomplete.id)("aria-haspopup",!St.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[a._Bn([Tt]),a.qOj]}),ce})(),Xe=(()=>{class ce{}return ce.\u0275fac=function(Se){return new(Se||ce)},ce.\u0275mod=a.oAB({type:ce}),ce.\u0275inj=a.cJS({providers:[mn],imports:[[dt.U8,he.Ng,he.BQ,Et.ez],wt.ZD,he.Ng,he.BQ]}),ce})()},4859:(ti,Ut,B)=>{"use strict";B.d(Ut,{lW:()=>rt,ot:()=>Et});var w=B(4650),_=B(3238),de=B(2687);const a=["mat-button",""],he=["*"],Oe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ke=(0,_.pj)((0,_.Id)((0,_.Kr)(class{constructor(dt){this._elementRef=dt}})));let rt=(()=>{class dt extends ke{constructor(et,Zt,kt){super(et),this._focusMonitor=Zt,this._animationMode=kt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Qe of Oe)this._hasHostAttributes(Qe)&&this._getHostElement().classList.add(Qe);et.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(et,Zt){et?this._focusMonitor.focusVia(this._getHostElement(),et,Zt):this._getHostElement().focus(Zt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...et){return et.some(Zt=>this._getHostElement().hasAttribute(Zt))}}return dt.\u0275fac=function(et){return new(et||dt)(w.Y36(w.SBq),w.Y36(de.tE),w.Y36(w.QbO,8))},dt.\u0275cmp=w.Xpm({type:dt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(et,Zt){if(1&et&&w.Gf(_.wG,5),2&et){let kt;w.iGM(kt=w.CRH())&&(Zt.ripple=kt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(et,Zt){2&et&&(w.uIk("disabled",Zt.disabled||null),w.ekj("_mat-animation-noopable","NoopAnimations"===Zt._animationMode)("mat-button-disabled",Zt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[w.qOj],attrs:a,ngContentSelectors:he,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(et,Zt){1&et&&(w.F$t(),w.TgZ(0,"span",0),w.Hsn(1),w.qZA(),w._UZ(2,"span",1)(3,"span",2)),2&et&&(w.xp6(2),w.ekj("mat-button-ripple-round",Zt.isRoundButton||Zt.isIconButton),w.Q6J("matRippleDisabled",Zt._isRippleDisabled())("matRippleCentered",Zt.isIconButton)("matRippleTrigger",Zt._getHostElement()))},dependencies:[_.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),dt})(),Et=(()=>{class dt{}return dt.\u0275fac=function(et){return new(et||dt)},dt.\u0275mod=w.oAB({type:dt}),dt.\u0275inj=w.cJS({imports:[[_.si,_.BQ],_.BQ]}),dt})()},3238:(ti,Ut,B)=>{"use strict";B.d(Ut,{rD:()=>mn,K7:()=>te,HF:()=>Bt,BQ:()=>Ce,X2:()=>Tt,uc:()=>ht,ey:()=>Ii,Ng:()=>ji,rN:()=>Rn,nP:()=>on,us:()=>jt,wG:()=>$e,si:()=>Ot,CB:()=>bn,jH:()=>Ji,pj:()=>At,Kr:()=>zt,Id:()=>we,FD:()=>Mn,sb:()=>Jt,E0:()=>Ge});var w=B(4650),_=B(2687),de=B(445);const a=new w.GfV("13.0.0");var he=B(6895),st=B(3353),nt=B(1281),Oe=B(7579),ke=B(8675),rt=B(9521);function dt(dn,It){if(1&dn&&w._UZ(0,"mat-pseudo-checkbox",4),2&dn){const ct=w.oxw();w.Q6J("state",ct.selected?"checked":"unchecked")("disabled",ct.disabled)}}function wt(dn,It){if(1&dn&&(w.TgZ(0,"span",5),w._uU(1),w.qZA()),2&dn){const ct=w.oxw();w.xp6(1),w.hij("(",ct.group.label,")")}}const et=["*"],Hn=new w.GfV("13.0.0"),Ye=new w.OlP("mat-sanity-checks",{providedIn:"root",factory:function Fn(){return!0}});let Ce=(()=>{class dn{constructor(ct,nn,_i){this._hasDoneGlobalChecks=!1,this._document=_i,ct._applyBodyHighContrastModeCssClasses(),this._sanityChecks=nn,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(ct){return!(!(0,w.X6Q)()||(0,st.Oy)())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[ct])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const ct=this._document.createElement("div");ct.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(ct);const nn=getComputedStyle(ct);nn&&"none"!==nn.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),ct.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Hn.full!==a.full&&console.warn("The Angular Material version ("+Hn.full+") does not match the Angular CDK version ("+a.full+").\nPlease ensure the versions of these two packages exactly match.")}}return dn.\u0275fac=function(ct){return new(ct||dn)(w.LFG(_.qm),w.LFG(Ye,8),w.LFG(he.K0))},dn.\u0275mod=w.oAB({type:dn}),dn.\u0275inj=w.cJS({imports:[[de.vT],de.vT]}),dn})();function we(dn){return class extends dn{constructor(...It){super(...It),this._disabled=!1}get disabled(){return this._disabled}set disabled(It){this._disabled=(0,nt.Ig)(It)}}}function At(dn,It){return class extends dn{constructor(...ct){super(...ct),this.defaultColor=It,this.color=It}get color(){return this._color}set color(ct){const nn=ct||this.defaultColor;nn!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),nn&&this._elementRef.nativeElement.classList.add(`mat-${nn}`),this._color=nn)}}}function zt(dn){return class extends dn{constructor(...It){super(...It),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(It){this._disableRipple=(0,nt.Ig)(It)}}}function Jt(dn,It=0){return class extends dn{constructor(...ct){super(...ct),this._tabIndex=It,this.defaultTabIndex=It}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(ct){this._tabIndex=null!=ct?(0,nt.su)(ct):this.defaultTabIndex}}}function Mn(dn){return class extends dn{constructor(...It){super(...It),this.stateChanges=new Oe.x,this.errorState=!1}updateErrorState(){const It=this.errorState,Qt=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Qt!==It&&(this.errorState=Qt,this.stateChanges.next())}}}let mn=(()=>{class dn{isErrorState(ct,nn){return!!(ct&&ct.invalid&&(ct.touched||nn&&nn.submitted))}}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275prov=w.Yz7({token:dn,factory:dn.\u0275fac,providedIn:"root"}),dn})(),Tt=(()=>{class dn{}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275dir=w.lG2({type:dn,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),dn})();function Ge(dn,It,ct="mat"){dn.changes.pipe((0,ke.O)(dn)).subscribe(({length:nn})=>{Fe(It,`${ct}-2-line`,!1),Fe(It,`${ct}-3-line`,!1),Fe(It,`${ct}-multi-line`,!1),2===nn||3===nn?Fe(It,`${ct}-${nn}-line`,!0):nn>3&&Fe(It,`${ct}-multi-line`,!0)})}function Fe(dn,It,ct){dn.nativeElement.classList.toggle(It,ct)}let ht=(()=>{class dn{}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275mod=w.oAB({type:dn}),dn.\u0275inj=w.cJS({imports:[[Ce],Ce]}),dn})();class Xe{constructor(It,ct,nn){this._renderer=It,this.element=ct,this.config=nn,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ce={enterDuration:225,exitDuration:150},Se=(0,st.i$)({passive:!0}),St=["mousedown","touchstart"],tn=["mouseup","mouseleave","touchend","touchcancel"];class li{constructor(It,ct,nn,_i){this._target=It,this._ngZone=ct,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,_i.isBrowser&&(this._containerElement=(0,nt.fI)(nn))}fadeInRipple(It,ct,nn={}){const _i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Qt={...ce,...nn.animation};nn.centered&&(It=_i.left+_i.width/2,ct=_i.top+_i.height/2);const xt=nn.radius||function Dn(dn,It,ct){const nn=Math.max(Math.abs(dn-ct.left),Math.abs(dn-ct.right)),_i=Math.max(Math.abs(It-ct.top),Math.abs(It-ct.bottom));return Math.sqrt(nn*nn+_i*_i)}(It,ct,_i),ft=It-_i.left,Yt=ct-_i.top,wn=Qt.enterDuration,ri=document.createElement("div");ri.classList.add("mat-ripple-element"),ri.style.left=ft-xt+"px",ri.style.top=Yt-xt+"px",ri.style.height=2*xt+"px",ri.style.width=2*xt+"px",null!=nn.color&&(ri.style.backgroundColor=nn.color),ri.style.transitionDuration=`${wn}ms`,this._containerElement.appendChild(ri),function Wi(dn){window.getComputedStyle(dn).getPropertyValue("opacity")}(ri),ri.style.transform="scale(1)";const Ee=new Xe(this,ri,nn);return Ee.state=0,this._activeRipples.add(Ee),nn.persistent||(this._mostRecentTransientRipple=Ee),this._runTimeoutOutsideZone(()=>{const ee=Ee===this._mostRecentTransientRipple;Ee.state=1,!nn.persistent&&(!ee||!this._isPointerDown)&&Ee.fadeOut()},wn),Ee}fadeOutRipple(It){const ct=this._activeRipples.delete(It);if(It===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!ct)return;const nn=It.element,_i={...ce,...It.config.animation};nn.style.transitionDuration=`${_i.exitDuration}ms`,nn.style.opacity="0",It.state=2,this._runTimeoutOutsideZone(()=>{It.state=3,nn.remove()},_i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(It=>It.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(It=>{It.config.persistent||It.fadeOut()})}setupTriggerEvents(It){const ct=(0,nt.fI)(It);!ct||ct===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=ct,this._registerEvents(St))}handleEvent(It){"mousedown"===It.type?this._onMousedown(It):"touchstart"===It.type?this._onTouchStart(It):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(tn),this._pointerUpEventsRegistered=!0)}_onMousedown(It){const ct=(0,_.X6)(It),nn=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!ct&&!nn&&(this._isPointerDown=!0,this.fadeInRipple(It.clientX,It.clientY,this._target.rippleConfig))}_onTouchStart(It){if(!this._target.rippleDisabled&&!(0,_.yG)(It)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const ct=It.changedTouches;for(let nn=0;nn<ct.length;nn++)this.fadeInRipple(ct[nn].clientX,ct[nn].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(It=>{!It.config.persistent&&(1===It.state||It.config.terminateOnPointerUp&&0===It.state)&&It.fadeOut()}))}_runTimeoutOutsideZone(It,ct=0){this._ngZone.runOutsideAngular(()=>setTimeout(It,ct))}_registerEvents(It){this._ngZone.runOutsideAngular(()=>{It.forEach(ct=>{this._triggerElement.addEventListener(ct,this,Se)})})}_removeTriggerEvents(){this._triggerElement&&(St.forEach(It=>{this._triggerElement.removeEventListener(It,this,Se)}),this._pointerUpEventsRegistered&&tn.forEach(It=>{this._triggerElement.removeEventListener(It,this,Se)}))}}const ae=new w.OlP("mat-ripple-global-options");let $e=(()=>{class dn{constructor(ct,nn,_i,Qt,xt){this._elementRef=ct,this._animationMode=xt,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Qt||{},this._rippleRenderer=new li(this,nn,ct,_i)}get disabled(){return this._disabled}set disabled(ct){ct&&this.fadeOutAllNonPersistent(),this._disabled=ct,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(ct){this._trigger=ct,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(ct,nn=0,_i){return"number"==typeof ct?this._rippleRenderer.fadeInRipple(ct,nn,{...this.rippleConfig,..._i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...ct})}}return dn.\u0275fac=function(ct){return new(ct||dn)(w.Y36(w.SBq),w.Y36(w.R0b),w.Y36(st.t4),w.Y36(ae,8),w.Y36(w.QbO,8))},dn.\u0275dir=w.lG2({type:dn,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(ct,nn){2&ct&&w.ekj("mat-ripple-unbounded",nn.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),dn})(),Ot=(()=>{class dn{}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275mod=w.oAB({type:dn}),dn.\u0275inj=w.cJS({imports:[[Ce,st.ud],Ce]}),dn})(),on=(()=>{class dn{constructor(ct){this._animationMode=ct,this.state="unchecked",this.disabled=!1}}return dn.\u0275fac=function(ct){return new(ct||dn)(w.Y36(w.QbO,8))},dn.\u0275cmp=w.Xpm({type:dn,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(ct,nn){2&ct&&w.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===nn.state)("mat-pseudo-checkbox-checked","checked"===nn.state)("mat-pseudo-checkbox-disabled",nn.disabled)("_mat-animation-noopable","NoopAnimations"===nn._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(ct,nn){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),dn})(),jt=(()=>{class dn{}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275mod=w.oAB({type:dn}),dn.\u0275inj=w.cJS({imports:[[Ce]]}),dn})();const Bt=new w.OlP("MAT_OPTION_PARENT_COMPONENT"),te=new w.OlP("MatOptgroup");let Ht=0;class Rn{constructor(It,ct=!1){this.source=It,this.isUserInput=ct}}let ni=(()=>{class dn{constructor(ct,nn,_i,Qt){this._element=ct,this._changeDetectorRef=nn,this._parent=_i,this.group=Qt,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Ht++,this.onSelectionChange=new w.vpe,this._stateChanges=new Oe.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(ct){this._disabled=(0,nt.Ig)(ct)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(ct,nn){const _i=this._getHostElement();"function"==typeof _i.focus&&_i.focus(nn)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(ct){(ct.keyCode===rt.K5||ct.keyCode===rt.L_)&&!(0,rt.Vb)(ct)&&(this._selectViaInteraction(),ct.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const ct=this.viewValue;ct!==this._mostRecentViewValue&&(this._mostRecentViewValue=ct,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(ct=!1){this.onSelectionChange.emit(new Rn(this,ct))}}return dn.\u0275fac=function(ct){w.$Z()},dn.\u0275dir=w.lG2({type:dn,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),dn})(),Ii=(()=>{class dn extends ni{constructor(ct,nn,_i,Qt){super(ct,nn,_i,Qt)}}return dn.\u0275fac=function(ct){return new(ct||dn)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(Bt,8),w.Y36(te,8))},dn.\u0275cmp=w.Xpm({type:dn,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(ct,nn){1&ct&&w.NdJ("click",function(){return nn._selectViaInteraction()})("keydown",function(Qt){return nn._handleKeydown(Qt)}),2&ct&&(w.Ikx("id",nn.id),w.uIk("tabindex",nn._getTabIndex())("aria-selected",nn._getAriaSelected())("aria-disabled",nn.disabled.toString()),w.ekj("mat-selected",nn.selected)("mat-option-multiple",nn.multiple)("mat-active",nn.active)("mat-option-disabled",nn.disabled))},exportAs:["matOption"],features:[w.qOj],ngContentSelectors:et,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(ct,nn){1&ct&&(w.F$t(),w.YNc(0,dt,1,2,"mat-pseudo-checkbox",0),w.TgZ(1,"span",1),w.Hsn(2),w.qZA(),w.YNc(3,wt,2,1,"span",2),w._UZ(4,"div",3)),2&ct&&(w.Q6J("ngIf",nn.multiple),w.xp6(3),w.Q6J("ngIf",nn.group&&nn.group._inert),w.xp6(1),w.Q6J("matRippleTrigger",nn._getHostElement())("matRippleDisabled",nn.disabled||nn.disableRipple))},dependencies:[on,he.O5,$e],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),dn})();function bn(dn,It,ct){if(ct.length){let nn=It.toArray(),_i=ct.toArray(),Qt=0;for(let xt=0;xt<dn+1;xt++)nn[xt].group&&nn[xt].group===_i[Qt]&&Qt++;return Qt}return 0}function Ji(dn,It,ct,nn){return dn<ct?dn:dn+It>ct+nn?Math.max(0,dn-nn+It):ct}let ji=(()=>{class dn{}return dn.\u0275fac=function(ct){return new(ct||dn)},dn.\u0275mod=w.oAB({type:dn}),dn.\u0275inj=w.cJS({imports:[[Ot,he.ez,Ce,jt]]}),dn})()},7084:(ti,Ut,B)=>{"use strict";B.d(Ut,{pp:()=>ht,To:()=>Xe,ib:()=>Nn,yz:()=>Tt,yK:()=>Fe});var w=B(4650),_=B(5017),de=B(1281),a=B(7579),he=B(727);let st=0;const nt=new w.OlP("CdkAccordion");let Oe=(()=>{class ce{constructor(){this._stateChanges=new a.x,this._openCloseAllActions=new a.x,this.id="cdk-accordion-"+st++,this._multi=!1}get multi(){return this._multi}set multi(Se){this._multi=(0,de.Ig)(Se)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(Se){this._stateChanges.next(Se)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return ce.\u0275fac=function(Se){return new(Se||ce)},ce.\u0275dir=w.lG2({type:ce,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[w._Bn([{provide:nt,useExisting:ce}]),w.TTD]}),ce})(),ke=0,rt=(()=>{class ce{constructor(Se,St,tn){this.accordion=Se,this._changeDetectorRef=St,this._expansionDispatcher=tn,this._openCloseAllSubscription=he.w0.EMPTY,this.closed=new w.vpe,this.opened=new w.vpe,this.destroyed=new w.vpe,this.expandedChange=new w.vpe,this.id="cdk-accordion-child-"+ke++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=tn.listen((li,Wi)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===Wi&&this.id!==li&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(Se){Se=(0,de.Ig)(Se),this._expanded!==Se&&(this._expanded=Se,this.expandedChange.emit(Se),Se?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(Se){this._disabled=(0,de.Ig)(Se)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(Se=>{this.disabled||(this.expanded=Se)})}}return ce.\u0275fac=function(Se){return new(Se||ce)(w.Y36(nt,12),w.Y36(w.sBO),w.Y36(_.A8))},ce.\u0275dir=w.lG2({type:ce,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[w._Bn([{provide:nt,useValue:void 0}])]}),ce})(),pt=(()=>{class ce{}return ce.\u0275fac=function(Se){return new(Se||ce)},ce.\u0275mod=w.oAB({type:ce}),ce.\u0275inj=w.cJS({}),ce})();var Et=B(4080),dt=B(6895),wt=B(3238),et=B(2687),Zt=B(1884),kt=B(8675),Qe=B(9300),Hn=B(5698),Fn=B(9521),Ye=B(515),Ce=B(6451),we=B(7340);const At=["body"];function zt(ce,ot){}const Jt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Mn=["mat-expansion-panel-header","*","mat-action-row"];function Ke(ce,ot){if(1&ce&&w._UZ(0,"span",2),2&ce){const Se=w.oxw();w.Q6J("@indicatorRotate",Se._getExpandedState())}}const Ne=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],He=["mat-panel-title","mat-panel-description","*"],yt=new w.OlP("MAT_ACCORDION"),Tn="225ms cubic-bezier(0.4,0.0,0.2,1)",Xt={indicatorRotate:(0,we.X$)("indicatorRotate",[(0,we.SB)("collapsed, void",(0,we.oB)({transform:"rotate(0deg)"})),(0,we.SB)("expanded",(0,we.oB)({transform:"rotate(180deg)"})),(0,we.eR)("expanded <=> collapsed, void => collapsed",(0,we.jt)(Tn))]),bodyExpansion:(0,we.X$)("bodyExpansion",[(0,we.SB)("collapsed, void",(0,we.oB)({height:"0px",visibility:"hidden"})),(0,we.SB)("expanded",(0,we.oB)({height:"*",visibility:"visible"})),(0,we.eR)("expanded <=> collapsed, void => collapsed",(0,we.jt)(Tn))])};let ii=(()=>{class ce{constructor(Se){this._template=Se}}return ce.\u0275fac=function(Se){return new(Se||ce)(w.Y36(w.Rgc))},ce.\u0275dir=w.lG2({type:ce,selectors:[["ng-template","matExpansionPanelContent",""]]}),ce})(),vi=0;const wi=new w.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Nn=(()=>{class ce extends rt{constructor(Se,St,tn,li,Wi,Dn,ae){super(Se,St,tn),this._viewContainerRef=li,this._animationMode=Dn,this._hideToggle=!1,this.afterExpand=new w.vpe,this.afterCollapse=new w.vpe,this._inputChanges=new a.x,this._headerId="mat-expansion-panel-header-"+vi++,this._bodyAnimationDone=new a.x,this.accordion=Se,this._document=Wi,this._bodyAnimationDone.pipe((0,Zt.x)(($e,Ot)=>$e.fromState===Ot.fromState&&$e.toState===Ot.toState)).subscribe($e=>{"void"!==$e.fromState&&("expanded"===$e.toState?this.afterExpand.emit():"collapsed"===$e.toState&&this.afterCollapse.emit())}),ae&&(this.hideToggle=ae.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(Se){this._hideToggle=(0,de.Ig)(Se)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(Se){this._togglePosition=Se}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,kt.O)(null),(0,Qe.h)(()=>this.expanded&&!this._portal),(0,Hn.q)(1)).subscribe(()=>{this._portal=new Et.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(Se){this._inputChanges.next(Se)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const Se=this._document.activeElement,St=this._body.nativeElement;return Se===St||St.contains(Se)}return!1}}return ce.\u0275fac=function(Se){return new(Se||ce)(w.Y36(yt,12),w.Y36(w.sBO),w.Y36(_.A8),w.Y36(w.s_b),w.Y36(dt.K0),w.Y36(w.QbO,8),w.Y36(wi,8))},ce.\u0275cmp=w.Xpm({type:ce,selectors:[["mat-expansion-panel"]],contentQueries:function(Se,St,tn){if(1&Se&&w.Suo(tn,ii,5),2&Se){let li;w.iGM(li=w.CRH())&&(St._lazyContent=li.first)}},viewQuery:function(Se,St){if(1&Se&&w.Gf(At,5),2&Se){let tn;w.iGM(tn=w.CRH())&&(St._body=tn.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(Se,St){2&Se&&w.ekj("mat-expanded",St.expanded)("_mat-animation-noopable","NoopAnimations"===St._animationMode)("mat-expansion-panel-spacing",St._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[w._Bn([{provide:yt,useValue:void 0}]),w.qOj,w.TTD],ngContentSelectors:Mn,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(Se,St){1&Se&&(w.F$t(Jt),w.Hsn(0),w.TgZ(1,"div",0,1),w.NdJ("@bodyExpansion.done",function(li){return St._bodyAnimationDone.next(li)}),w.TgZ(3,"div",2),w.Hsn(4,1),w.YNc(5,zt,0,0,"ng-template",3),w.qZA(),w.Hsn(6,2),w.qZA()),2&Se&&(w.xp6(1),w.Q6J("@bodyExpansion",St._getExpandedState())("id",St.id),w.uIk("aria-labelledby",St._headerId),w.xp6(4),w.Q6J("cdkPortalOutlet",St._portal))},dependencies:[Et.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Xt.bodyExpansion]},changeDetection:0}),ce})();class Jn{}const mn=(0,wt.sb)(Jn);let Tt=(()=>{class ce extends mn{constructor(Se,St,tn,li,Wi,Dn,ae){super(),this.panel=Se,this._element=St,this._focusMonitor=tn,this._changeDetectorRef=li,this._animationMode=Dn,this._parentChangeSubscription=he.w0.EMPTY;const $e=Se.accordion?Se.accordion._stateChanges.pipe((0,Qe.h)(Ot=>!(!Ot.hideToggle&&!Ot.togglePosition))):Ye.E;this.tabIndex=parseInt(ae||"")||0,this._parentChangeSubscription=(0,Ce.T)(Se.opened,Se.closed,$e,Se._inputChanges.pipe((0,Qe.h)(Ot=>!!(Ot.hideToggle||Ot.disabled||Ot.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),Se.closed.pipe((0,Qe.h)(()=>Se._containsFocus())).subscribe(()=>tn.focusVia(St,"program")),Wi&&(this.expandedHeight=Wi.expandedHeight,this.collapsedHeight=Wi.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const Se=this._isExpanded();return Se&&this.expandedHeight?this.expandedHeight:!Se&&this.collapsedHeight?this.collapsedHeight:null}_keydown(Se){switch(Se.keyCode){case Fn.L_:case Fn.K5:(0,Fn.Vb)(Se)||(Se.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(Se))}}focus(Se,St){Se?this._focusMonitor.focusVia(this._element,Se,St):this._element.nativeElement.focus(St)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(Se=>{Se&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return ce.\u0275fac=function(Se){return new(Se||ce)(w.Y36(Nn,1),w.Y36(w.SBq),w.Y36(et.tE),w.Y36(w.sBO),w.Y36(wi,8),w.Y36(w.QbO,8),w.$8M("tabindex"))},ce.\u0275cmp=w.Xpm({type:ce,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(Se,St){1&Se&&w.NdJ("click",function(){return St._toggle()})("keydown",function(li){return St._keydown(li)}),2&Se&&(w.uIk("id",St.panel._headerId)("tabindex",St.tabIndex)("aria-controls",St._getPanelId())("aria-expanded",St._isExpanded())("aria-disabled",St.panel.disabled),w.Udp("height",St._getHeaderHeight()),w.ekj("mat-expanded",St._isExpanded())("mat-expansion-toggle-indicator-after","after"===St._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===St._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===St._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[w.qOj],ngContentSelectors:He,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(Se,St){1&Se&&(w.F$t(Ne),w.TgZ(0,"span",0),w.Hsn(1),w.Hsn(2,1),w.Hsn(3,2),w.qZA(),w.YNc(4,Ke,1,1,"span",1)),2&Se&&(w.xp6(4),w.Q6J("ngIf",St._showToggle()))},dependencies:[dt.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[Xt.indicatorRotate]},changeDetection:0}),ce})(),Fe=(()=>{class ce{}return ce.\u0275fac=function(Se){return new(Se||ce)},ce.\u0275dir=w.lG2({type:ce,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),ce})(),ht=(()=>{class ce extends Oe{constructor(){super(...arguments),this._ownHeaders=new w.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(Se){this._hideToggle=(0,de.Ig)(Se)}ngAfterContentInit(){this._headers.changes.pipe((0,kt.O)(this._headers)).subscribe(Se=>{this._ownHeaders.reset(Se.filter(St=>St.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new et.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(Se){this._keyManager.onKeydown(Se)}_handleHeaderFocus(Se){this._keyManager.updateActiveItem(Se)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return ce.\u0275fac=function(){let ot;return function(St){return(ot||(ot=w.n5z(ce)))(St||ce)}}(),ce.\u0275dir=w.lG2({type:ce,selectors:[["mat-accordion"]],contentQueries:function(Se,St,tn){if(1&Se&&w.Suo(tn,Tt,5),2&Se){let li;w.iGM(li=w.CRH())&&(St._headers=li)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(Se,St){2&Se&&w.ekj("mat-accordion-multi",St.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[w._Bn([{provide:yt,useExisting:ce}]),w.qOj]}),ce})(),Xe=(()=>{class ce{}return ce.\u0275fac=function(Se){return new(Se||ce)},ce.\u0275mod=w.oAB({type:ce}),ce.\u0275inj=w.cJS({imports:[[dt.ez,wt.BQ,pt,Et.eL]]}),ce})()},7676:(ti,Ut,B)=>{"use strict";B.d(Ut,{G_:()=>jt,KE:()=>Bt,Eo:()=>mn,lN:()=>Je,hX:()=>ot});var w=B(1281),_=B(4650),de=B(9751),a=B(7579),he=B(8372);let st=(()=>{class ge{create(te){return typeof MutationObserver>"u"?null:new MutationObserver(te)}}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})(),nt=(()=>{class ge{constructor(te){this._mutationObserverFactory=te,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((te,it)=>this._cleanupObserver(it))}observe(te){const it=(0,w.fI)(te);return new de.y(Ht=>{const ni=this._observeElement(it).subscribe(Ht);return()=>{ni.unsubscribe(),this._unobserveElement(it)}})}_observeElement(te){if(this._observedElements.has(te))this._observedElements.get(te).count++;else{const it=new a.x,Ht=this._mutationObserverFactory.create(Rn=>it.next(Rn));Ht&&Ht.observe(te,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(te,{observer:Ht,stream:it,count:1})}return this._observedElements.get(te).stream}_unobserveElement(te){this._observedElements.has(te)&&(this._observedElements.get(te).count--,this._observedElements.get(te).count||this._cleanupObserver(te))}_cleanupObserver(te){if(this._observedElements.has(te)){const{observer:it,stream:Ht}=this._observedElements.get(te);it&&it.disconnect(),Ht.complete(),this._observedElements.delete(te)}}}return ge.\u0275fac=function(te){return new(te||ge)(_.LFG(st))},ge.\u0275prov=_.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})(),Oe=(()=>{class ge{constructor(te,it,Ht){this._contentObserver=te,this._elementRef=it,this._ngZone=Ht,this.event=new _.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(te){this._disabled=(0,w.Ig)(te),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(te){this._debounce=(0,w.su)(te),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const te=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?te.pipe((0,he.b)(this.debounce)):te).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return ge.\u0275fac=function(te){return new(te||ge)(_.Y36(nt),_.Y36(_.SBq),_.Y36(_.R0b))},ge.\u0275dir=_.lG2({type:ge,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),ge})(),ke=(()=>{class ge{}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275mod=_.oAB({type:ge}),ge.\u0275inj=_.cJS({providers:[st]}),ge})();var rt=B(6895),pt=B(3238),Et=B(445),dt=B(6451),wt=B(4968),et=B(8675),Zt=B(2722),kt=B(5698),Qe=B(7340),Hn=B(3353);const Fn=["connectionContainer"],Ye=["inputContainer"],Ce=["label"];function we(ge,pe){1&ge&&(_.ynx(0),_.TgZ(1,"div",14),_._UZ(2,"div",15)(3,"div",16)(4,"div",17),_.qZA(),_.TgZ(5,"div",18),_._UZ(6,"div",15)(7,"div",16)(8,"div",17),_.qZA(),_.BQk())}function At(ge,pe){1&ge&&(_.TgZ(0,"div",19),_.Hsn(1,1),_.qZA())}function zt(ge,pe){if(1&ge&&(_.ynx(0),_.Hsn(1,2),_.TgZ(2,"span"),_._uU(3),_.qZA(),_.BQk()),2&ge){const te=_.oxw(2);_.xp6(3),_.Oqu(te._control.placeholder)}}function Jt(ge,pe){1&ge&&_.Hsn(0,3,["*ngSwitchCase","true"])}function Mn(ge,pe){1&ge&&(_.TgZ(0,"span",23),_._uU(1," *"),_.qZA())}function Ke(ge,pe){if(1&ge){const te=_.EpF();_.TgZ(0,"label",20,21),_.NdJ("cdkObserveContent",function(){_.CHM(te);const Ht=_.oxw();return _.KtG(Ht.updateOutlineGap())}),_.YNc(2,zt,4,1,"ng-container",12),_.YNc(3,Jt,1,0,"ng-content",12),_.YNc(4,Mn,2,0,"span",22),_.qZA()}if(2&ge){const te=_.oxw();_.ekj("mat-empty",te._control.empty&&!te._shouldAlwaysFloat())("mat-form-field-empty",te._control.empty&&!te._shouldAlwaysFloat())("mat-accent","accent"==te.color)("mat-warn","warn"==te.color),_.Q6J("cdkObserveContentDisabled","outline"!=te.appearance)("id",te._labelId)("ngSwitch",te._hasLabel()),_.uIk("for",te._control.id)("aria-owns",te._control.id),_.xp6(2),_.Q6J("ngSwitchCase",!1),_.xp6(1),_.Q6J("ngSwitchCase",!0),_.xp6(1),_.Q6J("ngIf",!te.hideRequiredMarker&&te._control.required&&!te._control.disabled)}}function Ne(ge,pe){1&ge&&(_.TgZ(0,"div",24),_.Hsn(1,4),_.qZA())}function He(ge,pe){if(1&ge&&(_.TgZ(0,"div",25),_._UZ(1,"span",26),_.qZA()),2&ge){const te=_.oxw();_.xp6(1),_.ekj("mat-accent","accent"==te.color)("mat-warn","warn"==te.color)}}function yt(ge,pe){if(1&ge&&(_.TgZ(0,"div"),_.Hsn(1,5),_.qZA()),2&ge){const te=_.oxw();_.Q6J("@transitionMessages",te._subscriptAnimationState)}}function Tn(ge,pe){if(1&ge&&(_.TgZ(0,"div",30),_._uU(1),_.qZA()),2&ge){const te=_.oxw(2);_.Q6J("id",te._hintLabelId),_.xp6(1),_.Oqu(te.hintLabel)}}function Xt(ge,pe){if(1&ge&&(_.TgZ(0,"div",27),_.YNc(1,Tn,2,2,"div",28),_.Hsn(2,6),_._UZ(3,"div",29),_.Hsn(4,7),_.qZA()),2&ge){const te=_.oxw();_.Q6J("@transitionMessages",te._subscriptAnimationState),_.xp6(1),_.Q6J("ngIf",te.hintLabel)}}const ii=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],vi=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Nn=new _.OlP("MatError"),Jn={transitionMessages:(0,Qe.X$)("transitionMessages",[(0,Qe.SB)("enter",(0,Qe.oB)({opacity:1,transform:"translateY(0%)"})),(0,Qe.eR)("void => enter",[(0,Qe.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Qe.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let mn=(()=>{class ge{}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275dir=_.lG2({type:ge}),ge})();const Xe=new _.OlP("MatHint");let ot=(()=>{class ge{}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275dir=_.lG2({type:ge,selectors:[["mat-label"]]}),ge})(),Se=(()=>{class ge{}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275dir=_.lG2({type:ge,selectors:[["mat-placeholder"]]}),ge})();const St=new _.OlP("MatPrefix"),li=new _.OlP("MatSuffix");let Dn=0;const Ot=(0,pt.pj)(class{constructor(ge){this._elementRef=ge}},"primary"),on=new _.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),jt=new _.OlP("MatFormField");let Bt=(()=>{class ge extends Ot{constructor(te,it,Ht,Rn,ni,Ii,bn){super(te),this._changeDetectorRef=it,this._dir=Ht,this._defaults=Rn,this._platform=ni,this._ngZone=Ii,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new a.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Dn++,this._labelId="mat-form-field-label-"+Dn++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==bn,this.appearance=Rn&&Rn.appearance?Rn.appearance:"legacy",this._hideRequiredMarker=!(!Rn||null==Rn.hideRequiredMarker)&&Rn.hideRequiredMarker}get appearance(){return this._appearance}set appearance(te){const it=this._appearance;this._appearance=te||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&it!==te&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(te){this._hideRequiredMarker=(0,w.Ig)(te)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(te){this._hintLabel=te,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(te){te!==this._floatLabel&&(this._floatLabel=te||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(te){this._explicitFormFieldControl=te}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const te=this._control;te.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${te.controlType}`),te.stateChanges.pipe((0,et.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),te.ngControl&&te.ngControl.valueChanges&&te.ngControl.valueChanges.pipe((0,Zt.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Zt.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,dt.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,et.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,et.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,Zt.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(te){const it=this._control?this._control.ngControl:null;return it&&it[te]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,wt.R)(this._label.nativeElement,"transitionend").pipe((0,kt.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let te=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&te.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const it=this._hintChildren?this._hintChildren.find(Rn=>"start"===Rn.align):null,Ht=this._hintChildren?this._hintChildren.find(Rn=>"end"===Rn.align):null;it?te.push(it.id):this._hintLabel&&te.push(this._hintLabelId),Ht&&te.push(Ht.id)}else this._errorChildren&&te.push(...this._errorChildren.map(it=>it.id));this._control.setDescribedByIds(te)}}_validateControlChild(){}updateOutlineGap(){const te=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&te&&te.children.length&&te.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let it=0,Ht=0;const Rn=this._connectionContainerRef.nativeElement,ni=Rn.querySelectorAll(".mat-form-field-outline-start"),Ii=Rn.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const bn=Rn.getBoundingClientRect();if(0===bn.width&&0===bn.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Ji=this._getStartEnd(bn),ji=te.children,dn=this._getStartEnd(ji[0].getBoundingClientRect());let It=0;for(let ct=0;ct<ji.length;ct++)It+=ji[ct].offsetWidth;it=Math.abs(dn-Ji)-5,Ht=It>0?.75*It+10:0}for(let bn=0;bn<ni.length;bn++)ni[bn].style.width=`${it}px`;for(let bn=0;bn<Ii.length;bn++)Ii[bn].style.width=`${Ht}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(te){return this._dir&&"rtl"===this._dir.value?te.right:te.left}_isAttachedToDOM(){const te=this._elementRef.nativeElement;if(te.getRootNode){const it=te.getRootNode();return it&&it!==te}return document.documentElement.contains(te)}}return ge.\u0275fac=function(te){return new(te||ge)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(Et.Is,8),_.Y36(on,8),_.Y36(Hn.t4),_.Y36(_.R0b),_.Y36(_.QbO,8))},ge.\u0275cmp=_.Xpm({type:ge,selectors:[["mat-form-field"]],contentQueries:function(te,it,Ht){if(1&te&&(_.Suo(Ht,mn,5),_.Suo(Ht,mn,7),_.Suo(Ht,ot,5),_.Suo(Ht,ot,7),_.Suo(Ht,Se,5),_.Suo(Ht,Nn,5),_.Suo(Ht,Xe,5),_.Suo(Ht,St,5),_.Suo(Ht,li,5)),2&te){let Rn;_.iGM(Rn=_.CRH())&&(it._controlNonStatic=Rn.first),_.iGM(Rn=_.CRH())&&(it._controlStatic=Rn.first),_.iGM(Rn=_.CRH())&&(it._labelChildNonStatic=Rn.first),_.iGM(Rn=_.CRH())&&(it._labelChildStatic=Rn.first),_.iGM(Rn=_.CRH())&&(it._placeholderChild=Rn.first),_.iGM(Rn=_.CRH())&&(it._errorChildren=Rn),_.iGM(Rn=_.CRH())&&(it._hintChildren=Rn),_.iGM(Rn=_.CRH())&&(it._prefixChildren=Rn),_.iGM(Rn=_.CRH())&&(it._suffixChildren=Rn)}},viewQuery:function(te,it){if(1&te&&(_.Gf(Fn,7),_.Gf(Ye,5),_.Gf(Ce,5)),2&te){let Ht;_.iGM(Ht=_.CRH())&&(it._connectionContainerRef=Ht.first),_.iGM(Ht=_.CRH())&&(it._inputContainerRef=Ht.first),_.iGM(Ht=_.CRH())&&(it._label=Ht.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(te,it){2&te&&_.ekj("mat-form-field-appearance-standard","standard"==it.appearance)("mat-form-field-appearance-fill","fill"==it.appearance)("mat-form-field-appearance-outline","outline"==it.appearance)("mat-form-field-appearance-legacy","legacy"==it.appearance)("mat-form-field-invalid",it._control.errorState)("mat-form-field-can-float",it._canLabelFloat())("mat-form-field-should-float",it._shouldLabelFloat())("mat-form-field-has-label",it._hasFloatingLabel())("mat-form-field-hide-placeholder",it._hideControlPlaceholder())("mat-form-field-disabled",it._control.disabled)("mat-form-field-autofilled",it._control.autofilled)("mat-focused",it._control.focused)("ng-untouched",it._shouldForward("untouched"))("ng-touched",it._shouldForward("touched"))("ng-pristine",it._shouldForward("pristine"))("ng-dirty",it._shouldForward("dirty"))("ng-valid",it._shouldForward("valid"))("ng-invalid",it._shouldForward("invalid"))("ng-pending",it._shouldForward("pending"))("_mat-animation-noopable",!it._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[_._Bn([{provide:jt,useExisting:ge}]),_.qOj],ngContentSelectors:vi,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(te,it){1&te&&(_.F$t(ii),_.TgZ(0,"div",0)(1,"div",1,2),_.NdJ("click",function(Rn){return it._control.onContainerClick&&it._control.onContainerClick(Rn)}),_.YNc(3,we,9,0,"ng-container",3),_.YNc(4,At,2,0,"div",4),_.TgZ(5,"div",5,6),_.Hsn(7),_.TgZ(8,"span",7),_.YNc(9,Ke,5,16,"label",8),_.qZA()(),_.YNc(10,Ne,2,0,"div",9),_.qZA(),_.YNc(11,He,2,4,"div",10),_.TgZ(12,"div",11),_.YNc(13,yt,2,1,"div",12),_.YNc(14,Xt,5,2,"div",13),_.qZA()()),2&te&&(_.xp6(3),_.Q6J("ngIf","outline"==it.appearance),_.xp6(1),_.Q6J("ngIf",it._prefixChildren.length),_.xp6(5),_.Q6J("ngIf",it._hasFloatingLabel()),_.xp6(1),_.Q6J("ngIf",it._suffixChildren.length),_.xp6(1),_.Q6J("ngIf","outline"!=it.appearance),_.xp6(1),_.Q6J("ngSwitch",it._getDisplayedMessages()),_.xp6(1),_.Q6J("ngSwitchCase","error"),_.xp6(1),_.Q6J("ngSwitchCase","hint"))},dependencies:[rt.O5,rt.RF,Oe,rt.n9],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Jn.transitionMessages]},changeDetection:0}),ge})(),Je=(()=>{class ge{}return ge.\u0275fac=function(te){return new(te||ge)},ge.\u0275mod=_.oAB({type:ge}),ge.\u0275inj=_.cJS({imports:[[rt.ez,pt.BQ,ke],pt.BQ]}),ge})()},782:(ti,Ut,B)=>{"use strict";B.d(Ut,{DX:()=>Et,Il:()=>zt,N6:()=>Jt});var w=B(4650),_=B(3238),de=B(1281),a=B(445);const he=["*"];class ke{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const Ne=Math.max(...this.tracker);return Ne>1?this.rowCount+Ne-1:this.rowCount}update(Ne,He){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(Ne),this.tracker.fill(0,0,this.tracker.length),this.positions=He.map(yt=>this._trackTile(yt))}_trackTile(Ne){const He=this._findMatchingGap(Ne.colspan);return this._markTilePosition(He,Ne),this.columnIndex=He+Ne.colspan,new rt(this.rowIndex,He)}_findMatchingGap(Ne){let He=-1,yt=-1;do{this.columnIndex+Ne>this.tracker.length?(this._nextRow(),He=this.tracker.indexOf(0,this.columnIndex),yt=this._findGapEndIndex(He)):(He=this.tracker.indexOf(0,this.columnIndex),-1!=He?(yt=this._findGapEndIndex(He),this.columnIndex=He+1):(this._nextRow(),He=this.tracker.indexOf(0,this.columnIndex),yt=this._findGapEndIndex(He)))}while(yt-He<Ne||0==yt);return Math.max(He,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let Ne=0;Ne<this.tracker.length;Ne++)this.tracker[Ne]=Math.max(0,this.tracker[Ne]-1)}_findGapEndIndex(Ne){for(let He=Ne+1;He<this.tracker.length;He++)if(0!=this.tracker[He])return He;return this.tracker.length}_markTilePosition(Ne,He){for(let yt=0;yt<He.colspan;yt++)this.tracker[Ne+yt]=He.rowspan}}class rt{constructor(Ne,He){this.row=Ne,this.col=He}}const pt=new w.OlP("MAT_GRID_LIST");let Et=(()=>{class Ke{constructor(He,yt){this._element=He,this._gridList=yt,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(He){this._rowspan=Math.round((0,de.su)(He))}get colspan(){return this._colspan}set colspan(He){this._colspan=Math.round((0,de.su)(He))}_setStyle(He,yt){this._element.nativeElement.style[He]=yt}}return Ke.\u0275fac=function(He){return new(He||Ke)(w.Y36(w.SBq),w.Y36(pt,8))},Ke.\u0275cmp=w.Xpm({type:Ke,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(He,yt){2&He&&w.uIk("rowspan",yt.rowspan)("colspan",yt.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:he,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(He,yt){1&He&&(w.F$t(),w.TgZ(0,"div",0),w.Hsn(1),w.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Ke})();const kt=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class Qe{constructor(){this._rows=0,this._rowspan=0}init(Ne,He,yt,Tn){this._gutterSize=we(Ne),this._rows=He.rowCount,this._rowspan=He.rowspan,this._cols=yt,this._direction=Tn}getBaseTileSize(Ne,He){return`(${Ne}% - (${this._gutterSize} * ${He}))`}getTilePosition(Ne,He){return 0===He?"0":Ce(`(${Ne} + ${this._gutterSize}) * ${He}`)}getTileSize(Ne,He){return`(${Ne} * ${He}) + (${He-1} * ${this._gutterSize})`}setStyle(Ne,He,yt){let Tn=100/this._cols,Xt=(this._cols-1)/this._cols;this.setColStyles(Ne,yt,Tn,Xt),this.setRowStyles(Ne,He,Tn,Xt)}setColStyles(Ne,He,yt,Tn){let Xt=this.getBaseTileSize(yt,Tn);Ne._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(Xt,He)),Ne._setStyle("width",Ce(this.getTileSize(Xt,Ne.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(Ne){return`${this._rowspan} * ${this.getTileSize(Ne,1)}`}getComputedHeight(){return null}}class Hn extends Qe{constructor(Ne){super(),this.fixedRowHeight=Ne}init(Ne,He,yt,Tn){super.init(Ne,He,yt,Tn),this.fixedRowHeight=we(this.fixedRowHeight),kt.test(this.fixedRowHeight)}setRowStyles(Ne,He){Ne._setStyle("top",this.getTilePosition(this.fixedRowHeight,He)),Ne._setStyle("height",Ce(this.getTileSize(this.fixedRowHeight,Ne.rowspan)))}getComputedHeight(){return["height",Ce(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(Ne){Ne._setListStyle(["height",null]),Ne._tiles&&Ne._tiles.forEach(He=>{He._setStyle("top",null),He._setStyle("height",null)})}}class Fn extends Qe{constructor(Ne){super(),this._parseRatio(Ne)}setRowStyles(Ne,He,yt,Tn){this.baseTileHeight=this.getBaseTileSize(yt/this.rowHeightRatio,Tn),Ne._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,He)),Ne._setStyle("paddingTop",Ce(this.getTileSize(this.baseTileHeight,Ne.rowspan)))}getComputedHeight(){return["paddingBottom",Ce(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(Ne){Ne._setListStyle(["paddingBottom",null]),Ne._tiles.forEach(He=>{He._setStyle("marginTop",null),He._setStyle("paddingTop",null)})}_parseRatio(Ne){const He=Ne.split(":");this.rowHeightRatio=parseFloat(He[0])/parseFloat(He[1])}}class Ye extends Qe{setRowStyles(Ne,He){let Xt=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);Ne._setStyle("top",this.getTilePosition(Xt,He)),Ne._setStyle("height",Ce(this.getTileSize(Xt,Ne.rowspan)))}reset(Ne){Ne._tiles&&Ne._tiles.forEach(He=>{He._setStyle("top",null),He._setStyle("height",null)})}}function Ce(Ke){return`calc(${Ke})`}function we(Ke){return Ke.match(/([A-Za-z%]+)$/)?Ke:`${Ke}px`}let zt=(()=>{class Ke{constructor(He,yt){this._element=He,this._dir=yt,this._gutter="1px"}get cols(){return this._cols}set cols(He){this._cols=Math.max(1,Math.round((0,de.su)(He)))}get gutterSize(){return this._gutter}set gutterSize(He){this._gutter=`${He??""}`}get rowHeight(){return this._rowHeight}set rowHeight(He){const yt=`${He??""}`;yt!==this._rowHeight&&(this._rowHeight=yt,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(He){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===He?new Ye:He&&He.indexOf(":")>-1?new Fn(He):new Hn(He)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new ke);const He=this._tileCoordinator,yt=this._tiles.filter(Xt=>!Xt._gridList||Xt._gridList===this),Tn=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,yt),this._tileStyler.init(this.gutterSize,He,this.cols,Tn),yt.forEach((Xt,ii)=>{const vi=He.positions[ii];this._tileStyler.setStyle(Xt,vi.row,vi.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(He){He&&(this._element.nativeElement.style[He[0]]=He[1])}}return Ke.\u0275fac=function(He){return new(He||Ke)(w.Y36(w.SBq),w.Y36(a.Is,8))},Ke.\u0275cmp=w.Xpm({type:Ke,selectors:[["mat-grid-list"]],contentQueries:function(He,yt,Tn){if(1&He&&w.Suo(Tn,Et,5),2&He){let Xt;w.iGM(Xt=w.CRH())&&(yt._tiles=Xt)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(He,yt){2&He&&w.uIk("cols",yt.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[w._Bn([{provide:pt,useExisting:Ke}])],ngContentSelectors:he,decls:2,vars:0,template:function(He,yt){1&He&&(w.F$t(),w.TgZ(0,"div"),w.Hsn(1),w.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Ke})(),Jt=(()=>{class Ke{}return Ke.\u0275fac=function(He){return new(He||Ke)},Ke.\u0275mod=w.oAB({type:Ke}),Ke.\u0275inj=w.cJS({imports:[[_.uc,_.BQ],_.uc,_.BQ]}),Ke})()},7392:(ti,Ut,B)=>{"use strict";B.d(Ut,{Hw:()=>Li,Ps:()=>Jn});var w=B(4650),_=B(3238),de=B(1281),a=B(6895),he=B(9646),st=B(2843),nt=B(4128),Oe=B(727),ke=B(8505),rt=B(4004),pt=B(262),Et=B(8746),dt=B(3099),wt=B(5698),et=B(529),Zt=B(1481);const kt=["*"];let Qe;function Fn(mn){return function Hn(){if(void 0===Qe&&(Qe=null,typeof window<"u")){const mn=window;void 0!==mn.trustedTypes&&(Qe=mn.trustedTypes.createPolicy("angular#components",{createHTML:Tt=>Tt}))}return Qe}()?.createHTML(mn)||mn}function Ye(mn){return Error(`Unable to find icon with the name "${mn}"`)}function we(mn){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${mn}".`)}function At(mn){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${mn}".`)}class zt{constructor(Tt,Ge,Fe){this.url=Tt,this.svgText=Ge,this.options=Fe}}let Jt=(()=>{class mn{constructor(Ge,Fe,ht,Xe){this._httpClient=Ge,this._sanitizer=Fe,this._errorHandler=Xe,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=ht}addSvgIcon(Ge,Fe,ht){return this.addSvgIconInNamespace("",Ge,Fe,ht)}addSvgIconLiteral(Ge,Fe,ht){return this.addSvgIconLiteralInNamespace("",Ge,Fe,ht)}addSvgIconInNamespace(Ge,Fe,ht,Xe){return this._addSvgIconConfig(Ge,Fe,new zt(ht,null,Xe))}addSvgIconResolver(Ge){return this._resolvers.push(Ge),this}addSvgIconLiteralInNamespace(Ge,Fe,ht,Xe){const ce=this._sanitizer.sanitize(w.q3G.HTML,ht);if(!ce)throw At(ht);const ot=Fn(ce);return this._addSvgIconConfig(Ge,Fe,new zt("",ot,Xe))}addSvgIconSet(Ge,Fe){return this.addSvgIconSetInNamespace("",Ge,Fe)}addSvgIconSetLiteral(Ge,Fe){return this.addSvgIconSetLiteralInNamespace("",Ge,Fe)}addSvgIconSetInNamespace(Ge,Fe,ht){return this._addSvgIconSetConfig(Ge,new zt(Fe,null,ht))}addSvgIconSetLiteralInNamespace(Ge,Fe,ht){const Xe=this._sanitizer.sanitize(w.q3G.HTML,Fe);if(!Xe)throw At(Fe);const ce=Fn(Xe);return this._addSvgIconSetConfig(Ge,new zt("",ce,ht))}registerFontClassAlias(Ge,Fe=Ge){return this._fontCssClassesByAlias.set(Ge,Fe),this}classNameForFontAlias(Ge){return this._fontCssClassesByAlias.get(Ge)||Ge}setDefaultFontSetClass(Ge){return this._defaultFontSetClass=Ge,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Ge){const Fe=this._sanitizer.sanitize(w.q3G.RESOURCE_URL,Ge);if(!Fe)throw we(Ge);const ht=this._cachedIconsByUrl.get(Fe);return ht?(0,he.of)(Ne(ht)):this._loadSvgIconFromConfig(new zt(Ge,null)).pipe((0,ke.b)(Xe=>this._cachedIconsByUrl.set(Fe,Xe)),(0,rt.U)(Xe=>Ne(Xe)))}getNamedSvgIcon(Ge,Fe=""){const ht=He(Fe,Ge);let Xe=this._svgIconConfigs.get(ht);if(Xe)return this._getSvgFromConfig(Xe);if(Xe=this._getIconConfigFromResolvers(Fe,Ge),Xe)return this._svgIconConfigs.set(ht,Xe),this._getSvgFromConfig(Xe);const ce=this._iconSetConfigs.get(Fe);return ce?this._getSvgFromIconSetConfigs(Ge,ce):(0,st._)(Ye(ht))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Ge){return Ge.svgText?(0,he.of)(Ne(this._svgElementFromConfig(Ge))):this._loadSvgIconFromConfig(Ge).pipe((0,rt.U)(Fe=>Ne(Fe)))}_getSvgFromIconSetConfigs(Ge,Fe){const ht=this._extractIconWithNameFromAnySet(Ge,Fe);if(ht)return(0,he.of)(ht);const Xe=Fe.filter(ce=>!ce.svgText).map(ce=>this._loadSvgIconSetFromConfig(ce).pipe((0,pt.K)(ot=>{const St=`Loading icon set URL: ${this._sanitizer.sanitize(w.q3G.RESOURCE_URL,ce.url)} failed: ${ot.message}`;return this._errorHandler.handleError(new Error(St)),(0,he.of)(null)})));return(0,nt.D)(Xe).pipe((0,rt.U)(()=>{const ce=this._extractIconWithNameFromAnySet(Ge,Fe);if(!ce)throw Ye(Ge);return ce}))}_extractIconWithNameFromAnySet(Ge,Fe){for(let ht=Fe.length-1;ht>=0;ht--){const Xe=Fe[ht];if(Xe.svgText&&Xe.svgText.toString().indexOf(Ge)>-1){const ce=this._svgElementFromConfig(Xe),ot=this._extractSvgIconFromSet(ce,Ge,Xe.options);if(ot)return ot}}return null}_loadSvgIconFromConfig(Ge){return this._fetchIcon(Ge).pipe((0,ke.b)(Fe=>Ge.svgText=Fe),(0,rt.U)(()=>this._svgElementFromConfig(Ge)))}_loadSvgIconSetFromConfig(Ge){return Ge.svgText?(0,he.of)(null):this._fetchIcon(Ge).pipe((0,ke.b)(Fe=>Ge.svgText=Fe))}_extractSvgIconFromSet(Ge,Fe,ht){const Xe=Ge.querySelector(`[id="${Fe}"]`);if(!Xe)return null;const ce=Xe.cloneNode(!0);if(ce.removeAttribute("id"),"svg"===ce.nodeName.toLowerCase())return this._setSvgAttributes(ce,ht);if("symbol"===ce.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(ce),ht);const ot=this._svgElementFromString(Fn("<svg></svg>"));return ot.appendChild(ce),this._setSvgAttributes(ot,ht)}_svgElementFromString(Ge){const Fe=this._document.createElement("DIV");Fe.innerHTML=Ge;const ht=Fe.querySelector("svg");if(!ht)throw Error("<svg> tag not found");return ht}_toSvgElement(Ge){const Fe=this._svgElementFromString(Fn("<svg></svg>")),ht=Ge.attributes;for(let Xe=0;Xe<ht.length;Xe++){const{name:ce,value:ot}=ht[Xe];"id"!==ce&&Fe.setAttribute(ce,ot)}for(let Xe=0;Xe<Ge.childNodes.length;Xe++)Ge.childNodes[Xe].nodeType===this._document.ELEMENT_NODE&&Fe.appendChild(Ge.childNodes[Xe].cloneNode(!0));return Fe}_setSvgAttributes(Ge,Fe){return Ge.setAttribute("fit",""),Ge.setAttribute("height","100%"),Ge.setAttribute("width","100%"),Ge.setAttribute("preserveAspectRatio","xMidYMid meet"),Ge.setAttribute("focusable","false"),Fe&&Fe.viewBox&&Ge.setAttribute("viewBox",Fe.viewBox),Ge}_fetchIcon(Ge){const{url:Fe,options:ht}=Ge,Xe=ht?.withCredentials??!1;if(!this._httpClient)throw function Ce(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Fe)throw Error(`Cannot fetch icon from URL "${Fe}".`);const ce=this._sanitizer.sanitize(w.q3G.RESOURCE_URL,Fe);if(!ce)throw we(Fe);const ot=this._inProgressUrlFetches.get(ce);if(ot)return ot;const Se=this._httpClient.get(ce,{responseType:"text",withCredentials:Xe}).pipe((0,rt.U)(St=>Fn(St)),(0,Et.x)(()=>this._inProgressUrlFetches.delete(ce)),(0,dt.B)());return this._inProgressUrlFetches.set(ce,Se),Se}_addSvgIconConfig(Ge,Fe,ht){return this._svgIconConfigs.set(He(Ge,Fe),ht),this}_addSvgIconSetConfig(Ge,Fe){const ht=this._iconSetConfigs.get(Ge);return ht?ht.push(Fe):this._iconSetConfigs.set(Ge,[Fe]),this}_svgElementFromConfig(Ge){if(!Ge.svgElement){const Fe=this._svgElementFromString(Ge.svgText);this._setSvgAttributes(Fe,Ge.options),Ge.svgElement=Fe}return Ge.svgElement}_getIconConfigFromResolvers(Ge,Fe){for(let ht=0;ht<this._resolvers.length;ht++){const Xe=this._resolvers[ht](Fe,Ge);if(Xe)return yt(Xe)?new zt(Xe.url,null,Xe.options):new zt(Xe,null)}}}return mn.\u0275fac=function(Ge){return new(Ge||mn)(w.LFG(et.eN,8),w.LFG(Zt.H7),w.LFG(a.K0,8),w.LFG(w.qLn))},mn.\u0275prov=w.Yz7({token:mn,factory:mn.\u0275fac,providedIn:"root"}),mn})();function Ne(mn){return mn.cloneNode(!0)}function He(mn,Tt){return mn+":"+Tt}function yt(mn){return!(!mn.url||!mn.options)}const Tn=(0,_.pj)(class{constructor(mn){this._elementRef=mn}}),Xt=new w.OlP("mat-icon-location",{providedIn:"root",factory:function ii(){const mn=(0,w.f3M)(a.K0),Tt=mn?mn.location:null;return{getPathname:()=>Tt?Tt.pathname+Tt.search:""}}}),vi=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],wi=vi.map(mn=>`[${mn}]`).join(", "),Nn=/^url\(['"]?#(.*?)['"]?\)$/;let Li=(()=>{class mn extends Tn{constructor(Ge,Fe,ht,Xe,ce){super(Ge),this._iconRegistry=Fe,this._location=Xe,this._errorHandler=ce,this._inline=!1,this._currentIconFetch=Oe.w0.EMPTY,ht||Ge.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Ge){this._inline=(0,de.Ig)(Ge)}get svgIcon(){return this._svgIcon}set svgIcon(Ge){Ge!==this._svgIcon&&(Ge?this._updateSvgIcon(Ge):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Ge)}get fontSet(){return this._fontSet}set fontSet(Ge){const Fe=this._cleanupFontValue(Ge);Fe!==this._fontSet&&(this._fontSet=Fe,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Ge){const Fe=this._cleanupFontValue(Ge);Fe!==this._fontIcon&&(this._fontIcon=Fe,this._updateFontIconClasses())}_splitIconName(Ge){if(!Ge)return["",""];const Fe=Ge.split(":");switch(Fe.length){case 1:return["",Fe[0]];case 2:return Fe;default:throw Error(`Invalid icon name: "${Ge}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Ge=this._elementsWithExternalReferences;if(Ge&&Ge.size){const Fe=this._location.getPathname();Fe!==this._previousPath&&(this._previousPath=Fe,this._prependPathToReferences(Fe))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Ge){this._clearSvgElement();const Fe=Ge.querySelectorAll("style");for(let Xe=0;Xe<Fe.length;Xe++)Fe[Xe].textContent+=" ";const ht=this._location.getPathname();this._previousPath=ht,this._cacheChildrenWithExternalReferences(Ge),this._prependPathToReferences(ht),this._elementRef.nativeElement.appendChild(Ge)}_clearSvgElement(){const Ge=this._elementRef.nativeElement;let Fe=Ge.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Fe--;){const ht=Ge.childNodes[Fe];(1!==ht.nodeType||"svg"===ht.nodeName.toLowerCase())&&ht.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Ge=this._elementRef.nativeElement,Fe=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Fe!=this._previousFontSetClass&&(this._previousFontSetClass&&Ge.classList.remove(this._previousFontSetClass),Fe&&Ge.classList.add(Fe),this._previousFontSetClass=Fe),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Ge.classList.remove(this._previousFontIconClass),this.fontIcon&&Ge.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Ge){return"string"==typeof Ge?Ge.trim().split(" ")[0]:Ge}_prependPathToReferences(Ge){const Fe=this._elementsWithExternalReferences;Fe&&Fe.forEach((ht,Xe)=>{ht.forEach(ce=>{Xe.setAttribute(ce.name,`url('${Ge}#${ce.value}')`)})})}_cacheChildrenWithExternalReferences(Ge){const Fe=Ge.querySelectorAll(wi),ht=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Xe=0;Xe<Fe.length;Xe++)vi.forEach(ce=>{const ot=Fe[Xe],Se=ot.getAttribute(ce),St=Se?Se.match(Nn):null;if(St){let tn=ht.get(ot);tn||(tn=[],ht.set(ot,tn)),tn.push({name:ce,value:St[1]})}})}_updateSvgIcon(Ge){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Ge){const[Fe,ht]=this._splitIconName(Ge);Fe&&(this._svgNamespace=Fe),ht&&(this._svgName=ht),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(ht,Fe).pipe((0,wt.q)(1)).subscribe(Xe=>this._setSvgElement(Xe),Xe=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Fe}:${ht}! ${Xe.message}`))})}}}return mn.\u0275fac=function(Ge){return new(Ge||mn)(w.Y36(w.SBq),w.Y36(Jt),w.$8M("aria-hidden"),w.Y36(Xt),w.Y36(w.qLn))},mn.\u0275cmp=w.Xpm({type:mn,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Ge,Fe){2&Ge&&(w.uIk("data-mat-icon-type",Fe._usingFontIcon()?"font":"svg")("data-mat-icon-name",Fe._svgName||Fe.fontIcon)("data-mat-icon-namespace",Fe._svgNamespace||Fe.fontSet),w.ekj("mat-icon-inline",Fe.inline)("mat-icon-no-color","primary"!==Fe.color&&"accent"!==Fe.color&&"warn"!==Fe.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[w.qOj],ngContentSelectors:kt,decls:1,vars:0,template:function(Ge,Fe){1&Ge&&(w.F$t(),w.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),mn})(),Jn=(()=>{class mn{}return mn.\u0275fac=function(Ge){return new(Ge||mn)},mn.\u0275mod=w.oAB({type:mn}),mn.\u0275inj=w.cJS({imports:[[_.BQ],_.BQ]}),mn})()},4144:(ti,Ut,B)=>{"use strict";B.d(Ut,{Nt:()=>Hn,c:()=>Fn});var w=B(1281),_=B(3353),de=B(4650),a=B(515),he=B(7579);const st=(0,_.i$)({passive:!0});let nt=(()=>{class Ye{constructor(we,At){this._platform=we,this._ngZone=At,this._monitoredElements=new Map}monitor(we){if(!this._platform.isBrowser)return a.E;const At=(0,w.fI)(we),zt=this._monitoredElements.get(At);if(zt)return zt.subject;const Jt=new he.x,Mn="cdk-text-field-autofilled",Ke=Ne=>{"cdk-text-field-autofill-start"!==Ne.animationName||At.classList.contains(Mn)?"cdk-text-field-autofill-end"===Ne.animationName&&At.classList.contains(Mn)&&(At.classList.remove(Mn),this._ngZone.run(()=>Jt.next({target:Ne.target,isAutofilled:!1}))):(At.classList.add(Mn),this._ngZone.run(()=>Jt.next({target:Ne.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{At.addEventListener("animationstart",Ke,st),At.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(At,{subject:Jt,unlisten:()=>{At.removeEventListener("animationstart",Ke,st)}}),Jt}stopMonitoring(we){const At=(0,w.fI)(we),zt=this._monitoredElements.get(At);zt&&(zt.unlisten(),zt.subject.complete(),At.classList.remove("cdk-text-field-autofill-monitored"),At.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(At))}ngOnDestroy(){this._monitoredElements.forEach((we,At)=>this.stopMonitoring(At))}}return Ye.\u0275fac=function(we){return new(we||Ye)(de.LFG(_.t4),de.LFG(de.R0b))},Ye.\u0275prov=de.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"}),Ye})(),rt=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=de.oAB({type:Ye}),Ye.\u0275inj=de.cJS({imports:[[_.ud]]}),Ye})();var pt=B(4006),Et=B(3238),dt=B(7676);const et=new de.OlP("MAT_INPUT_VALUE_ACCESSOR"),Zt=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let kt=0;const Qe=(0,Et.FD)(class{constructor(Ye,Ce,we,At){this._defaultErrorStateMatcher=Ye,this._parentForm=Ce,this._parentFormGroup=we,this.ngControl=At}});let Hn=(()=>{class Ye extends Qe{constructor(we,At,zt,Jt,Mn,Ke,Ne,He,yt,Tn){super(Ke,Jt,Mn,zt),this._elementRef=we,this._platform=At,this._autofillMonitor=He,this._formField=Tn,this._uid="mat-input-"+kt++,this.focused=!1,this.stateChanges=new he.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(vi=>(0,_.qK)().has(vi));const Xt=this._elementRef.nativeElement,ii=Xt.nodeName.toLowerCase();this._inputValueAccessor=Ne||Xt,this._previousNativeValue=this.value,this.id=this.id,At.IOS&&yt.runOutsideAngular(()=>{we.nativeElement.addEventListener("keyup",vi=>{const wi=vi.target;!wi.value&&0===wi.selectionStart&&0===wi.selectionEnd&&(wi.setSelectionRange(1,1),wi.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ii,this._isTextarea="textarea"===ii,this._isInFormField=!!Tn,this._isNativeSelect&&(this.controlType=Xt.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(we){this._disabled=(0,w.Ig)(we),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(we){this._id=we||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(pt.kI.required)??!1}set required(we){this._required=(0,w.Ig)(we)}get type(){return this._type}set type(we){this._type=we||"text",this._validateType(),!this._isTextarea&&(0,_.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(we){we!==this.value&&(this._inputValueAccessor.value=we,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(we){this._readonly=(0,w.Ig)(we)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(we=>{this.autofilled=we.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(we){this._elementRef.nativeElement.focus(we)}_focusChanged(we){we!==this.focused&&(this.focused=we,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const we=this._formField?._hideControlPlaceholder?.()?null:this.placeholder;if(we!==this._previousPlaceholder){const At=this._elementRef.nativeElement;this._previousPlaceholder=we,we?At.setAttribute("placeholder",we):At.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const we=this._elementRef.nativeElement.value;this._previousNativeValue!==we&&(this._previousNativeValue=we,this.stateChanges.next())}_validateType(){Zt.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let we=this._elementRef.nativeElement.validity;return we&&we.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const we=this._elementRef.nativeElement,At=we.options[0];return this.focused||we.multiple||!this.empty||!!(we.selectedIndex>-1&&At&&At.label)}return this.focused||!this.empty}setDescribedByIds(we){we.length?this._elementRef.nativeElement.setAttribute("aria-describedby",we.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const we=this._elementRef.nativeElement;return this._isNativeSelect&&(we.multiple||we.size>1)}}return Ye.\u0275fac=function(we){return new(we||Ye)(de.Y36(de.SBq),de.Y36(_.t4),de.Y36(pt.a5,10),de.Y36(pt.F,8),de.Y36(pt.sg,8),de.Y36(Et.rD),de.Y36(et,10),de.Y36(nt),de.Y36(de.R0b),de.Y36(dt.G_,8))},Ye.\u0275dir=de.lG2({type:Ye,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(we,At){1&we&&de.NdJ("focus",function(){return At._focusChanged(!0)})("blur",function(){return At._focusChanged(!1)})("input",function(){return At._onInput()}),2&we&&(de.Ikx("disabled",At.disabled)("required",At.required),de.uIk("id",At.id)("data-placeholder",At.placeholder)("readonly",At.readonly&&!At._isNativeSelect||null)("aria-invalid",At.empty&&At.required?null:At.errorState)("aria-required",At.required),de.ekj("mat-input-server",At._isServer)("mat-native-select-inline",At._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[de._Bn([{provide:dt.Eo,useExisting:Ye}]),de.qOj,de.TTD]}),Ye})(),Fn=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=de.oAB({type:Ye}),Ye.\u0275inj=de.cJS({providers:[Et.rD],imports:[[rt,dt.lN,Et.BQ],rt,dt.lN]}),Ye})()},4633:(ti,Ut,B)=>{"use strict";B.d(Ut,{Tg:()=>yt,ie:()=>Li});var w=B(6895),_=B(4650),de=B(3238),a=B(1281),he=B(7579),st=B(2722);B(8675),B(2687),B(5017),B(9521),B(4006);let dt=(()=>{class Jn{}return Jn.\u0275fac=function(Tt){return new(Tt||Jn)},Jn.\u0275mod=_.oAB({type:Jn}),Jn.\u0275inj=_.cJS({imports:[[de.BQ],de.BQ]}),Jn})();const Zt=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],kt=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],we=(0,de.Kr)(class{}),At=new _.OlP("MatList"),zt=new _.OlP("MatNavList");let Ke=(()=>{class Jn{}return Jn.\u0275fac=function(Tt){return new(Tt||Jn)},Jn.\u0275dir=_.lG2({type:Jn,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),Jn})(),Ne=(()=>{class Jn{}return Jn.\u0275fac=function(Tt){return new(Tt||Jn)},Jn.\u0275dir=_.lG2({type:Jn,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),Jn})(),yt=(()=>{class Jn extends we{constructor(Tt,Ge,Fe,ht){super(),this._element=Tt,this._isInteractiveList=!1,this._destroyed=new he.x,this._disabled=!1,this._isInteractiveList=!!(Fe||ht&&"action-list"===ht._getListType()),this._list=Fe||ht;const Xe=this._getHostElement();"button"===Xe.nodeName.toLowerCase()&&!Xe.hasAttribute("type")&&Xe.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,st.R)(this._destroyed)).subscribe(()=>{Ge.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(Tt){this._disabled=(0,a.Ig)(Tt)}ngAfterContentInit(){(0,de.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return Jn.\u0275fac=function(Tt){return new(Tt||Jn)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(zt,8),_.Y36(At,8))},Jn.\u0275cmp=_.Xpm({type:Jn,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(Tt,Ge,Fe){if(1&Tt&&(_.Suo(Fe,Ke,5),_.Suo(Fe,Ne,5),_.Suo(Fe,de.X2,5)),2&Tt){let ht;_.iGM(ht=_.CRH())&&(Ge._avatar=ht.first),_.iGM(ht=_.CRH())&&(Ge._icon=ht.first),_.iGM(ht=_.CRH())&&(Ge._lines=ht)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(Tt,Ge){2&Tt&&_.ekj("mat-list-item-disabled",Ge.disabled)("mat-list-item-avatar",Ge._avatar||Ge._icon)("mat-list-item-with-avatar",Ge._avatar||Ge._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[_.qOj],ngContentSelectors:kt,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(Tt,Ge){1&Tt&&(_.F$t(Zt),_.TgZ(0,"div",0),_._UZ(1,"div",1),_.Hsn(2),_.TgZ(3,"div",2),_.Hsn(4,1),_.qZA(),_.Hsn(5,2),_.qZA()),2&Tt&&(_.xp6(1),_.Q6J("matRippleTrigger",Ge._getHostElement())("matRippleDisabled",Ge._isRippleDisabled()))},dependencies:[de.wG],encapsulation:2,changeDetection:0}),Jn})(),Li=(()=>{class Jn{}return Jn.\u0275fac=function(Tt){return new(Tt||Jn)},Jn.\u0275mod=_.oAB({type:Jn}),Jn.\u0275inj=_.cJS({imports:[[de.uc,de.si,de.BQ,de.us,w.ez],de.uc,de.BQ,de.us,dt]}),Jn})()},7717:(ti,Ut,B)=>{"use strict";B.d(Ut,{$g:()=>Qe,Cq:()=>Hn});var w=B(4650),_=B(6895),de=B(3238),a=B(1281),he=B(3353);function st(Fn,Ye){if(1&Fn&&(w.O4$(),w._UZ(0,"circle",3)),2&Fn){const Ce=w.oxw();w.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+Ce._spinnerAnimationLabel)("stroke-dashoffset",Ce._getStrokeDashOffset(),"px")("stroke-dasharray",Ce._getStrokeCircumference(),"px")("stroke-width",Ce._getCircleStrokeWidth(),"%"),w.uIk("r",Ce._getCircleRadius())}}function nt(Fn,Ye){if(1&Fn&&(w.O4$(),w._UZ(0,"circle",3)),2&Fn){const Ce=w.oxw();w.Udp("stroke-dashoffset",Ce._getStrokeDashOffset(),"px")("stroke-dasharray",Ce._getStrokeCircumference(),"px")("stroke-width",Ce._getCircleStrokeWidth(),"%"),w.uIk("r",Ce._getCircleRadius())}}function Oe(Fn,Ye){if(1&Fn&&(w.O4$(),w._UZ(0,"circle",3)),2&Fn){const Ce=w.oxw();w.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+Ce._spinnerAnimationLabel)("stroke-dashoffset",Ce._getStrokeDashOffset(),"px")("stroke-dasharray",Ce._getStrokeCircumference(),"px")("stroke-width",Ce._getCircleStrokeWidth(),"%"),w.uIk("r",Ce._getCircleRadius())}}function ke(Fn,Ye){if(1&Fn&&(w.O4$(),w._UZ(0,"circle",3)),2&Fn){const Ce=w.oxw();w.Udp("stroke-dashoffset",Ce._getStrokeDashOffset(),"px")("stroke-dasharray",Ce._getStrokeCircumference(),"px")("stroke-width",Ce._getCircleStrokeWidth(),"%"),w.uIk("r",Ce._getCircleRadius())}}const dt=(0,de.pj)(class{constructor(Fn){this._elementRef=Fn}},"primary"),wt=new w.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function et(){return{diameter:100}}});class kt extends dt{constructor(Ye,Ce,we,At,zt){super(Ye),this._document=we,this._diameter=100,this._value=0,this.mode="determinate";const Jt=kt._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Jt.has(we.head)||Jt.set(we.head,new Set([100])),this._noopAnimations="NoopAnimations"===At&&!!zt&&!zt._forceAnimations,zt&&(zt.diameter&&(this.diameter=zt.diameter),zt.strokeWidth&&(this.strokeWidth=zt.strokeWidth))}get diameter(){return this._diameter}set diameter(Ye){this._diameter=(0,a.su)(Ye),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(Ye){this._strokeWidth=(0,a.su)(Ye)}get value(){return"determinate"===this.mode?this._value:0}set value(Ye){this._value=Math.max(0,Math.min(100,(0,a.su)(Ye)))}ngOnInit(){const Ye=this._elementRef.nativeElement;this._styleRoot=(0,he.kV)(Ye)||this._document.head,this._attachStyleNode(),Ye.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const Ye=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${Ye} ${Ye}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const Ye=this._styleRoot,Ce=this._diameter,we=kt._diameters;let At=we.get(Ye);if(!At||!At.has(Ce)){const zt=this._document.createElement("style");zt.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),zt.textContent=this._getAnimationText(),Ye.appendChild(zt),At||(At=new Set,we.set(Ye,At)),At.add(Ce)}}_getAnimationText(){const Ye=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*Ye).replace(/END_VALUE/g,""+.2*Ye).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}kt._diameters=new WeakMap,kt.\u0275fac=function(Ye){return new(Ye||kt)(w.Y36(w.SBq),w.Y36(he.t4),w.Y36(_.K0,8),w.Y36(w.QbO,8),w.Y36(wt))},kt.\u0275cmp=w.Xpm({type:kt,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(Ye,Ce){2&Ye&&(w.uIk("aria-valuemin","determinate"===Ce.mode?0:null)("aria-valuemax","determinate"===Ce.mode?100:null)("aria-valuenow","determinate"===Ce.mode?Ce.value:null)("mode",Ce.mode),w.Udp("width",Ce.diameter,"px")("height",Ce.diameter,"px"),w.ekj("_mat-animation-noopable",Ce._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[w.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(Ye,Ce){1&Ye&&(w.O4$(),w.TgZ(0,"svg",0),w.YNc(1,st,1,9,"circle",1),w.YNc(2,nt,1,7,"circle",2),w.qZA()),2&Ye&&(w.Udp("width",Ce.diameter,"px")("height",Ce.diameter,"px"),w.Q6J("ngSwitch","indeterminate"===Ce.mode),w.uIk("viewBox",Ce._getViewBox()),w.xp6(1),w.Q6J("ngSwitchCase",!0),w.xp6(1),w.Q6J("ngSwitchCase",!1))},dependencies:[_.RF,_.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Qe=(()=>{class Fn extends kt{constructor(Ce,we,At,zt,Jt){super(Ce,we,At,zt,Jt),this.mode="indeterminate"}}return Fn.\u0275fac=function(Ce){return new(Ce||Fn)(w.Y36(w.SBq),w.Y36(he.t4),w.Y36(_.K0,8),w.Y36(w.QbO,8),w.Y36(wt))},Fn.\u0275cmp=w.Xpm({type:Fn,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(Ce,we){2&Ce&&(w.Udp("width",we.diameter,"px")("height",we.diameter,"px"),w.ekj("_mat-animation-noopable",we._noopAnimations))},inputs:{color:"color"},features:[w.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(Ce,we){1&Ce&&(w.O4$(),w.TgZ(0,"svg",0),w.YNc(1,Oe,1,9,"circle",1),w.YNc(2,ke,1,7,"circle",2),w.qZA()),2&Ce&&(w.Udp("width",we.diameter,"px")("height",we.diameter,"px"),w.Q6J("ngSwitch","indeterminate"===we.mode),w.uIk("viewBox",we._getViewBox()),w.xp6(1),w.Q6J("ngSwitchCase",!0),w.xp6(1),w.Q6J("ngSwitchCase",!1))},dependencies:[_.RF,_.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),Fn})(),Hn=(()=>{class Fn{}return Fn.\u0275fac=function(Ce){return new(Ce||Fn)},Fn.\u0275mod=w.oAB({type:Fn}),Fn.\u0275inj=w.cJS({imports:[[de.BQ,_.ez],de.BQ]}),Fn})()},3267:(ti,Ut,B)=>{"use strict";B.d(Ut,{LW:()=>Nn,SJ:()=>Fe,jA:()=>Li,kh:()=>Jn});var w=B(3353),_=B(8605),de=B(6895),a=B(4650),he=B(3238),st=B(2687),nt=B(445),Oe=B(1281),ke=B(9521),rt=B(7579),pt=B(4968),Et=B(6451),dt=B(9300),wt=B(4004),et=B(9718),Zt=B(2722),kt=B(1884),Qe=B(5698),Hn=B(8675),Fn=B(8372),Ye=B(7340);const Ce=["*"];function we(ht,Xe){if(1&ht){const ce=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){a.CHM(ce);const Se=a.oxw();return a.KtG(Se._onBackdropClicked())}),a.qZA()}if(2&ht){const ce=a.oxw();a.ekj("mat-drawer-shown",ce._isShowingBackdrop())}}function At(ht,Xe){1&ht&&(a.TgZ(0,"mat-drawer-content"),a.Hsn(1,2),a.qZA())}const zt=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Jt=["mat-drawer","mat-drawer-content","*"],Tn={transformDrawer:(0,Ye.X$)("transform",[(0,Ye.SB)("open, open-instant",(0,Ye.oB)({transform:"none",visibility:"visible"})),(0,Ye.SB)("void",(0,Ye.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Ye.eR)("void => open-instant",(0,Ye.jt)("0ms")),(0,Ye.eR)("void <=> open, open-instant => void",(0,Ye.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ii=new a.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function wi(){return!1}}),vi=new a.OlP("MAT_DRAWER_CONTAINER");let Nn=(()=>{class ht extends _.PQ{constructor(ce,ot,Se,St,tn){super(Se,St,tn),this._changeDetectorRef=ce,this._container=ot}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return ht.\u0275fac=function(ce){return new(ce||ht)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>Jn)),a.Y36(a.SBq),a.Y36(_.mF),a.Y36(a.R0b))},ht.\u0275cmp=a.Xpm({type:ht,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(ce,ot){2&ce&&a.Udp("margin-left",ot._container._contentMargins.left,"px")("margin-right",ot._container._contentMargins.right,"px")},features:[a.qOj],ngContentSelectors:Ce,decls:1,vars:0,template:function(ce,ot){1&ce&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),ht})(),Li=(()=>{class ht{constructor(ce,ot,Se,St,tn,li,Wi,Dn){this._elementRef=ce,this._focusTrapFactory=ot,this._focusMonitor=Se,this._platform=St,this._ngZone=tn,this._interactivityChecker=li,this._doc=Wi,this._container=Dn,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new rt.x,this._animationEnd=new rt.x,this._animationState="void",this.openedChange=new a.vpe(!0),this._openedStream=this.openedChange.pipe((0,dt.h)(ae=>ae),(0,wt.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,dt.h)(ae=>ae.fromState!==ae.toState&&0===ae.toState.indexOf("open")),(0,et.h)(void 0)),this._closedStream=this.openedChange.pipe((0,dt.h)(ae=>!ae),(0,wt.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,dt.h)(ae=>ae.fromState!==ae.toState&&"void"===ae.toState),(0,et.h)(void 0)),this._destroyed=new rt.x,this.onPositionChanged=new a.vpe,this._modeChanged=new rt.x,this.openedChange.subscribe(ae=>{ae?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,pt.R)(this._elementRef.nativeElement,"keydown").pipe((0,dt.h)(ae=>ae.keyCode===ke.hY&&!this.disableClose&&!(0,ke.Vb)(ae)),(0,Zt.R)(this._destroyed)).subscribe(ae=>this._ngZone.run(()=>{this.close(),ae.stopPropagation(),ae.preventDefault()}))}),this._animationEnd.pipe((0,kt.x)((ae,$e)=>ae.fromState===$e.fromState&&ae.toState===$e.toState)).subscribe(ae=>{const{fromState:$e,toState:Ot}=ae;(0===Ot.indexOf("open")&&"void"===$e||"void"===Ot&&0===$e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(ce){(ce="end"===ce?"end":"start")!=this._position&&(this._position=ce,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(ce){this._mode=ce,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(ce){this._disableClose=(0,Oe.Ig)(ce)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(ce){("true"===ce||"false"===ce)&&(ce=(0,Oe.Ig)(ce)),this._autoFocus=ce}get opened(){return this._opened}set opened(ce){this.toggle((0,Oe.Ig)(ce))}_forceFocus(ce,ot){this._interactivityChecker.isFocusable(ce)||(ce.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{ce.addEventListener("blur",()=>ce.removeAttribute("tabindex")),ce.addEventListener("mousedown",()=>ce.removeAttribute("tabindex"))})),ce.focus(ot)}_focusByCssSelector(ce,ot){let Se=this._elementRef.nativeElement.querySelector(ce);Se&&this._forceFocus(Se,ot)}_takeFocus(){if(!this._focusTrap)return;const ce=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(ot=>{!ot&&"function"==typeof this._elementRef.nativeElement.focus&&ce.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(ce){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,ce):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const ce=this._doc?.activeElement;return!!ce&&this._elementRef.nativeElement.contains(ce)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(ce){return this.toggle(!0,ce)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(ce=!this.opened,ot){ce&&ot&&(this._openedVia=ot);const Se=this._setOpen(ce,!ce&&this._isFocusWithinDrawer(),this._openedVia||"program");return ce||(this._openedVia=null),Se}_setOpen(ce,ot,Se){return this._opened=ce,ce?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",ot&&this._restoreFocus(Se)),this._updateFocusTrapState(),new Promise(St=>{this.openedChange.pipe((0,Qe.q)(1)).subscribe(tn=>St(tn?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(ce){this._animationStarted.next(ce)}_animationDoneListener(ce){this._animationEnd.next(ce)}}return ht.\u0275fac=function(ce){return new(ce||ht)(a.Y36(a.SBq),a.Y36(st.qV),a.Y36(st.tE),a.Y36(w.t4),a.Y36(a.R0b),a.Y36(st.ic),a.Y36(de.K0,8),a.Y36(vi,8))},ht.\u0275cmp=a.Xpm({type:ht,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(ce,ot){1&ce&&a.WFA("@transform.start",function(St){return ot._animationStartListener(St)})("@transform.done",function(St){return ot._animationDoneListener(St)}),2&ce&&(a.uIk("align",null),a.d8E("@transform",ot._animationState),a.ekj("mat-drawer-end","end"===ot.position)("mat-drawer-over","over"===ot.mode)("mat-drawer-push","push"===ot.mode)("mat-drawer-side","side"===ot.mode)("mat-drawer-opened",ot.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Ce,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(ce,ot){1&ce&&(a.F$t(),a.TgZ(0,"div",0),a.Hsn(1),a.qZA())},dependencies:[_.PQ],encapsulation:2,data:{animation:[Tn.transformDrawer]},changeDetection:0}),ht})(),Jn=(()=>{class ht{constructor(ce,ot,Se,St,tn,li=!1,Wi){this._dir=ce,this._element=ot,this._ngZone=Se,this._changeDetectorRef=St,this._animationMode=Wi,this._drawers=new a.n_E,this.backdropClick=new a.vpe,this._destroyed=new rt.x,this._doCheckSubject=new rt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new rt.x,ce&&ce.change.pipe((0,Zt.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),tn.change().pipe((0,Zt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=li}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(ce){this._autosize=(0,Oe.Ig)(ce)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(ce){this._backdropOverride=null==ce?null:(0,Oe.Ig)(ce)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Hn.O)(this._allDrawers),(0,Zt.R)(this._destroyed)).subscribe(ce=>{this._drawers.reset(ce.filter(ot=>!ot._container||ot._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Hn.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(ce=>{this._watchDrawerToggle(ce),this._watchDrawerPosition(ce),this._watchDrawerMode(ce)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Fn.b)(10),(0,Zt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(ce=>ce.open())}close(){this._drawers.forEach(ce=>ce.close())}updateContentMargins(){let ce=0,ot=0;if(this._left&&this._left.opened)if("side"==this._left.mode)ce+=this._left._getWidth();else if("push"==this._left.mode){const Se=this._left._getWidth();ce+=Se,ot-=Se}if(this._right&&this._right.opened)if("side"==this._right.mode)ot+=this._right._getWidth();else if("push"==this._right.mode){const Se=this._right._getWidth();ot+=Se,ce-=Se}ce=ce||null,ot=ot||null,(ce!==this._contentMargins.left||ot!==this._contentMargins.right)&&(this._contentMargins={left:ce,right:ot},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(ce){ce._animationStarted.pipe((0,dt.h)(ot=>ot.fromState!==ot.toState),(0,Zt.R)(this._drawers.changes)).subscribe(ot=>{"open-instant"!==ot.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==ce.mode&&ce.openedChange.pipe((0,Zt.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(ce.opened))}_watchDrawerPosition(ce){!ce||ce.onPositionChanged.pipe((0,Zt.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Qe.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(ce){ce&&ce._modeChanged.pipe((0,Zt.R)((0,Et.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(ce){const ot=this._element.nativeElement.classList,Se="mat-drawer-container-has-open";ce?ot.add(Se):ot.remove(Se)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(ce=>{"end"==ce.position?this._end=ce:this._start=ce}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(ce=>ce&&!ce.disableClose&&this._canHaveBackdrop(ce)).forEach(ce=>ce._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(ce){return"side"!==ce.mode||!!this._backdropOverride}_isDrawerOpen(ce){return null!=ce&&ce.opened}}return ht.\u0275fac=function(ce){return new(ce||ht)(a.Y36(nt.Is,8),a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(_.rL),a.Y36(ii),a.Y36(a.QbO,8))},ht.\u0275cmp=a.Xpm({type:ht,selectors:[["mat-drawer-container"]],contentQueries:function(ce,ot,Se){if(1&ce&&(a.Suo(Se,Nn,5),a.Suo(Se,Li,5)),2&ce){let St;a.iGM(St=a.CRH())&&(ot._content=St.first),a.iGM(St=a.CRH())&&(ot._allDrawers=St)}},viewQuery:function(ce,ot){if(1&ce&&a.Gf(Nn,5),2&ce){let Se;a.iGM(Se=a.CRH())&&(ot._userContent=Se.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(ce,ot){2&ce&&a.ekj("mat-drawer-container-explicit-backdrop",ot._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[a._Bn([{provide:vi,useExisting:ht}])],ngContentSelectors:Jt,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(ce,ot){1&ce&&(a.F$t(zt),a.YNc(0,we,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,At,2,0,"mat-drawer-content",1)),2&ce&&(a.Q6J("ngIf",ot.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!ot._content))},dependencies:[Nn,de.O5],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),ht})(),Fe=(()=>{class ht{}return ht.\u0275fac=function(ce){return new(ce||ht)},ht.\u0275mod=a.oAB({type:ht}),ht.\u0275inj=a.cJS({imports:[[de.ez,he.BQ,w.ud,_.ZD],_.ZD,he.BQ]}),ht})()},6046:(ti,Ut,B)=>{"use strict";B.d(Ut,{ux:()=>Ge,ZX:()=>Jn});var w=B(8184),_=B(4080),de=B(6895),a=B(4650),he=B(3238),st=B(4859),nt=B(7579),Oe=B(3353),ke=B(5698),rt=B(2722),pt=B(7340),Et=B(2687),dt=B(1281),wt=B(9841),et=B(7272),Zt=B(9751),kt=B(5684),Qe=B(8372),Hn=B(4004),Fn=B(8675);const Ce=new Set;let we,At=(()=>{class Fe{constructor(Xe){this._platform=Xe,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Jt}matchMedia(Xe){return(this._platform.WEBKIT||this._platform.BLINK)&&function zt(Fe){if(!Ce.has(Fe))try{we||(we=document.createElement("style"),we.setAttribute("type","text/css"),document.head.appendChild(we)),we.sheet&&(we.sheet.insertRule(`@media ${Fe} {body{ }}`,0),Ce.add(Fe))}catch(ht){console.error(ht)}}(Xe),this._matchMedia(Xe)}}return Fe.\u0275fac=function(Xe){return new(Xe||Fe)(a.LFG(Oe.t4))},Fe.\u0275prov=a.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function Jt(Fe){return{matches:"all"===Fe||""===Fe,media:Fe,addListener:()=>{},removeListener:()=>{}}}let Mn=(()=>{class Fe{constructor(Xe,ce){this._mediaMatcher=Xe,this._zone=ce,this._queries=new Map,this._destroySubject=new nt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Xe){return Ke((0,dt.Eq)(Xe)).some(ot=>this._registerQuery(ot).mql.matches)}observe(Xe){const ot=Ke((0,dt.Eq)(Xe)).map(St=>this._registerQuery(St).observable);let Se=(0,wt.a)(ot);return Se=(0,et.z)(Se.pipe((0,ke.q)(1)),Se.pipe((0,kt.T)(1),(0,Qe.b)(0))),Se.pipe((0,Hn.U)(St=>{const tn={matches:!1,breakpoints:{}};return St.forEach(({matches:li,query:Wi})=>{tn.matches=tn.matches||li,tn.breakpoints[Wi]=li}),tn}))}_registerQuery(Xe){if(this._queries.has(Xe))return this._queries.get(Xe);const ce=this._mediaMatcher.matchMedia(Xe),Se={observable:new Zt.y(St=>{const tn=li=>this._zone.run(()=>St.next(li));return ce.addListener(tn),()=>{ce.removeListener(tn)}}).pipe((0,Fn.O)(ce),(0,Hn.U)(({matches:St})=>({query:Xe,matches:St})),(0,rt.R)(this._destroySubject)),mql:ce};return this._queries.set(Xe,Se),Se}}return Fe.\u0275fac=function(Xe){return new(Xe||Fe)(a.LFG(At),a.LFG(a.R0b))},Fe.\u0275prov=a.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function Ke(Fe){return Fe.map(ht=>ht.split(",")).reduce((ht,Xe)=>ht.concat(Xe)).map(ht=>ht.trim())}function He(Fe,ht){if(1&Fe){const Xe=a.EpF();a.TgZ(0,"div",1)(1,"button",2),a.NdJ("click",function(){a.CHM(Xe);const ot=a.oxw();return a.KtG(ot.action())}),a._uU(2),a.qZA()()}if(2&Fe){const Xe=a.oxw();a.xp6(2),a.Oqu(Xe.data.action)}}function yt(Fe,ht){}const Tn=new a.OlP("MatSnackBarData");class Xt{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const ii=Math.pow(2,31)-1;class vi{constructor(ht,Xe){this._overlayRef=Xe,this._afterDismissed=new nt.x,this._afterOpened=new nt.x,this._onAction=new nt.x,this._dismissedByAction=!1,this.containerInstance=ht,this.onAction().subscribe(()=>this.dismiss()),ht._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(ht){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(ht,ii))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let wi=(()=>{class Fe{constructor(Xe,ce){this.snackBarRef=Xe,this.data=ce}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Fe.\u0275fac=function(Xe){return new(Xe||Fe)(a.Y36(vi),a.Y36(Tn))},Fe.\u0275cmp=a.Xpm({type:Fe,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(Xe,ce){1&Xe&&(a.TgZ(0,"span"),a._uU(1),a.qZA(),a.YNc(2,He,3,1,"div",0)),2&Xe&&(a.xp6(1),a.Oqu(ce.data.message),a.xp6(1),a.Q6J("ngIf",ce.hasAction))},dependencies:[st.lW,de.O5],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Fe})();const Nn={snackBarState:(0,pt.X$)("state",[(0,pt.SB)("void, hidden",(0,pt.oB)({transform:"scale(0.8)",opacity:0})),(0,pt.SB)("visible",(0,pt.oB)({transform:"scale(1)",opacity:1})),(0,pt.eR)("* => visible",(0,pt.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,pt.eR)("* => void, * => hidden",(0,pt.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,pt.oB)({opacity:0})))])};let Li=(()=>{class Fe extends _.en{constructor(Xe,ce,ot,Se,St){super(),this._ngZone=Xe,this._elementRef=ce,this._changeDetectorRef=ot,this._platform=Se,this.snackBarConfig=St,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new nt.x,this._onExit=new nt.x,this._onEnter=new nt.x,this._animationState="void",this.attachDomPortal=tn=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(tn)),this._live="assertive"!==St.politeness||St.announcementMessage?"off"===St.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(Xe){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(Xe)}attachTemplatePortal(Xe){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(Xe)}onAnimationEnd(Xe){const{fromState:ce,toState:ot}=Xe;if(("void"===ot&&"void"!==ce||"hidden"===ot)&&this._completeExit(),"visible"===ot){const Se=this._onEnter;this._ngZone.run(()=>{Se.next(),Se.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,ke.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const Xe=this._elementRef.nativeElement,ce=this.snackBarConfig.panelClass;ce&&(Array.isArray(ce)?ce.forEach(ot=>Xe.classList.add(ot)):Xe.classList.add(ce)),"center"===this.snackBarConfig.horizontalPosition&&Xe.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&Xe.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const Xe=this._elementRef.nativeElement.querySelector("[aria-hidden]"),ce=this._elementRef.nativeElement.querySelector("[aria-live]");if(Xe&&ce){let ot=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&Xe.contains(document.activeElement)&&(ot=document.activeElement),Xe.removeAttribute("aria-hidden"),ce.appendChild(Xe),ot?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Fe.\u0275fac=function(Xe){return new(Xe||Fe)(a.Y36(a.R0b),a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(Oe.t4),a.Y36(Xt))},Fe.\u0275cmp=a.Xpm({type:Fe,selectors:[["snack-bar-container"]],viewQuery:function(Xe,ce){if(1&Xe&&a.Gf(_.Pl,7),2&Xe){let ot;a.iGM(ot=a.CRH())&&(ce._portalOutlet=ot.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(Xe,ce){1&Xe&&a.WFA("@state.done",function(Se){return ce.onAnimationEnd(Se)}),2&Xe&&a.d8E("@state",ce._animationState)},features:[a.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(Xe,ce){1&Xe&&(a.TgZ(0,"div",0),a.YNc(1,yt,0,0,"ng-template",1),a.qZA(),a._UZ(2,"div")),2&Xe&&(a.xp6(2),a.uIk("aria-live",ce._live)("role",ce._role))},dependencies:[_.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Nn.snackBarState]}}),Fe})(),Jn=(()=>{class Fe{}return Fe.\u0275fac=function(Xe){return new(Xe||Fe)},Fe.\u0275mod=a.oAB({type:Fe}),Fe.\u0275inj=a.cJS({imports:[[w.U8,_.eL,de.ez,st.ot,he.BQ],he.BQ]}),Fe})();const mn=new a.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function Tt(){return new Xt}});let Ge=(()=>{class Fe{constructor(Xe,ce,ot,Se,St,tn){this._overlay=Xe,this._live=ce,this._injector=ot,this._breakpointObserver=Se,this._parentSnackBar=St,this._defaultConfig=tn,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=wi,this.snackBarContainerComponent=Li,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const Xe=this._parentSnackBar;return Xe?Xe._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(Xe){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=Xe:this._snackBarRefAtThisLevel=Xe}openFromComponent(Xe,ce){return this._attach(Xe,ce)}openFromTemplate(Xe,ce){return this._attach(Xe,ce)}open(Xe,ce="",ot){const Se={...this._defaultConfig,...ot};return Se.data={message:Xe,action:ce},Se.announcementMessage===Xe&&(Se.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Se)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(Xe,ce){const Se=a.zs3.create({parent:ce&&ce.viewContainerRef&&ce.viewContainerRef.injector||this._injector,providers:[{provide:Xt,useValue:ce}]}),St=new _.C5(this.snackBarContainerComponent,ce.viewContainerRef,Se),tn=Xe.attach(St);return tn.instance.snackBarConfig=ce,tn.instance}_attach(Xe,ce){const ot={...new Xt,...this._defaultConfig,...ce},Se=this._createOverlay(ot),St=this._attachSnackBarContainer(Se,ot),tn=new vi(St,Se);if(Xe instanceof a.Rgc){const li=new _.UE(Xe,null,{$implicit:ot.data,snackBarRef:tn});tn.instance=St.attachTemplatePortal(li)}else{const li=this._createInjector(ot,tn),Wi=new _.C5(Xe,void 0,li),Dn=St.attachComponentPortal(Wi);tn.instance=Dn.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe((0,rt.R)(Se.detachments())).subscribe(li=>{Se.overlayElement.classList.toggle(this.handsetCssClass,li.matches)}),ot.announcementMessage&&St._onAnnounce.subscribe(()=>{this._live.announce(ot.announcementMessage,ot.politeness)}),this._animateSnackBar(tn,ot),this._openedSnackBarRef=tn,this._openedSnackBarRef}_animateSnackBar(Xe,ce){Xe.afterDismissed().subscribe(()=>{this._openedSnackBarRef==Xe&&(this._openedSnackBarRef=null),ce.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{Xe.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):Xe.containerInstance.enter(),ce.duration&&ce.duration>0&&Xe.afterOpened().subscribe(()=>Xe._dismissAfter(ce.duration))}_createOverlay(Xe){const ce=new w.X_;ce.direction=Xe.direction;let ot=this._overlay.position().global();const Se="rtl"===Xe.direction,St="left"===Xe.horizontalPosition||"start"===Xe.horizontalPosition&&!Se||"end"===Xe.horizontalPosition&&Se,tn=!St&&"center"!==Xe.horizontalPosition;return St?ot.left("0"):tn?ot.right("0"):ot.centerHorizontally(),"top"===Xe.verticalPosition?ot.top("0"):ot.bottom("0"),ce.positionStrategy=ot,this._overlay.create(ce)}_createInjector(Xe,ce){return a.zs3.create({parent:Xe&&Xe.viewContainerRef&&Xe.viewContainerRef.injector||this._injector,providers:[{provide:vi,useValue:ce},{provide:Tn,useValue:Xe.data}]})}}return Fe.\u0275fac=function(Xe){return new(Xe||Fe)(a.LFG(w.aV),a.LFG(Et.Kd),a.LFG(a.zs3),a.LFG(Mn),a.LFG(Fe,12),a.LFG(mn))},Fe.\u0275prov=a.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:Jn}),Fe})()},1481:(ti,Ut,B)=>{"use strict";B.d(Ut,{Dx:()=>ge,H7:()=>ut,b2:()=>Ot,q6:()=>Wi,se:()=>yt});var w=B(6895),_=B(4650);class de extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class a extends de{static makeCurrent(){(0,w.HT)(new a)}onAndCancel(_e,fe,Ue){return _e.addEventListener(fe,Ue,!1),()=>{_e.removeEventListener(fe,Ue,!1)}}dispatchEvent(_e,fe){_e.dispatchEvent(fe)}remove(_e){_e.parentNode&&_e.parentNode.removeChild(_e)}createElement(_e,fe){return(fe=fe||this.getDefaultDocument()).createElement(_e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_e){return _e.nodeType===Node.ELEMENT_NODE}isShadowRoot(_e){return _e instanceof DocumentFragment}getGlobalEventTarget(_e,fe){return"window"===fe?window:"document"===fe?_e:"body"===fe?_e.body:null}getBaseHref(_e){const fe=function st(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==fe?null:function Oe(le){nt=nt||document.createElement("a"),nt.setAttribute("href",le);const _e=nt.pathname;return"/"===_e.charAt(0)?_e:`/${_e}`}(fe)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(_e){return(0,w.Mx)(document.cookie,_e)}}let nt,he=null;const ke=new _.OlP("TRANSITION_ID"),pt=[{provide:_.ip1,useFactory:function rt(le,_e,fe){return()=>{fe.get(_.CZH).donePromise.then(()=>{const Ue=(0,w.q)(),Wt=_e.querySelectorAll(`style[ng-transition="${le}"]`);for(let Sn=0;Sn<Wt.length;Sn++)Ue.remove(Wt[Sn])})}},deps:[ke,w.K0,_.zs3],multi:!0}];let dt=(()=>{class le{build(){return new XMLHttpRequest}}return le.\u0275fac=function(fe){return new(fe||le)},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})();const wt=new _.OlP("EventManagerPlugins");let et=(()=>{class le{constructor(fe,Ue){this._zone=Ue,this._eventNameToPlugin=new Map,fe.forEach(Wt=>Wt.manager=this),this._plugins=fe.slice().reverse()}addEventListener(fe,Ue,Wt){return this._findPluginFor(Ue).addEventListener(fe,Ue,Wt)}addGlobalEventListener(fe,Ue,Wt){return this._findPluginFor(Ue).addGlobalEventListener(fe,Ue,Wt)}getZone(){return this._zone}_findPluginFor(fe){const Ue=this._eventNameToPlugin.get(fe);if(Ue)return Ue;const Wt=this._plugins;for(let Sn=0;Sn<Wt.length;Sn++){const jn=Wt[Sn];if(jn.supports(fe))return this._eventNameToPlugin.set(fe,jn),jn}throw new Error(`No event manager plugin found for event ${fe}`)}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(wt),_.LFG(_.R0b))},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})();class Zt{constructor(_e){this._doc=_e}addGlobalEventListener(_e,fe,Ue){const Wt=(0,w.q)().getGlobalEventTarget(this._doc,_e);if(!Wt)throw new Error(`Unsupported event target ${Wt} for event ${fe}`);return this.addEventListener(Wt,fe,Ue)}}let kt=(()=>{class le{constructor(){this._stylesSet=new Set}addStyles(fe){const Ue=new Set;fe.forEach(Wt=>{this._stylesSet.has(Wt)||(this._stylesSet.add(Wt),Ue.add(Wt))}),this.onStylesAdded(Ue)}onStylesAdded(fe){}getAllStyles(){return Array.from(this._stylesSet)}}return le.\u0275fac=function(fe){return new(fe||le)},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})(),Qe=(()=>{class le extends kt{constructor(fe){super(),this._doc=fe,this._hostNodes=new Map,this._hostNodes.set(fe.head,[])}_addStylesToHost(fe,Ue,Wt){fe.forEach(Sn=>{const jn=this._doc.createElement("style");jn.textContent=Sn,Wt.push(Ue.appendChild(jn))})}addHost(fe){const Ue=[];this._addStylesToHost(this._stylesSet,fe,Ue),this._hostNodes.set(fe,Ue)}removeHost(fe){const Ue=this._hostNodes.get(fe);Ue&&Ue.forEach(Hn),this._hostNodes.delete(fe)}onStylesAdded(fe){this._hostNodes.forEach((Ue,Wt)=>{this._addStylesToHost(fe,Wt,Ue)})}ngOnDestroy(){this._hostNodes.forEach(fe=>fe.forEach(Hn))}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(w.K0))},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})();function Hn(le){(0,w.q)().remove(le)}const Fn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ye=/%COMP%/g;function Ke(le,_e,fe){for(let Ue=0;Ue<_e.length;Ue++){let Wt=_e[Ue];Array.isArray(Wt)?Ke(le,Wt,fe):(Wt=Wt.replace(Ye,le),fe.push(Wt))}return fe}function Ne(le){return _e=>{if("__ngUnwrap__"===_e)return le;!1===le(_e)&&(_e.preventDefault(),_e.returnValue=!1)}}let yt=(()=>{class le{constructor(fe,Ue,Wt){this.eventManager=fe,this.sharedStylesHost=Ue,this.appId=Wt,this.rendererByCompId=new Map,this.defaultRenderer=new Tn(fe)}createRenderer(fe,Ue){if(!fe||!Ue)return this.defaultRenderer;switch(Ue.encapsulation){case _.ifc.Emulated:{let Wt=this.rendererByCompId.get(Ue.id);return Wt||(Wt=new wi(this.eventManager,this.sharedStylesHost,Ue,this.appId),this.rendererByCompId.set(Ue.id,Wt)),Wt.applyToHost(fe),Wt}case 1:case _.ifc.ShadowDom:return new Nn(this.eventManager,this.sharedStylesHost,fe,Ue);default:if(!this.rendererByCompId.has(Ue.id)){const Wt=Ke(Ue.id,Ue.styles,[]);this.sharedStylesHost.addStyles(Wt),this.rendererByCompId.set(Ue.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(et),_.LFG(Qe),_.LFG(_.AFp))},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})();class Tn{constructor(_e){this.eventManager=_e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(_e,fe){return fe?document.createElementNS(Fn[fe]||fe,_e):document.createElement(_e)}createComment(_e){return document.createComment(_e)}createText(_e){return document.createTextNode(_e)}appendChild(_e,fe){(vi(_e)?_e.content:_e).appendChild(fe)}insertBefore(_e,fe,Ue){_e&&(vi(_e)?_e.content:_e).insertBefore(fe,Ue)}removeChild(_e,fe){_e&&_e.removeChild(fe)}selectRootElement(_e,fe){let Ue="string"==typeof _e?document.querySelector(_e):_e;if(!Ue)throw new Error(`The selector "${_e}" did not match any elements`);return fe||(Ue.textContent=""),Ue}parentNode(_e){return _e.parentNode}nextSibling(_e){return _e.nextSibling}setAttribute(_e,fe,Ue,Wt){if(Wt){fe=Wt+":"+fe;const Sn=Fn[Wt];Sn?_e.setAttributeNS(Sn,fe,Ue):_e.setAttribute(fe,Ue)}else _e.setAttribute(fe,Ue)}removeAttribute(_e,fe,Ue){if(Ue){const Wt=Fn[Ue];Wt?_e.removeAttributeNS(Wt,fe):_e.removeAttribute(`${Ue}:${fe}`)}else _e.removeAttribute(fe)}addClass(_e,fe){_e.classList.add(fe)}removeClass(_e,fe){_e.classList.remove(fe)}setStyle(_e,fe,Ue,Wt){Wt&(_.JOm.DashCase|_.JOm.Important)?_e.style.setProperty(fe,Ue,Wt&_.JOm.Important?"important":""):_e.style[fe]=Ue}removeStyle(_e,fe,Ue){Ue&_.JOm.DashCase?_e.style.removeProperty(fe):_e.style[fe]=""}setProperty(_e,fe,Ue){_e[fe]=Ue}setValue(_e,fe){_e.nodeValue=fe}listen(_e,fe,Ue){return"string"==typeof _e?this.eventManager.addGlobalEventListener(_e,fe,Ne(Ue)):this.eventManager.addEventListener(_e,fe,Ne(Ue))}}function vi(le){return"TEMPLATE"===le.tagName&&void 0!==le.content}class wi extends Tn{constructor(_e,fe,Ue,Wt){super(_e),this.component=Ue;const Sn=Ke(Wt+"-"+Ue.id,Ue.styles,[]);fe.addStyles(Sn),this.contentAttr=function Jt(le){return"_ngcontent-%COMP%".replace(Ye,le)}(Wt+"-"+Ue.id),this.hostAttr=function Mn(le){return"_nghost-%COMP%".replace(Ye,le)}(Wt+"-"+Ue.id)}applyToHost(_e){super.setAttribute(_e,this.hostAttr,"")}createElement(_e,fe){const Ue=super.createElement(_e,fe);return super.setAttribute(Ue,this.contentAttr,""),Ue}}class Nn extends Tn{constructor(_e,fe,Ue,Wt){super(_e),this.sharedStylesHost=fe,this.hostEl=Ue,this.shadowRoot=Ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Sn=Ke(Wt.id,Wt.styles,[]);for(let jn=0;jn<Sn.length;jn++){const Xn=document.createElement("style");Xn.textContent=Sn[jn],this.shadowRoot.appendChild(Xn)}}nodeOrShadowRoot(_e){return _e===this.hostEl?this.shadowRoot:_e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(_e,fe){return super.appendChild(this.nodeOrShadowRoot(_e),fe)}insertBefore(_e,fe,Ue){return super.insertBefore(this.nodeOrShadowRoot(_e),fe,Ue)}removeChild(_e,fe){return super.removeChild(this.nodeOrShadowRoot(_e),fe)}parentNode(_e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_e)))}}let Li=(()=>{class le extends Zt{constructor(fe){super(fe)}supports(fe){return!0}addEventListener(fe,Ue,Wt){return fe.addEventListener(Ue,Wt,!1),()=>this.removeEventListener(fe,Ue,Wt)}removeEventListener(fe,Ue,Wt){return fe.removeEventListener(Ue,Wt)}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(w.K0))},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})();const Jn=["alt","control","meta","shift"],mn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tt={alt:le=>le.altKey,control:le=>le.ctrlKey,meta:le=>le.metaKey,shift:le=>le.shiftKey};let Ge=(()=>{class le extends Zt{constructor(fe){super(fe)}supports(fe){return null!=le.parseEventName(fe)}addEventListener(fe,Ue,Wt){const Sn=le.parseEventName(Ue),jn=le.eventCallback(Sn.fullKey,Wt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(fe,Sn.domEventName,jn))}static parseEventName(fe){const Ue=fe.toLowerCase().split("."),Wt=Ue.shift();if(0===Ue.length||"keydown"!==Wt&&"keyup"!==Wt)return null;const Sn=le._normalizeKey(Ue.pop());let jn="",Xn=Ue.indexOf("code");if(Xn>-1&&(Ue.splice(Xn,1),jn="code."),Jn.forEach(Pi=>{const Gn=Ue.indexOf(Pi);Gn>-1&&(Ue.splice(Gn,1),jn+=Pi+".")}),jn+=Sn,0!=Ue.length||0===Sn.length)return null;const Ti={};return Ti.domEventName=Wt,Ti.fullKey=jn,Ti}static matchEventFullKeyCode(fe,Ue){let Wt=mn[fe.key]||fe.key,Sn="";return Ue.indexOf("code.")>-1&&(Wt=fe.code,Sn="code."),!(null==Wt||!Wt)&&(Wt=Wt.toLowerCase()," "===Wt?Wt="space":"."===Wt&&(Wt="dot"),Jn.forEach(jn=>{jn!==Wt&&(0,Tt[jn])(fe)&&(Sn+=jn+".")}),Sn+=Wt,Sn===Ue)}static eventCallback(fe,Ue,Wt){return Sn=>{le.matchEventFullKeyCode(Sn,fe)&&Wt.runGuarded(()=>Ue(Sn))}}static _normalizeKey(fe){return"esc"===fe?"escape":fe}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(w.K0))},le.\u0275prov=_.Yz7({token:le,factory:le.\u0275fac}),le})();const Wi=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:w.bD},{provide:_.g9A,useValue:function Se(){a.makeCurrent()},multi:!0},{provide:w.K0,useFactory:function tn(){return(0,_.RDi)(document),document},deps:[]}]),Dn=new _.OlP(""),ae=[{provide:_.rWj,useClass:class Et{addToWindow(_e){_.dqk.getAngularTestability=(Ue,Wt=!0)=>{const Sn=_e.findTestabilityInTree(Ue,Wt);if(null==Sn)throw new Error("Could not find testability for element.");return Sn},_.dqk.getAllAngularTestabilities=()=>_e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>_e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(Ue=>{const Wt=_.dqk.getAllAngularTestabilities();let Sn=Wt.length,jn=!1;const Xn=function(Ti){jn=jn||Ti,Sn--,0==Sn&&Ue(jn)};Wt.forEach(function(Ti){Ti.whenStable(Xn)})})}findTestabilityInTree(_e,fe,Ue){return null==fe?null:_e.getTestability(fe)??(Ue?(0,w.q)().isShadowRoot(fe)?this.findTestabilityInTree(_e,fe.host,!0):this.findTestabilityInTree(_e,fe.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],$e=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function St(){return new _.qLn},deps:[]},{provide:wt,useClass:Li,multi:!0,deps:[w.K0,_.R0b,_.Lbi]},{provide:wt,useClass:Ge,multi:!0,deps:[w.K0]},{provide:yt,useClass:yt,deps:[et,Qe,_.AFp]},{provide:_.FYo,useExisting:yt},{provide:kt,useExisting:Qe},{provide:Qe,useClass:Qe,deps:[w.K0]},{provide:et,useClass:et,deps:[wt,_.R0b]},{provide:w.JF,useClass:dt,deps:[]},[]];let Ot=(()=>{class le{constructor(fe){}static withServerTransition(fe){return{ngModule:le,providers:[{provide:_.AFp,useValue:fe.appId},{provide:ke,useExisting:_.AFp},pt]}}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(Dn,12))},le.\u0275mod=_.oAB({type:le}),le.\u0275inj=_.cJS({providers:[...$e,...ae],imports:[w.ez,_.hGG]}),le})(),ge=(()=>{class le{constructor(fe){this._doc=fe}getTitle(){return this._doc.title}setTitle(fe){this._doc.title=fe||""}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(w.K0))},le.\u0275prov=_.Yz7({token:le,factory:function(fe){let Ue=null;return Ue=fe?new fe:function Je(){return new ge((0,_.LFG)(w.K0))}(),Ue},providedIn:"root"}),le})();typeof window<"u"&&window;let ut=(()=>{class le{}return le.\u0275fac=function(fe){return new(fe||le)},le.\u0275prov=_.Yz7({token:le,factory:function(fe){let Ue=null;return Ue=fe?new(fe||le):_.LFG(Lt),Ue},providedIn:"root"}),le})(),Lt=(()=>{class le extends ut{constructor(fe){super(),this._doc=fe}sanitize(fe,Ue){if(null==Ue)return null;switch(fe){case _.q3G.NONE:return Ue;case _.q3G.HTML:return(0,_.qzn)(Ue,"HTML")?(0,_.z3N)(Ue):(0,_.EiD)(this._doc,String(Ue)).toString();case _.q3G.STYLE:return(0,_.qzn)(Ue,"Style")?(0,_.z3N)(Ue):Ue;case _.q3G.SCRIPT:if((0,_.qzn)(Ue,"Script"))return(0,_.z3N)(Ue);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.qzn)(Ue,"URL")?(0,_.z3N)(Ue):(0,_.mCW)(String(Ue));case _.q3G.RESOURCE_URL:if((0,_.qzn)(Ue,"ResourceURL"))return(0,_.z3N)(Ue);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${fe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(fe){return(0,_.JVY)(fe)}bypassSecurityTrustStyle(fe){return(0,_.L6k)(fe)}bypassSecurityTrustScript(fe){return(0,_.eBb)(fe)}bypassSecurityTrustUrl(fe){return(0,_.LAX)(fe)}bypassSecurityTrustResourceUrl(fe){return(0,_.pB0)(fe)}}return le.\u0275fac=function(fe){return new(fe||le)(_.LFG(w.K0))},le.\u0275prov=_.Yz7({token:le,factory:function(fe){let Ue=null;return Ue=fe?new fe:function Ft(le){return new Lt(le.get(w.K0))}(_.LFG(_.zs3)),Ue},providedIn:"root"}),le})()},9197:(ti,Ut,B)=>{"use strict";B.d(Ut,{gz:()=>No,F0:()=>zr,rH:()=>Za,Od:()=>Sa,yS:()=>Xo,Bz:()=>fd,lC:()=>Br});var w=B(4650),_=B(2076),de=B(9646),a=B(1135);const st=(0,B(3888).d)(O=>function(){O(this),this.name="EmptyError",this.message="no elements in sequence"});var nt=B(9841),Oe=B(7272),ke=B(9770),rt=B(9635),pt=B(2843),Et=B(9751),dt=B(515),wt=B(727),et=B(4482),Zt=B(5403);function kt(){return(0,et.e)((O,k)=>{let I=null;O._refCount++;const V=(0,Zt.x)(k,void 0,void 0,void 0,()=>{if(!O||O._refCount<=0||0<--O._refCount)return void(I=null);const Y=O._connection,me=I;I=null,Y&&(!me||Y===me)&&Y.unsubscribe(),k.unsubscribe()});O.subscribe(V),V.closed||(I=O.connect())})}class Qe extends Et.y{constructor(k,I){super(),this.source=k,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,et.A)(k)&&(this.lift=k.lift)}_subscribe(k){return this.getSubject().subscribe(k)}getSubject(){const k=this._subject;return(!k||k.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:k}=this;this._subject=this._connection=null,k?.unsubscribe()}connect(){let k=this._connection;if(!k){k=this._connection=new wt.w0;const I=this.getSubject();k.add(this.source.subscribe((0,Zt.x)(I,void 0,()=>{this._teardown(),I.complete()},V=>{this._teardown(),I.error(V)},()=>this._teardown()))),k.closed&&(this._connection=null,k=wt.w0.EMPTY)}return k}refCount(){return kt()(this)}}var Hn=B(7579),Fn=B(6895),Ye=B(4004),Ce=B(3900),we=B(5698),At=B(8675),zt=B(9300),Jt=B(5577);function Mn(O){return(0,et.e)((k,I)=>{let V=!1;k.subscribe((0,Zt.x)(I,Y=>{V=!0,I.next(Y)},()=>{V||I.next(O),I.complete()}))})}function Ke(O=Ne){return(0,et.e)((k,I)=>{let V=!1;k.subscribe((0,Zt.x)(I,Y=>{V=!0,I.next(Y)},()=>V?I.complete():I.error(O())))})}function Ne(){return new st}var He=B(4671);function yt(O,k){const I=arguments.length>=2;return V=>V.pipe(O?(0,zt.h)((Y,me)=>O(Y,me,V)):He.y,(0,we.q)(1),I?Mn(k):Ke(()=>new st))}var Tn=B(4351),Xt=B(8505),ii=B(262);function vi(O,k,I,V,Y){return(me,tt)=>{let bt=I,An=k,pi=0;me.subscribe((0,Zt.x)(tt,or=>{const Di=pi++;An=bt?O(An,or,Di):(bt=!0,or),V&&tt.next(An)},Y&&(()=>{bt&&tt.next(An),tt.complete()})))}}function wi(O,k){return(0,et.e)(vi(O,k,arguments.length>=2,!0))}function Nn(O){return O<=0?()=>dt.E:(0,et.e)((k,I)=>{let V=[];k.subscribe((0,Zt.x)(I,Y=>{V.push(Y),O<V.length&&V.shift()},()=>{for(const Y of V)I.next(Y);I.complete()},void 0,()=>{V=null}))})}function Li(O,k){const I=arguments.length>=2;return V=>V.pipe(O?(0,zt.h)((Y,me)=>O(Y,me,V)):He.y,Nn(1),I?Mn(k):Ke(()=>new st))}var mn=B(9718),Tt=B(8746),Ge=B(8189),Fe=B(1481);const ht="primary",Xe=Symbol("RouteTitle");class ce{constructor(k){this.params=k||{}}has(k){return Object.prototype.hasOwnProperty.call(this.params,k)}get(k){if(this.has(k)){const I=this.params[k];return Array.isArray(I)?I[0]:I}return null}getAll(k){if(this.has(k)){const I=this.params[k];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function ot(O){return new ce(O)}function Se(O,k,I){const V=I.path.split("/");if(V.length>O.length||"full"===I.pathMatch&&(k.hasChildren()||V.length<O.length))return null;const Y={};for(let me=0;me<V.length;me++){const tt=V[me],bt=O[me];if(tt.startsWith(":"))Y[tt.substring(1)]=bt;else if(tt!==bt.path)return null}return{consumed:O.slice(0,V.length),posParams:Y}}function tn(O,k){const I=O?Object.keys(O):void 0,V=k?Object.keys(k):void 0;if(!I||!V||I.length!=V.length)return!1;let Y;for(let me=0;me<I.length;me++)if(Y=I[me],!li(O[Y],k[Y]))return!1;return!0}function li(O,k){if(Array.isArray(O)&&Array.isArray(k)){if(O.length!==k.length)return!1;const I=[...O].sort(),V=[...k].sort();return I.every((Y,me)=>V[me]===Y)}return O===k}function Wi(O){return Array.prototype.concat.apply([],O)}function Dn(O){return O.length>0?O[O.length-1]:null}function $e(O,k){for(const I in O)O.hasOwnProperty(I)&&k(O[I],I)}function Ot(O){return(0,w.CqO)(O)?O:(0,w.QGY)(O)?(0,_.D)(Promise.resolve(O)):(0,de.of)(O)}const Bt={exact:function te(O,k,I){if(!dn(O.segments,k.segments)||!ni(O.segments,k.segments,I)||O.numberOfChildren!==k.numberOfChildren)return!1;for(const V in k.children)if(!O.children[V]||!te(O.children[V],k.children[V],I))return!1;return!0},subset:Ht},Je={exact:function pe(O,k){return tn(O,k)},subset:function it(O,k){return Object.keys(k).length<=Object.keys(O).length&&Object.keys(k).every(I=>li(O[I],k[I]))},ignored:()=>!0};function ge(O,k,I){return Bt[I.paths](O.root,k.root,I.matrixParams)&&Je[I.queryParams](O.queryParams,k.queryParams)&&!("exact"===I.fragment&&O.fragment!==k.fragment)}function Ht(O,k,I){return Rn(O,k,k.segments,I)}function Rn(O,k,I,V){if(O.segments.length>I.length){const Y=O.segments.slice(0,I.length);return!(!dn(Y,I)||k.hasChildren()||!ni(Y,I,V))}if(O.segments.length===I.length){if(!dn(O.segments,I)||!ni(O.segments,I,V))return!1;for(const Y in k.children)if(!O.children[Y]||!Ht(O.children[Y],k.children[Y],V))return!1;return!0}{const Y=I.slice(0,O.segments.length),me=I.slice(O.segments.length);return!!(dn(O.segments,Y)&&ni(O.segments,Y,V)&&O.children[ht])&&Rn(O.children[ht],k,me,V)}}function ni(O,k,I){return k.every((V,Y)=>Je[I](O[Y].parameters,V.parameters))}class Ii{constructor(k,I,V){this.root=k,this.queryParams=I,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ot(this.queryParams)),this._queryParamMap}toString(){return _i.serialize(this)}}class bn{constructor(k,I){this.segments=k,this.children=I,this.parent=null,$e(I,(V,Y)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qt(this)}}class Ji{constructor(k,I){this.path=k,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=ot(this.parameters)),this._parameterMap}toString(){return oe(this)}}function dn(O,k){return O.length===k.length&&O.every((I,V)=>I.path===k[V].path)}let ct=(()=>{class O{}return O.\u0275fac=function(I){return new(I||O)},O.\u0275prov=w.Yz7({token:O,factory:function(){return new nn},providedIn:"root"}),O})();class nn{parse(k){const I=new fe(k);return new Ii(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(k){const I=`/${xt(k.root,!0)}`,V=function Ve(O){const k=Object.keys(O).map(I=>{const V=O[I];return Array.isArray(V)?V.map(Y=>`${Yt(I)}=${Yt(Y)}`).join("&"):`${Yt(I)}=${Yt(V)}`}).filter(I=>!!I);return k.length?`?${k.join("&")}`:""}(k.queryParams);return`${I}${V}${"string"==typeof k.fragment?`#${function wn(O){return encodeURI(O)}(k.fragment)}`:""}`}}const _i=new nn;function Qt(O){return O.segments.map(k=>oe(k)).join("/")}function xt(O,k){if(!O.hasChildren())return Qt(O);if(k){const I=O.children[ht]?xt(O.children[ht],!1):"",V=[];return $e(O.children,(Y,me)=>{me!==ht&&V.push(`${me}:${xt(Y,!1)}`)}),V.length>0?`${I}(${V.join("//")})`:I}{const I=function It(O,k){let I=[];return $e(O.children,(V,Y)=>{Y===ht&&(I=I.concat(k(V,Y)))}),$e(O.children,(V,Y)=>{Y!==ht&&(I=I.concat(k(V,Y)))}),I}(O,(V,Y)=>Y===ht?[xt(O.children[ht],!1)]:[`${Y}:${xt(V,!1)}`]);return 1===Object.keys(O.children).length&&null!=O.children[ht]?`${Qt(O)}/${I[0]}`:`${Qt(O)}/(${I.join("//")})`}}function ft(O){return encodeURIComponent(O).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yt(O){return ft(O).replace(/%3B/gi,";")}function ri(O){return ft(O).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ee(O){return decodeURIComponent(O)}function ee(O){return Ee(O.replace(/\+/g,"%20"))}function oe(O){return`${ri(O.path)}${function Me(O){return Object.keys(O).map(k=>`;${ri(k)}=${ri(O[k])}`).join("")}(O.parameters)}`}const ut=/^[^\/()?;=#]+/;function Ft(O){const k=O.match(ut);return k?k[0]:""}const Lt=/^[^=?&#]+/,le=/^[^&#]+/;class fe{constructor(k){this.url=k,this.remaining=k}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const k={};if(this.consumeOptional("?"))do{this.parseQueryParam(k)}while(this.consumeOptional("&"));return k}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const k=[];for(this.peekStartsWith("(")||k.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),k.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(k.length>0||Object.keys(I).length>0)&&(V[ht]=new bn(k,I)),V}parseSegment(){const k=Ft(this.remaining);if(""===k&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(k),new Ji(Ee(k),this.parseMatrixParams())}parseMatrixParams(){const k={};for(;this.consumeOptional(";");)this.parseParam(k);return k}parseParam(k){const I=Ft(this.remaining);if(!I)return;this.capture(I);let V="";if(this.consumeOptional("=")){const Y=Ft(this.remaining);Y&&(V=Y,this.capture(V))}k[Ee(I)]=Ee(V)}parseQueryParam(k){const I=function Mt(O){const k=O.match(Lt);return k?k[0]:""}(this.remaining);if(!I)return;this.capture(I);let V="";if(this.consumeOptional("=")){const tt=function _e(O){const k=O.match(le);return k?k[0]:""}(this.remaining);tt&&(V=tt,this.capture(V))}const Y=ee(I),me=ee(V);if(k.hasOwnProperty(Y)){let tt=k[Y];Array.isArray(tt)||(tt=[tt],k[Y]=tt),tt.push(me)}else k[Y]=me}parseParens(k){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=Ft(this.remaining),Y=this.remaining[V.length];if("/"!==Y&&")"!==Y&&";"!==Y)throw new w.vHH(4010,!1);let me;V.indexOf(":")>-1?(me=V.slice(0,V.indexOf(":")),this.capture(me),this.capture(":")):k&&(me=ht);const tt=this.parseChildren();I[me]=1===Object.keys(tt).length?tt[ht]:new bn([],tt),this.consumeOptional("//")}return I}peekStartsWith(k){return this.remaining.startsWith(k)}consumeOptional(k){return!!this.peekStartsWith(k)&&(this.remaining=this.remaining.substring(k.length),!0)}capture(k){if(!this.consumeOptional(k))throw new w.vHH(4011,!1)}}function Ue(O){return O.segments.length>0?new bn([],{[ht]:O}):O}function Wt(O){const k={};for(const V of Object.keys(O.children)){const me=Wt(O.children[V]);(me.segments.length>0||me.hasChildren())&&(k[V]=me)}return function Sn(O){if(1===O.numberOfChildren&&O.children[ht]){const k=O.children[ht];return new bn(O.segments.concat(k.segments),k.children)}return O}(new bn(O.segments,k))}function jn(O){return O instanceof Ii}function er(O,k,I,V,Y){if(0===I.length)return eo(k.root,k.root,k.root,V,Y);const me=function So(O){if("string"==typeof O[0]&&1===O.length&&"/"===O[0])return new yn(!0,0,O);let k=0,I=!1;const V=O.reduce((Y,me,tt)=>{if("object"==typeof me&&null!=me){if(me.outlets){const bt={};return $e(me.outlets,(An,pi)=>{bt[pi]="string"==typeof An?An.split("/"):An}),[...Y,{outlets:bt}]}if(me.segmentPath)return[...Y,me.segmentPath]}return"string"!=typeof me?[...Y,me]:0===tt?(me.split("/").forEach((bt,An)=>{0==An&&"."===bt||(0==An&&""===bt?I=!0:".."===bt?k++:""!=bt&&Y.push(bt))}),Y):[...Y,me]},[]);return new yn(I,k,V)}(I);return me.toRoot()?eo(k.root,k.root,new bn([],{}),V,Y):function tt(An){const pi=function va(O,k,I,V){if(O.isAbsolute)return new tr(k.root,!0,0);if(-1===V)return new tr(I,I===k.root,0);return function Yi(O,k,I){let V=O,Y=k,me=I;for(;me>Y;){if(me-=Y,V=V.parent,!V)throw new w.vHH(4005,!1);Y=V.segments.length}return new tr(V,!1,Y-me)}(I,V+(qi(O.commands[0])?0:1),O.numberOfDoubleDots)}(me,k,O.snapshot?._urlSegment,An),or=pi.processChildren?fn(pi.segmentGroup,pi.index,me.commands):kn(pi.segmentGroup,pi.index,me.commands);return eo(k.root,pi.segmentGroup,or,V,Y)}(O.snapshot?._lastPathIndex)}function qi(O){return"object"==typeof O&&null!=O&&!O.outlets&&!O.segmentPath}function _o(O){return"object"==typeof O&&null!=O&&O.outlets}function eo(O,k,I,V,Y){let tt,me={};V&&$e(V,(An,pi)=>{me[pi]=Array.isArray(An)?An.map(or=>`${or}`):`${An}`}),tt=O===k?I:Cr(O,k,I);const bt=Ue(Wt(tt));return new Ii(bt,me,Y)}function Cr(O,k,I){const V={};return $e(O.children,(Y,me)=>{V[me]=Y===k?I:Cr(Y,k,I)}),new bn(O.segments,V)}class yn{constructor(k,I,V){if(this.isAbsolute=k,this.numberOfDoubleDots=I,this.commands=V,k&&V.length>0&&qi(V[0]))throw new w.vHH(4003,!1);const Y=V.find(_o);if(Y&&Y!==Dn(V))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tr{constructor(k,I,V){this.segmentGroup=k,this.processChildren=I,this.index=V}}function kn(O,k,I){if(O||(O=new bn([],{})),0===O.segments.length&&O.hasChildren())return fn(O,k,I);const V=function Ie(O,k,I){let V=0,Y=k;const me={match:!1,pathIndex:0,commandIndex:0};for(;Y<O.segments.length;){if(V>=I.length)return me;const tt=O.segments[Y],bt=I[V];if(_o(bt))break;const An=`${bt}`,pi=V<I.length-1?I[V+1]:null;if(Y>0&&void 0===An)break;if(An&&pi&&"object"==typeof pi&&void 0===pi.outlets){if(!Mi(An,pi,tt))return me;V+=2}else{if(!Mi(An,{},tt))return me;V++}Y++}return{match:!0,pathIndex:Y,commandIndex:V}}(O,k,I),Y=I.slice(V.commandIndex);if(V.match&&V.pathIndex<O.segments.length){const me=new bn(O.segments.slice(0,V.pathIndex),{});return me.children[ht]=new bn(O.segments.slice(V.pathIndex),O.children),fn(me,0,Y)}return V.match&&0===Y.length?new bn(O.segments,{}):V.match&&!O.hasChildren()?Gt(O,k,I):V.match?fn(O,0,Y):Gt(O,k,I)}function fn(O,k,I){if(0===I.length)return new bn(O.segments,{});{const V=function ps(O){return _o(O[0])?O[0].outlets:{[ht]:O}}(I),Y={};return $e(V,(me,tt)=>{"string"==typeof me&&(me=[me]),null!==me&&(Y[tt]=kn(O.children[tt],k,me))}),$e(O.children,(me,tt)=>{void 0===V[tt]&&(Y[tt]=me)}),new bn(O.segments,Y)}}function Gt(O,k,I){const V=O.segments.slice(0,k);let Y=0;for(;Y<I.length;){const me=I[Y];if(_o(me)){const An=Ln(me.outlets);return new bn(V,An)}if(0===Y&&qi(I[0])){V.push(new Ji(O.segments[k].path,di(I[0]))),Y++;continue}const tt=_o(me)?me.outlets[ht]:`${me}`,bt=Y<I.length-1?I[Y+1]:null;tt&&bt&&qi(bt)?(V.push(new Ji(tt,di(bt))),Y+=2):(V.push(new Ji(tt,{})),Y++)}return new bn(V,{})}function Ln(O){const k={};return $e(O,(I,V)=>{"string"==typeof I&&(I=[I]),null!==I&&(k[V]=Gt(new bn([],{}),0,I))}),k}function di(O){const k={};return $e(O,(I,V)=>k[V]=`${I}`),k}function Mi(O,k,I){return O==I.path&&tn(k,I.parameters)}class mi{constructor(k,I){this.id=k,this.url=I}}class Ki extends mi{constructor(k,I,V="imperative",Y=null){super(k,I),this.type=0,this.navigationTrigger=V,this.restoredState=Y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vr extends mi{constructor(k,I,V){super(k,I),this.urlAfterRedirects=V,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ro extends mi{constructor(k,I,V,Y){super(k,I),this.reason=V,this.code=Y,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ur extends mi{constructor(k,I,V,Y){super(k,I),this.error=V,this.target=Y,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pr extends mi{constructor(k,I,V,Y){super(k,I),this.urlAfterRedirects=V,this.state=Y,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends mi{constructor(k,I,V,Y){super(k,I),this.urlAfterRedirects=V,this.state=Y,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Es extends mi{constructor(k,I,V,Y,me){super(k,I),this.urlAfterRedirects=V,this.state=Y,this.shouldActivate=me,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cs extends mi{constructor(k,I,V,Y){super(k,I),this.urlAfterRedirects=V,this.state=Y,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class es extends mi{constructor(k,I,V,Y){super(k,I),this.urlAfterRedirects=V,this.state=Y,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ps{constructor(k){this.route=k,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kl{constructor(k){this.route=k,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wo{constructor(k){this.snapshot=k,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Na{constructor(k){this.snapshot=k,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class za{constructor(k){this.snapshot=k,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tl{constructor(k){this.snapshot=k,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Io{constructor(k,I,V){this.routerEvent=k,this.position=I,this.anchor=V,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Os{constructor(k){this._root=k}get root(){return this._root.value}parent(k){const I=this.pathFromRoot(k);return I.length>1?I[I.length-2]:null}children(k){const I=xa(k,this._root);return I?I.children.map(V=>V.value):[]}firstChild(k){const I=xa(k,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(k){const I=to(k,this._root);return I.length<2?[]:I[I.length-2].children.map(Y=>Y.value).filter(Y=>Y!==k)}pathFromRoot(k){return to(k,this._root).map(I=>I.value)}}function xa(O,k){if(O===k.value)return k;for(const I of k.children){const V=xa(O,I);if(V)return V}return null}function to(O,k){if(O===k.value)return[k];for(const I of k.children){const V=to(O,I);if(V.length)return V.unshift(k),V}return[]}class yo{constructor(k,I){this.value=k,this.children=I}toString(){return`TreeNode(${this.value})`}}function ra(O){const k={};return O&&O.children.forEach(I=>k[I.value.outlet]=I),k}class oa extends Os{constructor(k,I){super(k),this.snapshot=I,jo(this,k)}toString(){return this.snapshot.toString()}}function no(O,k){const I=function sa(O,k){const tt=new ms([],{},{},"",{},ht,k,null,O.root,-1,{});return new gs("",new yo(tt,[]))}(O,k),V=new a.X([new Ji("",{})]),Y=new a.X({}),me=new a.X({}),tt=new a.X({}),bt=new a.X(""),An=new No(V,Y,tt,bt,me,ht,k,I.root);return An.snapshot=I.root,new oa(new yo(An,[]),I)}class No{constructor(k,I,V,Y,me,tt,bt,An){this.url=k,this.params=I,this.queryParams=V,this.fragment=Y,this.data=me,this.outlet=tt,this.component=bt,this.title=this.data?.pipe((0,Ye.U)(pi=>pi[Xe]))??(0,de.of)(void 0),this._futureSnapshot=An}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ye.U)(k=>ot(k)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ye.U)(k=>ot(k)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aa(O,k="emptyOnly"){const I=O.pathFromRoot;let V=0;if("always"!==k)for(V=I.length-1;V>=1;){const Y=I[V],me=I[V-1];if(Y.routeConfig&&""===Y.routeConfig.path)V--;else{if(me.component)break;V--}}return function oo(O){return O.reduce((k,I)=>({params:{...k.params,...I.params},data:{...k.data,...I.data},resolve:{...I.data,...k.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(V))}class ms{constructor(k,I,V,Y,me,tt,bt,An,pi,or,Di,Gr){this.url=k,this.params=I,this.queryParams=V,this.fragment=Y,this.data=me,this.outlet=tt,this.component=bt,this.title=this.data?.[Xe],this.routeConfig=An,this._urlSegment=pi,this._lastPathIndex=or,this._correctedLastPathIndex=Gr??or,this._resolve=Di}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ot(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ot(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends Os{constructor(k,I){super(I),this.url=k,jo(this,I)}toString(){return Rs(this._root)}}function jo(O,k){k.value._routerState=O,k.children.forEach(I=>jo(O,I))}function Rs(O){const k=O.children.length>0?` { ${O.children.map(Rs).join(", ")} } `:"";return`${O.value}${k}`}function ks(O){if(O.snapshot){const k=O.snapshot,I=O._futureSnapshot;O.snapshot=I,tn(k.queryParams,I.queryParams)||O.queryParams.next(I.queryParams),k.fragment!==I.fragment&&O.fragment.next(I.fragment),tn(k.params,I.params)||O.params.next(I.params),function St(O,k){if(O.length!==k.length)return!1;for(let I=0;I<O.length;++I)if(!tn(O[I],k[I]))return!1;return!0}(k.url,I.url)||O.url.next(I.url),tn(k.data,I.data)||O.data.next(I.data)}else O.snapshot=O._futureSnapshot,O.data.next(O._futureSnapshot.data)}function ba(O,k){const I=tn(O.params,k.params)&&function ji(O,k){return dn(O,k)&&O.every((I,V)=>tn(I.parameters,k[V].parameters))}(O.url,k.url);return I&&!(!O.parent!=!k.parent)&&(!O.parent||ba(O.parent,k.parent))}function Ho(O,k,I){if(I&&O.shouldReuseRoute(k.value,I.value.snapshot)){const V=I.value;V._futureSnapshot=k.value;const Y=function wa(O,k,I){return k.children.map(V=>{for(const Y of I.children)if(O.shouldReuseRoute(V.value,Y.value.snapshot))return Ho(O,V,Y);return Ho(O,V)})}(O,k,I);return new yo(V,Y)}{if(O.shouldAttach(k.value)){const me=O.retrieve(k.value);if(null!==me){const tt=me.route;return tt.value._futureSnapshot=k.value,tt.children=k.children.map(bt=>Ho(O,bt)),tt}}const V=function nl(O){return new No(new a.X(O.url),new a.X(O.params),new a.X(O.queryParams),new a.X(O.fragment),new a.X(O.data),O.outlet,O.component,O)}(k.value),Y=k.children.map(me=>Ho(O,me));return new yo(V,Y)}}const ts="ngNavigationCancelingError";function Ms(O,k){const{redirectTo:I,navigationBehaviorOptions:V}=jn(k)?{redirectTo:k,navigationBehaviorOptions:void 0}:k,Y=Eo(!1,0,k);return Y.url=I,Y.navigationBehaviorOptions=V,Y}function Eo(O,k,I){const V=new Error("NavigationCancelingError: "+(O||""));return V[ts]=!0,V.cancellationCode=k,I&&(V.url=I),V}function Kr(O){return la(O)&&jn(O.url)}function la(O){return O&&O[ts]}class $s{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ns,this.attachRef=null}}let ns=(()=>{class O{constructor(){this.contexts=new Map}onChildOutletCreated(I,V){const Y=this.getOrCreateContext(I);Y.outlet=V,this.contexts.set(I,Y)}onChildOutletDestroyed(I){const V=this.getContext(I);V&&(V.outlet=null,V.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let V=this.getContext(I);return V||(V=new $s,this.contexts.set(I,V)),V}getContext(I){return this.contexts.get(I)||null}}return O.\u0275fac=function(I){return new(I||O)},O.\u0275prov=w.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const il=!1;let Br=(()=>{class O{constructor(I,V,Y,me,tt){this.parentContexts=I,this.location=V,this.changeDetector=me,this.environmentInjector=tt,this.activated=null,this._activatedRoute=null,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.name=Y||ht,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,il);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,il);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,il);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,V){this.activated=I,this._activatedRoute=V,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,V){if(this.isActivated)throw new w.vHH(4013,il);this._activatedRoute=I;const Y=this.location,tt=I._futureSnapshot.component,bt=this.parentContexts.getOrCreateContext(this.name).children,An=new hl(I,bt,Y.injector);if(V&&function Lo(O){return!!O.resolveComponentFactory}(V)){const pi=V.resolveComponentFactory(tt);this.activated=Y.createComponent(pi,Y.length,An)}else this.activated=Y.createComponent(tt,{index:Y.length,injector:An,environmentInjector:V??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return O.\u0275fac=function(I){return new(I||O)(w.Y36(ns),w.Y36(w.s_b),w.$8M("name"),w.Y36(w.sBO),w.Y36(w.lqb))},O.\u0275dir=w.lG2({type:O,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),O})();class hl{constructor(k,I,V){this.route=k,this.childContexts=I,this.parent=V}get(k,I){return k===No?this.route:k===ns?this.childContexts:this.parent.get(k,I)}}let Go=(()=>{class O{}return O.\u0275fac=function(I){return new(I||O)},O.\u0275cmp=w.Xpm({type:O,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(I,V){1&I&&w._UZ(0,"router-outlet")},dependencies:[Br],encapsulation:2}),O})();function vo(O,k){return O.providers&&!O._injector&&(O._injector=(0,w.MMx)(O.providers,k,`Route: ${O.path}`)),O._injector??k}function _s(O){const k=O.children&&O.children.map(_s),I=k?{...O,children:k}:{...O};return!I.component&&!I.loadComponent&&(k||I.loadChildren)&&I.outlet&&I.outlet!==ht&&(I.component=Go),I}function xo(O){return O.outlet||ht}function Hi(O,k){const I=O.filter(V=>xo(V)===k);return I.push(...O.filter(V=>xo(V)!==k)),I}function Co(O){if(!O)return null;if(O.routeConfig?._injector)return O.routeConfig._injector;for(let k=O.parent;k;k=k.parent){const I=k.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class Ca{constructor(k,I,V,Y){this.routeReuseStrategy=k,this.futureState=I,this.currState=V,this.forwardEvent=Y}activate(k){const I=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,V,k),ks(this.futureState.root),this.activateChildRoutes(I,V,k)}deactivateChildRoutes(k,I,V){const Y=ra(I);k.children.forEach(me=>{const tt=me.value.outlet;this.deactivateRoutes(me,Y[tt],V),delete Y[tt]}),$e(Y,(me,tt)=>{this.deactivateRouteAndItsChildren(me,V)})}deactivateRoutes(k,I,V){const Y=k.value,me=I?I.value:null;if(Y===me)if(Y.component){const tt=V.getContext(Y.outlet);tt&&this.deactivateChildRoutes(k,I,tt.children)}else this.deactivateChildRoutes(k,I,V);else me&&this.deactivateRouteAndItsChildren(I,V)}deactivateRouteAndItsChildren(k,I){k.value.component&&this.routeReuseStrategy.shouldDetach(k.value.snapshot)?this.detachAndStoreRouteSubtree(k,I):this.deactivateRouteAndOutlet(k,I)}detachAndStoreRouteSubtree(k,I){const V=I.getContext(k.value.outlet),Y=V&&k.value.component?V.children:I,me=ra(k);for(const tt of Object.keys(me))this.deactivateRouteAndItsChildren(me[tt],Y);if(V&&V.outlet){const tt=V.outlet.detach(),bt=V.children.onOutletDeactivated();this.routeReuseStrategy.store(k.value.snapshot,{componentRef:tt,route:k,contexts:bt})}}deactivateRouteAndOutlet(k,I){const V=I.getContext(k.value.outlet),Y=V&&k.value.component?V.children:I,me=ra(k);for(const tt of Object.keys(me))this.deactivateRouteAndItsChildren(me[tt],Y);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(k,I,V){const Y=ra(I);k.children.forEach(me=>{this.activateRoutes(me,Y[me.value.outlet],V),this.forwardEvent(new tl(me.value.snapshot))}),k.children.length&&this.forwardEvent(new Na(k.value.snapshot))}activateRoutes(k,I,V){const Y=k.value,me=I?I.value:null;if(ks(Y),Y===me)if(Y.component){const tt=V.getOrCreateContext(Y.outlet);this.activateChildRoutes(k,I,tt.children)}else this.activateChildRoutes(k,I,V);else if(Y.component){const tt=V.getOrCreateContext(Y.outlet);if(this.routeReuseStrategy.shouldAttach(Y.snapshot)){const bt=this.routeReuseStrategy.retrieve(Y.snapshot);this.routeReuseStrategy.store(Y.snapshot,null),tt.children.onOutletReAttached(bt.contexts),tt.attachRef=bt.componentRef,tt.route=bt.route.value,tt.outlet&&tt.outlet.attach(bt.componentRef,bt.route.value),ks(bt.route.value),this.activateChildRoutes(k,null,tt.children)}else{const bt=Co(Y.snapshot),An=bt?.get(w._Vd)??null;tt.attachRef=null,tt.route=Y,tt.resolver=An,tt.injector=bt,tt.outlet&&tt.outlet.activateWith(Y,tt.injector),this.activateChildRoutes(k,null,tt.children)}}else this.activateChildRoutes(k,null,V)}}class Bs{constructor(k){this.path=k,this.route=this.path[this.path.length-1]}}class rs{constructor(k,I){this.component=k,this.route=I}}function Ds(O,k,I){const V=O._root;return En(V,k?k._root:null,I,[V.value])}function os(O,k){const I=Symbol(),V=k.get(O,I);return V===I?"function"!=typeof O||(0,w.Z0I)(O)?k.get(O):O:V}function En(O,k,I,V,Y={canDeactivateChecks:[],canActivateChecks:[]}){const me=ra(k);return O.children.forEach(tt=>{(function lr(O,k,I,V,Y={canDeactivateChecks:[],canActivateChecks:[]}){const me=O.value,tt=k?k.value:null,bt=I?I.getContext(O.value.outlet):null;if(tt&&me.routeConfig===tt.routeConfig){const An=function Va(O,k,I){if("function"==typeof I)return I(O,k);switch(I){case"pathParamsChange":return!dn(O.url,k.url);case"pathParamsOrQueryParamsChange":return!dn(O.url,k.url)||!tn(O.queryParams,k.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ba(O,k)||!tn(O.queryParams,k.queryParams);default:return!ba(O,k)}}(tt,me,me.routeConfig.runGuardsAndResolvers);An?Y.canActivateChecks.push(new Bs(V)):(me.data=tt.data,me._resolvedData=tt._resolvedData),En(O,k,me.component?bt?bt.children:null:I,V,Y),An&&bt&&bt.outlet&&bt.outlet.isActivated&&Y.canDeactivateChecks.push(new rs(bt.outlet.component,tt))}else tt&&ua(k,bt,Y),Y.canActivateChecks.push(new Bs(V)),En(O,null,me.component?bt?bt.children:null:I,V,Y)})(tt,me[tt.value.outlet],I,V.concat([tt.value]),Y),delete me[tt.value.outlet]}),$e(me,(tt,bt)=>ua(tt,I.getContext(bt),Y)),Y}function ua(O,k,I){const V=ra(O),Y=O.value;$e(V,(me,tt)=>{ua(me,Y.component?k?k.children.getContext(tt):null:k,I)}),I.canDeactivateChecks.push(new rs(Y.component&&k&&k.outlet&&k.outlet.isActivated?k.outlet.component:null,Y))}function jr(O){return"function"==typeof O}function ys(O){return O instanceof st||"EmptyError"===O?.name}const Nr=Symbol("INITIAL_VALUE");function $o(){return(0,Ce.w)(O=>(0,nt.a)(O.map(k=>k.pipe((0,we.q)(1),(0,At.O)(Nr)))).pipe((0,Ye.U)(k=>{for(const I of k)if(!0!==I){if(I===Nr)return Nr;if(!1===I||I instanceof Ii)return I}return!0}),(0,zt.h)(k=>k!==Nr),(0,we.q)(1)))}function Jl(O){return(0,rt.z)((0,Xt.b)(k=>{if(jn(k))throw Ms(0,k)}),(0,Ye.U)(k=>!0===k))}const Bl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yo(O,k,I,V,Y){const me=Ha(O,k,I);return me.matched?function fl(O,k,I,V){const Y=k.canMatch;if(!Y||0===Y.length)return(0,de.of)(!0);const me=Y.map(tt=>{const bt=os(tt,O);return Ot(function bi(O){return O&&jr(O.canMatch)}(bt)?bt.canMatch(k,I):O.runInContext(()=>bt(k,I)))});return(0,de.of)(me).pipe($o(),Jl())}(V=vo(k,V),k,I).pipe((0,Ye.U)(tt=>!0===tt?me:{...Bl})):(0,de.of)(me)}function Ha(O,k,I){if(""===k.path)return"full"===k.pathMatch&&(O.hasChildren()||I.length>0)?{...Bl}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const Y=(k.matcher||Se)(I,O,k);if(!Y)return{...Bl};const me={};$e(Y.posParams,(bt,An)=>{me[An]=bt.path});const tt=Y.consumed.length>0?{...me,...Y.consumed[Y.consumed.length-1].parameters}:me;return{matched:!0,consumedSegments:Y.consumed,remainingSegments:I.slice(Y.consumed.length),parameters:tt,positionalParamSegments:Y.posParams??{}}}function da(O,k,I,V,Y="corrected"){if(I.length>0&&function z(O,k,I){return I.some(V=>$(O,k,V)&&xo(V)!==ht)}(O,I,V)){const tt=new bn(k,function Nl(O,k,I,V){const Y={};Y[ht]=V,V._sourceSegment=O,V._segmentIndexShift=k.length;for(const me of I)if(""===me.path&&xo(me)!==ht){const tt=new bn([],{});tt._sourceSegment=O,tt._segmentIndexShift=k.length,Y[xo(me)]=tt}return Y}(O,k,V,new bn(I,O.children)));return tt._sourceSegment=O,tt._segmentIndexShift=k.length,{segmentGroup:tt,slicedSegments:[]}}if(0===I.length&&function re(O,k,I){return I.some(V=>$(O,k,V))}(O,I,V)){const tt=new bn(O.segments,function xc(O,k,I,V,Y,me){const tt={};for(const bt of V)if($(O,I,bt)&&!Y[xo(bt)]){const An=new bn([],{});An._sourceSegment=O,An._segmentIndexShift="legacy"===me?O.segments.length:k.length,tt[xo(bt)]=An}return{...Y,...tt}}(O,k,I,V,O.children,Y));return tt._sourceSegment=O,tt._segmentIndexShift=k.length,{segmentGroup:tt,slicedSegments:I}}const me=new bn(O.segments,O.children);return me._sourceSegment=O,me._segmentIndexShift=k.length,{segmentGroup:me,slicedSegments:I}}function $(O,k,I){return(!(O.hasChildren()||k.length>0)||"full"!==I.pathMatch)&&""===I.path}function ye(O,k,I,V){return!!(xo(O)===V||V!==ht&&$(k,I,O))&&("**"===O.path||Ha(k,O,I).matched)}function gt(O,k,I){return 0===k.length&&!O.children[I]}const vn=!1;class On{constructor(k){this.segmentGroup=k||null}}class yi{constructor(k){this.urlTree=k}}function xr(O){return(0,pt._)(new On(O))}function Mr(O){return(0,pt._)(new yi(O))}class Rr{constructor(k,I,V,Y,me){this.injector=k,this.configLoader=I,this.urlSerializer=V,this.urlTree=Y,this.config=me,this.allowRedirects=!0}apply(){const k=da(this.urlTree.root,[],[],this.config).segmentGroup,I=new bn(k.segments,k.children);return this.expandSegmentGroup(this.injector,this.config,I,ht).pipe((0,Ye.U)(me=>this.createUrlTree(Wt(me),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,ii.K)(me=>{if(me instanceof yi)return this.allowRedirects=!1,this.match(me.urlTree);throw me instanceof On?this.noMatchError(me):me}))}match(k){return this.expandSegmentGroup(this.injector,this.config,k.root,ht).pipe((0,Ye.U)(Y=>this.createUrlTree(Wt(Y),k.queryParams,k.fragment))).pipe((0,ii.K)(Y=>{throw Y instanceof On?this.noMatchError(Y):Y}))}noMatchError(k){return new w.vHH(4002,vn)}createUrlTree(k,I,V){const Y=Ue(k);return new Ii(Y,I,V)}expandSegmentGroup(k,I,V,Y){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(k,I,V).pipe((0,Ye.U)(me=>new bn([],me))):this.expandSegment(k,V,I,V.segments,Y,!0)}expandChildren(k,I,V){const Y=[];for(const me of Object.keys(V.children))"primary"===me?Y.unshift(me):Y.push(me);return(0,_.D)(Y).pipe((0,Tn.b)(me=>{const tt=V.children[me],bt=Hi(I,me);return this.expandSegmentGroup(k,bt,tt,me).pipe((0,Ye.U)(An=>({segment:An,outlet:me})))}),wi((me,tt)=>(me[tt.outlet]=tt.segment,me),{}),Li())}expandSegment(k,I,V,Y,me,tt){return(0,_.D)(V).pipe((0,Tn.b)(bt=>this.expandSegmentAgainstRoute(k,I,V,bt,Y,me,tt).pipe((0,ii.K)(pi=>{if(pi instanceof On)return(0,de.of)(null);throw pi}))),yt(bt=>!!bt),(0,ii.K)((bt,An)=>{if(ys(bt))return gt(I,Y,me)?(0,de.of)(new bn([],{})):xr(I);throw bt}))}expandSegmentAgainstRoute(k,I,V,Y,me,tt,bt){return ye(Y,I,me,tt)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(k,I,Y,me,tt):bt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(k,I,V,Y,me,tt):xr(I):xr(I)}expandSegmentAgainstRouteUsingRedirect(k,I,V,Y,me,tt){return"**"===Y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(k,V,Y,tt):this.expandRegularSegmentAgainstRouteUsingRedirect(k,I,V,Y,me,tt)}expandWildCardWithParamsAgainstRouteUsingRedirect(k,I,V,Y){const me=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?Mr(me):this.lineralizeSegments(V,me).pipe((0,Jt.z)(tt=>{const bt=new bn(tt,{});return this.expandSegment(k,bt,I,tt,Y,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(k,I,V,Y,me,tt){const{matched:bt,consumedSegments:An,remainingSegments:pi,positionalParamSegments:or}=Ha(I,Y,me);if(!bt)return xr(I);const Di=this.applyRedirectCommands(An,Y.redirectTo,or);return Y.redirectTo.startsWith("/")?Mr(Di):this.lineralizeSegments(Y,Di).pipe((0,Jt.z)(Gr=>this.expandSegment(k,I,V,Gr.concat(pi),tt,!1)))}matchSegmentAgainstRoute(k,I,V,Y,me){return"**"===V.path?(k=vo(V,k),V.loadChildren?(V._loadedRoutes?(0,de.of)({routes:V._loadedRoutes,injector:V._loadedInjector}):this.configLoader.loadChildren(k,V)).pipe((0,Ye.U)(bt=>(V._loadedRoutes=bt.routes,V._loadedInjector=bt.injector,new bn(Y,{})))):(0,de.of)(new bn(Y,{}))):Yo(I,V,Y,k).pipe((0,Ce.w)(({matched:tt,consumedSegments:bt,remainingSegments:An})=>tt?this.getChildConfig(k=V._injector??k,V,Y).pipe((0,Jt.z)(or=>{const Di=or.injector??k,Gr=or.routes,{segmentGroup:vs,slicedSegments:Xs}=da(I,bt,An,Gr),d=new bn(vs.segments,vs.children);if(0===Xs.length&&d.hasChildren())return this.expandChildren(Di,Gr,d).pipe((0,Ye.U)(y=>new bn(bt,y)));if(0===Gr.length&&0===Xs.length)return(0,de.of)(new bn(bt,{}));const i=xo(V)===me;return this.expandSegment(Di,d,Gr,Xs,i?ht:me,!0).pipe((0,Ye.U)(p=>new bn(bt.concat(p.segments),p.children)))})):xr(I)))}getChildConfig(k,I,V){return I.children?(0,de.of)({routes:I.children,injector:k}):I.loadChildren?void 0!==I._loadedRoutes?(0,de.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function ja(O,k,I,V){const Y=k.canLoad;if(void 0===Y||0===Y.length)return(0,de.of)(!0);const me=Y.map(tt=>{const bt=os(tt,O);return Ot(function q(O){return O&&jr(O.canLoad)}(bt)?bt.canLoad(k,I):O.runInContext(()=>bt(k,I)))});return(0,de.of)(me).pipe($o(),Jl())}(k,I,V).pipe((0,Jt.z)(Y=>Y?this.configLoader.loadChildren(k,I).pipe((0,Xt.b)(me=>{I._loadedRoutes=me.routes,I._loadedInjector=me.injector})):function br(O){return(0,pt._)(Eo(vn,3))}())):(0,de.of)({routes:[],injector:k})}lineralizeSegments(k,I){let V=[],Y=I.root;for(;;){if(V=V.concat(Y.segments),0===Y.numberOfChildren)return(0,de.of)(V);if(Y.numberOfChildren>1||!Y.children[ht])return(0,pt._)(new w.vHH(4e3,vn));Y=Y.children[ht]}}applyRedirectCommands(k,I,V){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),k,V)}applyRedirectCreateUrlTree(k,I,V,Y){const me=this.createSegmentGroup(k,I.root,V,Y);return new Ii(me,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(k,I){const V={};return $e(k,(Y,me)=>{if("string"==typeof Y&&Y.startsWith(":")){const bt=Y.substring(1);V[me]=I[bt]}else V[me]=Y}),V}createSegmentGroup(k,I,V,Y){const me=this.createSegments(k,I.segments,V,Y);let tt={};return $e(I.children,(bt,An)=>{tt[An]=this.createSegmentGroup(k,bt,V,Y)}),new bn(me,tt)}createSegments(k,I,V,Y){return I.map(me=>me.path.startsWith(":")?this.findPosParam(k,me,Y):this.findOrReturn(me,V))}findPosParam(k,I,V){const Y=V[I.path.substring(1)];if(!Y)throw new w.vHH(4001,vn);return Y}findOrReturn(k,I){let V=0;for(const Y of I){if(Y.path===k.path)return I.splice(V),Y;V++}return k}}class ss{}class as{constructor(k,I,V,Y,me,tt,bt,An){this.injector=k,this.rootComponentType=I,this.config=V,this.urlTree=Y,this.url=me,this.paramsInheritanceStrategy=tt,this.relativeLinkResolution=bt,this.urlSerializer=An}recognize(){const k=da(this.urlTree.root,[],[],this.config.filter(I=>void 0===I.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,k,ht).pipe((0,Ye.U)(I=>{if(null===I)return null;const V=new ms([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),Y=new yo(V,I),me=new gs(this.url,Y);return this.inheritParamsAndData(me._root),me}))}inheritParamsAndData(k){const I=k.value,V=aa(I,this.paramsInheritanceStrategy);I.params=Object.freeze(V.params),I.data=Object.freeze(V.data),k.children.forEach(Y=>this.inheritParamsAndData(Y))}processSegmentGroup(k,I,V,Y){return 0===V.segments.length&&V.hasChildren()?this.processChildren(k,I,V):this.processSegment(k,I,V,V.segments,Y)}processChildren(k,I,V){return(0,_.D)(Object.keys(V.children)).pipe((0,Tn.b)(Y=>{const me=V.children[Y],tt=Hi(I,Y);return this.processSegmentGroup(k,tt,me,Y)}),wi((Y,me)=>Y&&me?(Y.push(...me),Y):null),function Jn(O,k=!1){return(0,et.e)((I,V)=>{let Y=0;I.subscribe((0,Zt.x)(V,me=>{const tt=O(me,Y++);(tt||k)&&V.next(me),!tt&&V.complete()}))})}(Y=>null!==Y),Mn(null),Li(),(0,Ye.U)(Y=>{if(null===Y)return null;const me=ko(Y);return function zo(O){O.sort((k,I)=>k.value.outlet===ht?-1:I.value.outlet===ht?1:k.value.outlet.localeCompare(I.value.outlet))}(me),me}))}processSegment(k,I,V,Y,me){return(0,_.D)(I).pipe((0,Tn.b)(tt=>this.processSegmentAgainstRoute(tt._injector??k,tt,V,Y,me)),yt(tt=>!!tt),(0,ii.K)(tt=>{if(ys(tt))return gt(V,Y,me)?(0,de.of)([]):(0,de.of)(null);throw tt}))}processSegmentAgainstRoute(k,I,V,Y,me){if(I.redirectTo||!ye(I,V,Y,me))return(0,de.of)(null);let tt;if("**"===I.path){const bt=Y.length>0?Dn(Y).parameters:{},An=ec(V)+Y.length,pi=new ms(Y,bt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zl(I),xo(I),I.component??I._loadedComponent??null,I,Ga(V),An,pl(I),An);tt=(0,de.of)({snapshot:pi,consumedSegments:[],remainingSegments:[]})}else tt=Yo(V,I,Y,k).pipe((0,Ye.U)(({matched:bt,consumedSegments:An,remainingSegments:pi,parameters:or})=>{if(!bt)return null;const Di=ec(V)+An.length;return{snapshot:new ms(An,or,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zl(I),xo(I),I.component??I._loadedComponent??null,I,Ga(V),Di,pl(I),Di),consumedSegments:An,remainingSegments:pi}}));return tt.pipe((0,Ce.w)(bt=>{if(null===bt)return(0,de.of)(null);const{snapshot:An,consumedSegments:pi,remainingSegments:or}=bt;k=I._injector??k;const Di=I._loadedInjector??k,Gr=function ha(O){return O.children?O.children:O.loadChildren?O._loadedRoutes:[]}(I),{segmentGroup:vs,slicedSegments:Xs}=da(V,pi,or,Gr.filter(i=>void 0===i.redirectTo),this.relativeLinkResolution);if(0===Xs.length&&vs.hasChildren())return this.processChildren(Di,Gr,vs).pipe((0,Ye.U)(i=>null===i?null:[new yo(An,i)]));if(0===Gr.length&&0===Xs.length)return(0,de.of)([new yo(An,[])]);const d=xo(I)===me;return this.processSegment(Di,Gr,vs,Xs,d?ht:me).pipe((0,Ye.U)(i=>null===i?null:[new yo(An,i)]))}))}}function bc(O){const k=O.value.routeConfig;return k&&""===k.path&&void 0===k.redirectTo}function ko(O){const k=[],I=new Set;for(const V of O){if(!bc(V)){k.push(V);continue}const Y=k.find(me=>V.value.routeConfig===me.value.routeConfig);void 0!==Y?(Y.children.push(...V.children),I.add(Y)):k.push(V)}for(const V of I){const Y=ko(V.children);k.push(new yo(V.value,Y))}return k.filter(V=>!I.has(V))}function Ga(O){let k=O;for(;k._sourceSegment;)k=k._sourceSegment;return k}function ec(O){let k=O,I=k._segmentIndexShift??0;for(;k._sourceSegment;)k=k._sourceSegment,I+=k._segmentIndexShift??0;return I-1}function zl(O){return O.data||{}}function pl(O){return O.resolve||{}}function S(O){return"string"==typeof O.title||null===O.title}function G(O){return(0,Ce.w)(k=>{const I=O(k);return I?(0,_.D)(I).pipe((0,Ye.U)(()=>k)):(0,de.of)(k)})}let ue=(()=>{class O{buildTitle(I){let V,Y=I.root;for(;void 0!==Y;)V=this.getResolvedTitleForRoute(Y)??V,Y=Y.children.find(me=>me.outlet===ht);return V}getResolvedTitleForRoute(I){return I.data[Xe]}}return O.\u0275fac=function(I){return new(I||O)},O.\u0275prov=w.Yz7({token:O,factory:function(){return(0,w.f3M)(Re)},providedIn:"root"}),O})(),Re=(()=>{class O extends ue{constructor(I){super(),this.title=I}updateTitle(I){const V=this.buildTitle(I);void 0!==V&&this.title.setTitle(V)}}return O.\u0275fac=function(I){return new(I||O)(w.LFG(Fe.Dx))},O.\u0275prov=w.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();class Rt{}class Vn extends class ln{shouldDetach(k){return!1}store(k,I){}shouldAttach(k){return!1}retrieve(k){return null}shouldReuseRoute(k,I){return k.routeConfig===I.routeConfig}}{}const hi=new w.OlP("",{providedIn:"root",factory:()=>({})}),nr=new w.OlP("ROUTES");let Bi=(()=>{class O{constructor(I,V){this.injector=I,this.compiler=V,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,de.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const V=Ot(I.loadComponent()).pipe((0,Xt.b)(me=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=me}),(0,Tt.x)(()=>{this.componentLoaders.delete(I)})),Y=new Qe(V,()=>new Hn.x).pipe(kt());return this.componentLoaders.set(I,Y),Y}loadChildren(I,V){if(this.childrenLoaders.get(V))return this.childrenLoaders.get(V);if(V._loadedRoutes)return(0,de.of)({routes:V._loadedRoutes,injector:V._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(V);const me=this.loadModuleFactoryOrRoutes(V.loadChildren).pipe((0,Ye.U)(bt=>{this.onLoadEndListener&&this.onLoadEndListener(V);let An,pi,or=!1;Array.isArray(bt)?pi=bt:(An=bt.create(I).injector,pi=Wi(An.get(nr,[],w.XFs.Self|w.XFs.Optional)));return{routes:pi.map(_s),injector:An}}),(0,Tt.x)(()=>{this.childrenLoaders.delete(V)})),tt=new Qe(me,()=>new Hn.x).pipe(kt());return this.childrenLoaders.set(V,tt),tt}loadModuleFactoryOrRoutes(I){return Ot(I()).pipe((0,Jt.z)(V=>V instanceof w.YKP||Array.isArray(V)?(0,de.of)(V):(0,_.D)(this.compiler.compileModuleAsync(V))))}}return O.\u0275fac=function(I){return new(I||O)(w.LFG(w.zs3),w.LFG(w.Sil))},O.\u0275prov=w.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();class Gi{}class Ir{shouldProcessUrl(k){return!0}extract(k){return k}merge(k,I){return k}}function mo(O){throw O}function Mo(O,k,I){return k.parse("/")}const kr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ks={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Fo(){const O=(0,w.f3M)(ct),k=(0,w.f3M)(ns),I=(0,w.f3M)(Fn.Ye),V=(0,w.f3M)(w.zs3),Y=(0,w.f3M)(w.Sil),me=(0,w.f3M)(nr,{optional:!0})??[],tt=(0,w.f3M)(hi,{optional:!0})??{},bt=(0,w.f3M)(Re),An=(0,w.f3M)(ue,{optional:!0}),pi=(0,w.f3M)(Gi,{optional:!0}),or=(0,w.f3M)(Rt,{optional:!0}),Di=new zr(null,O,k,I,V,Y,Wi(me));return pi&&(Di.urlHandlingStrategy=pi),or&&(Di.routeReuseStrategy=or),Di.titleStrategy=An??bt,function ls(O,k){O.errorHandler&&(k.errorHandler=O.errorHandler),O.malformedUriErrorHandler&&(k.malformedUriErrorHandler=O.malformedUriErrorHandler),O.onSameUrlNavigation&&(k.onSameUrlNavigation=O.onSameUrlNavigation),O.paramsInheritanceStrategy&&(k.paramsInheritanceStrategy=O.paramsInheritanceStrategy),O.relativeLinkResolution&&(k.relativeLinkResolution=O.relativeLinkResolution),O.urlUpdateStrategy&&(k.urlUpdateStrategy=O.urlUpdateStrategy),O.canceledNavigationResolution&&(k.canceledNavigationResolution=O.canceledNavigationResolution)}(tt,Di),Di}let zr=(()=>{class O{constructor(I,V,Y,me,tt,bt,An){this.rootComponentType=I,this.urlSerializer=V,this.rootContexts=Y,this.location=me,this.config=An,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hn.x,this.errorHandler=mo,this.malformedUriErrorHandler=Mo,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,de.of)(void 0),this.urlHandlingStrategy=new Ir,this.routeReuseStrategy=new Vn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=tt.get(Bi),this.configLoader.onLoadEndListener=Gr=>this.triggerEvent(new kl(Gr)),this.configLoader.onLoadStartListener=Gr=>this.triggerEvent(new Ps(Gr)),this.ngModule=tt.get(w.h0i),this.console=tt.get(w.c2e);const Di=tt.get(w.R0b);this.isNgZoneEnabled=Di instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(An),this.currentUrlTree=function jt(){return new Ii(new bn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=no(this.currentUrlTree,this.rootComponentType),this.transitions=new a.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(I){const V=this.events;return I.pipe((0,zt.h)(Y=>0!==Y.id),(0,Ye.U)(Y=>({...Y,extractedUrl:this.urlHandlingStrategy.extract(Y.rawUrl)})),(0,Ce.w)(Y=>{let me=!1,tt=!1;return(0,de.of)(Y).pipe((0,Xt.b)(bt=>{this.currentNavigation={id:bt.id,initialUrl:bt.rawUrl,extractedUrl:bt.extractedUrl,trigger:bt.source,extras:bt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ce.w)(bt=>{const An=this.browserUrlTree.toString(),pi=!this.navigated||bt.extractedUrl.toString()!==An||An!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||pi)&&this.urlHandlingStrategy.shouldProcessUrl(bt.rawUrl))return Ko(bt.source)&&(this.browserUrlTree=bt.extractedUrl),(0,de.of)(bt).pipe((0,Ce.w)(Di=>{const Gr=this.transitions.getValue();return V.next(new Ki(Di.id,this.serializeUrl(Di.extractedUrl),Di.source,Di.restoredState)),Gr!==this.transitions.getValue()?dt.E:Promise.resolve(Di)}),function po(O,k,I,V){return(0,Ce.w)(Y=>function Po(O,k,I,V,Y){return new Rr(O,k,I,V,Y).apply()}(O,k,I,Y.extractedUrl,V).pipe((0,Ye.U)(me=>({...Y,urlAfterRedirects:me}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xt.b)(Di=>{this.currentNavigation={...this.currentNavigation,finalUrl:Di.urlAfterRedirects},Y.urlAfterRedirects=Di.urlAfterRedirects}),function Ul(O,k,I,V,Y,me){return(0,Jt.z)(tt=>function Ys(O,k,I,V,Y,me,tt="emptyOnly",bt="legacy"){return new as(O,k,I,V,Y,tt,bt,me).recognize().pipe((0,Ce.w)(An=>null===An?function Us(O){return new Et.y(k=>k.error(O))}(new ss):(0,de.of)(An)))}(O,k,I,tt.urlAfterRedirects,V.serialize(tt.urlAfterRedirects),V,Y,me).pipe((0,Ye.U)(bt=>({...tt,targetSnapshot:bt}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xt.b)(Di=>{if(Y.targetSnapshot=Di.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Di.extras.skipLocationChange){const vs=this.urlHandlingStrategy.merge(Di.urlAfterRedirects,Di.rawUrl);this.setBrowserUrl(vs,Di)}this.browserUrlTree=Di.urlAfterRedirects}const Gr=new pr(Di.id,this.serializeUrl(Di.extractedUrl),this.serializeUrl(Di.urlAfterRedirects),Di.targetSnapshot);V.next(Gr)}));if(pi&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Gr,extractedUrl:vs,source:Xs,restoredState:d,extras:i}=bt,c=new Ki(Gr,this.serializeUrl(vs),Xs,d);V.next(c);const p=no(vs,this.rootComponentType).snapshot;return Y={...bt,targetSnapshot:p,urlAfterRedirects:vs,extras:{...i,skipLocationChange:!1,replaceUrl:!1}},(0,de.of)(Y)}return this.rawUrlTree=bt.rawUrl,bt.resolve(null),dt.E}),(0,Xt.b)(bt=>{const An=new Yr(bt.id,this.serializeUrl(bt.extractedUrl),this.serializeUrl(bt.urlAfterRedirects),bt.targetSnapshot);this.triggerEvent(An)}),(0,Ye.U)(bt=>Y={...bt,guards:Ds(bt.targetSnapshot,bt.currentSnapshot,this.rootContexts)}),function Da(O,k){return(0,Jt.z)(I=>{const{targetSnapshot:V,currentSnapshot:Y,guards:{canActivateChecks:me,canDeactivateChecks:tt}}=I;return 0===tt.length&&0===me.length?(0,de.of)({...I,guardsResult:!0}):function Ns(O,k,I,V){return(0,_.D)(O).pipe((0,Jt.z)(Y=>function ol(O,k,I,V,Y){const me=k&&k.routeConfig?k.routeConfig.canDeactivate:null;if(!me||0===me.length)return(0,de.of)(!0);const tt=me.map(bt=>{const An=Co(k)??Y,pi=os(bt,An);return Ot(function Cn(O){return O&&jr(O.canDeactivate)}(pi)?pi.canDeactivate(O,k,I,V):An.runInContext(()=>pi(O,k,I,V))).pipe(yt())});return(0,de.of)(tt).pipe($o())}(Y.component,Y.route,I,k,V)),yt(Y=>!0!==Y,!0))}(tt,V,Y,O).pipe((0,Jt.z)(bt=>bt&&function Q(O){return"boolean"==typeof O}(bt)?function qs(O,k,I,V){return(0,_.D)(k).pipe((0,Tn.b)(Y=>(0,Oe.z)(function Fl(O,k){return null!==O&&k&&k(new wo(O)),(0,de.of)(!0)}(Y.route.parent,V),function Ll(O,k){return null!==O&&k&&k(new za(O)),(0,de.of)(!0)}(Y.route,V),function rl(O,k,I){const V=k[k.length-1],me=k.slice(0,k.length-1).reverse().map(tt=>function Ma(O){const k=O.routeConfig?O.routeConfig.canActivateChild:null;return k&&0!==k.length?{node:O,guards:k}:null}(tt)).filter(tt=>null!==tt).map(tt=>(0,ke.P)(()=>{const bt=tt.guards.map(An=>{const pi=Co(tt.node)??I,or=os(An,pi);return Ot(function be(O){return O&&jr(O.canActivateChild)}(or)?or.canActivateChild(V,O):pi.runInContext(()=>or(V,O))).pipe(yt())});return(0,de.of)(bt).pipe($o())}));return(0,de.of)(me).pipe($o())}(O,Y.path,I),function zs(O,k,I){const V=k.routeConfig?k.routeConfig.canActivate:null;if(!V||0===V.length)return(0,de.of)(!0);const Y=V.map(me=>(0,ke.P)(()=>{const tt=Co(k)??I,bt=os(me,tt);return Ot(function j(O){return O&&jr(O.canActivate)}(bt)?bt.canActivate(k,O):tt.runInContext(()=>bt(k,O))).pipe(yt())}));return(0,de.of)(Y).pipe($o())}(O,Y.route,I))),yt(Y=>!0!==Y,!0))}(V,me,O,k):(0,de.of)(bt)),(0,Ye.U)(bt=>({...I,guardsResult:bt})))})}(this.ngModule.injector,bt=>this.triggerEvent(bt)),(0,Xt.b)(bt=>{if(Y.guardsResult=bt.guardsResult,jn(bt.guardsResult))throw Ms(0,bt.guardsResult);const An=new Es(bt.id,this.serializeUrl(bt.extractedUrl),this.serializeUrl(bt.urlAfterRedirects),bt.targetSnapshot,!!bt.guardsResult);this.triggerEvent(An)}),(0,zt.h)(bt=>!!bt.guardsResult||(this.restoreHistory(bt),this.cancelNavigationTransition(bt,"",3),!1)),G(bt=>{if(bt.guards.canActivateChecks.length)return(0,de.of)(bt).pipe((0,Xt.b)(An=>{const pi=new Cs(An.id,this.serializeUrl(An.extractedUrl),this.serializeUrl(An.urlAfterRedirects),An.targetSnapshot);this.triggerEvent(pi)}),(0,Ce.w)(An=>{let pi=!1;return(0,de.of)(An).pipe(function $a(O,k){return(0,Jt.z)(I=>{const{targetSnapshot:V,guards:{canActivateChecks:Y}}=I;if(!Y.length)return(0,de.of)(I);let me=0;return(0,_.D)(Y).pipe((0,Tn.b)(tt=>function ml(O,k,I,V){const Y=O.routeConfig,me=O._resolve;return void 0!==Y?.title&&!S(Y)&&(me[Xe]=Y.title),function wc(O,k,I,V){const Y=function X(O){return[...Object.keys(O),...Object.getOwnPropertySymbols(O)]}(O);if(0===Y.length)return(0,de.of)({});const me={};return(0,_.D)(Y).pipe((0,Jt.z)(tt=>function M(O,k,I,V){const Y=Co(k)??V,me=os(O,Y);return Ot(me.resolve?me.resolve(k,I):Y.runInContext(()=>me(k,I)))}(O[tt],k,I,V).pipe(yt(),(0,Xt.b)(bt=>{me[tt]=bt}))),Nn(1),(0,mn.h)(me),(0,ii.K)(tt=>ys(tt)?dt.E:(0,pt._)(tt)))}(me,O,k,V).pipe((0,Ye.U)(tt=>(O._resolvedData=tt,O.data=aa(O,I).resolve,Y&&S(Y)&&(O.data[Xe]=Y.title),null)))}(tt.route,V,O,k)),(0,Xt.b)(()=>me++),Nn(1),(0,Jt.z)(tt=>me===Y.length?(0,de.of)(I):dt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xt.b)({next:()=>pi=!0,complete:()=>{pi||(this.restoreHistory(An),this.cancelNavigationTransition(An,"",2))}}))}),(0,Xt.b)(An=>{const pi=new es(An.id,this.serializeUrl(An.extractedUrl),this.serializeUrl(An.urlAfterRedirects),An.targetSnapshot);this.triggerEvent(pi)}))}),G(bt=>{const An=pi=>{const or=[];pi.routeConfig?.loadComponent&&!pi.routeConfig._loadedComponent&&or.push(this.configLoader.loadComponent(pi.routeConfig).pipe((0,Xt.b)(Di=>{pi.component=Di}),(0,Ye.U)(()=>{})));for(const Di of pi.children)or.push(...An(Di));return or};return(0,nt.a)(An(bt.targetSnapshot.root)).pipe(Mn(),(0,we.q)(1))}),G(()=>this.afterPreactivation()),(0,Ye.U)(bt=>{const An=function Ls(O,k,I){const V=Ho(O,k._root,I?I._root:void 0);return new oa(V,k)}(this.routeReuseStrategy,bt.targetSnapshot,bt.currentRouterState);return Y={...bt,targetRouterState:An}}),(0,Xt.b)(bt=>{this.currentUrlTree=bt.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(bt.urlAfterRedirects,bt.rawUrl),this.routerState=bt.targetRouterState,"deferred"===this.urlUpdateStrategy&&(bt.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,bt),this.browserUrlTree=bt.urlAfterRedirects)}),((O,k,I)=>(0,Ye.U)(V=>(new Ca(k,V.targetRouterState,V.currentRouterState,I).activate(O),V)))(this.rootContexts,this.routeReuseStrategy,bt=>this.triggerEvent(bt)),(0,Xt.b)({next(){me=!0},complete(){me=!0}}),(0,Tt.x)(()=>{me||tt||this.cancelNavigationTransition(Y,"",1),this.currentNavigation?.id===Y.id&&(this.currentNavigation=null)}),(0,ii.K)(bt=>{if(tt=!0,la(bt)){Kr(bt)||(this.navigated=!0,this.restoreHistory(Y,!0));const An=new ro(Y.id,this.serializeUrl(Y.extractedUrl),bt.message,bt.cancellationCode);if(V.next(An),Kr(bt)){const pi=this.urlHandlingStrategy.merge(bt.url,this.rawUrlTree),or={skipLocationChange:Y.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ko(Y.source)};this.scheduleNavigation(pi,"imperative",null,or,{resolve:Y.resolve,reject:Y.reject,promise:Y.promise})}else Y.resolve(!1)}else{this.restoreHistory(Y,!0);const An=new Ur(Y.id,this.serializeUrl(Y.extractedUrl),bt,Y.targetSnapshot??void 0);V.next(An);try{Y.resolve(this.errorHandler(bt))}catch(pi){Y.reject(pi)}}return dt.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next({...this.transitions.value,...I})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const V="popstate"===I.type?"popstate":"hashchange";"popstate"===V&&setTimeout(()=>{const Y={replaceUrl:!0},me=I.state?.navigationId?I.state:null;if(me){const bt={...me};delete bt.navigationId,delete bt.\u0275routerPageId,0!==Object.keys(bt).length&&(Y.state=bt)}const tt=this.parseUrl(I.url);this.scheduleNavigation(tt,V,me,Y)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){this.config=I.map(_s),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,V={}){const{relativeTo:Y,queryParams:me,fragment:tt,queryParamsHandling:bt,preserveFragment:An}=V,pi=Y||this.routerState.root,or=An?this.currentUrlTree.fragment:tt;let Di=null;switch(bt){case"merge":Di={...this.currentUrlTree.queryParams,...me};break;case"preserve":Di=this.currentUrlTree.queryParams;break;default:Di=me||null}return null!==Di&&(Di=this.removeEmptyProps(Di)),er(pi,this.currentUrlTree,I,Di,or??null)}navigateByUrl(I,V={skipLocationChange:!1}){const Y=jn(I)?I:this.parseUrl(I),me=this.urlHandlingStrategy.merge(Y,this.rawUrlTree);return this.scheduleNavigation(me,"imperative",null,V)}navigate(I,V={skipLocationChange:!1}){return function fa(O){for(let k=0;k<O.length;k++){if(null==O[k])throw new w.vHH(4008,false)}}(I),this.navigateByUrl(this.createUrlTree(I,V),V)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let V;try{V=this.urlSerializer.parse(I)}catch(Y){V=this.malformedUriErrorHandler(Y,this.urlSerializer,I)}return V}isActive(I,V){let Y;if(Y=!0===V?{...kr}:!1===V?{...Ks}:V,jn(I))return ge(this.currentUrlTree,I,Y);const me=this.parseUrl(I);return ge(this.currentUrlTree,me,Y)}removeEmptyProps(I){return Object.keys(I).reduce((V,Y)=>{const me=I[Y];return null!=me&&(V[Y]=me),V},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new vr(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,V,Y,me,tt){if(this.disposed)return Promise.resolve(!1);let bt,An,pi;tt?(bt=tt.resolve,An=tt.reject,pi=tt.promise):pi=new Promise((Gr,vs)=>{bt=Gr,An=vs});const or=++this.navigationId;let Di;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Y=this.location.getState()),Di=Y&&Y.\u0275routerPageId?Y.\u0275routerPageId:me.replaceUrl||me.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Di=0,this.setTransition({id:or,targetPageId:Di,source:V,restoredState:Y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:me,resolve:bt,reject:An,promise:pi,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pi.catch(Gr=>Promise.reject(Gr))}setBrowserUrl(I,V){const Y=this.urlSerializer.serialize(I),me={...V.extras.state,...this.generateNgRouterState(V.id,V.targetPageId)};this.location.isCurrentPathEqualTo(Y)||V.extras.replaceUrl?this.location.replaceState(Y,"",me):this.location.go(Y,"",me)}restoreHistory(I,V=!1){if("computed"===this.canceledNavigationResolution){const Y=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===Y?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===Y&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Y)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,V,Y){const me=new ro(I.id,this.serializeUrl(I.extractedUrl),V,Y);this.triggerEvent(me),I.resolve(!1)}generateNgRouterState(I,V){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:V}:{navigationId:I}}}return O.\u0275fac=function(I){w.$Z()},O.\u0275prov=w.Yz7({token:O,factory:function(){return Fo()},providedIn:"root"}),O})();function Ko(O){return"imperative"!==O}let Za=(()=>{class O{constructor(I,V,Y,me,tt){this.router=I,this.route=V,this.tabIndexAttribute=Y,this.renderer=me,this.el=tt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Hn.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(I){this._preserveFragment=(0,w.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,w.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,w.D6c)(I)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const V=this.renderer,Y=this.el.nativeElement;null!==I?V.setAttribute(Y,"tabindex",I):V.removeAttribute(Y,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return O.\u0275fac=function(I){return new(I||O)(w.Y36(zr),w.Y36(No),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq))},O.\u0275dir=w.lG2({type:O,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,V){1&I&&w.NdJ("click",function(){return V.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),O})(),Xo=(()=>{class O{constructor(I,V,Y){this.router=I,this.route=V,this.locationStrategy=Y,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Hn.x,this.subscription=I.events.subscribe(me=>{me instanceof vr&&this.updateTargetUrlAndHref()})}set preserveFragment(I){this._preserveFragment=(0,w.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,w.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,w.D6c)(I)}get replaceUrl(){return this._replaceUrl}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,V,Y,me,tt){return!!(0!==I||V||Y||me||tt||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return O.\u0275fac=function(I){return new(I||O)(w.Y36(zr),w.Y36(No),w.Y36(Fn.S$))},O.\u0275dir=w.lG2({type:O,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,V){1&I&&w.NdJ("click",function(me){return V.onClick(me.button,me.ctrlKey,me.shiftKey,me.altKey,me.metaKey)}),2&I&&w.uIk("target",V.target)("href",V.href,w.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),O})(),Sa=(()=>{class O{constructor(I,V,Y,me,tt,bt){this.router=I,this.element=V,this.renderer=Y,this.cdr=me,this.link=tt,this.linkWithHref=bt,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new w.vpe,this.routerEventsSubscription=I.events.subscribe(An=>{An instanceof vr&&this.update()})}ngAfterContentInit(){(0,de.of)(this.links.changes,this.linksWithHrefs.changes,(0,de.of)(null)).pipe((0,Ge.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(V=>!!V).map(V=>V.onChanges);this.linkInputChangesSubscription=(0,_.D)(I).pipe((0,Ge.J)()).subscribe(V=>{this.isActive!==this.isLinkActive(this.router)(V)&&this.update()})}set routerLinkActive(I){const V=Array.isArray(I)?I:I.split(" ");this.classes=V.filter(Y=>!!Y)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const I=this.hasActiveLinks();this.isActive!==I&&(this.isActive=I,this.cdr.markForCheck(),this.classes.forEach(V=>{I?this.renderer.addClass(this.element.nativeElement,V):this.renderer.removeClass(this.element.nativeElement,V)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const V=function gl(O){return!!O.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return Y=>!!Y.urlTree&&I.isActive(Y.urlTree,V)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.linkWithHref&&I(this.linkWithHref)||this.links.some(I)||this.linksWithHrefs.some(I)}}return O.\u0275fac=function(I){return new(I||O)(w.Y36(zr),w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(w.sBO),w.Y36(Za,8),w.Y36(Xo,8))},O.\u0275dir=w.lG2({type:O,selectors:[["","routerLinkActive",""]],contentQueries:function(I,V,Y){if(1&I&&(w.Suo(Y,Za,5),w.Suo(Y,Xo,5)),2&I){let me;w.iGM(me=w.CRH())&&(V.links=me),w.iGM(me=w.CRH())&&(V.linksWithHrefs=me)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[w.TTD]}),O})();class Aa{}let $i=(()=>{class O{constructor(I,V,Y,me,tt){this.router=I,this.injector=Y,this.preloadingStrategy=me,this.loader=tt}setUpPreloading(){this.subscription=this.router.events.pipe((0,zt.h)(I=>I instanceof vr),(0,Tn.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,V){const Y=[];for(const me of V){me.providers&&!me._injector&&(me._injector=(0,w.MMx)(me.providers,I,`Route: ${me.path}`));const tt=me._injector??I,bt=me._loadedInjector??tt;me.loadChildren&&!me._loadedRoutes&&void 0===me.canLoad||me.loadComponent&&!me._loadedComponent?Y.push(this.preloadConfig(tt,me)):(me.children||me._loadedRoutes)&&Y.push(this.processRoutes(bt,me.children??me._loadedRoutes))}return(0,_.D)(Y).pipe((0,Ge.J)())}preloadConfig(I,V){return this.preloadingStrategy.preload(V,()=>{let Y;Y=V.loadChildren&&void 0===V.canLoad?this.loader.loadChildren(I,V):(0,de.of)(null);const me=Y.pipe((0,Jt.z)(tt=>null===tt?(0,de.of)(void 0):(V._loadedRoutes=tt.routes,V._loadedInjector=tt.injector,this.processRoutes(tt.injector??I,tt.routes))));if(V.loadComponent&&!V._loadedComponent){const tt=this.loader.loadComponent(V);return(0,_.D)([me,tt]).pipe((0,Ge.J)())}return me})}}return O.\u0275fac=function(I){return new(I||O)(w.LFG(zr),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(Aa),w.LFG(Bi))},O.\u0275prov=w.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const cr=new w.OlP("");let Xr=(()=>{class O{constructor(I,V,Y={}){this.router=I,this.viewportScroller=V,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof vr&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Io&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,V){this.router.triggerEvent(new Io(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return O.\u0275fac=function(I){w.$Z()},O.\u0275prov=w.Yz7({token:O,factory:O.\u0275fac}),O})();function Tr(O,k){return{\u0275kind:O,\u0275providers:k}}function tc(O){return[{provide:nr,multi:!0,useValue:O}]}function ir(){const O=(0,w.f3M)(w.zs3);return k=>{const I=O.get(w.z2F);if(k!==I.components[0])return;const V=O.get(zr),Y=O.get(Wa);1===O.get(Hr)&&V.initialNavigation(),O.get(hd,null,w.XFs.Optional)?.setUpPreloading(),O.get(cr,null,w.XFs.Optional)?.init(),V.resetRootComponentType(I.componentTypes[0]),Y.closed||(Y.next(),Y.unsubscribe())}}const Wa=new w.OlP("",{factory:()=>new Hn.x}),Hr=new w.OlP("",{providedIn:"root",factory:()=>1});const hd=new w.OlP("");function _l(O){return Tr(0,[{provide:hd,useExisting:$i},{provide:Aa,useExisting:O}])}const Oo=new w.OlP("ROUTER_FORROOT_GUARD"),fi=[Fn.Ye,{provide:ct,useClass:nn},{provide:zr,useFactory:Fo},ns,{provide:No,useFactory:function Vs(O){return O.routerState.root},deps:[zr]},Bi];function ic(){return new w.PXZ("Router",zr)}let fd=(()=>{class O{constructor(I){}static forRoot(I,V){return{ngModule:O,providers:[fi,[],tc(I),{provide:Oo,useFactory:cu,deps:[[zr,new w.FiY,new w.tp0]]},{provide:hi,useValue:V||{}},V?.useHash?{provide:Fn.S$,useClass:Fn.Do}:{provide:Fn.S$,useClass:Fn.b0},{provide:cr,useFactory:()=>{const O=(0,w.f3M)(zr),k=(0,w.f3M)(Fn.EM),I=(0,w.f3M)(hi);return I.scrollOffset&&k.setOffset(I.scrollOffset),new Xr(O,k,I)}},V?.preloadingStrategy?_l(V.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:ic},V?.initialNavigation?rc(V):[],[{provide:bl,useFactory:ir},{provide:w.tb,multi:!0,useExisting:bl}]]}}static forChild(I){return{ngModule:O,providers:[tc(I)]}}}return O.\u0275fac=function(I){return new(I||O)(w.LFG(Oo,8))},O.\u0275mod=w.oAB({type:O}),O.\u0275inj=w.cJS({imports:[Go]}),O})();function cu(O){return"guarded"}function rc(O){return["disabled"===O.initialNavigation?Tr(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const k=(0,w.f3M)(zr);return()=>{k.setUpLocationChangeListener()}}},{provide:Hr,useValue:2}]).\u0275providers:[],"enabledBlocking"===O.initialNavigation?Tr(2,[{provide:Hr,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:k=>{const I=k.get(Fn.V_,Promise.resolve());let V=!1;return()=>I.then(()=>new Promise(me=>{const tt=k.get(zr),bt=k.get(Wa);(function Y(me){k.get(zr).events.pipe((0,zt.h)(bt=>bt instanceof vr||bt instanceof ro||bt instanceof Ur),(0,Ye.U)(bt=>bt instanceof vr||bt instanceof ro&&(0===bt.code||1===bt.code)&&null),(0,zt.h)(bt=>null!==bt),(0,we.q)(1)).subscribe(()=>{me()})})(()=>{me(!0),V=!0}),tt.afterPreactivation=()=>(me(!0),V||bt.closed?(0,de.of)(void 0):bt),tt.initialNavigation()}))}}]).\u0275providers:[]]}const bl=new w.OlP("")}},ti=>{ti(ti.s=9895)}]);